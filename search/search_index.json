{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"JavaMT5 SDK Documentation","text":"<p>Complete Java SDK for MetaTrader 5 trading automation via gRPC</p> bolt Getting Started <p>Installation and first trading bot</p> settings MT5Account <p>Low-level gRPC protocol layer</p> auto_awesome MT5Sugar <p>High-level convenience API</p> menu_book Glossary <p>MT5 terms and API concepts</p> science Orchestrators <p>Pre-built trading strategies</p> map Project Map <p>Architecture overview</p>"},{"location":"GETTING_STARTED/","title":"Getting Started with JavaMT5","text":"<p>Welcome to JavaMT5 - a comprehensive educational project for learning MT5 trading automation from the ground up. This guide will show you the learning path and what opportunities this project opens for you.</p>"},{"location":"GETTING_STARTED/#prerequisites-and-setup","title":"\ud83d\ude80 Prerequisites and Setup","text":"<p>Before you start working with JavaMT5, you need to set up your development environment.</p>"},{"location":"GETTING_STARTED/#step-1-install-java-jdk-11-or-higher","title":"Step 1: Install Java (JDK 11 or higher)","text":"<p>JavaMT5 requires Java Development Kit (JDK) version 11 or higher.</p> <p>Download and Install:</p> <ul> <li>Recommended: Eclipse Adoptium JDK (formerly AdoptOpenJDK)</li> <li>Alternative: Oracle JDK</li> </ul> <p>Verify installation:</p> <pre><code>java -version\n# Should show: java version \"11\" or higher\n</code></pre> <p>Set JAVA_HOME environment variable:</p> <ul> <li>Windows: Add to System Environment Variables   <pre><code>JAVA_HOME=C:\\Program Files\\Eclipse Adoptium\\jdk-11.0.x-hotspot\n</code></pre></li> <li>Add <code>%JAVA_HOME%\\bin</code> to PATH</li> </ul>"},{"location":"GETTING_STARTED/#step-2-install-maven-daemon-mvnd","title":"Step 2: Install Maven Daemon (mvnd)","text":"<p>JavaMT5 uses Maven Daemon for fast builds and execution.</p> <p>Download:</p> <ul> <li>Visit Maven Daemon releases</li> <li>Download the latest version for Windows (e.g., <code>maven-mvnd-1.0.3-windows-amd64.zip</code>)</li> </ul> <p>Install:</p> <ol> <li>Extract to a permanent location (e.g., <code>C:\\Users\\&lt;your-username&gt;\\maven-mvnd-1.0.3-windows-amd64</code>)</li> <li>Add to PATH or update <code>run.bat</code> with your path</li> <li>Verify installation:    <pre><code>mvnd --version\n# Should show Maven Daemon version\n</code></pre></li> </ol> <p>Configure run.bat:</p> <p>Edit <code>run.bat</code> and update the MVND path if needed: <pre><code>set \"MVND=C:\\Users\\&lt;your-username&gt;\\maven-mvnd-1.0.3-windows-amd64\\bin\\mvnd.cmd\"\n</code></pre></p>"},{"location":"GETTING_STARTED/#step-3-configure-mt5-account-connection","title":"Step 3: Configure MT5 Account Connection","text":"<p>JavaMT5 connects to MT5 terminal via the MetaRPC gRPC gateway - a cloud service that routes your requests to your broker's MT5 server.</p> <p>What is MetaRPC?</p> <ul> <li>GitHub package: <code>com.github.MetaRPC.metarpcmt5</code></li> <li>Provides gRPC communication with MT5 terminal</li> <li>Already included in <code>pom.xml</code> dependencies</li> <li>Connects via default gateway: <code>mt5.mrpc.pro:443</code></li> <li>See: MetaRPC on GitHub Packages</li> </ul> <p>Configure your MT5 account:</p> <p>Edit <code>appsettings.json</code> with your MT5 account credentials:</p> <pre><code>{\n  \"MT5Connections\": {\n    \"FxProDemo\": {\n      \"user\": 123456,\n      \"password\": \"your_password\",\n      \"serverName\": \"YourBroker-MT5 Demo\",\n      \"baseSymbol\": \"EURUSD\"\n    }\n  },\n  \"DefaultConnection\": \"FxProDemo\"\n}\n</code></pre> <p>Configuration parameters:</p> <ul> <li><code>user</code> - Your MT5 account number</li> <li><code>password</code> - Your MT5 account password</li> <li><code>serverName</code> - Your broker's MT5 server name (e.g., \"FxPro-MT5 Demo\")</li> <li><code>baseSymbol</code> - Default trading symbol (e.g., \"EURUSD\")</li> </ul> <p>The library automatically connects through <code>mt5.mrpc.pro:443</code> gateway, which routes to your broker's server based on <code>serverName</code>.</p>"},{"location":"GETTING_STARTED/#step-4-clone-and-build-the-project","title":"Step 4: Clone and Build the Project","text":"<p>Clone repository: <pre><code>git clone https://github.com/MetaRPC/JavaMT5.git\ncd JavaMT5\n</code></pre></p> <p>Understanding run.bat - Your Project Lifecycle Manager:</p> <p>The <code>run.bat</code> script is the central command that manages the entire JavaMT5 project lifecycle:</p> <ul> <li>Runs examples from the <code>examples/</code> folder (commands 1-9)</li> <li>Runs orchestrators - trading strategies (commands 10 1-5)</li> <li>Runs presets - multi-strategy systems (commands 11 1-2)</li> <li>Auto-checks generated files on every execution</li> <li>Uses pre-compiled MetaRPC library (no protobuf generation needed)</li> <li>Compiles the project before running</li> </ul> <p>What happens when you run <code>.\\run.bat 7</code>: <pre><code>1. Maven downloads MetaRPC library (if not cached)\n2. Compiles all Java source files\n3. Launches SimpleTradingScenario example\n</code></pre></p> <p>This ensures every run starts with a fresh, complete build.</p> <p>For complete command reference and troubleshooting: See RUNNING_EXAMPLES.md for: - All available commands (1-11) - How to fix compilation errors - How to handle hanging processes - Build process details</p> <p>First build: <pre><code># Windows CMD or PowerShell\n.\\run.bat 7\n\n# This will:\n# 1. Download all Maven dependencies (including MetaRPC library)\n# 2. Compile the project\n# 3. Run SimpleTradingScenario example\n</code></pre></p> <p>If you get errors: - See RUNNING_EXAMPLES.md for troubleshooting - Common fix: Delete <code>target/</code> folder and try again   <pre><code>rmdir /s /q target\n.\\run.bat 7\n</code></pre></p>"},{"location":"GETTING_STARTED/#step-5-verify-everything-works","title":"Step 5: Verify Everything Works","text":"<p>Test the setup: <pre><code># Run a simple example\n.\\run.bat 7    # SimpleTradingScenario\n\n# If it connects and runs - you're ready!\n# If you see errors - check RUNNING_EXAMPLES.md\n</code></pre></p> <p>Expected output: <pre><code>[INFO] BUILD SUCCESS\nConfiguration loaded: user=123456\n\u25ba Connecting to MT5...\n\u2713 Connected\n...\n</code></pre></p>"},{"location":"GETTING_STARTED/#whats-next","title":"What's Next?","text":"<p>Now that your environment is set up, continue below to learn about JavaMT5 architecture and start your learning journey!</p> <p>Quick links: - RUNNING_EXAMPLES.md - All commands and troubleshooting - PROJECT_MAP.md - Project structure overview - GLOSSARY.md - Terms and definitions</p>"},{"location":"GETTING_STARTED/#what-is-javamt5","title":"\ud83c\udfaf What is JavaMT5?","text":"<p>JavaMT5 is an educational project designed specifically to teach you how to work with MetaTrader 5 terminal at all levels - from low-level protocol communication to high-level trading strategies.</p> <p>This project was initially created to learn low-level methods of MT5 terminal communication. Everything else - convenience layers, orchestrators, presets - was built along the way to make this knowledge more accessible and practical.</p>"},{"location":"GETTING_STARTED/#what-youll-learn","title":"\ud83c\udf93 What You'll Learn","text":""},{"location":"GETTING_STARTED/#1-low-level-protocol-communication-foundation","title":"1. Low-Level Protocol Communication (Foundation)","text":"<p>The core foundation of everything - direct communication with MT5 terminal via gRPC protocol.</p> <p>You'll learn:</p> <ul> <li>How MT5 terminal communicates via Protocol Buffers (protobuf)</li> <li>How to send/receive proto Request/Response objects</li> <li>Direct gRPC calls for all MT5 operations</li> <li>Connection management and error handling</li> <li>Raw access to every MT5 function</li> </ul> <p>API: <code>MT5Account</code> (Layer 1)</p> <p>Documentation: MT5Account/</p> <p>Why this matters: Understanding the low-level foundation gives you complete control and deep knowledge of how everything works under the hood.</p>"},{"location":"GETTING_STARTED/#2-wrapper-layer-simplification","title":"2. Wrapper Layer (Simplification)","text":"<p>Built on top of MT5Account - simplified method signatures without proto complexity.</p> <p>You'll learn:</p> <ul> <li>How to wrap proto objects into simple method calls</li> <li>Type conversions (proto \u2192 Java primitives)</li> <li>Simplified API design patterns</li> <li>Direct data returns without proto wrapping</li> </ul> <p>API: <code>MT5Service</code> (Layer 2)</p> <p>Why this matters: Shows how to build convenient APIs on top of complex protocols.</p>"},{"location":"GETTING_STARTED/#3-convenience-layer-sugar-methods","title":"3. Convenience Layer (Sugar Methods)","text":"<p>Built on top of MT5Service - ~50 ready-to-use methods with smart features.</p> <p>You'll learn:</p> <ul> <li>Auto-normalization of volumes and prices</li> <li>Risk-based position sizing (calculate volume from $ risk)</li> <li>Batch operations (close all positions, cancel all orders)</li> <li>Smart helpers (snapshots, conversions, limits)</li> <li>High-level API design for common use cases</li> </ul> <p>API: <code>MT5Sugar</code> (Layer 3)</p> <p>Documentation: MT5Sugar/MT5Sugar.Overview.md</p> <p>Why this matters: Shows how to build production-ready convenience APIs that handle edge cases automatically.</p>"},{"location":"GETTING_STARTED/#4-trading-strategy-implementation-orchestrators","title":"4. Trading Strategy Implementation (Orchestrators)","text":"<p>Built using MT5Sugar - complete trading strategy workflows.</p> <p>You'll learn:</p> <ul> <li>How to implement real trading strategies in code</li> <li>Risk management and position sizing</li> <li>Position monitoring and management</li> <li>Trailing stops and breakeven logic</li> <li>Entry/exit automation</li> <li>Performance tracking</li> </ul> <p>Strategies included:</p> <ul> <li>Trend Following - capture trending moves with trailing stops</li> <li>Scalping - quick in/out with tight SL/TP</li> <li>Hedging - defensive position protection</li> <li>Breakout - bi-directional pending orders</li> <li>Martingale - volume doubling (\u26a0\ufe0f demo only)</li> </ul> <p>Location: <code>src/main/java/orchestrators/</code></p> <p>Documentation: docs/Orchestrators.Overview.md</p> <p>Why this matters: Real-world strategy implementation patterns you can adapt for your own trading ideas.</p>"},{"location":"GETTING_STARTED/#5-multi-strategy-systems-presets","title":"5. Multi-Strategy Systems (Presets)","text":"<p>Combine multiple orchestrators - adaptive trading systems with conditional logic.</p> <p>You'll learn:</p> <ul> <li>How to combine multiple strategies</li> <li>Adaptive decision-making (if profit &gt; X then...)</li> <li>Multi-phase trading sessions</li> <li>Strategy orchestration patterns</li> <li>Performance tracking across phases</li> </ul> <p>Presets included:</p> <ul> <li>Aggressive Growth - 3-4 orchestrators with adaptive logic</li> <li>Defensive - conservative protection-first approach</li> </ul> <p>Location: <code>src/main/java/presets/</code></p> <p>Documentation: docs/Orchestrators.Overview.md</p> <p>Why this matters: Advanced strategy composition - how to build complex trading systems from simple building blocks.</p>"},{"location":"GETTING_STARTED/#the-learning-path","title":"\ud83d\uddfa\ufe0f The Learning Path","text":""},{"location":"GETTING_STARTED/#foundation-mt5account-low-level","title":"Foundation: MT5Account (Low-Level) \ud83d\udce6","text":"<p>START HERE if you want to understand how everything works.</p> <pre><code>MT5 Terminal \u2190\u2192 gRPC \u2190\u2192 Proto Messages \u2190\u2192 MT5Account.java\n</code></pre> <p>What you'll do:</p> <ol> <li>Read MT5Account documentation</li> <li>Study MetaRPC library structure (proto-generated classes in JAR)</li> <li>Run examples in <code>src/main/java/examples/lowlevel/</code></li> <li>Explore <code>MT5Account.java</code> source code</li> </ol> <p>Key examples:</p> <ul> <li><code>MarketDataExample.java</code> - Get quotes, symbol info, account data</li> <li><code>StreamingExample.java</code> - Real-time price subscriptions</li> <li><code>TradingCalculationsExample.java</code> - Margin, profit calculations</li> </ul> <p>You'll understand:</p> <ul> <li>\u2705 How proto messages structure trading operations</li> <li>\u2705 How gRPC communicates with MT5 terminal</li> <li>\u2705 Every single MT5 function at protocol level</li> <li>\u2705 Request/Response patterns for trading operations</li> </ul> <p>Time investment: 2-3 days for solid foundation</p>"},{"location":"GETTING_STARTED/#step-up-mt5service-wrapper-layer","title":"Step Up: MT5Service (Wrapper Layer) \ud83d\udd27","text":"<p>Continue here to see how to simplify the low-level API.</p> <pre><code>MT5Account (proto) \u2192 MT5Service (wrappers) \u2192 Simple method calls\n</code></pre> <p>What you'll do: 1. Study how MT5Service wraps MT5Account methods 2. Run examples in <code>src/main/java/examples/services/</code> 3. Compare with low-level examples to see simplification</p> <p>Key examples: - <code>MarketDataServiceExample.java</code> - Simplified market data access - <code>StreamingServiceExample.java</code> - Easier subscription handling - <code>TradingServiceExample.java</code> - Trading without proto objects</p> <p>You'll understand: - \u2705 API wrapper design patterns - \u2705 Type conversions and simplification techniques - \u2705 How to build convenient APIs on complex protocols</p> <p>Time investment: 1 day to understand wrapper patterns</p>"},{"location":"GETTING_STARTED/#convenience-mt5sugar-high-level-api","title":"Convenience: MT5Sugar (High-Level API) \u2b50","text":"<p>Start here if you want to trade quickly and learn foundations later.</p> <pre><code>MT5Service \u2192 MT5Sugar \u2192 Auto-everything convenience methods\n</code></pre> <p>What you'll do:</p> <ol> <li>Read MT5Sugar.Overview.md</li> <li>Run examples in <code>src/main/java/examples/sugar/</code></li> <li>Study individual method docs in <code>MT5Sugar/</code> folder</li> </ol> <p>Key examples:</p> <ul> <li><code>SimpleTradingScenario.java</code> - Basic trading workflow</li> <li><code>RiskManagementScenario.java</code> - Risk-based position sizing</li> <li><code>GridTradingScenario.java</code> - Grid trading strategy</li> </ul> <p>You'll understand:</p> <ul> <li>\u2705 Risk-based volume calculation ($ risk \u2192 lot size)</li> <li>\u2705 Auto-normalization of volumes and prices</li> <li>\u2705 Batch operations (close all, cancel all)</li> <li>\u2705 Smart helpers and convenience patterns</li> </ul> <p>Time investment: 1-2 days to master all 50+ methods</p>"},{"location":"GETTING_STARTED/#strategies-orchestrators-trading-automation","title":"Strategies: Orchestrators (Trading Automation) \ud83c\udfaf","text":"<p>Learn complete strategy implementation patterns.</p> <pre><code>MT5Sugar \u2192 Orchestrator \u2192 Complete trading strategy workflow\n</code></pre> <p>What you'll do:</p> <ol> <li>Read docs/Orchestrators.Overview.md</li> <li>Run <code>run.bat 10</code> - interactive orchestrator menu</li> <li>Study orchestrator source code in <code>src/main/java/orchestrators/</code></li> <li>Copy and modify for your own strategies</li> </ol> <p>Key orchestrators:</p> <ul> <li><code>ScalpingOrchestrator.java</code> - Simplest, good starting point</li> <li><code>TrendFollowingOrchestrator.java</code> - Position modification, trailing stops</li> <li><code>BreakoutOrchestrator.java</code> - Pending orders, bi-directional entry</li> <li><code>HedgingOrchestrator.java</code> - Dual position management</li> </ul> <p>You'll understand:</p> <ul> <li>\u2705 Complete strategy workflow implementation</li> <li>\u2705 Position monitoring loops and state management</li> <li>\u2705 Risk management and position sizing in practice</li> <li>\u2705 Entry/exit logic automation</li> <li>\u2705 Performance tracking patterns</li> </ul> <p>Time investment: 2-3 days to study and adapt</p>"},{"location":"GETTING_STARTED/#advanced-presets-multi-strategy-systems","title":"Advanced: Presets (Multi-Strategy Systems) \ud83c\udfbc","text":"<p>Learn how to combine strategies with adaptive logic.</p> <pre><code>Orchestrators \u2192 Preset \u2192 Multi-strategy adaptive system\n</code></pre> <p>What you'll do:</p> <ol> <li>Read presets section in Orchestrators.Overview.md</li> <li>Run <code>run.bat 11</code> - interactive preset menu</li> <li>Study preset source code in <code>src/main/java/presets/</code></li> <li>Design your own multi-strategy systems</li> </ol> <p>Key presets:</p> <ul> <li><code>DefensivePreset.java</code> - Conservative, easier to understand</li> <li><code>AggressiveGrowthPreset.java</code> - Adaptive multi-phase system</li> </ul> <p>You'll understand:</p> <ul> <li>\u2705 Strategy composition patterns</li> <li>\u2705 Adaptive decision-making logic</li> <li>\u2705 Multi-phase trading sessions</li> <li>\u2705 Complex system orchestration</li> </ul> <p>Time investment: 1-2 days to master composition patterns</p>"},{"location":"GETTING_STARTED/#what-opportunities-this-opens","title":"\ud83d\ude80 What Opportunities This Opens","text":""},{"location":"GETTING_STARTED/#1-deep-understanding-of-mt5-protocol","title":"1. Deep Understanding of MT5 Protocol","text":"<p>You'll gain:</p> <ul> <li>Complete knowledge of MT5 terminal communication</li> <li>Ability to implement any MT5 function from scratch</li> <li>Understanding of trading platform architecture</li> <li>Protocol-level debugging and troubleshooting skills</li> </ul> <p>Career value: Work on trading platform integration, build custom MT5 tools, technical trading infrastructure roles.</p>"},{"location":"GETTING_STARTED/#2-api-design-skills","title":"2. API Design Skills","text":"<p>You'll learn: - How to build layered architectures (3-tier design) - API wrapper patterns and simplification techniques - Convenience layer design for complex systems - Progressive complexity approach</p> <p>Career value: Backend development, API design, SDK development, developer tools.</p>"},{"location":"GETTING_STARTED/#3-trading-automation-expertise","title":"3. Trading Automation Expertise","text":"<p>You'll master:</p> <ul> <li>Automated trading strategy implementation</li> <li>Risk management and position sizing</li> <li>Real-time position monitoring and management</li> <li>Strategy orchestration and composition</li> </ul> <p>Career value: Algorithmic trading, quantitative development, trading system architecture.</p>"},{"location":"GETTING_STARTED/#examples-folder-complete-method-reference","title":"\ud83d\udcc2 Examples Folder - Complete Method Reference","text":"<p>Location: <code>src/main/java/examples/</code></p> <p>The <code>examples/</code> folder contains runnable demonstrations of every method for full-fledged work with MT5.</p>"},{"location":"GETTING_STARTED/#structure","title":"Structure","text":"<pre><code>examples/\n\u251c\u2500\u2500 lowlevel/           \u2190 MT5Account examples (proto level)\n\u2502   \u251c\u2500\u2500 MarketDataExample.java\n\u2502   \u251c\u2500\u2500 StreamingExample.java\n\u2502   \u2514\u2500\u2500 TradingCalculationsExample.java\n\u2502\n\u251c\u2500\u2500 services/           \u2190 MT5Service examples (wrapper level)\n\u2502   \u251c\u2500\u2500 MarketDataServiceExample.java\n\u2502   \u251c\u2500\u2500 StreamingServiceExample.java\n\u2502   \u2514\u2500\u2500 TradingServiceExample.java\n\u2502\n\u2514\u2500\u2500 sugar/              \u2190 MT5Sugar examples (convenience level)\n    \u251c\u2500\u2500 SimpleTradingScenario.java\n    \u251c\u2500\u2500 RiskManagementScenario.java\n    \u2514\u2500\u2500 GridTradingScenario.java\n</code></pre>"},{"location":"GETTING_STARTED/#learning-resources","title":"\ud83c\udf93 Learning Resources","text":""},{"location":"GETTING_STARTED/#inside-the-project","title":"Inside the project:","text":"<ul> <li>\ud83d\udcd6 Documentation: <code>docs/</code> folder (complete API reference)</li> <li>\ud83d\udcbb Examples: <code>src/main/java/examples/</code> (runnable demonstrations)</li> <li>\ud83c\udfaf Strategies: <code>src/main/java/orchestrators/</code> (complete implementations)</li> <li>\ud83c\udfbc Presets: <code>src/main/java/presets/</code> (multi-strategy systems)</li> </ul>"},{"location":"GETTING_STARTED/#key-starting-points","title":"Key starting points:","text":"<ol> <li>PROJECT_MAP.md - Understand project structure</li> <li>GLOSSARY.md - Learn project terminology</li> <li>MT5Sugar.Overview.md - Quick start with trading</li> <li>Orchestrators.Overview.md - Learn strategy patterns</li> </ol>"},{"location":"GETTING_STARTED/#important-notes","title":"\u26a0\ufe0f Important Notes","text":""},{"location":"GETTING_STARTED/#this-is-an-educational-project","title":"This is an Educational Project","text":"<p>What this means:</p> <ul> <li>\u2705 DO use for learning and experimentation</li> <li>\u2705 DO study the code and patterns</li> <li>\u2705 DO test on demo accounts</li> <li>\u2705 DO adapt for your needs</li> <li>\u274c DON'T use as-is with real money without thorough testing</li> <li>\u274c DON'T expect production-grade error handling in examples</li> <li>\u274c DON'T blindly trust strategies without understanding them</li> </ul>"},{"location":"GETTING_STARTED/#risk-warning","title":"Risk Warning","text":"<p>Trading involves risk:</p> <ul> <li>Past performance doesn't guarantee future results</li> <li>Automated strategies can lose money</li> <li>Always test thoroughly on demo accounts first</li> <li>Never risk more than you can afford to lose</li> <li>Understand every line of code before trading real money</li> </ul>"},{"location":"GETTING_STARTED/#need-help","title":"\ud83d\udcde Need Help?","text":""},{"location":"GETTING_STARTED/#documentation","title":"Documentation","text":"<ul> <li>Project structure: PROJECT_MAP.md</li> <li>API reference: <code>docs/MT5Account/</code> and <code>docs/MT5Sugar/</code></li> <li>Strategy guide: Orchestrators.Overview.md</li> <li>Terminology: GLOSSARY.md</li> </ul>"},{"location":"GETTING_STARTED/#code-examples","title":"Code examples","text":"<ul> <li>Low-level: <code>examples/lowlevel/</code></li> <li>Wrappers: <code>examples/services/</code></li> <li>Convenience: <code>examples/sugar/</code></li> <li>Strategies: <code>orchestrators/</code> and <code>presets/</code></li> </ul>"},{"location":"GETTING_STARTED/#final-thoughts","title":"\ud83c\udfaf Final Thoughts","text":"<p>JavaMT5 is more than a trading library - it's a complete learning journey from protocol-level communication to production trading strategies.</p>"},{"location":"GETTING_STARTED/#youll-walk-away-with","title":"You'll walk away with","text":"<ul> <li>Deep understanding of MT5 terminal architecture</li> <li>API design and layered architecture skills</li> <li>Trading automation implementation expertise</li> <li>Production-ready patterns and best practices</li> <li>Foundation for building your own trading systems</li> </ul>"},{"location":"GETTING_STARTED/#the-journey","title":"The journey","text":"<pre><code>Proto/gRPC \u2192 Wrappers \u2192 Convenience \u2192 Strategies \u2192 Your Ideas\n(Foundation)  (Simplification)  (Automation)   (Production)\n</code></pre> <p>Start wherever makes sense for you, and enjoy the learning process!</p> <p>\ud83d\udca1 Ready to begin? Start with PROJECT_MAP.md to understand the project structure, then choose your learning path above and dive in!</p> <p>\ud83c\udf93 Remember: This project was created to learn low-level methods - everything else is built on that foundation. Understanding the base gives you power to build anything on top.</p>"},{"location":"GLOSSARY/","title":"JavaMT5 Glossary","text":"<p>Project-specific terms and concepts. This glossary covers JavaMT5 architecture, components, and trading automation terminology used throughout the codebase.</p>"},{"location":"GLOSSARY/#architecture-terms","title":"\ud83c\udfd7\ufe0f Architecture Terms","text":""},{"location":"GLOSSARY/#three-tier-architecture","title":"Three-Tier Architecture","text":"<p>The core design pattern of JavaMT5 with three abstraction layers:</p> <ul> <li>Layer 1 (MT5Account): Low-level proto/gRPC communication</li> <li>Layer 2 (MT5Service): Wrapper methods with type conversions</li> <li>Layer 3 (MT5Sugar): High-level convenience methods</li> </ul> <p>Usage: Start with Layer 3, drop down only when needed.</p>"},{"location":"GLOSSARY/#mt5account","title":"MT5Account","text":"<p>Layer 1 - Low-level API</p> <p>The foundational layer providing direct access to MT5 terminal via gRPC protocol.</p> <p>Key characteristics: - Works with proto Request/Response objects - Raw gRPC calls to MT5 terminal - Connection management - Full control, maximum complexity</p> <p>When to use: Custom integrations, proto-level control needed.</p> <p>Location: <code>src/main/java/io/metarpc/mt5/MT5Account.java</code></p>"},{"location":"GLOSSARY/#mt5service","title":"MT5Service","text":"<p>Layer 2 - Wrapper API</p> <p>Middle layer providing simplified method signatures without proto wrapping.</p> <p>Key characteristics: - Direct data returns (no proto objects in signatures) - Type conversions (proto \u2192 Java primitives/objects) - Simplified method names - No auto-normalization</p> <p>When to use: Need wrappers but not auto-normalization.</p> <p>Location: <code>src/main/java/io/metarpc/mt5/MT5Service.java</code></p>"},{"location":"GLOSSARY/#mt5sugar","title":"MT5Sugar","text":"<p>Layer 3 - Convenience API \u2b50</p> <p>Highest-level API with ~50 convenience methods for common trading operations.</p> <p>Key characteristics: - Auto-normalization of volumes and prices - Risk management helpers - Batch operations (closeAll, cancelAll) - Smart helpers (snapshots, conversions) - Simplest API, handles edge cases</p> <p>When to use: 95% of cases - easiest starting point.</p> <p>Location: <code>src/main/java/io/metarpc/mt5/MT5Sugar.java</code></p> <p>Documentation: MT5Sugar.Overview.md</p>"},{"location":"GLOSSARY/#strategy-components","title":"\ud83c\udfaf Strategy Components","text":""},{"location":"GLOSSARY/#orchestrator","title":"Orchestrator","text":"<p>Pre-built trading strategy implementation that automates complete trading workflow.</p> <p>Key characteristics: - Single strategy focus (trend following, scalping, etc.) - Risk-based position sizing - Position monitoring loops - Automatic exits and cleanup - Performance tracking</p> <p>Examples: - <code>TrendFollowingOrchestrator</code> - Trend following with trailing stops - <code>ScalpingOrchestrator</code> - Quick in/out trades - <code>HedgingOrchestrator</code> - Defensive hedging strategy - <code>BreakoutOrchestrator</code> - Breakout trading with pending orders - <code>MartingaleOrchestrator</code> - Volume doubling (\u26a0\ufe0f HIGH RISK)</p> <p>Location: <code>src/main/java/orchestrators/</code></p> <p>Documentation: Orchestrators.Overview.md</p>"},{"location":"GLOSSARY/#preset","title":"Preset","text":"<p>Multi-orchestrator combination with adaptive decision-making logic.</p> <p>Key characteristics: - Combines 2-4 orchestrators - Adaptive logic (if profit &gt; X then...) - Multi-phase trading sessions - Performance tracking across phases - Advanced strategy composition</p> <p>Examples: - <code>AggressiveGrowthPreset</code> - 3-4 orchestrators with adaptive phases - <code>DefensivePreset</code> - Conservative protection-first approach</p> <p>Location: <code>src/main/java/presets/</code></p> <p>Documentation: Orchestrators.Overview.md</p>"},{"location":"GLOSSARY/#technical-concepts","title":"\ud83d\udd27 Technical Concepts","text":""},{"location":"GLOSSARY/#auto-normalization","title":"Auto-Normalization","text":"<p>Automatic adjustment of trading parameters to broker requirements.</p> <p>What gets normalized: - Volumes: Rounded to broker's volume step (e.g., 0.01 lots) - Prices: Rounded to symbol's tick size (e.g., 5 decimal places for EURUSD) - Stop Loss / Take Profit: Adjusted to minimum distance from current price</p> <p>Where: MT5Sugar layer only (MT5Service doesn't auto-normalize)</p> <p>Example: <pre><code>// You pass: volume=0.0234, SL=1.09876543\n// Sugar normalizes to: volume=0.02, SL=1.09877\nsugar.buyMarket(\"EURUSD\", 0.0234, 1.09876543, 1.10000);\n</code></pre></p>"},{"location":"GLOSSARY/#risk-based-volume-calculation","title":"Risk-Based Volume Calculation","text":"<p>Position sizing based on dollar risk rather than fixed lot size.</p> <p>Formula: <code>volume = riskAmount / (stopLossPoints \u00d7 pointValue)</code></p> <p>Parameters: - <code>riskAmount</code> - Dollar amount willing to risk (e.g., $50) - <code>stopLossPoints</code> - Distance to SL in points (e.g., 50 points) - Result: Lot size that risks exactly $50 if SL hit</p> <p>Methods: - <code>calculateVolume(symbol, slPoints, riskAmount)</code> - Calculate volume - <code>buyByRisk(symbol, slPoints, riskAmount, tp)</code> - Buy with risk sizing - <code>sellByRisk(symbol, slPoints, riskAmount, tp)</code> - Sell with risk sizing</p> <p>Documentation: calculateVolume.md</p>"},{"location":"GLOSSARY/#points-vs-pips","title":"Points vs Pips","text":"<p>Point: Smallest price movement for a symbol (1 tick).</p> <p>Pip: Traditional forex unit (0.0001 for most pairs).</p> <p>Relationship: - 5-digit brokers: 1 pip = 10 points (EURUSD: 1.10000 \u2192 1.10010 = 1 pip) - 3-digit brokers: 1 pip = 1 point (USDJPY: 110.00 \u2192 110.01 = 1 pip)</p> <p>In JavaMT5: All APIs use points for consistency.</p> <p>Conversion: Use <code>pointsToPips(symbol, points)</code> helper.</p> <p>Example: <pre><code>double point = sugar.getPoint(\"EURUSD\");  // 0.00001\ndouble pips = sugar.pointsToPips(\"EURUSD\", 50);  // 5.0 pips\n</code></pre></p>"},{"location":"GLOSSARY/#trailing-stop","title":"Trailing Stop","text":"<p>Dynamic Stop Loss that follows price in profit direction.</p> <p>How it works: 1. Position opens with initial SL 2. When profit reaches threshold (e.g., +40 points) 3. SL moves to breakeven or better 4. SL continues to trail price at fixed distance 5. Locks in profits as price moves favorably</p> <p>Implementation: <pre><code>// In monitoring loop\nif (currentProfit &gt;= trailingThreshold) {\n    double newSL = currentPrice - trailingDistance;\n    if (newSL &gt; currentSL) {\n        sugar.modifyPosition(ticket, newSL, tp);\n    }\n}\n</code></pre></p> <p>Used in: <code>TrendFollowingOrchestrator</code></p>"},{"location":"GLOSSARY/#hedging","title":"Hedging","text":"<p>Opening opposite position to lock in current profit/loss level.</p> <p>How it works: 1. Primary position opened (e.g., BUY EURUSD 0.1 lots) 2. Price moves against you (-50 points) 3. Hedge triggered: SELL EURUSD 0.1 lots 4. Net position = 0 (locked loss at -50 points level)</p> <p>Purpose: - Lock losses instead of closing at stop loss - Protect position during volatility/news - Wait for better exit opportunity</p> <p>Used in: <code>HedgingOrchestrator</code></p> <p>\u26a0\ufe0f Note: Not all brokers/regulations allow hedging.</p>"},{"location":"GLOSSARY/#pending-order","title":"Pending Order","text":"<p>Order that executes automatically when price reaches specified level.</p> <p>Types: - BUY LIMIT: Buy at price BELOW current (expecting pullback then up) - SELL LIMIT: Sell at price ABOVE current (expecting rally then down) - BUY STOP: Buy at price ABOVE current (breakout up) - SELL STOP: Sell at price BELOW current (breakout down)</p> <p>Methods: <pre><code>// Absolute price\nsugar.buyLimit(symbol, volume, price, sl, tp);\n\n// Offset in points from current price\nsugar.buyLimitPoints(symbol, volume, pointsOffset, slPoints, tpPoints);\n</code></pre></p>"},{"location":"GLOSSARY/#protocol-buffer-terms","title":"\ud83d\udce6 Protocol Buffer Terms","text":""},{"location":"GLOSSARY/#proto-protocol-buffers","title":"Proto / Protocol Buffers","text":"<p>Google's language-neutral data serialization format used for gRPC communication.</p> <p>In JavaMT5: - MT5 terminal communicates via gRPC protocol - Proto files define message structures (<code>.proto</code> files) - Compiled into Java classes by Maven - Used in MT5Account layer</p> <p>Location: <code>src/main/proto/</code></p>"},{"location":"GLOSSARY/#grpc","title":"gRPC","text":"<p>High-performance RPC (Remote Procedure Call) framework using HTTP/2.</p> <p>In JavaMT5: - MT5Account layer sends gRPC requests to MT5 terminal - Terminal runs gRPC server (configured in appsettings.json) - Request/Response pattern for all operations</p> <p>Connection setup: <pre><code>MT5Account account = new MT5Account(login, password);\naccount.connect(host, port, symbol, useSSL, timeout);\n</code></pre></p>"},{"location":"GLOSSARY/#proto-requestresponse","title":"Proto Request/Response","text":"<p>Structured message objects used in MT5Account layer.</p> <p>Example: <pre><code>// Proto request object\nvar request = Mt5TermApiTradeFunctions.OrderSendRequest.newBuilder()\n    .setSymbol(symbol)\n    .setVolume(volume)\n    .setType(orderType)\n    .build();\n\n// Proto response object\nvar response = account.orderSend(request);\nvar ticket = response.getData().getOrder();\n</code></pre></p> <p>Note: MT5Service and MT5Sugar hide proto objects from user.</p>"},{"location":"GLOSSARY/#trading-terms-project-context","title":"\ud83c\udf93 Trading Terms (Project Context)","text":""},{"location":"GLOSSARY/#risk-amount","title":"Risk Amount","text":"<p>Dollar amount willing to lose if Stop Loss hit.</p> <p>Example: Risk $50 per trade means if SL triggered, you lose exactly $50.</p> <p>Used in: - All orchestrators for position sizing - <code>calculateVolume()</code>, <code>buyByRisk()</code>, <code>sellByRisk()</code> methods</p>"},{"location":"GLOSSARY/#breakeven","title":"Breakeven","text":"<p>Moving Stop Loss to entry price to eliminate risk.</p> <p>Example: - Entry: BUY at 1.10000 - Price rises to 1.10050 (+50 points profit) - Move SL from 1.09950 to 1.10000 (breakeven) - Now risk-free: worst case = break even</p> <p>Used in: <code>TrendFollowingOrchestrator</code></p>"},{"location":"GLOSSARY/#martingale","title":"Martingale","text":"<p>High-risk betting system: double position size after each loss.</p> <p>Progression: <pre><code>Trade 1: 0.01 lots \u2192 Loss \u2192 -$10\nTrade 2: 0.02 lots \u2192 Loss \u2192 -$30 total\nTrade 3: 0.04 lots \u2192 Loss \u2192 -$70 total\nTrade 4: 0.08 lots \u2192 WIN  \u2192 +$10 total \u2713\n</code></pre></p> <p>\u26a0\ufe0f WARNING: Exponential capital requirement, can wipe account.</p> <p>Used in: <code>MartingaleOrchestrator</code> (demo only!)</p> <p>Documentation: Orchestrators.Overview.md</p>"},{"location":"GLOSSARY/#volume-limits","title":"Volume Limits","text":"<p>Broker-specific constraints on position sizing.</p> <p>Retrieved via: <pre><code>var limits = sugar.getVolumeLimits(symbol);\ndouble minVolume = limits.getMinVolume();  // e.g., 0.01\ndouble maxVolume = limits.getMaxVolume();  // e.g., 100.0\ndouble stepVolume = limits.getStepVolume(); // e.g., 0.01\n</code></pre></p> <p>Used for: Auto-normalization in MT5Sugar.</p>"},{"location":"GLOSSARY/#file-organization-terms","title":"\ud83d\udcc1 File Organization Terms","text":""},{"location":"GLOSSARY/#examples","title":"Examples","text":"<p>Runnable demonstration code showing API usage patterns.</p> <p>Structure: - <code>examples/lowlevel/</code> - MT5Account examples (proto level) - run.bat 1-3 - <code>examples/services/</code> - MT5Service examples (wrapper level) - run.bat 4-6 - <code>examples/sugar/</code> - MT5Sugar examples (convenience level) - run.bat 7-9</p> <p>How to run: <pre><code>run.bat 1-9    # Examples (various API levels)\nrun.bat 10     # Orchestrator menu\nrun.bat 10 1-5 # Specific orchestrator\nrun.bat 11     # Preset menu\nrun.bat 11 1-2 # Specific preset\n</code></pre></p> <p>Location: <code>src/main/java/examples/</code></p> <p>See: RUNNING_EXAMPLES.md for complete command list.</p>"},{"location":"GLOSSARY/#scenario","title":"Scenario","text":"<p>Complex usage example demonstrating real-world workflow.</p> <p>Examples: - <code>SimpleTradingScenario.java</code> - Basic trading workflow (run.bat 7) - <code>RiskManagementScenario.java</code> - Risk-based position sizing (run.bat 8) - <code>GridTradingScenario.java</code> - Grid trading strategy (run.bat 9)</p> <p>Location: <code>src/main/java/examples/sugar/</code></p>"},{"location":"GLOSSARY/#programjava","title":"Program.java","text":"<p>Main entry point that routes run.bat commands to examples/orchestrators/presets.</p> <p>Key characteristics: - Single entry point for all examples (1-11) - Uses reflection to find and launch example classes - Provides interactive menus for orchestrators (10) and presets (11) - Manages resource cleanup for orchestrators/presets - Contains complete command reference in file header</p> <p>How it works: <pre><code>run.bat 7\n    \u2193\nProgram.java main(args)\n    \u2193\nrunDemo(7)\n    \u2193\nReflection finds: examples.sugar.SimpleTradingScenario\n    \u2193\nCalls: SimpleTradingScenario.main()\n</code></pre></p> <p>Location: <code>src/main/java/Program.java</code></p> <p>See: PROJECT_MAP.md for details.</p>"},{"location":"GLOSSARY/#configuration-terms","title":"\u2699\ufe0f Configuration Terms","text":""},{"location":"GLOSSARY/#appsettingsjson","title":"appsettings.json","text":"<p>Central configuration file for MT5 connection settings.</p> <p>Key settings: - <code>Host</code> - MT5 terminal host (usually localhost) - <code>Port</code> - gRPC server port (default 5555) - <code>Login</code> - MT5 account number - <code>Password</code> - MT5 account password - <code>Symbol</code> - Default trading symbol (e.g., \"EURUSD\") - <code>UseSSL</code> - SSL/TLS encryption (true/false) - <code>TimeoutSeconds</code> - Request timeout (default 30)</p> <p>Location: <code>./appsettings.json</code></p> <p>\u26a0\ufe0f Security: Never commit real credentials to git (add to .gitignore).</p>"},{"location":"GLOSSARY/#runbat","title":"run.bat","text":"<p>Quick launcher script for running all JavaMT5 examples.</p> <p>Usage: <pre><code>run.bat &lt;number&gt; [sub-number]\n\n# Examples:\nrun.bat 7      # SimpleTradingScenario\nrun.bat 10     # Orchestrator menu\nrun.bat 10 1   # Scalping orchestrator\nrun.bat 11 2   # Defensive preset\nrun.bat stop   # Stop Maven daemon\n</code></pre></p> <p>What it does: - Compiles project: <code>mvnd compile</code> - Runs Program.java: <code>mvnd exec:java -Dexec.args=\"&lt;numbers&gt;\"</code> - Uses Maven Daemon (mvnd) for fast execution - Handles Java environment setup</p> <p>Location: <code>./run.bat</code></p> <p>Note: If <code>run.bat</code> doesn't work, try <code>.\\run.bat</code> (PowerShell/Git Bash).</p> <p>See: RUNNING_EXAMPLES.md for troubleshooting.</p>"},{"location":"GLOSSARY/#maven-daemon-mvnd","title":"Maven Daemon (mvnd)","text":"<p>Fast Maven build tool that reuses JVM between builds.</p> <p>Benefits: - Much faster than standard <code>mvn</code> - Keeps JVM warm between builds - Parallel compilation</p> <p>Usage in JavaMT5: <pre><code>mvnd compile                        # Build project\nmvnd exec:java -Dexec.args=\"7\"     # Run example 7\nmvnd --stop                         # Stop daemon\n</code></pre></p> <p>Configuration: <code>pom.xml</code></p> <p>Troubleshooting: If build hangs, stop daemon with <code>run.bat stop</code> or <code>mvnd --stop</code>.</p>"},{"location":"GLOSSARY/#target-folder","title":"target/ Folder","text":"<p>Build output directory containing all compiled files and generated code.</p> <p>Contents: <pre><code>target/\n\u251c\u2500\u2500 classes/                    # Compiled .class files\n\u2514\u2500\u2500 maven-status/              # Build metadata\n</code></pre></p> <p>Purpose: - Maven puts all compiled classes here - Auto-generated during <code>mvnd compile</code> - Can be safely deleted for clean rebuild - MetaRPC library classes come from JAR dependency (not generated locally)</p> <p>Troubleshooting: <pre><code># If you get \"Unresolved compilation problem\" errors:\nrmdir /s /q target         # Windows CMD\nRemove-Item -Recurse -Force target  # PowerShell\nrm -rf target              # Git Bash/Linux\n\n# Then run any command - target/ will be regenerated:\nrun.bat 7\n</code></pre></p> <p>\u26a0\ufe0f Java is finicky! Deleting <code>target/</code> fixes 99% of weird compilation errors.</p> <p>See: RUNNING_EXAMPLES.md for details.</p>"},{"location":"GLOSSARY/#cross-component-terms","title":"\ud83d\udd17 Cross-Component Terms","text":""},{"location":"GLOSSARY/#snapshot","title":"Snapshot","text":"<p>Complete state capture at a point in time.</p> <p>Types: - Account Snapshot: Balance, equity, margin, profit, positions count - Symbol Snapshot: Bid, ask, spread, point size, volume limits</p> <p>Methods: <pre><code>var accountSnap = sugar.getAccountSnapshot();\nvar symbolSnap = sugar.getSymbolSnapshot(symbol);\n</code></pre></p> <p>Use case: Dashboards, logging, performance tracking.</p>"},{"location":"GLOSSARY/#batch-operations","title":"Batch Operations","text":"<p>Execute action on multiple positions/orders at once.</p> <p>Methods:</p> <ul> <li><code>closeAll()</code> - Close ALL positions (BUY and SELL)</li> <li><code>closeAllBuy()</code> - Close only BUY positions</li> <li><code>closeAllSell()</code> - Close only SELL positions</li> <li><code>closeAllPositions(symbol)</code> - Close all for specific symbol</li> <li><code>closeAllPending(symbol)</code> - Cancel all pending orders</li> <li><code>cancelAll()</code> - Cancel ALL pending orders</li> </ul> <p>Use case: Emergency exits, end-of-day cleanup, strategy resets.</p>"},{"location":"GLOSSARY/#history-queries","title":"History Queries","text":"<p>Retrieve past orders and positions for analysis.</p> <p>Methods:</p> <ul> <li><code>getOrdersHistoryLastDays(days, symbol)</code> - Orders from last N days</li> <li><code>getPositionsHistoryPaged(page, itemsPerPage)</code> - Paginated position history</li> </ul> <p>Use case: Performance analysis, trade logs, backtesting validation.</p>"},{"location":"GLOSSARY/#project-philosophy-terms","title":"\ud83c\udfaf Project Philosophy Terms","text":""},{"location":"GLOSSARY/#progressive-complexity","title":"Progressive Complexity","text":"<p>Design principle: start simple, access complexity only when needed.</p> <p>In JavaMT5: - Start with MT5Sugar (simplest) - Drop to MT5Service if need wrappers without auto-normalization - Drop to MT5Account for proto-level control</p> <p>User journey: Sugar \u2192 Service \u2192 Account (as needed).</p>"},{"location":"GLOSSARY/#educational-project","title":"Educational Project","text":"<p>JavaMT5 orchestrators and presets are learning materials, not production systems.</p> <p>Implications:</p> <ul> <li>\u2705 Study code and patterns</li> <li>\u2705 Modify for your needs</li> <li>\u2705 Test on demo accounts</li> <li>\u274c Don't use as-is with real money</li> <li>\u274c Don't expect production-grade error handling</li> </ul>"},{"location":"GLOSSARY/#user-facing-vs-internal","title":"User-Facing vs Internal","text":"<p>User-facing (modify freely): - Orchestrators - Presets - Examples - appsettings.json</p> <p>Internal (use but don't modify): - MT5Account, MT5Service, MT5Sugar - Proto definitions - Generated classes</p> <p>See: PROJECT_MAP.md</p>"},{"location":"GLOSSARY/#see-also","title":"\ud83d\udcda See Also","text":"<ul> <li>RUNNING_EXAMPLES.md - How to run examples + troubleshooting</li> <li>PROJECT_MAP.md - Complete project structure guide</li> <li>MT5Sugar.Overview.md - All 50+ convenience methods</li> <li>Orchestrators.Overview.md - Strategy implementations</li> <li>API Documentation - MT5Account and MT5Sugar</li> </ul>"},{"location":"GLOSSARY/#quick-term-lookup","title":"\ud83d\udca1 Quick Term Lookup","text":"Term Category Definition MT5Account Architecture Layer 1 - Low-level proto/gRPC API MT5Service Architecture Layer 2 - Wrapper methods MT5Sugar Architecture Layer 3 - Convenience API \u2b50 Program.java Architecture Main entry point, routes all commands Orchestrator Strategy Single-strategy implementation Preset Strategy Multi-orchestrator combination Auto-normalization Technical Automatic parameter adjustment Risk-based sizing Trading Position size from dollar risk Point Trading Smallest price movement (1 tick) Pip Trading Traditional forex unit (0.0001) Trailing stop Trading SL that follows profit Hedging Trading Opposite position to lock P/L Pending order Trading Order at future price level Proto Technical Protocol Buffer message format gRPC Technical RPC framework for communication Snapshot Technical Complete state capture Batch operation Technical Action on multiple items target/ folder Build Compiled output, delete for clean rebuild run.bat Tool Quick launcher for examples mvnd Tool Fast Maven daemon build tool Progressive complexity Philosophy Start simple, access complexity as needed <p>\ud83d\udca1 New to JavaMT5? 1. Read RUNNING_EXAMPLES.md to learn how to run examples and troubleshoot issues 2. Check PROJECT_MAP.md to understand the project structure 3. Explore MT5Sugar.Overview.md for the convenience API</p>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/","title":"gRPC Channel and Stream Management","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#problem-channels-and-streams-dont-close-automatically","title":"Problem: Channels and Streams Don't Close Automatically","text":"<p>When working with gRPC streaming in JavaMT5, two main issues occur:</p> <ol> <li>gRPC channels remain open after the program finishes</li> <li>Stream subscriptions (onSymbolTick, onTrade, etc.) continue running even after exiting the method</li> </ol>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#solution-1-correct-disconnection-sequence","title":"Solution 1: Correct Disconnection Sequence","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#important-difference-between-disconnect-and-close","title":"IMPORTANT: Difference Between <code>disconnect()</code> and <code>close()</code>","text":"<ul> <li><code>disconnect()</code> - disconnects from MT5 terminal, cancels all event subscriptions</li> <li><code>close()</code> - closes the gRPC channel, frees JVM resources</li> </ul>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#correct-sequence","title":"Correct Sequence:","text":"<pre><code>try {\n    // Work with MT5\n} finally {\n    if (service != null) {\n        // 1. First disconnect - cancels subscriptions on MT5 side\n        service.disconnect();\n\n        // 2. Then close channel - frees JVM resources\n        service.getAccount().close();\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#the-mt5accountclose-method","title":"The <code>MT5Account.close()</code> Method","text":"<p>The <code>MT5Account</code> class has a <code>close()</code> method that properly closes the gRPC channel:</p> <pre><code>// In io.metarpc.mt5.MT5Account.java (lines 1901-1908)\npublic void close() {\n    try {\n        grpcChannel.shutdown().awaitTermination(5, TimeUnit.SECONDS);\n    } catch (InterruptedException e) {\n        grpcChannel.shutdownNow();\n        Thread.currentThread().interrupt();\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#how-to-use","title":"How to Use:","text":"<pre><code>MT5Account account = null;\ntry {\n    account = new MT5Account(user, password, grpcServer, null);\n    account.connectByServerName(serverName, baseSymbol, 30);\n\n    // Your code...\n\n} finally {\n    if (account != null) {\n        account.close();  // \u2713 Properly closes gRPC channel\n        System.out.println(\"gRPC channel closed\");\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#force-close-if-close-hangs","title":"Force Close (If close() Hangs):","text":"<pre><code>finally {\n    if (account != null) {\n        try {\n            account.close();\n        } catch (Exception e) {\n            System.err.println(\"Error during close: \" + e.getMessage());\n        }\n        // Force JVM termination\n        System.exit(0);\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#solution-2-stopping-streams-streamobserver","title":"Solution 2: Stopping Streams (StreamObserver)","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#the-problem","title":"The Problem","text":"<p>In the current implementation, gRPC streaming methods (<code>onSymbolTick</code>, <code>onTrade</code>, <code>onPositionProfit</code>, etc.) don't return an object for managing the subscription.</p> <pre><code>// \u274c No way to stop the stream\npublic void onSymbolTick(String[] symbolNames,\n                         StreamObserver&lt;OnSymbolTickReply&gt; responseObserver) {\n    // Stream starts, but no management object returned\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#solution-using-clientcall-for-stream-management","title":"Solution: Using ClientCall for Stream Management","text":"<p>For full control over streams, you need to store a reference to <code>ClientCall</code>:</p> <pre><code>import io.grpc.ClientCall;\nimport io.grpc.stub.ClientCalls;\nimport io.grpc.stub.StreamObserver;\n\npublic class ManagedStreamExample {\n\n    // Store references to active streams\n    private ClientCall&lt;?, ?&gt; activeTickStream = null;\n    private ClientCall&lt;?, ?&gt; activeTradeStream = null;\n\n    public void subscribeToTicks(MT5Account account, String[] symbols) {\n        StreamObserver&lt;OnSymbolTickReply&gt; observer = new StreamObserver&lt;&gt;() {\n            @Override\n            public void onNext(OnSymbolTickReply reply) {\n                // Process tick\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Stream error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Stream completed\");\n            }\n        };\n\n        // Start stream\n        account.onSymbolTick(symbols, observer);\n\n        // TODO: In future version, save ClientCall for management\n        // activeTickStream = ...;\n    }\n\n    // Method to stop all streams\n    public void stopAllStreams() {\n        if (activeTickStream != null) {\n            activeTickStream.cancel(\"User requested cancellation\", null);\n            activeTickStream = null;\n        }\n        if (activeTradeStream != null) {\n            activeTradeStream.cancel(\"User requested cancellation\", null);\n            activeTradeStream = null;\n        }\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#solution-3-using-countdownlatch-for-stream-lifetime-control","title":"Solution 3: Using CountDownLatch for Stream Lifetime Control","text":"<p>The current pattern in examples uses <code>CountDownLatch</code> to limit stream runtime:</p> <pre><code>private static void runSymbolTickDemo(MT5Account acc, String[] symbols)\n        throws ApiExceptionMT5, InterruptedException {\n\n    CountDownLatch latch = new CountDownLatch(1);\n    AtomicInteger eventCount = new AtomicInteger(0);\n\n    StreamObserver&lt;OnSymbolTickReply&gt; observer = new StreamObserver&lt;&gt;() {\n        @Override\n        public void onNext(OnSymbolTickReply reply) {\n            int count = eventCount.incrementAndGet();\n\n            // Process event...\n\n            if (count &gt;= MAX_EVENTS) {\n                latch.countDown();  // \u2713 Signal completion\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            latch.countDown();\n        }\n\n        @Override\n        public void onCompleted() {\n            latch.countDown();\n        }\n    };\n\n    // Start stream\n    acc.onSymbolTick(symbols, observer);\n\n    // \u2713 Wait for completion or timeout\n    boolean completed = latch.await(TIMEOUT_SECONDS, TimeUnit.SECONDS);\n\n    if (!completed) {\n        System.out.println(\"Timeout - stream still active!\");\n        // \u274c Problem: stream continues running in background\n    }\n}\n</code></pre> <p>Problem: After timeout, the stream continues running in the background because there's no way to stop it.</p>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#solution-4-improved-architecture-with-managed-streams","title":"Solution 4: Improved Architecture with Managed Streams","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#proposed-improvement-for-mt5account","title":"Proposed Improvement for MT5Account:","text":"<pre><code>public class MT5Account {\n\n    // List of active streams\n    private final List&lt;ClientCall&lt;?, ?&gt;&gt; activeStreams =\n        new CopyOnWriteArrayList&lt;&gt;();\n\n    /**\n     * Subscribe to ticks with management capability\n     */\n    public StreamSubscription onSymbolTick(\n            String[] symbolNames,\n            StreamObserver&lt;OnSymbolTickReply&gt; responseObserver) {\n\n        // Create request\n        OnSymbolTickRequest request = OnSymbolTickRequest.newBuilder()\n            .addAllSymbolNames(Arrays.asList(symbolNames))\n            .build();\n\n        // Start stream\n        ClientCall&lt;OnSymbolTickRequest, OnSymbolTickReply&gt; call =\n            channel.newCall(\n                SubscriptionsGrpc.getOnSymbolTickMethod(),\n                CallOptions.DEFAULT\n            );\n\n        // Save for management\n        activeStreams.add(call);\n\n        // Start stream\n        ClientCalls.asyncServerStreamingCall(call, request, responseObserver);\n\n        // Return management object\n        return new StreamSubscription(call, () -&gt; activeStreams.remove(call));\n    }\n\n    /**\n     * Stop all active streams\n     */\n    public void stopAllStreams() {\n        for (ClientCall&lt;?, ?&gt; stream : activeStreams) {\n            stream.cancel(\"Stopping all streams\", null);\n        }\n        activeStreams.clear();\n    }\n\n    @Override\n    public void close() {\n        stopAllStreams();  // \u2713 Stop streams first\n\n        try {\n            grpcChannel.shutdown().awaitTermination(5, TimeUnit.SECONDS);\n        } catch (InterruptedException e) {\n            grpcChannel.shutdownNow();\n            Thread.currentThread().interrupt();\n        }\n    }\n}\n\n/**\n * Class for managing stream subscription\n */\npublic class StreamSubscription {\n    private final ClientCall&lt;?, ?&gt; call;\n    private final Runnable onCancel;\n    private volatile boolean cancelled = false;\n\n    public StreamSubscription(ClientCall&lt;?, ?&gt; call, Runnable onCancel) {\n        this.call = call;\n        this.onCancel = onCancel;\n    }\n\n    /**\n     * Stop the stream\n     */\n    public void cancel() {\n        if (!cancelled) {\n            cancelled = true;\n            call.cancel(\"User cancelled subscription\", null);\n            if (onCancel != null) {\n                onCancel.run();\n            }\n        }\n    }\n\n    public boolean isCancelled() {\n        return cancelled;\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#example-usage-of-improved-api","title":"Example Usage of Improved API:","text":"<pre><code>MT5Account account = new MT5Account(user, password, grpcServer, null);\naccount.connectByServerName(serverName, baseSymbol, 30);\n\n// Subscribe to ticks\nStreamSubscription tickSubscription = account.onSymbolTick(\n    new String[]{\"EURUSD\", \"GBPUSD\"},\n    new StreamObserver&lt;OnSymbolTickReply&gt;() {\n        @Override\n        public void onNext(OnSymbolTickReply reply) {\n            // Process tick\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            System.err.println(\"Error: \" + t.getMessage());\n        }\n\n        @Override\n        public void onCompleted() {\n            System.out.println(\"Stream completed\");\n        }\n    }\n);\n\n// Work with stream...\nThread.sleep(5000);\n\n// \u2713 Stop stream when needed\ntickSubscription.cancel();\n\n// Or stop all streams at once\naccount.stopAllStreams();\n\n// Close connection\naccount.close();\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#current-workarounds-temporary-solutions","title":"Current Workarounds (Temporary Solutions)","text":"<p>Until the improved architecture is implemented, use:</p>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#1-force-jvm-termination","title":"1. Force JVM Termination","text":"<pre><code>finally {\n    if (account != null) {\n        account.close();\n    }\n    System.exit(0);  // \u2713 Guaranteed termination\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#2-set-timeout-for-entire-process","title":"2. Set Timeout for Entire Process","text":"<pre><code>// At the start of main()\nRuntime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n    System.out.println(\"Shutdown hook - forcing exit\");\n}));\n\n// Set timeout\nScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\nexecutor.schedule(() -&gt; {\n    System.out.println(\"Timeout reached - forcing exit\");\n    System.exit(0);\n}, 30, TimeUnit.SECONDS);\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#3-explicit-channel-close-via-shutdownnow","title":"3. Explicit Channel Close via shutdownNow()","text":"<pre><code>public void forceClose() {\n    try {\n        if (!grpcChannel.shutdown().awaitTermination(2, TimeUnit.SECONDS)) {\n            grpcChannel.shutdownNow();  // \u2713 Force stop\n        }\n    } catch (InterruptedException e) {\n        grpcChannel.shutdownNow();\n        Thread.currentThread().interrupt();\n    }\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#recommendations","title":"Recommendations","text":"<ol> <li>Always call <code>account.close()</code> in <code>finally</code> block</li> <li>Use <code>System.exit(0)</code> if <code>close()</code> hangs</li> <li>Limit stream lifetime via <code>CountDownLatch</code> with timeout</li> <li>For production code - consider implementing <code>StreamSubscription</code> API</li> <li>Monitor threads - use VisualVM or JConsole to track hanging threads</li> </ol>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#common-warnings-can-be-ignored","title":"Common Warnings (Can Be Ignored)","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#file-lock-warning-2025hcc","title":"File Lock Warning: <code>2025.hcc</code>","text":"<pre><code>Status(StatusCode=\"Internal\", Detail=\"The process cannot access the file '2025.hcc'\nbecause it is being used by another process.\")\n</code></pre> <p>What it means: - <code>2025.hcc</code> is MT5's history cache file - MT5 terminal keeps it locked while running - This warning occurs during <code>disconnect()</code> call - It's NORMAL and can be safely ignored</p> <p>Why it happens: - gRPC tries to sync/cleanup history files on disconnect - MT5 terminal holds exclusive lock on history files - The lock prevents cleanup, but doesn't affect functionality</p> <p>Solution: <pre><code>} catch (Exception e) {\n    // Silently ignore all disconnect errors (file locks, etc.)\n    // They are harmless during shutdown\n}\n</code></pre></p>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#maven-daemon-exception-after-systemexit0","title":"Maven Daemon Exception After <code>System.exit(0)</code>","text":"<pre><code>DaemonException$StaleAddressException: Could not receive a message from the daemon.\n</code></pre> <p>What it means: - Maven daemon lost connection after program forced exit - This happens AFTER your program finished successfully - It's NORMAL when using <code>System.exit(0)</code></p> <p>Why it happens: - <code>System.exit(0)</code> terminates JVM immediately - Maven daemon expects graceful shutdown signal - Connection breaks before daemon receives exit message</p> <p>Solution: <pre><code># If you see this error repeatedly, stop and restart Maven daemon:\nmvnd --stop\nmvnd compile\n</code></pre></p> <p>Note: This doesn't affect your program - it ran successfully. The error appears during Maven cleanup.</p>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#example-finally-block-for-all-examples","title":"Example Finally Block for All Examples","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#variant-1-with-mt5service-recommended","title":"Variant 1: With MT5Service (Recommended)","text":"<pre><code>MT5Service service = null;\ntry {\n    service = new MT5Service(user, password, grpcServer, null);\n    service.connectByServerName(serverName, baseSymbol, 30);\n\n    // Your code...\n\n} catch (Exception e) {\n    System.err.println(\"ERROR: \" + e.getMessage());\n    e.printStackTrace();\n} finally {\n    if (service != null) {\n        try {\n            System.out.println(\"\u25ba Disconnecting from MT5...\");\n\n            // \u2713 CORRECT: First disconnect - cancels subscriptions\n            service.disconnect();\n\n            // \u2713 CORRECT: Then close - closes gRPC channel\n            service.getAccount().close();\n\n            System.out.println(\"\u25ba Disconnected successfully\");\n        } catch (Exception e) {\n            // Silently ignore all disconnect errors (file locks, etc.)\n            // They are harmless during shutdown\n        }\n    }\n    // Force termination for reliability\n    System.exit(0);\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#variant-2-with-mt5account-directly","title":"Variant 2: With MT5Account Directly","text":"<pre><code>MT5Account account = null;\ntry {\n    account = new MT5Account(user, password, grpcServer, null);\n    account.connectByServerName(serverName, baseSymbol, 30);\n\n    // Your code...\n\n} catch (Exception e) {\n    System.err.println(\"ERROR: \" + e.getMessage());\n    e.printStackTrace();\n} finally {\n    if (account != null) {\n        try {\n            System.out.println(\"\u25ba Disconnecting from MT5...\");\n\n            // \u2713 CORRECT: First disconnect - cancels subscriptions\n            account.disconnect();\n\n            // \u2713 CORRECT: Then close - closes gRPC channel\n            account.close();\n\n            System.out.println(\"\u25ba Disconnected successfully\");\n        } catch (Exception e) {\n            // Silently ignore all disconnect errors (file locks, etc.)\n            // They are harmless during shutdown\n        }\n    }\n    // Force termination for reliability\n    System.exit(0);\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#variant-3-quick-exit-if-experiencing-hanging-issues","title":"Variant 3: Quick Exit (If Experiencing Hanging Issues)","text":"<pre><code>} finally {\n    if (service != null) {\n        try {\n            System.out.println(\"\u25ba Disconnecting...\");\n            service.disconnect();\n            service.getAccount().close();\n        } catch (Exception e) {\n            // Ignore file lock errors\n        }\n    }\n    // Force exit without waiting\n    System.exit(0);\n}\n</code></pre>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#resource-cleanup-in-javamt5-examples","title":"Resource Cleanup in JavaMT5 Examples","text":""},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#programjava-implements-this-pattern","title":"Program.java Implements This Pattern","text":"<p>All orchestrators and presets in JavaMT5 follow the correct cleanup pattern through <code>Program.java</code>:</p> <p>How it works: - <code>run.bat 10 1-5</code> \u2192 Runs orchestrators via <code>Program.runOrchestrator()</code> - <code>run.bat 11 1-2</code> \u2192 Runs presets via <code>Program.runPreset()</code> - Both methods handle resource cleanup automatically</p> <p>Implementation in Program.java: <pre><code>// In runOrchestrator() and runPreset() methods:\n} finally {\n    account.disconnect();  // \u2713 Cancel subscriptions\n    account.close();       // \u2713 Free gRPC resources\n}\n</code></pre></p> <p>This means: - \u2705 Orchestrators (1-5) automatically clean up resources - \u2705 Presets (1-2) automatically clean up resources - \u2705 You don't need to manually handle cleanup when using <code>run.bat</code></p>"},{"location":"GRPC_CHANNEL_AND_STREAM_MANAGEMENT_EN/#see-also","title":"See Also","text":"<ul> <li>RUNNING_EXAMPLES.md - How to run examples + troubleshooting</li> <li>GLOSSARY.md - See \"target/ Folder\" for build troubleshooting</li> </ul>"},{"location":"Orchestrators.Overview/","title":"Trading Orchestrators - Overview","text":"<p>Strategy orchestrators automate complete trading workflows. Each orchestrator implements a specific trading strategy using MT5Sugar API. Located in <code>src/main/java/orchestrators/</code>.</p>"},{"location":"Orchestrators.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>TrendFollowingOrchestrator.java - trend following with trailing stops</li> <li>ScalpingOrchestrator.java - quick in/out trades with tight SL/TP</li> <li>HedgingOrchestrator.java - defensive hedging on adverse moves</li> <li>BreakoutOrchestrator.java - breakout trading with pending orders</li> <li>MartingaleOrchestrator.java - doubling volume after losses \u26a0\ufe0f HIGH RISK</li> </ul>"},{"location":"Orchestrators.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<p>What are orchestrators?</p> <p>Pre-built trading strategies that automate entire workflows:</p> <ul> <li>Position entry with calculated volume</li> <li>Stop Loss / Take Profit management</li> <li>Position monitoring</li> <li>Automatic exits and cleanup</li> <li>Performance tracking</li> </ul> <p>When to use:</p> <ul> <li>\u2705 Learning trading strategy automation</li> <li>\u2705 Prototyping new strategies quickly</li> <li>\u2705 Demo/testing environments</li> <li>\u2705 Educational purposes</li> </ul> <p>When NOT to use:</p> <ul> <li>\u274c Production without modification</li> <li>\u274c Real money without thorough testing</li> <li>\u274c As-is without understanding the code</li> </ul> <p>Rule of thumb: Orchestrators are educational examples - adapt them to your needs, don't use blindly.</p>"},{"location":"Orchestrators.Overview/#quick-choose","title":"Quick choose","text":"Strategy need Orchestrator Best for Risk level Capture trending moves <code>TrendFollowing</code> Strong trends, swing trading Medium Quick profits, tight stops <code>Scalping</code> High liquidity, low spreads Low-Medium Protect position on adverse moves <code>Hedging</code> Uncertain markets, volatility Medium Trade breakouts in either direction <code>Breakout</code> Range-bound ready to break Medium Double volume after losses <code>Martingale</code> \u26a0\ufe0f DEMO ONLY - educational VERY HIGH"},{"location":"Orchestrators.Overview/#strategy-details","title":"Strategy details","text":""},{"location":"Orchestrators.Overview/#1-trendfollowingorchestrator","title":"1. TrendFollowingOrchestrator","text":"<p>What it does: * Opens position in trend direction (simplified: assumes uptrend = BUY) * Uses wider SL/TP (80/160 points default) for trend capture * Monitors position and activates trailing stop * Moves SL to breakeven when profit threshold reached (40 points) * Risk-based volume calculation</p> <p>When to use: * Strong trending markets (uptrend/downtrend) * Higher timeframes (H1, H4, D1) * Low volatility instruments during sessions * Swing trading strategies</p> <p>Configuration: <pre><code>TrendFollowingOrchestrator trend = new TrendFollowingOrchestrator(sugar);\ntrend.setSymbol(\"EURUSD\");\ntrend.setRiskAmount(50.0);              // $50 risk per trade\ntrend.setStopLossPoints(80.0);          // 80 points SL (wider)\ntrend.setTakeProfitPoints(160.0);       // 160 points TP (1:2 R/R)\ntrend.setTrailingStopPoints(40.0);      // Activate trailing at +40p\ntrend.execute();\n</code></pre></p> <p>Key features: * Trailing stop activation * Breakeven protection * 1:2 risk/reward ratio * Position monitoring loop</p>"},{"location":"Orchestrators.Overview/#2-scalpingorchestrator","title":"2. ScalpingOrchestrator","text":"<p>What it does: * Opens market positions with tight SL/TP (8-15 points typical) * Quick profit targets with minimal exposure * Can execute single trades or trading sessions * Real-time position monitoring * Session statistics tracking</p> <p>When to use: * Low-spread instruments (EURUSD, USDJPY) * High liquidity periods (London/NY overlap) * Tight spreads (&lt; 5 points) * Fast execution environment</p> <p>Configuration: <pre><code>ScalpingOrchestrator scalper = new ScalpingOrchestrator(sugar);\nscalper.setSymbol(\"EURUSD\");\nscalper.setRiskAmount(20.0);            // $20 risk per trade\nscalper.setStopLossPoints(8);           // 8 points SL (tight)\nscalper.setTakeProfitPoints(15);        // 15 points TP (1:1.87 R/R)\nscalper.setMaxPositions(1);\n\n// Single trade\nscalper.execute();\n\n// OR: Trading session (5 trades, 10s delay)\nscalper.executeMultiple(5, 10000);\n</code></pre></p> <p>Key features: * Tight SL/TP for quick exits * Multiple trade execution mode * Session performance tracking * Win rate statistics</p>"},{"location":"Orchestrators.Overview/#3-hedgingorchestrator","title":"3. HedgingOrchestrator","text":"<p>What it does: * Opens primary position (BUY or SELL) * Monitors for adverse price movement * Opens opposite hedge position if trigger hit (default: 50 points loss) * Locks losses at hedge level (net position = 0) * Manages both positions together</p> <p>When to use: * Uncertain market conditions (high volatility) * Protect position during news events * Lock losses instead of stop loss * When regulations allow hedging</p> <p>Configuration: <pre><code>HedgingOrchestrator hedge = new HedgingOrchestrator(sugar);\nhedge.setSymbol(\"EURUSD\");\nhedge.setRiskAmount(30.0);              // Risk $30 per trade\nhedge.setHedgeTriggerPoints(50.0);      // Hedge after 50p loss\nhedge.setStopLossPoints(100.0);         // 100p SL on primary\nhedge.setTakeProfitPoints(150.0);       // 150p TP\nhedge.execute(true);                    // true = BUY first\n</code></pre></p> <p>Key features: * Automatic hedge activation * Loss locking mechanism * Dual position management * Defensive risk control</p>"},{"location":"Orchestrators.Overview/#4-breakoutorchestrator","title":"4. BreakoutOrchestrator","text":"<p>What it does: * Places BUY STOP above current price * Places SELL STOP below current price * Waits for breakout in either direction * Cancels opposite order when one triggers * Monitors triggered position with cleanup</p> <p>When to use: * Range-bound markets ready to break out * Support/resistance level trading * News event trading (volatility expected) * When direction unclear but movement expected</p> <p>Configuration: <pre><code>BreakoutOrchestrator breakout = new BreakoutOrchestrator(sugar);\nbreakout.setSymbol(\"EURUSD\");\nbreakout.setBreakoutDistance(30);       // 30p from current price\nbreakout.setRiskAmount(40.0);           // Risk $40 per trade\nbreakout.setStopLossPoints(50.0);       // 50p SL\nbreakout.setTakeProfitPoints(100.0);    // 100p TP (1:2 R/R)\nbreakout.execute();\n</code></pre></p> <p>Key features: * Bi-directional pending orders * Automatic opposite order cancellation * Breakout confirmation entry * Position monitoring</p>"},{"location":"Orchestrators.Overview/#5-martingaleorchestrator","title":"5. MartingaleOrchestrator \u26a0\ufe0f","text":"<p>What it does: * Starts with base volume (e.g., 0.01 lots) * If trade wins \u2192 reset to base volume * If trade loses \u2192 DOUBLE volume for next trade * Continue until profit or max trades reached * Goal: one win recovers all previous losses</p> <p>\u26a0\ufe0f WARNING - EXTREME RISK: * Exponential capital requirement * Account can be wiped out quickly * Margin calls likely during losing streak * NOT recommended for real money</p> <p>When to use: * \u26a0\ufe0f DEMO ACCOUNTS ONLY for learning * Understanding Martingale mechanics * Educational simulations * Academic research on betting systems</p> <p>Configuration: <pre><code>MartingaleOrchestrator mart = new MartingaleOrchestrator(sugar);\nmart.setSymbol(\"EURUSD\");\nmart.setBaseVolume(0.01);               // Start with 0.01 lots\nmart.setMaxTrades(5);                   // Max 5 trades in sequence\nmart.setStopLossPoints(20.0);           // 20p SL\nmart.setTakeProfitPoints(20.0);         // 20p TP (1:1)\nmart.execute();\n</code></pre></p> <p>Volume progression example: <pre><code>Trade 1: 0.01 lots \u2192 Loss \u2192 Total: -$10\nTrade 2: 0.02 lots \u2192 Loss \u2192 Total: -$30\nTrade 3: 0.04 lots \u2192 Loss \u2192 Total: -$70\nTrade 4: 0.08 lots \u2192 WIN  \u2192 Total: +$10 \u2713\n</code></pre></p>"},{"location":"Orchestrators.Overview/#cross-refs-gotchas","title":"\u274c Cross-refs &amp; gotchas","text":""},{"location":"Orchestrators.Overview/#general-orchestrator-notes","title":"General orchestrator notes","text":"<ul> <li>Educational purpose: Orchestrators are examples, not production-ready</li> <li>Customize parameters: Adjust SL/TP/risk to your strategy</li> <li>Test thoroughly: Always test on demo before real money</li> <li>Comment annotations: Each file has detailed explanations in code</li> <li>Risk management: All use risk-based volume calculation</li> <li>Error handling: Basic error handling - enhance for production</li> </ul>"},{"location":"Orchestrators.Overview/#risk-levels-explained","title":"Risk levels explained","text":"<ul> <li>Low-Medium: Tight stops, controlled risk (Scalping)</li> <li>Medium: Standard stops, reasonable risk (Trend, Hedging, Breakout)</li> <li>VERY HIGH: Exponential risk growth (Martingale) \u26a0\ufe0f</li> </ul>"},{"location":"Orchestrators.Overview/#common-patterns","title":"Common patterns","text":"<p>All orchestrators follow similar structure:</p> <ol> <li>Configuration - set symbol, risk, SL/TP parameters</li> <li>Entry - open position(s) with calculated volume</li> <li>Monitoring - watch position state in loop</li> <li>Management - trailing stops, hedging, etc.</li> <li>Exit - close positions and cleanup</li> <li>Reporting - print statistics and results</li> </ol>"},{"location":"Orchestrators.Overview/#integration-with-mt5sugar","title":"Integration with MT5Sugar","text":"<p>All orchestrators use MT5Sugar API:</p> <ul> <li><code>buyMarket()</code> / <code>sellMarket()</code> - market orders</li> <li><code>buyStop()</code> / <code>sellStop()</code> - pending orders</li> <li><code>calculateVolume()</code> - risk-based sizing</li> <li><code>modifyPosition()</code> - trailing stops</li> <li><code>closePosition()</code> - exits</li> <li><code>getBalance()</code>, <code>getBid()</code>, <code>getAsk()</code> - info</li> </ul>"},{"location":"Orchestrators.Overview/#running-orchestrators","title":"\ud83d\udfe2 Running orchestrators","text":""},{"location":"Orchestrators.Overview/#via-orchestratordemo-menu","title":"Via OrchestratorDemo menu","text":"<pre><code># Run interactive demo\nrun.bat 10\n\n# Select orchestrator from menu:\n[1] Trend Following\n[2] Scalping\n[3] Hedging\n[4] Breakout\n[5] Martingale\n</code></pre>"},{"location":"Orchestrators.Overview/#programmatically","title":"Programmatically","text":"<pre><code>// Create MT5Sugar instance\nMT5Account account = new MT5Account(login, password);\naccount.connect(host, port, symbol, useSSL, timeout);\nMT5Service service = new MT5Service(account);\nMT5Sugar sugar = new MT5Sugar(service);\n\n// Choose and configure orchestrator\nTrendFollowingOrchestrator trend = new TrendFollowingOrchestrator(sugar);\ntrend.setSymbol(\"EURUSD\");\ntrend.setRiskAmount(50.0);\ntrend.setStopLossPoints(80.0);\ntrend.setTakeProfitPoints(160.0);\n\n// Execute strategy\ntrend.execute();\n\n// Cleanup\naccount.disconnect();\n</code></pre>"},{"location":"Orchestrators.Overview/#custom-orchestrator-template","title":"Custom orchestrator template","text":"<pre><code>public class MyOrchestrator {\n    private final MT5Sugar sugar;\n\n    public MyOrchestrator(MT5Sugar sugar) {\n        this.sugar = sugar;\n    }\n\n    public void execute() throws ApiExceptionMT5 {\n        // 1. Configuration\n        String symbol = \"EURUSD\";\n        double risk = 50.0;\n\n        // 2. Entry\n        double volume = sugar.calculateVolume(symbol, slPoints, risk);\n        long ticket = sugar.buyMarket(symbol, volume, sl, tp);\n\n        // 3. Monitoring\n        while (positionOpen) {\n            // Check conditions\n            // Modify if needed\n        }\n\n        // 4. Exit &amp; cleanup\n        sugar.closePosition(ticket);\n    }\n}\n</code></pre>"},{"location":"Orchestrators.Overview/#see-also","title":"See also","text":"<ul> <li>MT5Sugar API: MT5Sugar.Overview.md - underlying convenience layer</li> <li>MT5Service: Wrapper methods used by orchestrators</li> <li>MT5Account: Low-level proto API</li> <li>Example demos: Check <code>src/main/java/examples/</code> for more usage patterns</li> <li>Risk management: calculateVolume documentation</li> </ul>"},{"location":"Orchestrators.Overview/#learning-path","title":"\ud83d\udcda Learning path","text":"<p>Recommended order for studying orchestrators:</p> <ol> <li>ScalpingOrchestrator - simplest, good starting point</li> <li>BreakoutOrchestrator - introduces pending orders</li> <li>TrendFollowingOrchestrator - adds position modification (trailing)</li> <li>HedgingOrchestrator - dual position management</li> <li>MartingaleOrchestrator - advanced (demo only!)</li> </ol> <p>Each orchestrator teaches: * Different trading strategy implementation * Risk management techniques * Position monitoring patterns * MT5Sugar API usage in context * Real-world trading automation challenges</p> <p>\ud83d\udca1 Tip: Read the detailed comments in each orchestrator's source code - they contain extensive explanations of strategy logic, parameters, and usage examples.</p>"},{"location":"PROJECT_MAP/","title":"JavaMT5 Project Map","text":"<p>Complete project structure guide. Shows what's where, what's user-facing vs internal, and how components connect.</p>"},{"location":"PROJECT_MAP/#project-overview","title":"\ud83d\uddfa\ufe0f Project Overview","text":"<pre><code>JavaMT5/\n\u251c\u2500\u2500 \ud83d\udce6 Core API (Internal - 3 layers)\n\u251c\u2500\u2500 \ud83c\udfaf User Code (Orchestrators, Presets, Examples)\n\u251c\u2500\u2500 \ud83d\udcda Documentation\n\u2514\u2500\u2500 \u2699\ufe0f Configuration &amp; Build\n\nExternal Dependencies:\n\u2514\u2500\u2500 \ud83d\udd0c Proto Definitions (from JitPack JAR)\n</code></pre>"},{"location":"PROJECT_MAP/#core-api-internal-srcmainjavaiometarpcmt5","title":"\ud83d\udce6 Core API (Internal - src/main/java/io/metarpc/mt5/)","text":"<p>What: Three-tier architecture for MT5 trading automation.</p> <p>User interaction: Import and use, but typically don't modify.</p> <pre><code>src/main/java/io/metarpc/mt5/\n\u251c\u2500\u2500 MT5Account.java         \u2190 LAYER 1: Low-level proto/gRPC\n\u2502   \u2514\u2500\u2500 Direct proto Request/Response objects\n\u2502   \u2514\u2500\u2500 Connection management\n\u2502   \u2514\u2500\u2500 Raw gRPC calls\n\u2502\n\u251c\u2500\u2500 MT5Service.java         \u2190 LAYER 2: Wrapper methods\n\u2502   \u2514\u2500\u2500 Direct data returns (no proto wrapping)\n\u2502   \u2514\u2500\u2500 Type conversions\n\u2502   \u2514\u2500\u2500 Simplified method signatures\n\u2502\n\u2514\u2500\u2500 MT5Sugar.java           \u2190 LAYER 3: Convenience layer\n    \u2514\u2500\u2500 Auto-normalization (volumes, prices)\n    \u2514\u2500\u2500 Risk management (calculateVolume, buyByRisk)\n    \u2514\u2500\u2500 Batch operations (closeAll, cancelAll)\n    \u2514\u2500\u2500 Smart helpers (snapshots, conversions)\n\nexceptions/\n\u2514\u2500\u2500 ApiExceptionMT5.java    \u2190 Exception wrapper with MT5 error codes\n</code></pre> <p>Architecture flow: <pre><code>MT5Sugar \u2192 uses \u2192 MT5Service \u2192 uses \u2192 MT5Account \u2192 gRPC \u2192 MT5 Terminal\n</code></pre></p> <p>User decision: - 95% of cases: Start with <code>MT5Sugar</code> (highest level, easiest) - Need wrappers: Drop to <code>MT5Service</code> (no auto-normalization) - Need raw proto: Drop to <code>MT5Account</code> (full control)</p> <p>Documentation: MT5Sugar.Overview.md</p>"},{"location":"PROJECT_MAP/#user-code-your-trading-strategies","title":"\ud83c\udfaf User Code (Your Trading Strategies)","text":""},{"location":"PROJECT_MAP/#orchestrators-srcmainjavaorchestrators","title":"Orchestrators (src/main/java/orchestrators/)","text":"<p>What: Pre-built trading strategy implementations.</p> <p>User interaction: \u2705 Start here! Copy, modify, customize for your strategies.</p> <pre><code>orchestrators/\n\u251c\u2500\u2500 TrendFollowingOrchestrator.java    \u2190 Trend following + trailing stops\n\u251c\u2500\u2500 ScalpingOrchestrator.java          \u2190 Quick in/out, tight SL/TP\n\u251c\u2500\u2500 HedgingOrchestrator.java           \u2190 Defensive hedging strategy\n\u251c\u2500\u2500 BreakoutOrchestrator.java          \u2190 Bi-directional pending orders\n\u2514\u2500\u2500 MartingaleOrchestrator.java        \u2190 Volume doubling \u26a0\ufe0f HIGH RISK\n</code></pre> <p>Purpose: Educational examples showing complete strategy workflows: - Entry logic (risk-based volume) - Position monitoring - Exit management - Performance tracking</p> <p>How to use: 1. Study existing orchestrators 2. Copy one as template 3. Modify for your strategy 4. Test on demo account</p> <p>Documentation: Orchestrators.Overview.md</p>"},{"location":"PROJECT_MAP/#presets-srcmainjavapresets","title":"Presets (src/main/java/presets/)","text":"<p>What: Multi-orchestrator combinations with adaptive logic.</p> <p>User interaction: \u2705 Advanced usage - combine multiple strategies.</p> <pre><code>presets/\n\u251c\u2500\u2500 AggressiveGrowthPreset.java    \u2190 3-4 orchestrators, adaptive\n\u2514\u2500\u2500 DefensivePreset.java           \u2190 Conservative, protection-first\n</code></pre> <p>Purpose: Show how to: - Chain multiple strategies - Adaptive decision-making (if profit &gt; X then...) - Multi-phase trading sessions - Performance tracking across phases</p> <p>Documentation: Orchestrators.Overview.md</p>"},{"location":"PROJECT_MAP/#examples-srcmainjavaexamples","title":"Examples (src/main/java/examples/)","text":"<p>What: Runnable examples demonstrating API usage.</p> <p>User interaction: \u2705 Learning materials - run to understand APIs.</p> <pre><code>examples/\n\u251c\u2500\u2500 lowlevel/                          \u2190 MT5Account examples (proto level)\n\u2502   \u251c\u2500\u2500 MarketDataExample.java         \u2190 run.bat 1\n\u2502   \u251c\u2500\u2500 TradingCalculationsExample.java \u2190 run.bat 2\n\u2502   \u2514\u2500\u2500 StreamingExample.java          \u2190 run.bat 3\n\u2502\n\u251c\u2500\u2500 services/                          \u2190 MT5Service examples (wrapper level)\n\u2502   \u251c\u2500\u2500 MarketDataServiceExample.java  \u2190 run.bat 4\n\u2502   \u251c\u2500\u2500 TradingServiceExample.java     \u2190 run.bat 5\n\u2502   \u2514\u2500\u2500 StreamingServiceExample.java   \u2190 run.bat 6\n\u2502\n\u2514\u2500\u2500 sugar/                             \u2190 MT5Sugar examples (convenience level)\n    \u251c\u2500\u2500 SimpleTradingScenario.java     \u2190 run.bat 7\n    \u251c\u2500\u2500 RiskManagementScenario.java    \u2190 run.bat 8\n    \u2514\u2500\u2500 GridTradingScenario.java       \u2190 run.bat 9\n</code></pre>"},{"location":"PROJECT_MAP/#programjava-srcmainjavaprogramjava","title":"Program.java (src/main/java/Program.java)","text":"<p>What: Main entry point that routes run.bat commands to examples/orchestrators/presets.</p> <p>User interaction: \ud83d\udccb Runner + Documentation - launches everything.</p> <pre><code>Program.java\n\u251c\u2500\u2500 main()                              \u2190 Entry point, parses arguments\n\u251c\u2500\u2500 runDemo()                           \u2190 Launches examples 1-9 via reflection\n\u251c\u2500\u2500 runOrchestrator()                   \u2190 Menu + runs orchestrators (10)\n\u251c\u2500\u2500 runPreset()                         \u2190 Menu + runs presets (11)\n\u2514\u2500\u2500 Header documentation                \u2190 Complete guide to all commands\n</code></pre> <p>How it works: <pre><code>run.bat 7\n    \u2193\nProgram.java main(args)  // args[0] = \"7\"\n    \u2193\nrunDemo(7)\n    \u2193\nReflection finds: examples.sugar.SimpleTradingScenario\n    \u2193\nCalls: SimpleTradingScenario.main()\n</code></pre></p> <p>Purpose: - Single entry point for all examples (1-11) - Automatic class discovery via reflection - Interactive menus for orchestrators/presets - Complete command reference in file header - Resource cleanup for orchestrators/presets</p> <p>How to run: <pre><code>run.bat 1-9    # Examples (low-level, service, sugar)\nrun.bat 10     # Orchestrator menu\nrun.bat 10 1-5 # Specific orchestrator\nrun.bat 11     # Preset menu\nrun.bat 11 1-2 # Specific preset\n</code></pre></p> <p>Purpose: - Learn API usage patterns - See working code examples - Copy-paste starting points - Understand orchestrator/preset architecture</p>"},{"location":"PROJECT_MAP/#documentation-docs","title":"\ud83d\udcda Documentation (docs/)","text":"<p>What: Complete API and strategy documentation.</p> <p>User interaction: \ud83d\udcd6 Read first! Comprehensive reference.</p> <pre><code>docs/\n\u251c\u2500\u2500 RUNNING_EXAMPLES.md                \u2190 \u2b50 How to run examples + troubleshooting\n\u2502   \u2514\u2500\u2500 Commands, troubleshooting, build process\n\u2502\n\u251c\u2500\u2500 PROJECT_MAP.md                     \u2190 \u2b50 This file - complete project structure\n\u2502\n\u251c\u2500\u2500 GETTING_STARTED.md                 \u2190 Initial setup guide\n\u2502\n\u251c\u2500\u2500 GLOSSARY.md                        \u2190 Terms and definitions\n\u2502\n\u251c\u2500\u2500 MT5Sugar/                          \u2190 50+ convenience methods\n\u2502   \u251c\u2500\u2500 MT5Sugar.Overview.md           \u2190 \u2b50 START HERE\n\u2502   \u251c\u2500\u2500 1. Symbol_helpers/             \u2190 12 methods (getPoint, getBid, etc.)\n\u2502   \u251c\u2500\u2500 2. Market_orders/              \u2190 2 methods (buyMarket, sellMarket)\n\u2502   \u251c\u2500\u2500 3. Pending_orders/             \u2190 4 methods (buyLimit, sellLimit, etc.)\n\u2502   \u251c\u2500\u2500 4. Pending_orders_points/      \u2190 4 methods (offset-based)\n\u2502   \u251c\u2500\u2500 5. Position_management/        \u2190 5 methods (close, modify, etc.)\n\u2502   \u251c\u2500\u2500 6. Advanced_batch_operations/  \u2190 3 methods (batch close/cancel)\n\u2502   \u251c\u2500\u2500 7. Risk_management/            \u2190 3 methods (calculateVolume, etc.)\n\u2502   \u251c\u2500\u2500 8. Advanced_helpers/           \u2190 4 methods (limits, conversions)\n\u2502   \u251c\u2500\u2500 9. Account_and_position_helpers/ \u2190 10 methods (balance, equity, etc.)\n\u2502   \u251c\u2500\u2500 10. Snapshot_helpers/          \u2190 2 methods (full snapshots)\n\u2502   \u2514\u2500\u2500 11. History_helpers/           \u2190 2 methods (history queries)\n\u2502\n\u251c\u2500\u2500 MT5Account/                        \u2190 Low-level proto documentation\n\u2502   \u251c\u2500\u2500 1. Account_information/\n\u2502   \u251c\u2500\u2500 2. Symbol_information/\n\u2502   \u251c\u2500\u2500 3. Positions_and_orders/\n\u2502   \u251c\u2500\u2500 4. Market_depth_DOM/\n\u2502   \u251c\u2500\u2500 5. Trading/\n\u2502   \u2514\u2500\u2500 6. Subscriptions/\n\u2502\n\u2514\u2500\u2500 Orchestrators.Overview.md          \u2190 \u2b50 Strategies guide\n    \u2514\u2500\u2500 Includes: 5 orchestrators + 2 presets\n</code></pre> <p>Structure: - Each method has its own <code>.md</code> file with examples - Overview files provide quick navigation - Links between related methods - Usage examples in every file</p>"},{"location":"PROJECT_MAP/#configuration-build","title":"\u2699\ufe0f Configuration &amp; Build","text":"<p>What: Project configuration and build tools.</p> <p>User interaction: \u2699\ufe0f Configure once - mostly read-only after setup.</p> <pre><code>./\n\u251c\u2500\u2500 pom.xml                    \u2190 Maven build configuration\n\u2502   \u2514\u2500\u2500 Dependencies, plugins, build settings\n\u2502   \u2514\u2500\u2500 Proto compilation setup\n\u2502   \u2514\u2500\u2500 Maven Daemon (mvnd) integration\n\u2502\n\u251c\u2500\u2500 appsettings.json           \u2190 MT5 connection settings \u2b50 EDIT THIS\n\u2502   \u2514\u2500\u2500 Host, port, login, password\n\u2502   \u2514\u2500\u2500 Symbol, SSL, timeout\n\u2502   \u2514\u2500\u2500 Use for all examples\n\u2502\n\u251c\u2500\u2500 run.bat                    \u2190 Quick launcher for examples\n\u2502   \u2514\u2500\u2500 run.bat &lt;number&gt;       \u2190 Launch specific example\n\u2502   \u2514\u2500\u2500 Handles Maven Daemon\n\u2502\n\u251c\u2500\u2500 .vscode/                   \u2190 VS Code settings\n\u2502   \u2514\u2500\u2500 settings.json\n\u2502\n\u2514\u2500\u2500 .gitignore                 \u2190 Git ignore rules\n</code></pre> <p>Key file - appsettings.json: <pre><code>{\n  \"MT5\": {\n    \"Host\": \"localhost\",\n    \"Port\": 5555,\n    \"Login\": 12345678,\n    \"Password\": \"yourpassword\",\n    \"Symbol\": \"EURUSD\",\n    \"UseSSL\": true,\n    \"TimeoutSeconds\": 30\n  }\n}\n</code></pre></p>"},{"location":"PROJECT_MAP/#proto-definitions-external-dependency","title":"\ud83d\udd0c Proto Definitions (External Dependency)","text":"<p>What: Protocol Buffer definitions for MT5 terminal communication.</p> <p>User interaction: \ud83d\udccb Reference only - not in this repository.</p> <p>Location: Downloaded automatically as part of MetaRPC library from JitPack.</p> <p>How it works:</p> <ol> <li>Maven downloads precompiled JAR from JitPack (com.github.MetaRPC:JavaMT5)</li> <li>JAR contains compiled Java classes generated from proto files</li> <li>Classes cached in <code>~/.m2/repository/com/github/MetaRPC/JavaMT5/</code></li> <li>Your code imports these classes (e.g., <code>mt5_term_api.*</code>)</li> </ol> <p>Proto files included in JAR: - <code>mt5-term-api-account-helper.proto</code> \u2192 Account helpers - <code>mt5-term-api-account-information.proto</code> \u2192 Account info - <code>mt5-term-api-charts.proto</code> \u2192 Chart data - <code>mt5-term-api-connection.proto</code> \u2192 Connection management - <code>mt5-term-api-market-info.proto</code> \u2192 Market information - <code>mt5-term-api-subscriptions.proto</code> \u2192 Real-time subscriptions - <code>mt5-term-api-trade-functions.proto</code> \u2192 Trading operations - <code>mt5-term-api-trading-helper.proto</code> \u2192 Trading helpers - <code>mrpc-mt5-error.proto</code> \u2192 Error definitions</p> <p>Purpose: - Define gRPC service contracts - Pre-compiled into Java classes by MetaRPC - Used by MT5Account layer - No local proto compilation needed</p>"},{"location":"PROJECT_MAP/#quick-start-paths","title":"\ud83c\udfaf Quick Start Paths","text":""},{"location":"PROJECT_MAP/#path-1-learn-the-api-beginner","title":"Path 1: Learn the API (Beginner)","text":"<pre><code>1. Read: docs/RUNNING_EXAMPLES.md\n2. Read: docs/MT5Sugar/MT5Sugar.Overview.md\n3. Configure: appsettings.json\n4. Run: run.bat 7 (SimpleTradingScenario)\n5. Study: src/main/java/examples/sugar/\n6. Try: Modify SimpleTradingScenario.java\n</code></pre>"},{"location":"PROJECT_MAP/#path-2-build-a-strategy-intermediate","title":"Path 2: Build a Strategy (Intermediate)","text":"<pre><code>1. Read: docs/Orchestrators.Overview.md\n2. Run: run.bat 10 (Interactive orchestrator menu)\n3. Run: run.bat 10 1 (Scalping strategy)\n4. Study: src/main/java/orchestrators/ScalpingOrchestrator.java\n5. Copy: Create MyOrchestrator.java based on Scalping\n6. Customize: Add your entry/exit logic\n7. Test: On demo account\n</code></pre>"},{"location":"PROJECT_MAP/#path-3-multi-strategy-system-advanced","title":"Path 3: Multi-Strategy System (Advanced)","text":"<pre><code>1. Study: All single orchestrators first (run.bat 10 1-5)\n2. Read: docs/Orchestrators.Overview.md (Presets section)\n3. Run: run.bat 11 (Interactive preset menu)\n4. Run: run.bat 11 2 (Defensive preset)\n5. Study: src/main/java/presets/DefensivePreset.java\n6. Design: Your multi-phase strategy\n7. Build: Combine orchestrators with logic\n8. Test: Extensively on demo\n</code></pre>"},{"location":"PROJECT_MAP/#path-4-low-level-integration-expert","title":"Path 4: Low-Level Integration (Expert)","text":"<pre><code>1. Read: docs/MT5Account/ documentation\n2. Study: MetaRPC proto classes (from JitPack JAR in ~/.m2/repository/)\n3. Run: run.bat 1-3 (Low-level examples)\n4. Study: src/main/java/io/metarpc/mt5/MT5Account.java\n5. Explore: Proto-generated classes (mt5_term_api.* packages)\n6. Use: When MT5Sugar/MT5Service don't fit your needs\n7. Build: Custom low-level gRPC integrations\n</code></pre>"},{"location":"PROJECT_MAP/#component-interaction-diagram","title":"\ud83d\udcca Component Interaction Diagram","text":"<pre><code>YOUR CODE (User-facing)\n  \u251c\u2500 Orchestrators (strategy implementations)\n  \u251c\u2500 Presets (multi-strategy combinations)\n  \u2514\u2500 Examples (learning materials)\n                  \u2502\n                  \u2502 uses\n                  \u2193\nMT5Sugar (Layer 3 - Convenience)\n  \u251c\u2500 Auto-normalization\n  \u251c\u2500 Risk management\n  \u2514\u2500 Batch operations\n                  \u2502\n                  \u2502 uses\n                  \u2193\nMT5Service (Layer 2 - Wrappers)\n  \u251c\u2500 Direct data returns\n  \u251c\u2500 Type conversions\n  \u2514\u2500 Simplified signatures\n                  \u2502\n                  \u2502 uses\n                  \u2193\nMT5Account (Layer 1 - Low-level)\n  \u251c\u2500 Proto Request/Response\n  \u251c\u2500 gRPC communication\n  \u2514\u2500 Connection management\n                  \u2502\n                  \u2502 gRPC\n                  \u2193\nMT5 Terminal (External)\n  \u2514\u2500 MetaTrader 5 with gRPC server\n</code></pre>"},{"location":"PROJECT_MAP/#file-naming-conventions","title":"\ud83d\udd0d File Naming Conventions","text":""},{"location":"PROJECT_MAP/#core-api","title":"Core API","text":"<ul> <li><code>MT5*.java</code> - Core API classes (Account, Service, Sugar)</li> <li><code>*Exception.java</code> - Exception types</li> </ul>"},{"location":"PROJECT_MAP/#user-code","title":"User Code","text":"<ul> <li><code>*Orchestrator.java</code> - Single-strategy implementations</li> <li><code>*Preset.java</code> - Multi-strategy combinations</li> <li><code>*Example.java</code> / <code>*Demo.java</code> - Runnable examples</li> <li><code>*Scenario.java</code> - Complex usage scenarios</li> </ul>"},{"location":"PROJECT_MAP/#documentation","title":"Documentation","text":"<ul> <li><code>*.Overview.md</code> - Category overview with all methods</li> <li><code>methodName.md</code> - Individual method documentation</li> </ul>"},{"location":"PROJECT_MAP/#what-to-modify-vs-what-to-leave-alone","title":"\ud83d\udcc2 What to Modify vs What to Leave Alone","text":""},{"location":"PROJECT_MAP/#modify-user-code","title":"\u2705 MODIFY (User Code)","text":"<pre><code>orchestrators/           \u2190 Copy and customize for your strategies\npresets/                 \u2190 Create your own multi-strategy systems\nexamples/                \u2190 Add your own examples\nappsettings.json         \u2190 Configure for your MT5 terminal\n</code></pre>"},{"location":"PROJECT_MAP/#read-core-api","title":"\ud83d\udcd6 READ (Core API)","text":"<pre><code>io/metarpc/mt5/         \u2190 Use but don't modify (import and call)\ndocs/                   \u2190 Reference documentation\n</code></pre>"},{"location":"PROJECT_MAP/#leave-alone-generatedinternal","title":"\ud83d\udd12 LEAVE ALONE (Generated/Internal)","text":"<pre><code>target/                 \u2190 Compiled classes (auto-generated)\n.git/                   \u2190 Git internals\n~/.m2/repository/       \u2190 Maven dependencies cache (proto classes here)\n</code></pre>"},{"location":"PROJECT_MAP/#project-philosophy","title":"\ud83c\udfaf Project Philosophy","text":"<p>Goal: Make MT5 trading automation accessible through progressive complexity.</p> <p>Three-tier design:</p> <ol> <li>Low-level (MT5Account): Full control, proto/gRPC</li> <li>Wrapper (MT5Service): Simplified method calls</li> <li>Convenience (MT5Sugar): Auto-everything, batteries included</li> </ol> <p>User code:</p> <ul> <li>Orchestrators: Pre-built strategy templates</li> <li>Presets: Multi-strategy combinations</li> <li>Examples: Learning materials</li> </ul> <p>Start high (MT5Sugar), drop down only when needed.</p> <p>\ud83d\udca1 Remember: This is an educational project. All orchestrators and presets are examples, not production-ready systems. Always test on demo accounts and understand the code before using real money.</p>"},{"location":"RUNNING_EXAMPLES/","title":"Running JavaMT5 Examples - Complete Guide","text":"<p>This guide explains how to run JavaMT5 examples using <code>run.bat</code> and how to troubleshoot common issues.</p>"},{"location":"RUNNING_EXAMPLES/#quick-start","title":"Quick Start","text":"<p>The simplest way to run any example:</p> <pre><code># Windows CMD\nrun.bat &lt;number&gt;\n\n# PowerShell / Git Bash (if above doesn't work)\n.\\run.bat &lt;number&gt;\n</code></pre> <p>Examples: <pre><code>run.bat 7          # Run SimpleTradingScenario (Sugar example)\nrun.bat 10 1       # Run Scalping Orchestrator\nrun.bat 11 2       # Run Defensive Preset\n</code></pre></p>"},{"location":"RUNNING_EXAMPLES/#all-available-commands","title":"All Available Commands","text":""},{"location":"RUNNING_EXAMPLES/#level-1-low-level-api-mt5account-direct-grpc","title":"Level 1: Low-Level API (MT5Account - Direct gRPC)","text":"Command File Description <code>run.bat 1</code> <code>MarketDataExample.java</code> Account info, symbols, quotes, order book <code>run.bat 2</code> <code>TradingCalculationsExample.java</code> Margin, profit calculations, order validation <code>run.bat 3</code> <code>StreamingExample.java</code> Real-time tick/trade/position streaming"},{"location":"RUNNING_EXAMPLES/#level-2-service-api-mt5service-simplified-wrappers","title":"Level 2: Service API (MT5Service - Simplified Wrappers)","text":"Command File Description <code>run.bat 4</code> <code>MarketDataServiceExample.java</code> Easier market data access with wrappers <code>run.bat 5</code> <code>TradingServiceExample.java</code> Simplified trading operations <code>run.bat 6</code> <code>StreamingServiceExample.java</code> Simplified real-time data streams"},{"location":"RUNNING_EXAMPLES/#level-3-sugar-api-mt5sugar-one-line-convenience","title":"Level 3: Sugar API (MT5Sugar - One-Line Convenience)","text":"Command File Description <code>run.bat 7</code> <code>SimpleTradingScenario.java</code> Basic buy/sell in 1 line: <code>sugar.buyMarket()</code> <code>run.bat 8</code> <code>RiskManagementScenario.java</code> Auto volume calculation by risk amount <code>run.bat 9</code> <code>GridTradingScenario.java</code> Multiple pending orders at price levels"},{"location":"RUNNING_EXAMPLES/#level-4-orchestrators-automated-trading-strategies","title":"Level 4: Orchestrators (Automated Trading Strategies)","text":"Command File Description <code>run.bat 10</code> Shows orchestrator menu Interactive menu to choose strategy <code>run.bat 10 1</code> <code>ScalpingOrchestrator.java</code> Scalping (8pt SL, 15pt TP, $20 risk) <code>run.bat 10 2</code> <code>TrendFollowingOrchestrator.java</code> Trend Following (80pt SL, 160pt TP, trailing) <code>run.bat 10 3</code> <code>HedgingOrchestrator.java</code> Hedging (auto-hedge at 50pt loss) <code>run.bat 10 4</code> <code>BreakoutOrchestrator.java</code> Breakout (pending BUY/SELL STOP orders) <code>run.bat 10 5</code> <code>MartingaleOrchestrator.java</code> Martingale (\u26a0\ufe0f high risk - doubles volume) <code>run.bat 10 0</code> Runs all 5 orchestrators Demo mode - run all sequentially"},{"location":"RUNNING_EXAMPLES/#level-5-presets-multi-strategy-trading-systems","title":"Level 5: Presets (Multi-Strategy Trading Systems)","text":"Command File Description <code>run.bat 11</code> Shows preset menu Interactive menu to choose preset <code>run.bat 11 1</code> <code>AggressiveGrowthPreset.java</code> Aggressive Growth (Scalping+Trend+Breakout) <code>run.bat 11 2</code> <code>DefensivePreset.java</code> Defensive (Hedging+Scalping+Martingale) <code>run.bat 11 0</code> Runs both presets Demo mode - run both with P/L comparison"},{"location":"RUNNING_EXAMPLES/#special-commands","title":"Special Commands","text":"Command Description <code>run.bat</code> Show help menu <code>run.bat stop</code> Stop Maven daemon"},{"location":"RUNNING_EXAMPLES/#what-each-command-does","title":"What Each Command Does","text":""},{"location":"RUNNING_EXAMPLES/#how-runbat-works-internally","title":"How <code>run.bat</code> Works Internally","text":"<p>When you run <code>run.bat 7</code> (or any number), here's what happens:</p> <ol> <li>Argument Parsing - <code>run.bat</code> passes <code>7</code> to <code>Program.java</code></li> <li>Program.java Main Method - Receives argument and decides what to run</li> <li>Routing Logic:</li> <li><code>1-9</code> \u2192 Calls <code>runDemo()</code> which uses reflection to launch the example class</li> <li><code>10</code> \u2192 Calls <code>runOrchestrator()</code> which shows menu or runs specific orchestrator</li> <li><code>11</code> \u2192 Calls <code>runPreset()</code> which shows menu or runs specific preset</li> </ol>"},{"location":"RUNNING_EXAMPLES/#example-runbat-7","title":"Example: <code>run.bat 7</code>","text":"<pre><code>run.bat 7\n    \u2193\nProgram.java main(String[] args)  // args[0] = \"7\"\n    \u2193\nrunDemo(7)\n    \u2193\nUses reflection to find: examples.sugar.SimpleTradingScenario\n    \u2193\nCalls: SimpleTradingScenario.main()\n    \u2193\nRuns the example!\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#example-runbat-10-1","title":"Example: <code>run.bat 10 1</code>","text":"<pre><code>run.bat 10 1\n    \u2193\nProgram.java main(String[] args)  // args[0] = \"10\", args[1] = \"1\"\n    \u2193\nrunOrchestrator(sugar, 1)\n    \u2193\nCalls: runScalping(sugar)\n    \u2193\nCreates ScalpingOrchestrator and executes it\n    \u2193\nRuns the orchestrator!\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#what-gets-compiled-and-run","title":"What Gets Compiled and Run","text":"<p>Every <code>run.bat</code> command does:</p> <pre><code>mvnd compile exec:java -Dexec.args=\"&lt;your arguments&gt;\"\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#this-means","title":"This means:","text":"<ol> <li><code>mvnd compile</code> - Compile all Java files</li> <li>Generate protobuf files (if needed)</li> <li>Compile all <code>.java</code> files to <code>.class</code> files</li> <li> <p>Put everything in <code>target/classes/</code></p> </li> <li> <p><code>exec:java</code> - Execute <code>Program.java</code> main method</p> </li> <li>Pass your arguments (e.g., <code>\"10 1\"</code>)</li> <li>Program.java routes to the correct example/orchestrator/preset</li> </ol>"},{"location":"RUNNING_EXAMPLES/#troubleshooting","title":"Troubleshooting","text":""},{"location":"RUNNING_EXAMPLES/#problem-1-processes-dont-stop-script-hangs","title":"Problem 1: Processes Don't Stop (Script Hangs)","text":"<p>Symptoms: - Script compiles but doesn't run the example - Java processes stay running in background - Can't start new examples</p> <p>Why This Happens: - Maven daemon or Java processes didn't terminate properly - Previous run crashed or was forcefully stopped</p> <p>Solution - Kill All Processes:</p> <pre><code># Windows CMD\ntaskkill /F /IM java.exe         # Kill all Java processes\ntaskkill /F /IM mvnd.exe         # Kill Maven daemon\n\n# Or use run.bat\nrun.bat stop                     # Stop Maven daemon\n.\\run.bat stop                   # PowerShell/Git Bash\n</code></pre> <p>Then try again: <pre><code>run.bat 10 1                     # Should work now!\n</code></pre></p>"},{"location":"RUNNING_EXAMPLES/#problem-2-compilation-errors-unresolved-compilation-problem","title":"Problem 2: Compilation Errors (\"Unresolved compilation problem\")","text":"<p>Symptoms: - Error: <code>java.lang.Error: Unresolved compilation problem</code> - Error: <code>BUILD FAILURE</code> during compilation - Random errors that shouldn't exist - Code was working before, now broken</p> <p>Why This Happens: - \u26a0\ufe0f Java build system is finicky! - Maven caches compiled files in the <code>target/</code> folder - Sometimes these cached files get corrupted - Daemon might be using old/stale versions</p> <p>Solution - Delete <code>target/</code> Folder:</p> <p>Java projects have a magical \"turn it off and on again\" button: delete the <code>target/</code> folder!</p>"},{"location":"RUNNING_EXAMPLES/#windows-cmd","title":"Windows CMD:","text":"<pre><code>rmdir /s /q target               # Delete target folder\nrun.bat 11 2                     # Next run.bat rebuilds everything\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#windows-powershell","title":"Windows PowerShell:","text":"<pre><code>Remove-Item -Recurse -Force target\n.\\run.bat 11 2\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#git-bash-linux","title":"Git Bash / Linux:","text":"<pre><code>rm -rf target\n./run.bat 11 2\n</code></pre> <p>What Happens When You Delete <code>target/</code>:</p> <ol> <li>You delete: All compiled <code>.class</code> files, generated protobuf files, Maven caches</li> <li>Next <code>run.bat</code> automatically:</li> <li>Recreates <code>target/</code> folder</li> <li>Regenerates all protobuf files from <code>.proto</code> sources</li> <li>Recompiles all <code>.java</code> files to <code>.class</code> files</li> <li>Starts with a clean slate!</li> </ol> <p>This works 99% of the time! It's the standard way to fix weird Java compilation issues.</p>"},{"location":"RUNNING_EXAMPLES/#problem-3-no-connection-or-mt5-errors","title":"Problem 3: \"No Connection\" or MT5 Errors","text":"<p>Symptoms: - Error: <code>TERMINAL_MANAGER_CREATE_TERMINAL_INSTANCE_ERROR</code> - Error: <code>GetServersDataByClusterName error</code> - Error: <code>TRADE_RETCODE_CONNECTION - No connection with trade server</code></p> <p>Why This Happens: - MT5 terminal is not running - MetaRPC gRPC server is not running - Lost connection during trade execution</p> <p>Solution:</p> <ol> <li>Check MT5 Terminal is running</li> <li>Check MetaRPC server is running</li> <li>Restart both if needed</li> <li>If error persists - might be temporary MT5 server issue, try again</li> </ol>"},{"location":"RUNNING_EXAMPLES/#understanding-the-build-process","title":"Understanding the Build Process","text":""},{"location":"RUNNING_EXAMPLES/#what-is-target-folder","title":"What is <code>target/</code> Folder?","text":"<p>The <code>target/</code> folder is where Maven puts your compiled files:</p> <pre><code>target/\n\u251c\u2500\u2500 classes/                          # Only YOUR compiled code\n\u2502   \u251c\u2500\u2500 Program.class\n\u2502   \u251c\u2500\u2500 io/metarpc/mt5/              # YOUR wrappers (MT5Account, MT5Service, MT5Sugar)\n\u2502   \u2502   \u251c\u2500\u2500 MT5Account.class\n\u2502   \u2502   \u251c\u2500\u2500 MT5Service.class\n\u2502   \u2502   \u2514\u2500\u2500 MT5Sugar.class\n\u2502   \u251c\u2500\u2500 examples/                     # YOUR examples\n\u2502   \u251c\u2500\u2500 orchestrators/                # YOUR orchestrators\n\u2502   \u2514\u2500\u2500 presets/                      # YOUR presets\n\u2514\u2500\u2500 maven-status/                     # Maven build metadata\n</code></pre> <p>Important: This shows ONLY your local code that gets compiled from <code>src/main/java/</code>.</p> <p>Proto classes are NOT here! The gRPC proto classes (<code>mt5_term_api.*</code>, <code>mrpc.*</code>) come from the pre-compiled MetaRPC JAR downloaded from JitPack and stored in your Maven cache:</p> <pre><code>~/.m2/repository/com/github/MetaRPC/JavaMT5/-SNAPSHOT/\n\u2514\u2500\u2500 JavaMT5--SNAPSHOT.jar            # Contains all proto-generated classes\n    \u251c\u2500\u2500 mt5_term_api/                # Proto classes (NOT in your target/)\n    \u2502   \u251c\u2500\u2500 AccountInformation$...class\n    \u2502   \u251c\u2500\u2500 Connection$...class\n    \u2502   \u251c\u2500\u2500 TradeFunctions$...class\n    \u2502   \u2514\u2500\u2500 ...\n    \u2514\u2500\u2500 mrpc/\n        \u2514\u2500\u2500 ...\n</code></pre> <p>Your code (<code>MT5Account</code>, <code>MT5Service</code>, <code>MT5Sugar</code>) imports these proto classes from the JAR, not from <code>target/</code>.</p>"},{"location":"RUNNING_EXAMPLES/#build-steps-what-mvnd-compile-does","title":"Build Steps (What <code>mvnd compile</code> Does)","text":"<ol> <li>Download dependencies (first run only)</li> <li>MetaRPC JAR from JitPack (contains all proto classes)</li> <li>gRPC runtime, Protobuf runtime, Gson</li> <li>All cached in <code>~/.m2/repository/</code></li> <li> <p>Your code does NOT compile proto files - they're already compiled in the JAR!</p> </li> <li> <p>Compile only YOUR local code</p> </li> <li><code>src/main/java/**/*.java</code> \u2192 <code>target/classes/**/*.class</code></li> <li>This includes: MT5Account, MT5Service, MT5Sugar, examples, orchestrators, presets</li> <li> <p>Proto classes are imported from the MetaRPC JAR, not compiled locally</p> </li> <li> <p>Copy resources</p> </li> <li><code>appsettings.json</code> \u2192 <code>target/classes/</code></li> </ol>"},{"location":"RUNNING_EXAMPLES/#why-delete-target-fixes-everything","title":"Why Delete <code>target/</code> Fixes Everything","text":"<p>When you delete <code>target/</code>, Maven must recompile everything from scratch:</p> <ul> <li>No cached <code>.class</code> files \u2192 everything recompiled fresh</li> <li>No stale compiled code \u2192 clean compilation</li> <li>No daemon confusion \u2192 clean state</li> <li>Dependencies remain in <code>~/.m2/</code> \u2192 no re-download needed</li> </ul> <p>This is why it's the #1 troubleshooting step for Java projects!</p>"},{"location":"RUNNING_EXAMPLES/#how-runbat-works","title":"How <code>run.bat</code> Works","text":"<p>When you run <code>run.bat 7</code>:</p> <pre><code># 1. run.bat calls:\nmvnd compile exec:java -Dexec.args=\"7\"\n\n# 2. This does:\n- Compile: Build all Java files in src/main/java/\n- exec:java: Run Program.java with argument \"7\"\n\n# 3. Program.java routes to SimpleTradingScenario\n# 4. Your code executes\n</code></pre> <p>That's it! Maven handles all dependencies automatically: - Downloads MetaRPC library from JitPack (first run only) - Sets up classpath with all required JARs - Compiles and runs your code</p>"},{"location":"RUNNING_EXAMPLES/#pro-tips","title":"Pro Tips","text":""},{"location":"RUNNING_EXAMPLES/#faster-development-workflow","title":"Faster Development Workflow","text":"<pre><code># Kill processes + clean rebuild in one go\nrun.bat stop &amp;&amp; rmdir /s /q target &amp;&amp; run.bat 7\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#check-whats-running","title":"Check What's Running","text":"<pre><code># Windows - See all Java processes\ntasklist | findstr java\n\n# See Maven daemon status\nmvnd --status\n</code></pre>"},{"location":"RUNNING_EXAMPLES/#multiple-terminal-workflow","title":"Multiple Terminal Workflow","text":"<p>If you're testing multiple examples:</p> <ol> <li> <p>Terminal 1: Run first example    <pre><code>run.bat 10 1\n</code></pre></p> </li> <li> <p>Terminal 2: Clean and run different example    <pre><code>run.bat stop\nrmdir /s /q target\nrun.bat 11 2\n</code></pre></p> </li> </ol> <p>This way you don't interfere with running examples.</p>"},{"location":"RUNNING_EXAMPLES/#summary","title":"Summary","text":"Problem Solution Script hangs or doesn't run <code>taskkill /F /IM java.exe</code> + <code>run.bat stop</code> Compilation errors Delete <code>target/</code> folder, next <code>run.bat</code> rebuilds MT5 connection errors Check MT5 terminal and MetaRPC server are running Want clean build Delete <code>target/</code>, run.bat will regenerate everything <p>Remember: Deleting <code>target/</code> is safe! It's just compiled files. Next <code>run.bat</code> will rebuild automatically.</p>"},{"location":"RUNNING_EXAMPLES/#need-more-help","title":"Need More Help?","text":"<ul> <li>See <code>Program.java</code> header for all commands (located in <code>src/main/java/Program.java</code>)</li> <li>Check GETTING_STARTED.md for initial setup</li> <li>Review PROJECT_MAP.md for codebase structure</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/","title":"MT5Account - Master Overview","text":"<p>One page to orient fast: what lives where, how to choose the right API, and jump links to every overview and method spec in this docs set.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#start-here-section-overviews","title":"\ud83d\udea6 Start here - Section Overviews","text":"<ul> <li> <p>Account_Information - Overview   Account balance/equity/margin/leverage, complete snapshot or single properties.</p> </li> <li> <p>Symbol_Information - Overview   Quotes, symbol properties, trading rules, tick values, Market Watch management.</p> </li> <li> <p>Positions_And_Orders - Overview   Open positions, pending orders, historical deals, order history.</p> </li> <li> <p>Market_Depth_DOM - Overview   Level II quotes, order book data, market depth subscription.</p> </li> <li> <p>Trading - Overview   Order execution, position management, margin/profit calculations, trade validation.</p> </li> <li> <p>Subscriptions - Overview   Real-time streams: ticks, trades, profit updates, transaction log.</p> </li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#how-to-pick-an-api","title":"\ud83e\udded How to pick an API","text":"If you need\u2026 Go to\u2026 Typical calls Account snapshot Account_Information <code>accountSummary</code>, <code>accountInfoDouble</code>, <code>accountInfoInteger</code>, <code>accountInfoString</code> Quotes &amp; symbol properties Symbol_Information <code>symbolInfoTick</code>, <code>symbolInfoDouble</code>, <code>symbolInfoInteger</code>, <code>tickValueWithSize</code> Current positions &amp; orders Positions_And_Orders <code>positionsTotal</code>, <code>openedOrders</code>, <code>openedOrdersTickets</code> Historical trades Positions_And_Orders <code>orderHistory</code>, <code>positionsHistory</code> Level II / Order book Market_Depth_DOM <code>marketBookAdd</code>, <code>marketBookGet</code>, <code>marketBookRelease</code> Trading operations Trading <code>orderSend</code>, <code>orderModify</code>, <code>orderClose</code> Pre-trade calculations Trading <code>orderCalcMargin</code>, <code>orderCalcProfit</code>, <code>orderCheck</code> Real-time updates Subscriptions <code>onSymbolTick</code>, <code>onTrade</code>, <code>onPositionProfit</code>, <code>onTradeTransaction</code>"},{"location":"MT5Account/MT5Account.Master.Overview/#usage-pattern-grpc-protocol","title":"\ud83d\udd0c Usage pattern (gRPC protocol)","text":"<p>Every method follows the same shape:</p> <ul> <li>Proto Service/Method: <code>Service.Method(Request) \u2192 Reply</code></li> <li>Java wrapper: <code>MT5Account.method(...)</code></li> <li>Reply structure: <code>Reply.getData()</code> payload (proto-generated objects)</li> <li>Return codes: <code>10009</code> = success; other codes = check error message</li> </ul> <p>Timestamps = UTC (<code>google.protobuf.Timestamp</code>). For streaming subscriptions, use <code>StreamObserver&lt;T&gt;</code> pattern.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#full-index-all-method-specs","title":"\ud83d\udcda Full Index \u00b7 All Method Specs","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#account-information","title":"\ud83d\udcc4 Account Information","text":"<ul> <li>Overview: Account_Information.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#complete-snapshot","title":"Complete Snapshot","text":"<ul> <li>AccountSummary.md - All account info at once (balance, equity, margin, etc.)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#individual-properties","title":"Individual Properties","text":"<ul> <li>AccountInfoDouble.md - Single double value (balance, equity, margin, profit, etc.)</li> <li>AccountInfoInteger.md - Single integer value (login, leverage, limit orders, etc.)</li> <li>AccountInfoString.md - Single string value (name, server, currency, company)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#symbol-information","title":"\ud83d\udcca Symbol Information","text":"<ul> <li>Overview: Symbol_Information.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#current-quotes","title":"Current Quotes","text":"<ul> <li>SymbolInfoTick.md - Current quote for symbol (bid, ask, last, volume, time)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#symbol-inventory-management","title":"Symbol Inventory &amp; Management","text":"<ul> <li>SymbolsTotal.md - Count of available symbols</li> <li>SymbolName.md - Get symbol name by index</li> <li>SymbolSelect.md - Enable/disable symbol in Market Watch</li> <li>SymbolExist.md - Check if symbol exists</li> <li>SymbolIsSynchronized.md - Check symbol data sync status</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#symbol-properties","title":"Symbol Properties","text":"<ul> <li>SymbolInfoDouble.md - Single double property (bid, ask, point, volume min/max, etc.)</li> <li>SymbolInfoInteger.md - Single integer property (digits, spread, stops level, etc.)</li> <li>SymbolInfoString.md - Single string property (description, currency, path)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#trading-calculations","title":"Trading Calculations","text":"<ul> <li>TickValueWithSize.md - Batch tick values for multiple symbols</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#positions-orders","title":"\ud83d\udce6 Positions &amp; Orders","text":"<ul> <li>Overview: Positions_And_Orders.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#current-state","title":"Current State","text":"<ul> <li>PositionsTotal.md - Count of open positions</li> <li>OpenedOrders.md - Full details of all open positions and pending orders</li> <li>OpenedOrdersTickets.md - Ticket numbers only (lightweight)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#historical-data","title":"Historical Data","text":"<ul> <li>OrderHistory.md - Historical orders within time range</li> <li>PositionsHistory.md - Historical deals (executed trades) within time range</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#market-depth-dom","title":"\ud83d\udcc8 Market Depth (DOM)","text":"<ul> <li>Overview: Market_Depth_DOM.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#level-ii-quotes","title":"Level II Quotes","text":"<ul> <li>MarketBookAdd.md - Subscribe to Market Depth for symbol</li> <li>MarketBookGet.md - Get current order book data</li> <li>MarketBookRelease.md - Unsubscribe from Market Depth</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#trading-actions","title":"\ud83d\udee0 Trading Actions","text":"<ul> <li>Overview: Trading.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#order-execution-management","title":"Order Execution &amp; Management","text":"<ul> <li>OrderSend.md - Place market or pending orders</li> <li>OrderModify.md - Modify SL/TP or order parameters</li> <li>OrderClose.md - Close positions or delete pending orders</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#pre-trade-calculations","title":"Pre-Trade Calculations","text":"<ul> <li>OrderCalcMargin.md - Calculate margin required for trade</li> <li>OrderCalcProfit.md - Calculate profit/loss for trade scenario</li> <li>OrderCheck.md - Validate trade request before execution</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#subscriptions-streaming","title":"\ud83d\udce1 Subscriptions (Streaming)","text":"<ul> <li>Overview: Subscriptions.Overview.md</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#real-time-price-updates","title":"Real-Time Price Updates","text":"<ul> <li>OnSymbolTick.md - Real-time tick stream for symbols</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#trading-events","title":"Trading Events","text":"<ul> <li>OnTrade.md - Position/order changes (opened, closed, modified)</li> <li>OnTradeTransaction.md - Detailed transaction log (complete audit trail)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#position-monitoring","title":"Position Monitoring","text":"<ul> <li>OnPositionProfit.md - Periodic profit/loss updates</li> <li>OnPositionsAndPendingOrdersTickets.md - Periodic ticket lists (lightweight)</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#quick-navigation-by-use-case","title":"\ud83c\udfaf Quick Navigation by Use Case","text":"I want to... Use this method ACCOUNT INFORMATION Get complete account snapshot accountSummary Get account balance accountInfoDouble (BALANCE) Get account equity accountInfoDouble (EQUITY) Get account leverage accountInfoInteger (LEVERAGE) Get account currency accountInfoString (CURRENCY) SYMBOL INFORMATION Get current price for symbol symbolInfoTick List all available symbols symbolsTotal + symbolName Add symbol to Market Watch symbolSelect (true) Get symbol digits (decimal places) symbolInfoInteger (DIGITS) Get point size for symbol symbolInfoDouble (POINT) Get symbol volume limits symbolInfoDouble (VOLUME_MIN/MAX/STEP) Get tick values for symbols tickValueWithSize POSITIONS &amp; ORDERS Count open positions positionsTotal Get all open positions (full details) openedOrders Get position ticket numbers only openedOrdersTickets Get historical orders orderHistory Get historical deals/trades positionsHistory MARKET DEPTH Subscribe to Level II quotes marketBookAdd Get order book data marketBookGet Unsubscribe from Level II marketBookRelease TRADING OPERATIONS Open market BUY position orderSend (type=BUY) Open market SELL position orderSend (type=SELL) Place BUY LIMIT order orderSend (type=BUY_LIMIT) Place SELL LIMIT order orderSend (type=SELL_LIMIT) Place BUY STOP order orderSend (type=BUY_STOP) Place SELL STOP order orderSend (type=SELL_STOP) Modify SL/TP of position orderModify Close a position orderClose Delete pending order orderClose Calculate margin before trade orderCalcMargin Calculate profit for trade orderCalcProfit Validate trade before execution orderCheck REAL-TIME SUBSCRIPTIONS Stream live prices onSymbolTick Monitor trade events onTrade Track profit changes onPositionProfit Monitor ticket changes onPositionsAndPendingOrdersTickets Detailed transaction log onTradeTransaction"},{"location":"MT5Account/MT5Account.Master.Overview/#api-architecture","title":"\ud83c\udfd7\ufe0f API Architecture","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#layer-1-mt5account-low-level","title":"Layer 1: MT5Account (Low-Level)","text":"<p>What: Direct proto/gRPC communication with MT5 terminal.</p> <p>When to use: - Need full control over protocol - Building custom wrappers - Proto-level integration required</p> <p>Characteristics: - Works with proto Request/Response objects - Raw gRPC method calls - Complete access to all MT5 functions - Highest complexity</p> <p>Location: <code>src/main/java/io/metarpc/mt5/MT5Account.java</code></p> <p>Documentation: This folder (you are here!)</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#layer-2-mt5service","title":"Layer 2: MT5Service","text":"<p>What: Simplified wrapper methods without proto complexity.</p> <p>When to use: - Want simplified API but not auto-normalization - Building custom convenience layers - Need direct data returns</p> <p>Characteristics: - Simple method signatures - Type conversions (proto \u2192 Java primitives) - No proto objects in return values - No auto-normalization</p> <p>Location: <code>src/main/java/io/metarpc/mt5/MT5Service.java</code></p>"},{"location":"MT5Account/MT5Account.Master.Overview/#layer-3-mt5sugar","title":"Layer 3: MT5Sugar","text":"<p>What: High-level convenience API with ~50 smart methods.</p> <p>When to use: - Most trading scenarios (95% of cases) - Want auto-normalization - Need risk management helpers - Building strategies quickly</p> <p>Characteristics: - Auto-normalization of volumes/prices - Risk-based position sizing - Batch operations - Smart helpers</p> <p>Location: <code>src/main/java/io/metarpc/mt5/MT5Sugar.java</code></p> <p>Documentation: MT5Sugar.Overview.md</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#learning-path","title":"\ud83c\udf93 Learning Path","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#beginner-start-high-mt5sugar","title":"Beginner: Start High (MT5Sugar)","text":"<pre><code>1. Read: MT5Sugar.Overview.md\n2. Use: High-level convenience methods\n3. Run: examples/sugar/\n4. Drop down when needed\n</code></pre> <p>Recommendation: Start with MT5Sugar for easiest learning curve.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#intermediate-understand-wrappers-mt5service","title":"Intermediate: Understand Wrappers (MT5Service)","text":"<pre><code>1. Study: How MT5Service wraps MT5Account\n2. Compare: Wrapper vs low-level implementations\n3. Run: examples/services/\n4. Use: When auto-normalization not desired\n</code></pre>"},{"location":"MT5Account/MT5Account.Master.Overview/#advanced-master-protocol-mt5account","title":"Advanced: Master Protocol (MT5Account)","text":"<pre><code>1. Read: This documentation folder (MT5Account/)\n2. Study: Proto definitions (src/main/proto/)\n3. Run: examples/lowlevel/\n4. Understand: Complete proto/gRPC communication\n</code></pre> <p>Goal: Deep understanding of MT5 protocol and terminal communication.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#related-documentation","title":"\ud83d\udd17 Related Documentation","text":"<ul> <li>PROJECT_MAP.md - Complete project structure</li> <li>MT5Sugar.Overview.md - High-level convenience API (Layer 3)</li> <li>Orchestrators.Overview.md - Trading strategy implementations</li> <li>GLOSSARY.md - Project terminology</li> <li>GETTING_STARTED.md - Complete learning guide</li> </ul>"},{"location":"MT5Account/MT5Account.Master.Overview/#key-concepts","title":"\ud83d\udca1 Key Concepts","text":""},{"location":"MT5Account/MT5Account.Master.Overview/#proto-return-codes","title":"Proto Return Codes","text":"<ul> <li>10009 = Success / DONE</li> <li>10004 = Requote</li> <li>10006 = Request rejected</li> <li>10013 = Invalid request</li> <li>10014 = Invalid volume</li> <li>10015 = Invalid price</li> <li>10016 = Invalid stops</li> <li>10018 = Market closed</li> <li>10019 = Not enough money</li> </ul> <p>Always check <code>returnedCode</code> field in trading operations.</p>"},{"location":"MT5Account/MT5Account.Master.Overview/#important-notes","title":"\u26a0\ufe0f Important Notes","text":"<ul> <li>Demo account first: Always test on demo before live trading.</li> <li>Check return codes: Every trading operation returns status code.</li> <li>Validate parameters: Use orderCheck() before orderSend().</li> <li>Handle errors: Network/protocol errors can occur.</li> <li>Thread safety: Streams execute on background threads.</li> <li>Resource cleanup: Unsubscribe from streams when done.</li> <li>UTC timestamps: All times are in UTC, not local time.</li> <li>Broker limitations: Not all brokers support all features (DOM, hedging, etc.).</li> </ul> <p>\"Trade safe, code clean, and may your proto buffers never overflow.\"</p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/","title":"\u2705 Getting Individual Account Double Properties","text":"<p>Request: single <code>double</code> property from MT5 account. Fetch specific numeric properties like balance, equity, margin, profit, etc.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.accountInfoDouble(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountInformation</code></li> <li>Proto definition: <code>AccountInfoDouble</code> (defined in <code>mt5-term-api-account-information.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountInformation</code></li> <li>Method: <code>AccountInfoDouble(AccountInfoDoubleRequest) \u2192 AccountInfoDoubleReply</code></li> <li>Low\u2011level client (generated): <code>AccountInformationGrpc.AccountInformationBlockingStub.accountInfoDouble(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Retrieves a specific double-precision property of the trading account.\n     * Use this to get individual numeric values such as BALANCE, EQUITY, MARGIN, PROFIT, etc.\n     *\n     * @param propertyType The specific property to retrieve (e.g., ACCOUNT_BALANCE, ACCOUNT_EQUITY)\n     * @return Response containing the requested double value\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountInformation.AccountInfoDoubleReply accountInfoDouble(\n        Mt5TermApiAccountInformation.AccountInfoDoublePropertyType propertyType) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>AccountInfoDoubleRequest { property_id: AccountInfoDoublePropertyType }</code></p> <p>Reply message: <code>AccountInfoDoubleReply { data: AccountInfoDoubleData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>propertyType</code> <code>AccountInfoDoublePropertyType</code> \u2705 Property to retrieve (see enum below)"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#output-accountinfodoubledata","title":"\u2b06\ufe0f Output - <code>AccountInfoDoubleData</code>","text":"Field Type Description <code>requested_value</code> <code>double</code> The requested property value <p>Access the value using <code>reply.getData().getRequestedValue()</code>.</p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#accountinfodoublepropertytype","title":"<code>AccountInfoDoublePropertyType</code>","text":"Enum Value Value Description <code>ACCOUNT_BALANCE</code> 0 Account balance in the deposit currency <code>ACCOUNT_CREDIT</code> 1 Account credit in the deposit currency <code>ACCOUNT_PROFIT</code> 2 Current profit of an account in the deposit currency <code>ACCOUNT_EQUITY</code> 3 Account equity in the deposit currency (Balance + Profit) <code>ACCOUNT_MARGIN</code> 4 Account margin used in the deposit currency <code>ACCOUNT_MARGIN_FREE</code> 5 Free margin of an account in the deposit currency <code>ACCOUNT_MARGIN_LEVEL</code> 6 Account margin level in percents <code>ACCOUNT_MARGIN_SO_CALL</code> 7 Margin call level. Depending on the set ACCOUNT_MARGIN_SO_MODE is expressed in percents or in the deposit currency <code>ACCOUNT_MARGIN_SO_SO</code> 8 Margin stop out level. Depending on the set ACCOUNT_MARGIN_SO_MODE is expressed in percents or in the deposit currency <code>ACCOUNT_MARGIN_INITIAL</code> 9 Initial margin. The amount reserved on an account to cover the margin of all pending orders <code>ACCOUNT_MARGIN_MAINTENANCE</code> 10 Maintenance margin. The minimum equity reserved on an account to cover the minimum amount of all open positions <code>ACCOUNT_ASSETS</code> 11 The current assets of an account <code>ACCOUNT_LIABILITIES</code> 12 The current liabilities on an account <code>ACCOUNT_COMMISSION_BLOCKED</code> 13 The current blocked commission amount on an account"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Single RPC returning one specific <code>double</code> property of the account.</li> <li>Why you need it. When you only need one property (e.g., margin level before placing an order) instead of fetching the full account summary.</li> <li>Performance. Lightweight call - ideal for frequent checks of specific properties.</li> <li>Alternative. Use <code>accountSummary()</code> if you need multiple properties at once.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Check a single account property (margin, equity, profit, etc.) without fetching all account data.</li> <li>Monitor specific properties frequently (e.g., margin level for risk management).</li> <li>Verify free margin before placing trades.</li> <li>Calculate margin requirements dynamically.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Prefer <code>accountSummary()</code> if you need multiple properties - it's more efficient to fetch all data in one call.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code> to handle transient gRPC errors.</li> <li>All exceptions are wrapped in <code>ApiExceptionMT5</code> for consistent error handling.</li> <li>For UI dashboards displaying multiple properties, use <code>accountSummary()</code> instead.</li> <li>The method is thread-safe and can be called from multiple threads.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#1-check-margin-level-before-placing-order","title":"1) Check margin level before placing order","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountInformation.*;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Check margin level\n            AccountInfoDoubleReply reply = account.accountInfoDouble(\n                AccountInfoDoublePropertyType.ACCOUNT_MARGIN_LEVEL\n            );\n            double marginLevel = reply.getData().getRequestedValue();\n\n            if (marginLevel &lt; 200.0) {\n                System.out.printf(\"\u26a0\ufe0f Warning: Low margin level %.2f%%%n\", marginLevel);\n                // Skip trading or reduce position size\n            } else {\n                System.out.printf(\"\u2705 Margin level OK: %.2f%%%n\", marginLevel);\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#2-get-current-profit","title":"2) Get current profit","text":"<pre><code>// Monitor floating profit/loss\nvar reply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_PROFIT\n);\ndouble profit = reply.getData().getRequestedValue();\n\nSystem.out.printf(\"Current P/L: %.2f%n\", profit);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#3-check-free-margin","title":"3) Check free margin","text":"<pre><code>// Verify free margin before opening position\nvar reply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_MARGIN_FREE\n);\ndouble freeMargin = reply.getData().getRequestedValue();\n\nSystem.out.printf(\"Free margin: %.2f%n\", freeMargin);\n\nif (freeMargin &lt; 100.0) {\n    System.out.println(\"\u26a0\ufe0f Insufficient free margin\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#4-monitor-margin-usage","title":"4) Monitor margin usage","text":"<pre><code>// Fetch margin-related properties\nvar marginReply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_MARGIN\n);\nvar marginFreeReply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_MARGIN_FREE\n);\nvar marginLevelReply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_MARGIN_LEVEL\n);\n\ndouble margin = marginReply.getData().getRequestedValue();\ndouble marginFree = marginFreeReply.getData().getRequestedValue();\ndouble marginLevel = marginLevelReply.getData().getRequestedValue();\n\nSystem.out.printf(\"Margin:       %.2f%n\", margin);\nSystem.out.printf(\"Free:         %.2f%n\", marginFree);\nSystem.out.printf(\"Level:        %.2f%%%n\", marginLevel);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#5-compare-equity-vs-balance","title":"5) Compare equity vs balance","text":"<pre><code>// Calculate floating P/L by comparing equity and balance\nvar balanceReply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_BALANCE\n);\nvar equityReply = account.accountInfoDouble(\n    AccountInfoDoublePropertyType.ACCOUNT_EQUITY\n);\n\ndouble balance = balanceReply.getData().getRequestedValue();\ndouble equity = equityReply.getData().getRequestedValue();\ndouble floatingPL = equity - balance;\n\nSystem.out.printf(\"Balance:      %.2f%n\", balance);\nSystem.out.printf(\"Equity:       %.2f%n\", equity);\nSystem.out.printf(\"Floating P/L: %.2f%n\", floatingPL);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#6-helper-method-for-cleaner-code","title":"6) Helper method for cleaner code","text":"<pre><code>public class AccountHelper {\n    private final MT5Account account;\n\n    public AccountHelper(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Helper to get double property directly\n     */\n    public double getDoubleProperty(AccountInfoDoublePropertyType property)\n            throws ApiExceptionMT5 {\n        var reply = account.accountInfoDouble(property);\n        return reply.getData().getRequestedValue();\n    }\n\n    /**\n     * Check if margin level is safe\n     */\n    public boolean isMarginLevelSafe(double minimumLevel) throws ApiExceptionMT5 {\n        double marginLevel = getDoubleProperty(\n            AccountInfoDoublePropertyType.ACCOUNT_MARGIN_LEVEL\n        );\n        return marginLevel &gt;= minimumLevel;\n    }\n\n    /**\n     * Get floating P/L\n     */\n    public double getFloatingPL() throws ApiExceptionMT5 {\n        return getDoubleProperty(AccountInfoDoublePropertyType.ACCOUNT_PROFIT);\n    }\n}\n\n// Usage\nAccountHelper helper = new AccountHelper(account);\n\nif (helper.isMarginLevelSafe(200.0)) {\n    System.out.println(\"Safe to trade\");\n}\n\ndouble pl = helper.getFloatingPL();\nSystem.out.printf(\"Current P/L: %.2f%n\", pl);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#7-risk-monitoring-loop","title":"7) Risk monitoring loop","text":"<pre><code>import java.util.concurrent.TimeUnit;\n\npublic class RiskMonitor {\n    public static void monitorMargin(MT5Account account, double warningLevel) {\n        while (true) {\n            try {\n                var reply = account.accountInfoDouble(\n                    AccountInfoDoublePropertyType.ACCOUNT_MARGIN_LEVEL\n                );\n                double marginLevel = reply.getData().getRequestedValue();\n\n                if (marginLevel &lt; warningLevel) {\n                    System.out.printf(\"\u26a0\ufe0f [%s] ALERT: Margin level %.2f%% (threshold %.2f%%)%n\",\n                        java.time.LocalTime.now(),\n                        marginLevel,\n                        warningLevel);\n                } else {\n                    System.out.printf(\"[%s] Margin level: %.2f%%%n\",\n                        java.time.LocalTime.now(),\n                        marginLevel);\n                }\n\n                TimeUnit.SECONDS.sleep(5);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"API Error: \" + e.getMessage());\n                try {\n                    TimeUnit.SECONDS.sleep(1);\n                } catch (InterruptedException ie) {\n                    break;\n                }\n            } catch (InterruptedException e) {\n                break;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoDouble/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiAccountInformation.AccountInfoDoubleRequest request =\n    Mt5TermApiAccountInformation.AccountInfoDoubleRequest.newBuilder()\n        .setPropertyId(Mt5TermApiAccountInformation.AccountInfoDoublePropertyType.ACCOUNT_BALANCE)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountInformation.AccountInfoDoubleReply reply = accountInformationClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .accountInfoDouble(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\ndouble value = reply.getData().getRequestedValue();\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/","title":"\u2705 Getting Individual Account Integer Properties","text":"<p>Request: single <code>long</code> property from MT5 account. Fetch specific integer properties like login, leverage, trade mode, limits, etc.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.accountInfoInteger(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountInformation</code></li> <li>Proto definition: <code>AccountInfoInteger</code> (defined in <code>mt5-term-api-account-information.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountInformation</code></li> <li>Method: <code>AccountInfoInteger(AccountInfoIntegerRequest) \u2192 AccountInfoIntegerReply</code></li> <li>Low\u2011level client (generated): <code>AccountInformationGrpc.AccountInformationBlockingStub.accountInfoInteger(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Retrieves a specific integer property of the trading account.\n     * Use this to get values such as LOGIN, LEVERAGE, TRADE_MODE, LIMIT_ORDERS, etc.\n     *\n     * @param propertyType The specific property to retrieve (e.g., ACCOUNT_LOGIN, ACCOUNT_LEVERAGE)\n     * @return Response containing the requested integer value\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountInformation.AccountInfoIntegerReply accountInfoInteger(\n        Mt5TermApiAccountInformation.AccountInfoIntegerPropertyType propertyType) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>AccountInfoIntegerRequest { property_id: AccountInfoIntegerPropertyType }</code></p> <p>Reply message: <code>AccountInfoIntegerReply { data: AccountInfoIntegerData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>propertyType</code> <code>AccountInfoIntegerPropertyType</code> \u2705 Property to retrieve (see enum below)"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#output-accountinfointegerdata","title":"\u2b06\ufe0f Output - <code>AccountInfoIntegerData</code>","text":"Field Type Description <code>requested_value</code> <code>long</code> The requested property value (int64) <p>Access the value using <code>reply.getData().getRequestedValue()</code>.</p> <p>Important: All properties return <code>long</code> (int64), including boolean flags where <code>1</code> = true and <code>0</code> = false.</p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#accountinfointegerpropertytype","title":"<code>AccountInfoIntegerPropertyType</code>","text":"Enum Value Value Return Type Description <code>ACCOUNT_LOGIN</code> 0 <code>long</code> Account number <code>ACCOUNT_TRADE_MODE</code> 1 <code>int</code> (enum) Account trade mode: 0=Demo, 1=Contest, 2=Real <code>ACCOUNT_LEVERAGE</code> 2 <code>long</code> Account leverage (e.g., <code>100</code> for 1:100) <code>ACCOUNT_LIMIT_ORDERS</code> 3 <code>int</code> Maximum allowed number of open positions and active pending orders (in total). <code>0</code> = unlimited <code>ACCOUNT_MARGIN_SO_MODE</code> 4 <code>int</code> (enum) Mode for setting the minimal allowed margin <code>ACCOUNT_TRADE_ALLOWED</code> 5 <code>long</code> (1 or 0) Allowed trade for the current account: 1=allowed, 0=disabled <code>ACCOUNT_TRADE_EXPERT</code> 6 <code>long</code> (1 or 0) Allowed trade for an Expert Advisor: 1=allowed, 0=disabled <code>ACCOUNT_MARGIN_MODE</code> 7 <code>int</code> (enum) Margin calculation mode <code>ACCOUNT_CURRENCY_DIGITS</code> 8 <code>int</code> The number of decimal places in the account currency, which are required for an accurate display of trading results <code>ACCOUNT_FIFO_CLOSE</code> 9 <code>long</code> (1 or 0) An indication showing that positions can only be closed by FIFO rule. If the property value is set to 1, then each symbol positions will be closed in the same order, in which they are opened, starting with the oldest one. In case of an attempt to close positions in a different order, the trader will receive an appropriate error. <code>ACCOUNT_HEDGE_ALLOWED</code> 10 <code>long</code> (1 or 0) Allowed opposite positions on a single symbol (hedging): 1=allowed, 0=disabled"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Single RPC returning one specific <code>long</code> property of the account.</li> <li>Why you need it. When you only need one integer property (e.g., leverage, login, trade mode) instead of fetching the full account summary.</li> <li>Performance. Lightweight call - ideal for quick checks of specific properties.</li> <li>Type note. All properties return <code>long</code> (int64), even boolean flags (1 = true, 0 = false).</li> <li>Alternative. Use <code>accountSummary()</code> if you need multiple properties at once.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Check a single integer account property without fetching all account data.</li> <li>Verify account leverage before calculating position sizes.</li> <li>Check if trading is allowed (<code>ACCOUNT_TRADE_ALLOWED</code>, <code>ACCOUNT_TRADE_EXPERT</code>).</li> <li>Determine account trade mode (demo/contest/real).</li> <li>Check position limits (<code>ACCOUNT_LIMIT_ORDERS</code>).</li> <li>Verify FIFO close rules or hedging permissions.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Prefer <code>accountSummary()</code> if you need multiple properties - it's more efficient to fetch all data in one call.</li> <li>Boolean properties return <code>1</code> (true) or <code>0</code> (false) as <code>long</code> values.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code> to handle transient gRPC errors.</li> <li>All exceptions are wrapped in <code>ApiExceptionMT5</code> for consistent error handling.</li> <li>The method is thread-safe and can be called from multiple threads.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#1-get-account-login","title":"1) Get account login","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountInformation.*;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Retrieve account login number\n            AccountInfoIntegerReply reply = account.accountInfoInteger(\n                AccountInfoIntegerPropertyType.ACCOUNT_LOGIN\n            );\n            long login = reply.getData().getRequestedValue();\n\n            System.out.printf(\"Account login: %d%n\", login);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#2-check-account-leverage","title":"2) Check account leverage","text":"<pre><code>// Get current leverage setting\nvar reply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_LEVERAGE\n);\nlong leverage = reply.getData().getRequestedValue();\n\nSystem.out.printf(\"Account leverage: 1:%d%n\", leverage);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#3-verify-trading-is-allowed","title":"3) Verify trading is allowed","text":"<pre><code>// Check if trading is enabled for this account\nvar tradeAllowedReply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_TRADE_ALLOWED\n);\nlong tradeAllowed = tradeAllowedReply.getData().getRequestedValue();\n\nif (tradeAllowed == 0) {\n    System.out.println(\"\u26a0\ufe0f Trading is disabled for this account\");\n    return;\n}\n\n// Check if EA trading is allowed\nvar expertAllowedReply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_TRADE_EXPERT\n);\nlong expertAllowed = expertAllowedReply.getData().getRequestedValue();\n\nif (expertAllowed == 0) {\n    System.out.println(\"\u26a0\ufe0f Expert Advisor trading is disabled\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#4-get-account-trade-mode","title":"4) Get account trade mode","text":"<pre><code>// Determine if account is demo, contest, or real\nvar reply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_TRADE_MODE\n);\nlong tradeMode = reply.getData().getRequestedValue();\n\nString modeLabel = switch ((int) tradeMode) {\n    case 0 -&gt; \"Demo\";\n    case 1 -&gt; \"Contest\";\n    case 2 -&gt; \"Real\";\n    default -&gt; \"Unknown\";\n};\n\nSystem.out.println(\"Account mode: \" + modeLabel);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#5-check-position-limits","title":"5) Check position limits","text":"<pre><code>// Get maximum allowed positions + pending orders\nvar reply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_LIMIT_ORDERS\n);\nlong limitOrders = reply.getData().getRequestedValue();\n\nif (limitOrders == 0) {\n    System.out.println(\"\u2705 No position limits\");\n} else {\n    System.out.printf(\"\u26a0\ufe0f Max positions + pending orders: %d%n\", limitOrders);\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#6-check-hedging-and-fifo-rules","title":"6) Check hedging and FIFO rules","text":"<pre><code>// Check if hedging is allowed\nvar hedgeReply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_HEDGE_ALLOWED\n);\nboolean hedgingAllowed = hedgeReply.getData().getRequestedValue() == 1;\n\n// Check if FIFO close is required\nvar fifoReply = account.accountInfoInteger(\n    AccountInfoIntegerPropertyType.ACCOUNT_FIFO_CLOSE\n);\nboolean fifoRequired = fifoReply.getData().getRequestedValue() == 1;\n\nSystem.out.println(\"Hedging allowed: \" + hedgingAllowed);\nSystem.out.println(\"FIFO close required: \" + fifoRequired);\n\nif (fifoRequired) {\n    System.out.println(\"\u26a0\ufe0f Positions must be closed in FIFO order\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#7-helper-method-for-cleaner-code","title":"7) Helper method for cleaner code","text":"<pre><code>public class AccountHelper {\n    private final MT5Account account;\n\n    public AccountHelper(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Helper to get integer property directly\n     */\n    public long getIntegerProperty(AccountInfoIntegerPropertyType property)\n            throws ApiExceptionMT5 {\n        var reply = account.accountInfoInteger(property);\n        return reply.getData().getRequestedValue();\n    }\n\n    /**\n     * Check if trading is allowed\n     */\n    public boolean isTradingAllowed() throws ApiExceptionMT5 {\n        return getIntegerProperty(AccountInfoIntegerPropertyType.ACCOUNT_TRADE_ALLOWED) == 1;\n    }\n\n    /**\n     * Check if EA trading is allowed\n     */\n    public boolean isExpertTradingAllowed() throws ApiExceptionMT5 {\n        return getIntegerProperty(AccountInfoIntegerPropertyType.ACCOUNT_TRADE_EXPERT) == 1;\n    }\n\n    /**\n     * Get account trade mode as string\n     */\n    public String getTradeMode() throws ApiExceptionMT5 {\n        long mode = getIntegerProperty(AccountInfoIntegerPropertyType.ACCOUNT_TRADE_MODE);\n        return switch ((int) mode) {\n            case 0 -&gt; \"Demo\";\n            case 1 -&gt; \"Contest\";\n            case 2 -&gt; \"Real\";\n            default -&gt; \"Unknown\";\n        };\n    }\n\n    /**\n     * Check if hedging is allowed\n     */\n    public boolean isHedgingAllowed() throws ApiExceptionMT5 {\n        return getIntegerProperty(AccountInfoIntegerPropertyType.ACCOUNT_HEDGE_ALLOWED) == 1;\n    }\n}\n\n// Usage\nAccountHelper helper = new AccountHelper(account);\n\nif (!helper.isTradingAllowed()) {\n    System.out.println(\"Trading is disabled!\");\n    return;\n}\n\nSystem.out.println(\"Trade mode: \" + helper.getTradeMode());\nSystem.out.println(\"Hedging allowed: \" + helper.isHedgingAllowed());\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#8-pre-trade-validation","title":"8) Pre-trade validation","text":"<pre><code>public class TradeValidator {\n    /**\n     * Validate account permissions before trading\n     */\n    public static boolean validateAccountForTrading(MT5Account account)\n            throws ApiExceptionMT5 {\n\n        // Check if manual trading is allowed\n        var tradeReply = account.accountInfoInteger(\n            AccountInfoIntegerPropertyType.ACCOUNT_TRADE_ALLOWED\n        );\n        if (tradeReply.getData().getRequestedValue() == 0) {\n            System.out.println(\"\u274c Manual trading is disabled\");\n            return false;\n        }\n\n        // Check if EA trading is allowed\n        var expertReply = account.accountInfoInteger(\n            AccountInfoIntegerPropertyType.ACCOUNT_TRADE_EXPERT\n        );\n        if (expertReply.getData().getRequestedValue() == 0) {\n            System.out.println(\"\u274c Expert Advisor trading is disabled\");\n            return false;\n        }\n\n        // Check trade mode\n        var modeReply = account.accountInfoInteger(\n            AccountInfoIntegerPropertyType.ACCOUNT_TRADE_MODE\n        );\n        long mode = modeReply.getData().getRequestedValue();\n        String modeStr = mode == 0 ? \"Demo\" : mode == 1 ? \"Contest\" : \"Real\";\n        System.out.printf(\"\u2705 Account mode: %s%n\", modeStr);\n\n        // Get leverage\n        var leverageReply = account.accountInfoInteger(\n            AccountInfoIntegerPropertyType.ACCOUNT_LEVERAGE\n        );\n        long leverage = leverageReply.getData().getRequestedValue();\n        System.out.printf(\"\u2705 Leverage: 1:%d%n\", leverage);\n\n        return true;\n    }\n}\n\n// Usage\nif (TradeValidator.validateAccountForTrading(account)) {\n    System.out.println(\"\u2705 Account validated - ready to trade\");\n} else {\n    System.out.println(\"\u274c Account validation failed\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoInteger/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiAccountInformation.AccountInfoIntegerRequest request =\n    Mt5TermApiAccountInformation.AccountInfoIntegerRequest.newBuilder()\n        .setPropertyId(Mt5TermApiAccountInformation.AccountInfoIntegerPropertyType.ACCOUNT_LOGIN)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountInformation.AccountInfoIntegerReply reply = accountInformationClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .accountInfoInteger(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nlong value = reply.getData().getRequestedValue();\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/","title":"\u2705 Getting Individual Account String Properties","text":"<p>Request: single <code>String</code> property from MT5 account. Fetch specific string properties like account name, server, currency, company, etc.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.accountInfoString(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountInformation</code></li> <li>Proto definition: <code>AccountInfoString</code> (defined in <code>mt5-term-api-account-information.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountInformation</code></li> <li>Method: <code>AccountInfoString(AccountInfoStringRequest) \u2192 AccountInfoStringReply</code></li> <li>Low\u2011level client (generated): <code>AccountInformationGrpc.AccountInformationBlockingStub.accountInfoString(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Retrieves a specific string property of the trading account.\n     * Use this to get textual information such as account NAME, SERVER, CURRENCY, or COMPANY.\n     *\n     * @param propertyType The specific property to retrieve (e.g., ACCOUNT_NAME, ACCOUNT_SERVER)\n     * @return Response containing the requested string value\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountInformation.AccountInfoStringReply accountInfoString(\n        Mt5TermApiAccountInformation.AccountInfoStringPropertyType propertyType) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>AccountInfoStringRequest { property_id: AccountInfoStringPropertyType }</code></p> <p>Reply message: <code>AccountInfoStringReply { data: AccountInfoStringData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>propertyType</code> <code>AccountInfoStringPropertyType</code> \u2705 Property to retrieve (see enum below)"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#output-accountinfostringdata","title":"\u2b06\ufe0f Output - <code>AccountInfoStringData</code>","text":"Field Type Description <code>requested_value</code> <code>String</code> The requested property value <p>Access the value using <code>reply.getData().getRequestedValue()</code>.</p>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#accountinfostringpropertytype","title":"<code>AccountInfoStringPropertyType</code>","text":"Enum Value Value Description <code>ACCOUNT_NAME</code> 0 Client name (account holder name) <code>ACCOUNT_SERVER</code> 1 Trade server name (e.g., \"CompanyName-Demo\") <code>ACCOUNT_CURRENCY</code> 2 Account currency (e.g., \"USD\", \"EUR\", \"GBP\") <code>ACCOUNT_COMPANY</code> 3 Name of a company that serves the account"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Single RPC returning one specific <code>String</code> property of the account.</li> <li>Why you need it. When you only need one string property (e.g., currency, server name) instead of fetching the full account summary.</li> <li>Performance. Lightweight call - ideal for quick checks of specific text properties.</li> <li>Alternative. Use <code>accountSummary()</code> if you need multiple properties at once.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Check a single string account property without fetching all account data.</li> <li>Verify account currency before calculating monetary values.</li> <li>Display broker/server information in UI.</li> <li>Log account details for audit purposes.</li> <li>Verify connection to correct trading server.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Prefer <code>accountSummary()</code> if you need multiple properties - it's more efficient to fetch all data in one call.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code> to handle transient gRPC errors.</li> <li>All exceptions are wrapped in <code>ApiExceptionMT5</code> for consistent error handling.</li> <li>The method is thread-safe and can be called from multiple threads.</li> <li>Server names often include broker name and account type (e.g., \"XMGlobal-Demo\", \"Alpari-Real\").</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#1-get-account-name","title":"1) Get account name","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountInformation.*;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get account holder name\n            AccountInfoStringReply reply = account.accountInfoString(\n                AccountInfoStringPropertyType.ACCOUNT_NAME\n            );\n            String accountName = reply.getData().getRequestedValue();\n\n            System.out.printf(\"Account name: %s%n\", accountName);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#2-get-account-currency","title":"2) Get account currency","text":"<pre><code>// Verify account currency\nvar reply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_CURRENCY\n);\nString currency = reply.getData().getRequestedValue();\n\nSystem.out.printf(\"Account currency: %s%n\", currency);\n\nif (!currency.equals(\"USD\")) {\n    System.out.println(\"\u26a0\ufe0f Warning: Account currency is not USD\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#3-get-server-name","title":"3) Get server name","text":"<pre><code>// Get trading server name\nvar reply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_SERVER\n);\nString serverName = reply.getData().getRequestedValue();\n\nSystem.out.printf(\"Connected to server: %s%n\", serverName);\n\n// Check if it's a demo server\nif (serverName.toLowerCase().contains(\"demo\")) {\n    System.out.println(\"\u2705 Demo server detected\");\n} else {\n    System.out.println(\"\u26a0\ufe0f Live/Real server detected\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#4-get-brokercompany-name","title":"4) Get broker/company name","text":"<pre><code>// Get broker company name\nvar reply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_COMPANY\n);\nString companyName = reply.getData().getRequestedValue();\n\nSystem.out.printf(\"Broker: %s%n\", companyName);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#5-display-complete-account-info","title":"5) Display complete account info","text":"<pre><code>// Fetch all string properties\nvar nameReply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_NAME\n);\nvar serverReply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_SERVER\n);\nvar currencyReply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_CURRENCY\n);\nvar companyReply = account.accountInfoString(\n    AccountInfoStringPropertyType.ACCOUNT_COMPANY\n);\n\nSystem.out.println(\"=== Account Information ===\");\nSystem.out.printf(\"Name:     %s%n\", nameReply.getData().getRequestedValue());\nSystem.out.printf(\"Server:   %s%n\", serverReply.getData().getRequestedValue());\nSystem.out.printf(\"Currency: %s%n\", currencyReply.getData().getRequestedValue());\nSystem.out.printf(\"Broker:   %s%n\", companyReply.getData().getRequestedValue());\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#6-helper-method-for-cleaner-code","title":"6) Helper method for cleaner code","text":"<pre><code>public class AccountHelper {\n    private final MT5Account account;\n\n    public AccountHelper(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Helper to get string property directly\n     */\n    public String getStringProperty(AccountInfoStringPropertyType property)\n            throws ApiExceptionMT5 {\n        var reply = account.accountInfoString(property);\n        return reply.getData().getRequestedValue();\n    }\n\n    /**\n     * Get account currency\n     */\n    public String getCurrency() throws ApiExceptionMT5 {\n        return getStringProperty(AccountInfoStringPropertyType.ACCOUNT_CURRENCY);\n    }\n\n    /**\n     * Get server name\n     */\n    public String getServerName() throws ApiExceptionMT5 {\n        return getStringProperty(AccountInfoStringPropertyType.ACCOUNT_SERVER);\n    }\n\n    /**\n     * Check if connected to demo server\n     */\n    public boolean isDemoServer() throws ApiExceptionMT5 {\n        String serverName = getServerName().toLowerCase();\n        return serverName.contains(\"demo\") || serverName.contains(\"test\");\n    }\n\n    /**\n     * Get complete account info\n     */\n    public AccountInfo getAccountInfo() throws ApiExceptionMT5 {\n        return new AccountInfo(\n            getStringProperty(AccountInfoStringPropertyType.ACCOUNT_NAME),\n            getStringProperty(AccountInfoStringPropertyType.ACCOUNT_SERVER),\n            getStringProperty(AccountInfoStringPropertyType.ACCOUNT_CURRENCY),\n            getStringProperty(AccountInfoStringPropertyType.ACCOUNT_COMPANY)\n        );\n    }\n\n    public record AccountInfo(\n        String name,\n        String server,\n        String currency,\n        String company\n    ) {\n        @Override\n        public String toString() {\n            return String.format(\n                \"Account[name=%s, server=%s, currency=%s, broker=%s]\",\n                name, server, currency, company\n            );\n        }\n    }\n}\n\n// Usage\nAccountHelper helper = new AccountHelper(account);\n\nSystem.out.println(\"Currency: \" + helper.getCurrency());\nSystem.out.println(\"Is demo: \" + helper.isDemoServer());\nSystem.out.println(helper.getAccountInfo());\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#7-validate-connection-to-expected-broker","title":"7) Validate connection to expected broker","text":"<pre><code>public class ConnectionValidator {\n    /**\n     * Validate that we're connected to the expected broker and server\n     */\n    public static boolean validateConnection(\n            MT5Account account,\n            String expectedBroker,\n            boolean allowDemoOnly) throws ApiExceptionMT5 {\n\n        // Check broker\n        var companyReply = account.accountInfoString(\n            AccountInfoStringPropertyType.ACCOUNT_COMPANY\n        );\n        String broker = companyReply.getData().getRequestedValue();\n\n        if (!broker.equalsIgnoreCase(expectedBroker)) {\n            System.out.printf(\"\u274c Wrong broker: expected '%s', got '%s'%n\",\n                expectedBroker, broker);\n            return false;\n        }\n        System.out.printf(\"\u2705 Broker: %s%n\", broker);\n\n        // Check server type\n        var serverReply = account.accountInfoString(\n            AccountInfoStringPropertyType.ACCOUNT_SERVER\n        );\n        String server = serverReply.getData().getRequestedValue();\n\n        boolean isDemo = server.toLowerCase().contains(\"demo\");\n        if (allowDemoOnly &amp;&amp; !isDemo) {\n            System.out.printf(\"\u274c Real server detected: %s (only demo allowed)%n\", server);\n            return false;\n        }\n        System.out.printf(\"\u2705 Server: %s (%s)%n\", server, isDemo ? \"Demo\" : \"Real\");\n\n        return true;\n    }\n}\n\n// Usage\nif (ConnectionValidator.validateConnection(account, \"XM Global Limited\", true)) {\n    System.out.println(\"\u2705 Connection validated\");\n} else {\n    System.out.println(\"\u274c Connection validation failed\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#8-log-account-details-for-audit","title":"8) Log account details for audit","text":"<pre><code>import java.time.LocalDateTime;\nimport java.util.logging.*;\n\npublic class AccountAuditor {\n    private static final Logger logger = Logger.getLogger(AccountAuditor.class.getName());\n\n    /**\n     * Log complete account details for audit trail\n     */\n    public static void logAccountDetails(MT5Account account) {\n        try {\n            String name = account.accountInfoString(\n                AccountInfoStringPropertyType.ACCOUNT_NAME\n            ).getData().getRequestedValue();\n\n            String server = account.accountInfoString(\n                AccountInfoStringPropertyType.ACCOUNT_SERVER\n            ).getData().getRequestedValue();\n\n            String currency = account.accountInfoString(\n                AccountInfoStringPropertyType.ACCOUNT_CURRENCY\n            ).getData().getRequestedValue();\n\n            String company = account.accountInfoString(\n                AccountInfoStringPropertyType.ACCOUNT_COMPANY\n            ).getData().getRequestedValue();\n\n            logger.info(String.format(\n                \"[%s] Account Details: Name='%s', Server='%s', Currency='%s', Broker='%s'\",\n                LocalDateTime.now(),\n                name, server, currency, company\n            ));\n\n        } catch (ApiExceptionMT5 e) {\n            logger.severe(\"Failed to retrieve account details: \" + e.getMessage());\n        }\n    }\n}\n\n// Usage\nAccountAuditor.logAccountDetails(account);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#9-create-formatted-account-summary","title":"9) Create formatted account summary","text":"<pre><code>public class AccountFormatter {\n    /**\n     * Create a formatted account summary string\n     */\n    public static String formatAccountSummary(MT5Account account) throws ApiExceptionMT5 {\n        var nameReply = account.accountInfoString(\n            AccountInfoStringPropertyType.ACCOUNT_NAME\n        );\n        var serverReply = account.accountInfoString(\n            AccountInfoStringPropertyType.ACCOUNT_SERVER\n        );\n        var currencyReply = account.accountInfoString(\n            AccountInfoStringPropertyType.ACCOUNT_CURRENCY\n        );\n        var companyReply = account.accountInfoString(\n            AccountInfoStringPropertyType.ACCOUNT_COMPANY\n        );\n\n        return String.format(\"\"\"\n            \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n            \u2551        ACCOUNT INFORMATION             \u2551\n            \u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\n            \u2551 Name:     %-28s \u2551\n            \u2551 Server:   %-28s \u2551\n            \u2551 Currency: %-28s \u2551\n            \u2551 Broker:   %-28s \u2551\n            \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n            \"\"\",\n            nameReply.getData().getRequestedValue(),\n            serverReply.getData().getRequestedValue(),\n            currencyReply.getData().getRequestedValue(),\n            companyReply.getData().getRequestedValue()\n        );\n    }\n}\n\n// Usage\nSystem.out.println(AccountFormatter.formatAccountSummary(account));\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountInfoString/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiAccountInformation.AccountInfoStringRequest request =\n    Mt5TermApiAccountInformation.AccountInfoStringRequest.newBuilder()\n        .setPropertyId(Mt5TermApiAccountInformation.AccountInfoStringPropertyType.ACCOUNT_NAME)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountInformation.AccountInfoStringReply reply = accountInformationClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .accountInfoString(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nString value = reply.getData().getRequestedValue();\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/","title":"\u2705 Getting an Account Summary","text":"<p>Request: full account summary (<code>AccountSummaryData</code>) from MT5. Fetch all core account metrics in a single call.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.accountSummary()</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>AccountSummary</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>AccountSummary(AccountSummaryRequest) \u2192 AccountSummaryReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperGrpc.AccountHelperBlockingStub.accountSummary(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets the complete summary of the trading account in a single call.\n     * Returns all essential account information including balance, equity, margin, profit, leverage, and currency.\n     * This is the recommended method for retrieving account data as it minimizes network calls.\n     *\n     * @return Account summary containing all account properties\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountHelper.AccountSummaryReply accountSummary() throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>AccountSummaryRequest {}</code></p> <p>Reply message: <code>AccountSummaryReply { data: AccountSummaryData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#input","title":"\ud83d\udd3d Input","text":"<p>No required parameters for the method call itself (internally passes empty <code>AccountSummaryRequest</code>).</p> <p>The method automatically uses connection metadata (instance ID) established during <code>connect()</code> or <code>connectByServerName()</code>.</p>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#output-accountsummarydata","title":"\u2b06\ufe0f Output - <code>AccountSummaryData</code>","text":"Field Type Description <code>account_login</code> <code>long</code> Trading account login (ID) <code>account_balance</code> <code>double</code> Balance excluding floating P/L <code>account_equity</code> <code>double</code> Equity = balance + floating P/L <code>account_user_name</code> <code>String</code> Account holder name <code>account_leverage</code> <code>long</code> Leverage (e.g., <code>100</code> for 1:100) <code>account_trade_mode</code> <code>MrpcEnumAccountTradeMode</code> Account type: DEMO, CONTEST, or REAL <code>account_company_name</code> <code>String</code> Broker/company display name <code>account_currency</code> <code>String</code> Deposit currency (e.g., <code>USD</code>, <code>EUR</code>) <code>server_time</code> <code>Timestamp</code> Server time (UTC) at response <code>utc_timezone_server_time_shift_minutes</code> <code>long</code> Server offset relative to UTC (minutes) <code>account_credit</code> <code>double</code> Credit amount"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/1.%20Account_information/AccountSummary/#mrpcenumaccounttrademode","title":"<code>MrpcEnumAccountTradeMode</code>","text":"Enum Value Value Description <code>MRPC_ACCOUNT_TRADE_MODE_DEMO</code> 0 Demo/practice account <code>MRPC_ACCOUNT_TRADE_MODE_CONTEST</code> 1 Contest account <code>MRPC_ACCOUNT_TRADE_MODE_REAL</code> 2 Real trading account"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Single RPC returning account state: balance, equity, currency, leverage, trade mode, server time.</li> <li>Why you need it. Fast dashboard/CLI status; double\u2011check login/currency/leverage; heartbeat via <code>server_time</code>.</li> <li>Sanity check. If you see <code>account_login</code>, <code>account_currency</code>, <code>account_leverage</code>, <code>account_equity</code> \u2192 connection is alive.</li> <li>Performance. More efficient than calling individual <code>accountInfoDouble()</code>, <code>accountInfoInteger()</code>, <code>accountInfoString()</code> methods separately.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use it to display real\u2011time account state and sanity\u2011check connectivity:</p> <ul> <li>Dashboard/CLI status in one call.</li> <li>Verify equity &amp; free margin before trading.</li> <li>Terminal heartbeat via <code>server_time</code> and <code>utc_timezone_server_time_shift_minutes</code>.</li> <li>Check account type (demo/real) before executing strategies.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code> wrapper to handle transient errors.</li> <li>All gRPC exceptions are converted to <code>ApiExceptionMT5</code> for consistent error handling.</li> <li>Use this method instead of multiple individual property calls when you need complete account state.</li> <li>The method is thread-safe and can be called from multiple threads.</li> <li>Server time is returned as protobuf <code>Timestamp</code> - convert using <code>timestamp.getSeconds()</code> for Unix timestamp.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/1.%20Account_information/AccountSummary/#1-basic-account-status","title":"1) Basic account status","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            // Connect first\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get account summary\n            Mt5TermApiAccountHelper.AccountSummaryReply reply = account.accountSummary();\n            Mt5TermApiAccountHelper.AccountSummaryData data = reply.getData();\n\n            System.out.printf(\"Account: %d%n\", data.getAccountLogin());\n            System.out.printf(\"Balance: %.2f %s%n\", data.getAccountBalance(), data.getAccountCurrency());\n            System.out.printf(\"Equity:  %.2f %s%n\", data.getAccountEquity(), data.getAccountCurrency());\n            System.out.printf(\"Leverage: 1:%d%n\", data.getAccountLeverage());\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#2-compact-status-line-for-uicli","title":"2) Compact status line for UI/CLI","text":"<pre><code>var reply = account.accountSummary();\nvar data = reply.getData();\n\nString status = String.format(\n    \"Acc %d | %s | Bal %.2f | Eq %.2f | Lev 1:%d | Mode %s\",\n    data.getAccountLogin(),\n    data.getAccountCurrency(),\n    data.getAccountBalance(),\n    data.getAccountEquity(),\n    data.getAccountLeverage(),\n    data.getAccountTradeMode().name()\n);\n\nSystem.out.println(status);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#3-humanreadable-server-time-with-timezone-shift","title":"3) Human\u2011readable server time with timezone shift","text":"<pre><code>var reply = account.accountSummary();\nvar data = reply.getData();\n\n// Convert protobuf Timestamp to Java Instant\nlong serverTimeSeconds = data.getServerTime().getSeconds();\njava.time.Instant serverUtc = java.time.Instant.ofEpochSecond(serverTimeSeconds);\n\n// Apply timezone shift\nlong shiftMinutes = data.getUtcTimezoneServerTimeShiftMinutes();\njava.time.Instant serverLocal = serverUtc.plusSeconds(shiftMinutes * 60);\n\nSystem.out.printf(\"Server time: %s (UTC%+d minutes)%n\",\n    serverLocal.toString(),\n    shiftMinutes);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#4-check-account-mode-before-trading","title":"4) Check account mode before trading","text":"<pre><code>var reply = account.accountSummary();\nvar data = reply.getData();\n\n// Determine account type\nString modeLabel = switch (data.getAccountTradeMode()) {\n    case MRPC_ACCOUNT_TRADE_MODE_DEMO -&gt; \"Demo\";\n    case MRPC_ACCOUNT_TRADE_MODE_CONTEST -&gt; \"Contest\";\n    case MRPC_ACCOUNT_TRADE_MODE_REAL -&gt; \"Real\";\n    default -&gt; \"Unknown\";\n};\n\nSystem.out.println(\"Account mode: \" + modeLabel);\n\n// Warning for demo accounts\nif (data.getAccountTradeMode() ==\n    mt5_term_api.Mt5TermApiAccountHelper.MrpcEnumAccountTradeMode.MRPC_ACCOUNT_TRADE_MODE_DEMO) {\n    System.out.println(\"\u26a0\ufe0f WARNING: This is a DEMO account!\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#5-create-a-java-record-for-cleaner-code","title":"5) Create a Java record for cleaner code","text":"<pre><code>// Define a record for easier data handling\npublic record AccountSummaryView(\n    long login,\n    String currency,\n    double balance,\n    double equity,\n    long leverage,\n    String tradeModeLabel,\n    String companyName\n) {\n    public static AccountSummaryView fromProto(Mt5TermApiAccountHelper.AccountSummaryData proto) {\n        String mode = switch (proto.getAccountTradeMode()) {\n            case MRPC_ACCOUNT_TRADE_MODE_DEMO -&gt; \"Demo\";\n            case MRPC_ACCOUNT_TRADE_MODE_CONTEST -&gt; \"Contest\";\n            case MRPC_ACCOUNT_TRADE_MODE_REAL -&gt; \"Real\";\n            default -&gt; \"Unknown\";\n        };\n\n        return new AccountSummaryView(\n            proto.getAccountLogin(),\n            proto.getAccountCurrency(),\n            proto.getAccountBalance(),\n            proto.getAccountEquity(),\n            proto.getAccountLeverage(),\n            mode,\n            proto.getAccountCompanyName()\n        );\n    }\n}\n\n// Usage\nvar reply = account.accountSummary();\nvar view = AccountSummaryView.fromProto(reply.getData());\nSystem.out.println(view);\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#6-monitoring-loop-with-error-handling","title":"6) Monitoring loop with error handling","text":"<pre><code>import java.util.concurrent.TimeUnit;\n\npublic class AccountMonitor {\n    public static void monitorAccount(MT5Account account) {\n        while (true) {\n            try {\n                var reply = account.accountSummary();\n                var data = reply.getData();\n\n                System.out.printf(\"[%s] Equity: %.2f %s%n\",\n                    java.time.LocalTime.now(),\n                    data.getAccountEquity(),\n                    data.getAccountCurrency());\n\n                TimeUnit.SECONDS.sleep(5);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"API Error: \" + e.getMessage());\n                // Automatic reconnection is handled internally\n                try {\n                    TimeUnit.SECONDS.sleep(1);\n                } catch (InterruptedException ie) {\n                    break;\n                }\n            } catch (InterruptedException e) {\n                break;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/AccountSummary/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<p>If you need to call the gRPC service directly without the wrapper:</p> <pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiAccountHelper.AccountSummaryRequest request =\n    Mt5TermApiAccountHelper.AccountSummaryRequest.newBuilder().build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountHelper.AccountSummaryReply reply = accountClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .accountSummary(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nMt5TermApiAccountHelper.AccountSummaryData data = reply.getData();\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/","title":"MT5Account \u00b7 Account Information - Overview","text":"<p>Account balance, equity, margin, leverage, currency, and other account properties. Use this page to choose the right API for accessing account state.</p>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>AccountSummary - all account info at once (balance, equity, margin, leverage, profit, etc.).</li> <li>AccountInfoDouble - single double value from account (balance, equity, margin, profit, credit, etc.).</li> <li>AccountInfoInteger - single integer value from account (login, leverage, limit orders, etc.).</li> <li>AccountInfoString - single string value from account (name, server, currency, company).</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>AccountSummary \u2192 the one-stop shop for complete account snapshot (balance, equity, margin level, etc.).</li> <li>AccountInfoDouble \u2192 grab one numeric property when you need just balance or margin.</li> <li>AccountInfoInteger \u2192 grab one integer property like login number or leverage.</li> <li>AccountInfoString \u2192 grab one text property like account name or currency.</li> </ul> <p>Rule of thumb: need full snapshot \u2192 <code>AccountSummary</code>; need one specific value \u2192 <code>AccountInfo*</code> (Double/Integer/String).</p>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Complete account snapshot (all values) <code>AccountSummary</code> Full account data object (none) One numeric value (balance, equity, margin, etc.) <code>AccountInfoDouble</code> Single <code>double</code> Property enum (BALANCE, EQUITY, etc.) One integer value (login, leverage, etc.) <code>AccountInfoInteger</code> Single <code>long</code> Property enum (LOGIN, LEVERAGE, etc.) One text value (name, currency, server, etc.) <code>AccountInfoString</code> Single <code>String</code> Property enum (NAME, CURRENCY, etc.)"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Margin Level = (Equity / Margin) \u00d7 100 - watch for stop-out level.</li> <li>Free Margin = Equity - Margin - available for new positions.</li> <li>AccountSummary includes everything; use it for dashboards.</li> <li>AccountInfo* methods are lighter if you only need one property.</li> <li>Currency affects how profits are calculated - always check account currency.</li> <li>Leverage determines margin requirements - higher leverage = less margin needed.</li> </ul>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Get complete account snapshot\nvar summary = account.accountSummary();\nvar data = summary.getData();\nSystem.out.printf(\"Balance: $%.2f, Equity: $%.2f, Leverage: 1:%d%n\",\n    data.getAccountBalance(), data.getAccountEquity(), data.getAccountLeverage());\n</code></pre> <pre><code>// Get single property - account balance\nvar reply = account.accountInfoDouble(\n    Mt5TermApiAccountInformation.AccountInfoDoublePropertyType.ACCOUNT_BALANCE\n);\ndouble balance = reply.getData().getRequestedValue();\nSystem.out.printf(\"Balance: $%.2f%n\", balance);\n</code></pre> <pre><code>// Get account leverage\nvar reply = account.accountInfoInteger(\n    Mt5TermApiAccountInformation.AccountInfoIntegerPropertyType.ACCOUNT_LEVERAGE\n);\nlong leverage = reply.getData().getRequestedValue();\nSystem.out.printf(\"Leverage: 1:%d%n\", leverage);\n</code></pre> <pre><code>// Get account currency\nvar reply = account.accountInfoString(\n    Mt5TermApiAccountInformation.AccountInfoStringPropertyType.ACCOUNT_CURRENCY\n);\nString currency = reply.getData().getRequestedValue();\nSystem.out.printf(\"Currency: %s%n\", currency);\n</code></pre> <pre><code>// Check account balance and equity\nvar summary = account.accountSummary();\nvar data = summary.getData();\ndouble balance = data.getAccountBalance();\ndouble equity = data.getAccountEquity();\nif (equity &lt; balance * 0.8) {\n    System.out.println(\"\u26a0\ufe0f Warning: Equity below 80% of balance!\");\n}\n</code></pre>"},{"location":"MT5Account/1.%20Account_information/Account_Information.Overview/#see-also","title":"See also","text":"<ul> <li>Subscriptions: <code>OnPositionProfit</code> - real-time equity/profit updates</li> <li>Trading calculations: <code>OrderCalcMargin</code> - calculate required margin before trading</li> <li>Positions: <code>PositionsTotal</code> - count open positions</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/","title":"\u2705 Check if Symbol Exists","text":"<p>Request: check if a symbol with specified name exists on the MT5 server. Returns existence status and whether it's a custom symbol.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolExist(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolExist</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolExist(SymbolExistRequest) \u2192 SymbolExistReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolExist(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Checks if a symbol exists on the MT5 server.\n     * Returns whether the specified symbol name is available for trading.\n     *\n     * @param symbolName Symbol name to check (e.g., \"EURUSD\")\n     * @return Reply with existence status\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolExistReply symbolExist(String symbolName) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolExistRequest { name: string }</code></p> <p>Reply message: <code>SymbolExistReply { data: SymbolExistData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbolName</code> <code>String</code> \u2705 Symbol name to check (e.g., \"EURUSD\")"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#output-symbolexistdata","title":"\u2b06\ufe0f Output - <code>SymbolExistData</code>","text":"Field Type Description <code>exists</code> <code>boolean</code> <code>true</code> if symbol exists, <code>false</code> if not found <code>is_custom</code> <code>boolean</code> <code>true</code> if it's a custom symbol, <code>false</code> if it's a standard symbol <p>Access using <code>reply.getData().getExists()</code> and <code>reply.getData().getIsCustom()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Simple RPC to verify symbol existence before attempting to use it.</li> <li>Why you need it. Prevent errors when working with user-provided or dynamic symbol names.</li> <li>Custom symbols. Can detect synthetic/custom symbols created on the broker side.</li> <li>Performance. Lightweight validation call before more expensive operations.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Validate user input before requesting symbol data.</li> <li>Check if a symbol is available on current broker.</li> <li>Distinguish between standard and custom symbols.</li> <li>Verify symbol names before adding to MarketWatch.</li> <li>Handle multi-broker scenarios where symbol availability varies.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Call this before <code>symbolSelect()</code> to avoid errors on non-existent symbols.</li> <li>Custom symbols are synthetic instruments created from other symbols or external data.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>Symbol names are case-sensitive on some brokers.</li> <li>Some brokers use different naming conventions (e.g., \"EURUSD\" vs \"EURUSDm\").</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#1-basic-symbol-validation","title":"1) Basic symbol validation","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Check if symbol exists\n            Mt5TermApiMarketInfo.SymbolExistReply reply =\n                account.symbolExist(\"GBPUSD\");\n            Mt5TermApiMarketInfo.SymbolExistData data = reply.getData();\n\n            if (data.getExists()) {\n                System.out.println(\"\u2705 Symbol GBPUSD exists\");\n                System.out.printf(\"Custom symbol: %s%n\", data.getIsCustom());\n            } else {\n                System.out.println(\"\u274c Symbol GBPUSD not found\");\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#2-validate-before-selecting","title":"2) Validate before selecting","text":"<pre><code>// Safe symbol selection\nString symbol = \"XAUUSD\";\n\nvar reply = account.symbolExist(symbol);\n\nif (reply.getData().getExists()) {\n    // Symbol exists, safe to select\n    account.symbolSelect(symbol, true);\n    System.out.printf(\"\u2705 Symbol %s selected%n\", symbol);\n} else {\n    System.out.printf(\"\u274c Symbol %s does not exist%n\", symbol);\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#3-check-custom-vs-standard-symbol","title":"3) Check custom vs standard symbol","text":"<pre><code>public class SymbolChecker {\n    public static void analyzeSymbol(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var reply = account.symbolExist(symbol);\n        var data = reply.getData();\n\n        if (!data.getExists()) {\n            System.out.printf(\"\u274c Symbol '%s' not found%n\", symbol);\n            return;\n        }\n\n        String type = data.getIsCustom() ? \"Custom\" : \"Standard\";\n        System.out.printf(\"\u2705 Symbol: %s%n\", symbol);\n        System.out.printf(\"   Type: %s%n\", type);\n\n        if (data.getIsCustom()) {\n            System.out.println(\"   \u26a0\ufe0f This is a synthetic/custom symbol\");\n        }\n    }\n}\n\n// Usage\nSymbolChecker.analyzeSymbol(account, \"EURUSD\");\nSymbolChecker.analyzeSymbol(account, \"CUSTOM_INDEX\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#4-validate-multiple-symbols","title":"4) Validate multiple symbols","text":"<pre><code>public class MultiSymbolValidator {\n    /**\n     * Validate multiple symbols at once\n     */\n    public static java.util.Map&lt;String, Boolean&gt; validateSymbols(\n            MT5Account account,\n            String... symbols) throws ApiExceptionMT5 {\n\n        java.util.Map&lt;String, Boolean&gt; results = new java.util.LinkedHashMap&lt;&gt;();\n\n        for (String symbol : symbols) {\n            var reply = account.symbolExist(symbol);\n            results.put(symbol, reply.getData().getExists());\n        }\n\n        return results;\n    }\n\n    /**\n     * Print validation results\n     */\n    public static void printResults(java.util.Map&lt;String, Boolean&gt; results) {\n        System.out.println(\"\\nSymbol Validation Results:\");\n        System.out.println(\"\u2550\".repeat(40));\n\n        int found = 0;\n        for (var entry : results.entrySet()) {\n            String status = entry.getValue() ? \"\u2705\" : \"\u274c\";\n            System.out.printf(\"%s %-10s - %s%n\",\n                status,\n                entry.getKey(),\n                entry.getValue() ? \"exists\" : \"not found\"\n            );\n\n            if (entry.getValue()) found++;\n        }\n\n        System.out.println(\"\u2550\".repeat(40));\n        System.out.printf(\"Found: %d/%d%n\", found, results.size());\n    }\n}\n\n// Usage\nvar results = MultiSymbolValidator.validateSymbols(account,\n    \"EURUSD\", \"GBPUSD\", \"INVALID\", \"XAUUSD\", \"BTCUSD\"\n);\nMultiSymbolValidator.printResults(results);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#5-safe-symbol-operations-wrapper","title":"5) Safe symbol operations wrapper","text":"<pre><code>public class SafeSymbolOperations {\n    private final MT5Account account;\n\n    public SafeSymbolOperations(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Safely get quote - validates symbol first\n     */\n    public Mt5TermApiMarketInfo.MrpcMqlTick getQuoteSafe(String symbol)\n            throws ApiExceptionMT5 {\n\n        // Validate symbol exists\n        var existReply = account.symbolExist(symbol);\n        if (!existReply.getData().getExists()) {\n            throw new ApiExceptionMT5(\"Symbol does not exist: \" + symbol);\n        }\n\n        // Select symbol if needed\n        account.symbolSelect(symbol, true);\n\n        // Get quote\n        var tickReply = account.quote(symbol);\n        return tickReply.getData();\n    }\n\n    /**\n     * Check if symbol is tradeable (exists and not custom)\n     */\n    public boolean isTradeable(String symbol) throws ApiExceptionMT5 {\n        var reply = account.symbolExist(symbol);\n        var data = reply.getData();\n\n        return data.getExists() &amp;&amp; !data.getIsCustom();\n    }\n}\n\n// Usage\nvar safeOps = new SafeSymbolOperations(account);\n\nif (safeOps.isTradeable(\"EURUSD\")) {\n    var tick = safeOps.getQuoteSafe(\"EURUSD\");\n    System.out.printf(\"EURUSD Bid: %.5f%n\", tick.getBid());\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#6-find-similar-symbols","title":"6) Find similar symbols","text":"<pre><code>public class SymbolFinder {\n    /**\n     * Find symbols with similar names\n     */\n    public static java.util.List&lt;String&gt; findSimilar(\n            MT5Account account,\n            String pattern) throws ApiExceptionMT5 {\n\n        java.util.List&lt;String&gt; similar = new java.util.ArrayList&lt;&gt;();\n\n        // Common suffixes/prefixes brokers use\n        String[] variations = {\n            pattern,\n            pattern + \"m\",\n            pattern + \".\",\n            pattern.toLowerCase(),\n            pattern + \"pro\",\n            \".\" + pattern\n        };\n\n        for (String variant : variations) {\n            var reply = account.symbolExist(variant);\n            if (reply.getData().getExists()) {\n                similar.add(variant);\n            }\n        }\n\n        return similar;\n    }\n}\n\n// Usage - find all variations of EURUSD\nvar variations = SymbolFinder.findSimilar(account, \"EURUSD\");\nSystem.out.println(\"Found variations: \" + variations);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#7-symbol-existence-record","title":"7) Symbol existence record","text":"<pre><code>/**\n * Immutable record for symbol existence\n */\npublic record SymbolExistence(\n    String name,\n    boolean exists,\n    boolean isCustom\n) {\n    public static SymbolExistence fromProto(\n            String name,\n            Mt5TermApiMarketInfo.SymbolExistData data) {\n        return new SymbolExistence(\n            name,\n            data.getExists(),\n            data.getIsCustom()\n        );\n    }\n\n    public String getType() {\n        if (!exists) return \"Not Found\";\n        return isCustom ? \"Custom\" : \"Standard\";\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\"%s: %s (%s)\",\n            name,\n            exists ? \"exists\" : \"not found\",\n            getType()\n        );\n    }\n}\n\n// Usage\nvar reply = account.symbolExist(\"EURUSD\");\nvar existence = SymbolExistence.fromProto(\"EURUSD\", reply.getData());\nSystem.out.println(existence);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#8-batch-validation-with-detailed-info","title":"8) Batch validation with detailed info","text":"<pre><code>public class BatchSymbolValidator {\n    public record ValidationResult(\n        String symbol,\n        boolean exists,\n        boolean isCustom,\n        String message\n    ) {}\n\n    /**\n     * Validate symbols with detailed results\n     */\n    public static java.util.List&lt;ValidationResult&gt; validateBatch(\n            MT5Account account,\n            java.util.List&lt;String&gt; symbols) {\n\n        java.util.List&lt;ValidationResult&gt; results = new java.util.ArrayList&lt;&gt;();\n\n        for (String symbol : symbols) {\n            try {\n                var reply = account.symbolExist(symbol);\n                var data = reply.getData();\n\n                String message;\n                if (!data.getExists()) {\n                    message = \"Symbol not found\";\n                } else if (data.getIsCustom()) {\n                    message = \"Custom symbol (synthetic)\";\n                } else {\n                    message = \"Standard symbol\";\n                }\n\n                results.add(new ValidationResult(\n                    symbol,\n                    data.getExists(),\n                    data.getIsCustom(),\n                    message\n                ));\n\n            } catch (ApiExceptionMT5 e) {\n                results.add(new ValidationResult(\n                    symbol,\n                    false,\n                    false,\n                    \"Error: \" + e.getMessage()\n                ));\n            }\n        }\n\n        return results;\n    }\n\n    /**\n     * Print detailed validation report\n     */\n    public static void printReport(java.util.List&lt;ValidationResult&gt; results) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551      SYMBOL VALIDATION REPORT                 \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var result : results) {\n            String status = result.exists() ? \"\u2705\" : \"\u274c\";\n            String custom = result.isCustom() ? \"[CUSTOM]\" : \"\";\n\n            System.out.printf(\"\u2551 %s %-10s %-8s %-20s \u2551%n\",\n                status,\n                result.symbol(),\n                custom,\n                result.message()\n            );\n        }\n\n        long existsCount = results.stream().filter(ValidationResult::exists).count();\n        long customCount = results.stream().filter(ValidationResult::isCustom).count();\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total: %d | Found: %d | Custom: %d            \u2551%n\",\n            results.size(), existsCount, customCount);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar symbols = java.util.List.of(\n    \"EURUSD\", \"GBPUSD\", \"INVALID\", \"CUSTOM_INDEX\", \"XAUUSD\"\n);\nvar results = BatchSymbolValidator.validateBatch(account, symbols);\nBatchSymbolValidator.printReport(results);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#9-pre-trade-symbol-validation","title":"9) Pre-trade symbol validation","text":"<pre><code>public class TradeValidator {\n    /**\n     * Validate symbol before placing order\n     */\n    public static boolean validateForTrading(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        System.out.printf(\"Validating symbol '%s' for trading...%n\", symbol);\n\n        // Check existence\n        var existReply = account.symbolExist(symbol);\n        var existData = existReply.getData();\n\n        if (!existData.getExists()) {\n            System.out.println(\"\u274c Symbol does not exist\");\n            return false;\n        }\n        System.out.println(\"\u2705 Symbol exists\");\n\n        // Warn if custom\n        if (existData.getIsCustom()) {\n            System.out.println(\"\u26a0\ufe0f WARNING: This is a custom symbol\");\n        }\n\n        // Ensure selected\n        var selectReply = account.symbolSelect(symbol, true);\n        if (!selectReply.getData().getSuccess()) {\n            System.out.println(\"\u274c Failed to select symbol\");\n            return false;\n        }\n        System.out.println(\"\u2705 Symbol selected\");\n\n        // Check synchronization\n        var syncReply = account.symbolIsSynchronized(symbol);\n        if (!syncReply.getData().getSynchronized()) {\n            System.out.println(\"\u26a0\ufe0f WARNING: Symbol not synchronized\");\n        } else {\n            System.out.println(\"\u2705 Symbol synchronized\");\n        }\n\n        System.out.println(\"\u2705 Symbol validated for trading\");\n        return true;\n    }\n}\n\n// Usage\nif (TradeValidator.validateForTrading(account, \"EURUSD\")) {\n    // Safe to place order\n    System.out.println(\"Ready to trade EURUSD\");\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolExist/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolExistRequest request =\n    Mt5TermApiMarketInfo.SymbolExistRequest.newBuilder()\n        .setName(\"EURUSD\")\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolExistReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolExist(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nboolean exists = reply.getData().getExists();\nboolean isCustom = reply.getData().getIsCustom();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/","title":"\u2705 Getting Symbol Double Properties","text":"<p>Request: retrieve specific double-precision properties of a trading symbol. Access prices, spreads, swaps, volumes, margins, and other numeric symbol characteristics.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolInfoDouble(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoDouble</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoDouble(SymbolInfoDoubleRequest) \u2192 SymbolInfoDoubleReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolInfoDouble(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets a specific double-precision property of a trading symbol.\n     * Returns numeric values such as bid/ask prices, point size, swap rates, volume limits, margins, etc.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @param property Property type to retrieve (e.g., SYMBOL_BID, SYMBOL_POINT, SYMBOL_SWAP_LONG)\n     * @return Property value as double\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolInfoDoubleReply symbolInfoDouble(\n        String symbol,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty property) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolInfoDoubleRequest { symbol: string, type: SymbolInfoDoubleProperty }</code></p> <p>Reply message: <code>SymbolInfoDoubleReply { data: SymbolInfoDoubleData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\") <code>property</code> <code>SymbolInfoDoubleProperty</code> \u2705 Property to retrieve (see enum below)"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#output-symbolinfodoubledata","title":"\u2b06\ufe0f Output - <code>SymbolInfoDoubleData</code>","text":"Field Type Description <code>value</code> <code>double</code> The requested property value <p>Access using <code>reply.getData().getValue()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#symbolinfodoubleproperty","title":"<code>SymbolInfoDoubleProperty</code>","text":"<p>Price Properties:</p> Enum Value Value Description <code>SYMBOL_BID</code> 0 Current Bid price (sell price) <code>SYMBOL_ASK</code> 3 Current Ask price (buy price) <code>SYMBOL_LAST</code> 6 Last deal price <code>SYMBOL_BIDHIGH</code> 1 Maximum Bid of the day <code>SYMBOL_BIDLOW</code> 2 Minimum Bid of the day <code>SYMBOL_ASKHIGH</code> 4 Maximum Ask of the day <code>SYMBOL_ASKLOW</code> 5 Minimum Ask of the day <code>SYMBOL_LASTHIGH</code> 7 Maximum Last price of the day <code>SYMBOL_LASTLOW</code> 8 Minimum Last price of the day <p>Volume Properties:</p> Enum Value Value Description <code>SYMBOL_VOLUME_MIN</code> 22 Minimum volume for a deal (lots) <code>SYMBOL_VOLUME_MAX</code> 23 Maximum volume for a deal (lots) <code>SYMBOL_VOLUME_STEP</code> 24 Volume change step (lots) <code>SYMBOL_VOLUME_LIMIT</code> 25 Maximum aggregate volume in one direction <code>SYMBOL_VOLUME_REAL</code> 9 Volume of the last deal <code>SYMBOL_VOLUMEHIGH_REAL</code> 10 Maximum volume of the day <code>SYMBOL_VOLUMELOW_REAL</code> 11 Minimum volume of the day <p>Trading Properties:</p> Enum Value Value Description <code>SYMBOL_POINT</code> 13 Point value (e.g., 0.00001 for EURUSD) <code>SYMBOL_TRADE_TICK_VALUE</code> 14 Tick value <code>SYMBOL_TRADE_TICK_VALUE_PROFIT</code> 15 Tick value for profitable position <code>SYMBOL_TRADE_TICK_VALUE_LOSS</code> 16 Tick value for losing position <code>SYMBOL_TRADE_TICK_SIZE</code> 17 Minimum price change <code>SYMBOL_TRADE_CONTRACT_SIZE</code> 18 Contract size (e.g., 100000 for 1 lot EURUSD) <p>Swap Properties:</p> Enum Value Value Description <code>SYMBOL_SWAP_LONG</code> 26 Swap for long positions <code>SYMBOL_SWAP_SHORT</code> 27 Swap for short positions <code>SYMBOL_SWAP_SUNDAY</code> 28 Swap multiplier for Sunday rollover <code>SYMBOL_SWAP_MONDAY</code> 29 Swap multiplier for Monday rollover <code>SYMBOL_SWAP_TUESDAY</code> 30 Swap multiplier for Tuesday rollover <code>SYMBOL_SWAP_WEDNESDAY</code> 31 Swap multiplier for Wednesday rollover <code>SYMBOL_SWAP_THURSDAY</code> 32 Swap multiplier for Thursday rollover <code>SYMBOL_SWAP_FRIDAY</code> 33 Swap multiplier for Friday rollover <code>SYMBOL_SWAP_SATURDAY</code> 34 Swap multiplier for Saturday rollover <p>Margin Properties:</p> Enum Value Value Description <code>SYMBOL_MARGIN_INITIAL</code> 35 Initial margin for 1 lot <code>SYMBOL_MARGIN_MAINTENANCE</code> 36 Maintenance margin <code>SYMBOL_MARGIN_HEDGED</code> 48 Margin for hedged positions <p>Session Properties:</p> Enum Value Value Description <code>SYMBOL_SESSION_VOLUME</code> 37 Session total volume <code>SYMBOL_SESSION_TURNOVER</code> 38 Session turnover <code>SYMBOL_SESSION_INTEREST</code> 39 Open interest <code>SYMBOL_SESSION_BUY_ORDERS_VOLUME</code> 40 Buy orders volume <code>SYMBOL_SESSION_SELL_ORDERS_VOLUME</code> 41 Sell orders volume <code>SYMBOL_SESSION_OPEN</code> 42 Session open price <code>SYMBOL_SESSION_CLOSE</code> 43 Session close price <code>SYMBOL_SESSION_AW</code> 44 Average weighted price <code>SYMBOL_SESSION_PRICE_SETTLEMENT</code> 45 Settlement price <code>SYMBOL_SESSION_PRICE_LIMIT_MIN</code> 46 Session minimum price limit <code>SYMBOL_SESSION_PRICE_LIMIT_MAX</code> 47 Session maximum price limit <p>Price Change Properties:</p> Enum Value Value Description <code>SYMBOL_PRICE_CHANGE</code> 49 Price change % from previous day close <code>SYMBOL_PRICE_VOLATILITY</code> 50 Price volatility % <p>Options Properties:</p> Enum Value Value Description <code>SYMBOL_OPTION_STRIKE</code> 12 Option strike price <code>SYMBOL_PRICE_THEORETICAL</code> 51 Theoretical option price <code>SYMBOL_PRICE_DELTA</code> 52 Option delta <code>SYMBOL_PRICE_THETA</code> 53 Option theta <code>SYMBOL_PRICE_GAMMA</code> 54 Option gamma <code>SYMBOL_PRICE_VEGA</code> 55 Option vega <code>SYMBOL_PRICE_RHO</code> 56 Option rho <code>SYMBOL_PRICE_OMEGA</code> 57 Option omega (elasticity) <code>SYMBOL_PRICE_SENSITIVITY</code> 58 Option sensitivity <p>Other Properties:</p> Enum Value Value Description <code>SYMBOL_TRADE_ACCRUED_INTEREST</code> 19 Accrued interest (bonds) <code>SYMBOL_TRADE_FACE_VALUE</code> 20 Face value (bonds) <code>SYMBOL_TRADE_LIQUIDITY_RATE</code> 21 Liquidity rate for margin"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to get individual numeric properties of a symbol.</li> <li>Why you need it. Essential for calculating lot sizes, spreads, swaps, margins before trading.</li> <li>Performance. Single property per call - use <code>symbolInfoTick()</code> for bulk price data.</li> <li>Precision. Returns raw double values - format appropriately for display.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Get point size for spread/SL/TP calculations.</li> <li>Check swap rates before holding overnight positions.</li> <li>Validate volume limits before placing orders.</li> <li>Calculate required margin for position sizes.</li> <li>Get contract size for lot calculations.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Symbol must be selected in MarketWatch for accurate data.</li> <li>Use <code>SYMBOL_POINT</code> for converting points to price units.</li> <li><code>SYMBOL_TRADE_CONTRACT_SIZE</code> is typically 100,000 for Forex pairs.</li> <li>Swap values can be negative (cost) or positive (credit).</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#1-get-point-size","title":"1) Get point size","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get point size\n            var reply = account.symbolInfoDouble(\n                \"EURUSD\",\n                Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT\n            );\n            double point = reply.getData().getValue();\n\n            System.out.printf(\"EURUSD point size: %.5f%n\", point);\n            // Output: 0.00001 (1 pip for 5-digit broker)\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#2-calculate-spread-in-points","title":"2) Calculate spread in points","text":"<pre><code>// Get Bid and Ask\nvar bidReply = account.symbolInfoDouble(\n    \"GBPUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_BID\n);\nvar askReply = account.symbolInfoDouble(\n    \"GBPUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_ASK\n);\nvar pointReply = account.symbolInfoDouble(\n    \"GBPUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT\n);\n\ndouble bid = bidReply.getData().getValue();\ndouble ask = askReply.getData().getValue();\ndouble point = pointReply.getData().getValue();\n\ndouble spreadPrice = ask - bid;\ndouble spreadPoints = spreadPrice / point;\n\nSystem.out.printf(\"GBPUSD Spread: %.1f points (%.5f)%n\", spreadPoints, spreadPrice);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#3-check-swap-rates","title":"3) Check swap rates","text":"<pre><code>public class SwapChecker {\n    public static void checkSwap(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var longReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_LONG\n        );\n        var shortReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_SHORT\n        );\n\n        double swapLong = longReply.getData().getValue();\n        double swapShort = shortReply.getData().getValue();\n\n        System.out.printf(\"=== %s Swap Rates ===%n\", symbol);\n        System.out.printf(\"Long:  %.2f %s%n\",\n            swapLong, swapLong &gt;= 0 ? \"(credit)\" : \"(cost)\");\n        System.out.printf(\"Short: %.2f %s%n\",\n            swapShort, swapShort &gt;= 0 ? \"(credit)\" : \"(cost)\");\n    }\n}\n\n// Usage\nSwapChecker.checkSwap(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#4-check-volume-limits","title":"4) Check volume limits","text":"<pre><code>public class VolumeValidator {\n    public record VolumeLimits(\n        double min,\n        double max,\n        double step\n    ) {\n        public boolean isValid(double volume) {\n            if (volume &lt; min || volume &gt; max) return false;\n\n            double diff = (volume - min) / step;\n            return Math.abs(diff - Math.round(diff)) &lt; 0.0001;\n        }\n    }\n\n    public static VolumeLimits getLimits(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var minReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_MIN\n        );\n        var maxReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_MAX\n        );\n        var stepReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_STEP\n        );\n\n        return new VolumeLimits(\n            minReply.getData().getValue(),\n            maxReply.getData().getValue(),\n            stepReply.getData().getValue()\n        );\n    }\n}\n\n// Usage\nvar limits = VolumeValidator.getLimits(account, \"EURUSD\");\nSystem.out.printf(\"Volume: min=%.2f, max=%.2f, step=%.2f%n\",\n    limits.min(), limits.max(), limits.step());\n\ndouble testVolume = 0.5;\nSystem.out.printf(\"%.2f lots valid: %s%n\",\n    testVolume, limits.isValid(testVolume));\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#5-calculate-lot-size-from-risk","title":"5) Calculate lot size from risk","text":"<pre><code>public class LotCalculator {\n    /**\n     * Calculate lot size based on risk amount\n     */\n    public static double calculateLots(\n            MT5Account account,\n            String symbol,\n            double riskAmount,\n            double stopLossPoints) throws ApiExceptionMT5 {\n\n        // Get tick value\n        var tickValueReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_TRADE_TICK_VALUE\n        );\n        double tickValue = tickValueReply.getData().getValue();\n\n        // Get point size\n        var pointReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT\n        );\n        double point = pointReply.getData().getValue();\n\n        // Calculate lots\n        double lots = riskAmount / (stopLossPoints * point * tickValue * 100000);\n\n        // Get volume limits\n        var limits = VolumeValidator.getLimits(account, symbol);\n\n        // Round to step\n        lots = Math.round(lots / limits.step()) * limits.step();\n\n        // Clamp to limits\n        lots = Math.max(limits.min(), Math.min(limits.max(), lots));\n\n        return lots;\n    }\n}\n\n// Usage - risk $100 with 50-point SL\ndouble lots = LotCalculator.calculateLots(account, \"EURUSD\", 100.0, 50.0);\nSystem.out.printf(\"Calculated lot size: %.2f%n\", lots);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#6-get-contract-size","title":"6) Get contract size","text":"<pre><code>// Get contract size for position value calculation\nvar contractReply = account.symbolInfoDouble(\n    \"XAUUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_TRADE_CONTRACT_SIZE\n);\ndouble contractSize = contractReply.getData().getValue();\n\n// Get current price\nvar bidReply = account.symbolInfoDouble(\n    \"XAUUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_BID\n);\ndouble price = bidReply.getData().getValue();\n\n// Calculate position value\ndouble lots = 1.0;\ndouble positionValue = lots * contractSize * price;\n\nSystem.out.printf(\"XAUUSD Contract size: %.0f%n\", contractSize);\nSystem.out.printf(\"1 lot position value: $%.2f%n\", positionValue);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#7-symbol-info-helper-class","title":"7) Symbol info helper class","text":"<pre><code>public class SymbolInfo {\n    private final MT5Account account;\n    private final String symbol;\n\n    public SymbolInfo(MT5Account account, String symbol) {\n        this.account = account;\n        this.symbol = symbol;\n    }\n\n    private double getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty property)\n            throws ApiExceptionMT5 {\n        var reply = account.symbolInfoDouble(symbol, property);\n        return reply.getData().getValue();\n    }\n\n    public double getPoint() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT);\n    }\n\n    public double getBid() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_BID);\n    }\n\n    public double getAsk() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_ASK);\n    }\n\n    public double getSpreadPoints() throws ApiExceptionMT5 {\n        double bid = getBid();\n        double ask = getAsk();\n        double point = getPoint();\n        return (ask - bid) / point;\n    }\n\n    public double getContractSize() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_TRADE_CONTRACT_SIZE);\n    }\n\n    public double getVolumeMin() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_MIN);\n    }\n\n    public double getVolumeMax() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_MAX);\n    }\n\n    public double getVolumeStep() throws ApiExceptionMT5 {\n        return getDouble(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_STEP);\n    }\n}\n\n// Usage\nvar info = new SymbolInfo(account, \"EURUSD\");\nSystem.out.printf(\"Point: %.5f%n\", info.getPoint());\nSystem.out.printf(\"Spread: %.1f points%n\", info.getSpreadPoints());\nSystem.out.printf(\"Min lot: %.2f%n\", info.getVolumeMin());\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#8-weekly-swap-calendar","title":"8) Weekly swap calendar","text":"<pre><code>public class SwapCalendar {\n    private static final String[] DAYS = {\n        \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n    };\n\n    private static final Mt5TermApiMarketInfo.SymbolInfoDoubleProperty[] SWAP_PROPERTIES = {\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_SUNDAY,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_MONDAY,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_TUESDAY,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_WEDNESDAY,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_THURSDAY,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_FRIDAY,\n        Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_SATURDAY\n    };\n\n    public static void printSwapCalendar(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        // Get base swap rates\n        var longReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_LONG\n        );\n        var shortReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_SWAP_SHORT\n        );\n\n        double swapLong = longReply.getData().getValue();\n        double swapShort = shortReply.getData().getValue();\n\n        System.out.printf(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557%n\");\n        System.out.printf(\"\u2551       %s SWAP CALENDAR                    \u2551%n\", symbol);\n        System.out.printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563%n\");\n        System.out.printf(\"\u2551 Base rates: Long=%.2f | Short=%.2f          \u2551%n\", swapLong, swapShort);\n        System.out.printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563%n\");\n        System.out.printf(\"\u2551 Day       \u2502 Multiplier \u2502 Long    \u2502 Short   \u2551%n\");\n        System.out.printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563%n\");\n\n        for (int i = 0; i &lt; 7; i++) {\n            var reply = account.symbolInfoDouble(symbol, SWAP_PROPERTIES[i]);\n            double multiplier = reply.getData().getValue();\n\n            String multiplierStr = multiplier == 0 ? \"No swap\" :\n                                   multiplier == 1 ? \"1x\" :\n                                   multiplier == 3 ? \"3x (triple)\" :\n                                   String.format(\"%.0fx\", multiplier);\n\n            System.out.printf(\"\u2551 %-9s \u2502 %-10s \u2502 %7.2f \u2502 %7.2f \u2551%n\",\n                DAYS[i],\n                multiplierStr,\n                swapLong * multiplier,\n                swapShort * multiplier\n            );\n        }\n\n        System.out.printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d%n\");\n    }\n}\n\n// Usage\nSwapCalendar.printSwapCalendar(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoDouble/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolInfoDoubleRequest request =\n    Mt5TermApiMarketInfo.SymbolInfoDoubleRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setType(Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolInfoDoubleReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolInfoDouble(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\ndouble value = reply.getData().getValue();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/","title":"\u2705 Getting Symbol Integer Properties","text":"<p>Request: retrieve specific integer properties of a trading symbol. Access symbol digits, spread, trading modes, session data, and various flags.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolInfoInteger(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoInteger</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoInteger(SymbolInfoIntegerRequest) \u2192 SymbolInfoIntegerReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolInfoInteger(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets a specific integer property of a trading symbol.\n     * Returns integer values such as digits, spread, trading mode, session data, and boolean flags.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @param property Property type to retrieve (e.g., SYMBOL_DIGITS, SYMBOL_SPREAD, SYMBOL_SELECT)\n     * @return Property value as long (int64)\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolInfoIntegerReply symbolInfoInteger(\n        String symbol,\n        Mt5TermApiMarketInfo.SymbolInfoIntegerProperty property) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolInfoIntegerRequest { symbol: string, type: SymbolInfoIntegerProperty }</code></p> <p>Reply message: <code>SymbolInfoIntegerReply { data: SymbolInfoIntegerData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\") <code>property</code> <code>SymbolInfoIntegerProperty</code> \u2705 Property to retrieve (see enum below)"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#output-symbolinfointegerdata","title":"\u2b06\ufe0f Output - <code>SymbolInfoIntegerData</code>","text":"Field Type Description <code>value</code> <code>long</code> The requested property value (int64) <p>Access using <code>reply.getData().getValue()</code>.</p> <p>Note: Boolean properties return <code>1</code> (true) or <code>0</code> (false).</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#symbolinfointegerproperty","title":"<code>SymbolInfoIntegerProperty</code>","text":"Enum Value Value Type Description <code>SYMBOL_SUBSCRIPTION_DELAY</code> 0 <code>bool</code> Data arrives with delay (1=yes, 0=no) <code>SYMBOL_SECTOR</code> 1 <code>enum</code> Economic sector <code>SYMBOL_INDUSTRY</code> 2 <code>enum</code> Industry/economy branch <code>SYMBOL_CUSTOM</code> 3 <code>bool</code> Is custom symbol (1=yes, 0=no) <code>SYMBOL_BACKGROUND_COLOR</code> 4 <code>color</code> Background color in MarketWatch <code>SYMBOL_CHART_MODE</code> 5 <code>enum</code> Price type for bars (Bid/Last) <code>SYMBOL_EXIST</code> 6 <code>bool</code> Symbol exists (1=yes, 0=no) <code>SYMBOL_SELECT</code> 7 <code>bool</code> Selected in MarketWatch (1=yes, 0=no) <code>SYMBOL_VISIBLE</code> 8 <code>bool</code> Visible in MarketWatch (1=yes, 0=no) <code>SYMBOL_SESSION_DEALS</code> 9 <code>int</code> Number of deals in current session <code>SYMBOL_SESSION_BUY_ORDERS</code> 10 <code>int</code> Number of buy orders <code>SYMBOL_SESSION_SELL_ORDERS</code> 11 <code>int</code> Number of sell orders <code>SYMBOL_VOLUME</code> 12 <code>long</code> Volume of last deal <code>SYMBOL_VOLUMEHIGH</code> 13 <code>long</code> Maximum day volume <code>SYMBOL_VOLUMELOW</code> 14 <code>long</code> Minimum day volume <code>SYMBOL_TIME</code> 15 <code>datetime</code> Time of last quote (Unix timestamp) <code>SYMBOL_TIME_MSC</code> 16 <code>datetime</code> Time of last quote (milliseconds) <code>SYMBOL_DIGITS</code> 17 <code>int</code> Digits after decimal point <code>SYMBOL_SPREAD_FLOAT</code> 18 <code>bool</code> Floating spread (1=yes, 0=no) <code>SYMBOL_SPREAD</code> 19 <code>int</code> Spread value in points <code>SYMBOL_TICKS_BOOKDEPTH</code> 20 <code>int</code> Market Depth levels (0=not available) <code>SYMBOL_TRADE_CALC_MODE</code> 21 <code>enum</code> Contract price calculation mode <code>SYMBOL_TRADE_MODE</code> 22 <code>enum</code> Order execution type <code>SYMBOL_START_TIME</code> 23 <code>datetime</code> Symbol trade start date (futures) <code>SYMBOL_EXPIRATION_TIME</code> 24 <code>datetime</code> Symbol trade end date (futures) <code>SYMBOL_TRADE_STOPS_LEVEL</code> 25 <code>int</code> Minimum distance for stop orders (points) <code>SYMBOL_TRADE_FREEZE_LEVEL</code> 26 <code>int</code> Distance to freeze operations (points) <code>SYMBOL_TRADE_EXEMODE</code> 27 <code>enum</code> Deal execution mode <code>SYMBOL_SWAP_MODE</code> 28 <code>enum</code> Swap calculation model <code>SYMBOL_SWAP_ROLLOVER3DAYS</code> 29 <code>enum</code> Day for 3x swap rollover <code>SYMBOL_MARGIN_HEDGED_USE_LEG</code> 30 <code>bool</code> Calculate hedging using larger leg <code>SYMBOL_EXPIRATION_MODE</code> 31 <code>flags</code> Allowed order expiration modes <code>SYMBOL_FILLING_MODE</code> 32 <code>flags</code> Allowed order filling modes <code>SYMBOL_ORDER_MODE</code> 33 <code>flags</code> Allowed order types <code>SYMBOL_ORDER_GTC_MODE</code> 34 <code>enum</code> SL/TP expiration mode <code>SYMBOL_OPTION_MODE</code> 35 <code>enum</code> Option type <code>SYMBOL_OPTION_RIGHT</code> 36 <code>enum</code> Option right (Call/Put)"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to get individual integer/boolean properties of a symbol.</li> <li>Why you need it. Get precision (digits), spread, check if symbol is selected, get stop levels.</li> <li>Boolean values. Properties like <code>SYMBOL_SELECT</code> return <code>1</code> (true) or <code>0</code> (false).</li> <li>Timestamps. Time properties return Unix timestamps (seconds or milliseconds).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Get symbol precision (digits) for price formatting.</li> <li>Check current spread in points.</li> <li>Verify if symbol is selected/visible in MarketWatch.</li> <li>Get minimum distance for stop orders.</li> <li>Check trading mode and execution type.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li><code>SYMBOL_DIGITS</code> is crucial for price formatting (e.g., 5 for EURUSD = %.5f).</li> <li><code>SYMBOL_SPREAD</code> returns points, not price units.</li> <li><code>SYMBOL_TRADE_STOPS_LEVEL</code> is minimum distance for SL/TP from current price.</li> <li>Boolean properties return <code>1</code> or <code>0</code>, not Java <code>true</code>/<code>false</code>.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#1-get-symbol-digits-precision","title":"1) Get symbol digits (precision)","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get digits\n            var reply = account.symbolInfoInteger(\n                \"EURUSD\",\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_DIGITS\n            );\n            long digits = reply.getData().getValue();\n\n            System.out.printf(\"EURUSD digits: %d%n\", digits);\n            // Output: 5 (prices like 1.09876)\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#2-check-if-symbol-is-selected","title":"2) Check if symbol is selected","text":"<pre><code>// Check if symbol is in MarketWatch\nvar reply = account.symbolInfoInteger(\n    \"GBPUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SELECT\n);\nboolean isSelected = reply.getData().getValue() == 1;\n\nif (isSelected) {\n    System.out.println(\"\u2705 GBPUSD is in MarketWatch\");\n} else {\n    System.out.println(\"\u274c GBPUSD not in MarketWatch\");\n    // Select it\n    account.symbolSelect(\"GBPUSD\", true);\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#3-get-current-spread-in-points","title":"3) Get current spread in points","text":"<pre><code>// Get spread\nvar spreadReply = account.symbolInfoInteger(\n    \"EURUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SPREAD\n);\nlong spreadPoints = spreadReply.getData().getValue();\n\n// Check if spread is floating\nvar floatReply = account.symbolInfoInteger(\n    \"EURUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SPREAD_FLOAT\n);\nboolean isFloating = floatReply.getData().getValue() == 1;\n\nSystem.out.printf(\"Spread: %d points (%s)%n\",\n    spreadPoints,\n    isFloating ? \"floating\" : \"fixed\"\n);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#4-check-stop-levels","title":"4) Check stop levels","text":"<pre><code>public class StopLevelChecker {\n    public static void checkStopLevels(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var stopsReply = account.symbolInfoInteger(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_TRADE_STOPS_LEVEL\n        );\n        var freezeReply = account.symbolInfoInteger(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_TRADE_FREEZE_LEVEL\n        );\n\n        long stopsLevel = stopsReply.getData().getValue();\n        long freezeLevel = freezeReply.getData().getValue();\n\n        System.out.printf(\"=== %s Stop Levels ===%n\", symbol);\n        System.out.printf(\"Stops level:  %d points (min distance for SL/TP)%n\", stopsLevel);\n        System.out.printf(\"Freeze level: %d points (modification disabled)%n\", freezeLevel);\n\n        if (stopsLevel == 0) {\n            System.out.println(\"\u2705 No minimum stop level restriction\");\n        }\n    }\n}\n\n// Usage\nStopLevelChecker.checkStopLevels(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#5-format-price-with-correct-precision","title":"5) Format price with correct precision","text":"<pre><code>public class PriceFormatter {\n    /**\n     * Format price with symbol-specific precision\n     */\n    public static String formatPrice(\n            MT5Account account,\n            String symbol,\n            double price) throws ApiExceptionMT5 {\n\n        var reply = account.symbolInfoInteger(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_DIGITS\n        );\n        int digits = (int) reply.getData().getValue();\n\n        return String.format(\"%.\" + digits + \"f\", price);\n    }\n}\n\n// Usage\ndouble price = 1.098765;\nString formatted = PriceFormatter.formatPrice(account, \"EURUSD\", price);\nSystem.out.println(\"Price: \" + formatted); // Output: 1.09877 (if 5 digits)\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#6-symbol-info-helper-with-caching","title":"6) Symbol info helper with caching","text":"<pre><code>public class SymbolProperties {\n    private final MT5Account account;\n    private final String symbol;\n    private Long cachedDigits;\n    private Boolean cachedIsSelected;\n\n    public SymbolProperties(MT5Account account, String symbol) {\n        this.account = account;\n        this.symbol = symbol;\n    }\n\n    private long getInteger(Mt5TermApiMarketInfo.SymbolInfoIntegerProperty property)\n            throws ApiExceptionMT5 {\n        var reply = account.symbolInfoInteger(symbol, property);\n        return reply.getData().getValue();\n    }\n\n    public int getDigits() throws ApiExceptionMT5 {\n        if (cachedDigits == null) {\n            cachedDigits = getInteger(\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_DIGITS\n            );\n        }\n        return cachedDigits.intValue();\n    }\n\n    public boolean isSelected() throws ApiExceptionMT5 {\n        if (cachedIsSelected == null) {\n            cachedIsSelected = getInteger(\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SELECT\n            ) == 1;\n        }\n        return cachedIsSelected;\n    }\n\n    public long getSpread() throws ApiExceptionMT5 {\n        return getInteger(Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SPREAD);\n    }\n\n    public long getStopsLevel() throws ApiExceptionMT5 {\n        return getInteger(Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_TRADE_STOPS_LEVEL);\n    }\n\n    public boolean isFloatingSpread() throws ApiExceptionMT5 {\n        return getInteger(Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SPREAD_FLOAT) == 1;\n    }\n\n    public void clearCache() {\n        cachedDigits = null;\n        cachedIsSelected = null;\n    }\n}\n\n// Usage\nvar props = new SymbolProperties(account, \"EURUSD\");\nSystem.out.printf(\"Digits: %d%n\", props.getDigits());\nSystem.out.printf(\"Selected: %s%n\", props.isSelected());\nSystem.out.printf(\"Spread: %d points%n\", props.getSpread());\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#7-validate-stop-loss-distance","title":"7) Validate stop loss distance","text":"<pre><code>public class StopValidator {\n    /**\n     * Validate if stop loss distance is allowed\n     */\n    public static boolean isStopDistanceValid(\n            MT5Account account,\n            String symbol,\n            double entryPrice,\n            double stopPrice) throws ApiExceptionMT5 {\n\n        // Get point size\n        var pointReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT\n        );\n        double point = pointReply.getData().getValue();\n\n        // Get minimum stop level\n        var stopsReply = account.symbolInfoInteger(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_TRADE_STOPS_LEVEL\n        );\n        long minStopsLevel = stopsReply.getData().getValue();\n\n        // Calculate distance in points\n        double distancePrice = Math.abs(entryPrice - stopPrice);\n        double distancePoints = distancePrice / point;\n\n        boolean valid = distancePoints &gt;= minStopsLevel;\n\n        if (!valid) {\n            System.out.printf(\"\u274c Stop distance %.0f points &lt; minimum %d points%n\",\n                distancePoints, minStopsLevel);\n        } else {\n            System.out.printf(\"\u2705 Stop distance %.0f points OK%n\", distancePoints);\n        }\n\n        return valid;\n    }\n}\n\n// Usage\ndouble entry = 1.09000;\ndouble stop = 1.08950;\nif (StopValidator.isStopDistanceValid(account, \"EURUSD\", entry, stop)) {\n    System.out.println(\"Stop loss is valid\");\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#8-symbol-status-report","title":"8) Symbol status report","text":"<pre><code>public class SymbolStatus {\n    public static void printStatus(MT5Account account, String symbol) {\n        try {\n            System.out.printf(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557%n\");\n            System.out.printf(\"\u2551    %s STATUS                      \u2551%n\", symbol);\n            System.out.printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563%n\");\n\n            // Digits\n            var digitsReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_DIGITS\n            );\n            System.out.printf(\"\u2551 Digits:       %-23d \u2551%n\", digitsReply.getData().getValue());\n\n            // Selected\n            var selectReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SELECT\n            );\n            boolean selected = selectReply.getData().getValue() == 1;\n            System.out.printf(\"\u2551 Selected:     %-23s \u2551%n\", selected ? \"Yes\" : \"No\");\n\n            // Spread\n            var spreadReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SPREAD\n            );\n            System.out.printf(\"\u2551 Spread:       %-20d pts \u2551%n\", spreadReply.getData().getValue());\n\n            // Floating spread\n            var floatReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SPREAD_FLOAT\n            );\n            boolean floating = floatReply.getData().getValue() == 1;\n            System.out.printf(\"\u2551 Spread type:  %-23s \u2551%n\", floating ? \"Floating\" : \"Fixed\");\n\n            // Stops level\n            var stopsReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_TRADE_STOPS_LEVEL\n            );\n            System.out.printf(\"\u2551 Stops level:  %-20d pts \u2551%n\", stopsReply.getData().getValue());\n\n            // Freeze level\n            var freezeReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_TRADE_FREEZE_LEVEL\n            );\n            System.out.printf(\"\u2551 Freeze level: %-20d pts \u2551%n\", freezeReply.getData().getValue());\n\n            System.out.printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d%n\");\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        }\n    }\n}\n\n// Usage\nSymbolStatus.printStatus(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoInteger/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolInfoIntegerRequest request =\n    Mt5TermApiMarketInfo.SymbolInfoIntegerRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setType(Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_DIGITS)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolInfoIntegerReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolInfoInteger(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nlong value = reply.getData().getValue();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/","title":"\u2705 Getting Symbol String Properties","text":"<p>Request: retrieve specific string properties of a trading symbol. Access symbol descriptions, currency information, exchange details, and other textual data.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolInfoString(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoString</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoString(SymbolInfoStringRequest) \u2192 SymbolInfoStringReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolInfoString(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets a specific string property of a trading symbol.\n     * Returns textual information such as description, currencies, exchange, category, etc.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @param property Property type to retrieve (e.g., SYMBOL_DESCRIPTION, SYMBOL_CURRENCY_BASE)\n     * @return Property value as string\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolInfoStringReply symbolInfoString(\n        String symbol,\n        Mt5TermApiMarketInfo.SymbolInfoStringProperty property) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolInfoStringRequest { symbol: string, type: SymbolInfoStringProperty }</code></p> <p>Reply message: <code>SymbolInfoStringReply { data: SymbolInfoStringData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\") <code>property</code> <code>SymbolInfoStringProperty</code> \u2705 Property to retrieve (see enum below)"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#output-symbolinfostringdata","title":"\u2b06\ufe0f Output - <code>SymbolInfoStringData</code>","text":"Field Type Description <code>value</code> <code>String</code> The requested property value <p>Access using <code>reply.getData().getValue()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#symbolinfostringproperty","title":"<code>SymbolInfoStringProperty</code>","text":"Enum Value Value Description <code>SYMBOL_BASIS</code> 0 The underlying asset of a derivative <code>SYMBOL_CATEGORY</code> 1 Category/sector name (e.g., \"Forex\", \"Metals\") <code>SYMBOL_COUNTRY</code> 2 Country to which the symbol belongs <code>SYMBOL_SECTOR_NAME</code> 3 Economic sector name <code>SYMBOL_INDUSTRY_NAME</code> 4 Industry branch name <code>SYMBOL_CURRENCY_BASE</code> 5 Base currency (first currency in pair, e.g., \"EUR\" in EURUSD) <code>SYMBOL_CURRENCY_PROFIT</code> 6 Profit currency (typically account currency) <code>SYMBOL_CURRENCY_MARGIN</code> 7 Margin currency (currency for margin requirements) <code>SYMBOL_BANK</code> 8 Feeder/source of current quote <code>SYMBOL_DESCRIPTION</code> 9 Human-readable symbol description <code>SYMBOL_EXCHANGE</code> 10 Exchange name where symbol is traded <code>SYMBOL_FORMULA</code> 11 Formula for custom symbol pricing <code>SYMBOL_ISIN</code> 12 ISIN code (International Securities Identification Number) <code>SYMBOL_PAGE</code> 13 Web page URL with symbol information <code>SYMBOL_PATH</code> 14 Path in symbol tree/hierarchy"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to get textual/descriptive properties of a symbol.</li> <li>Why you need it. Get human-readable descriptions, identify currencies, check exchange info.</li> <li>Currency info. Critical for understanding what you're trading and how P/L is calculated.</li> <li>Custom symbols. <code>SYMBOL_FORMULA</code> shows how synthetic symbols are calculated.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Display symbol descriptions in UI.</li> <li>Identify base and quote currencies.</li> <li>Determine profit/margin currencies for P/L calculations.</li> <li>Get exchange information for stocks/futures.</li> <li>Access ISIN codes for compliance/reporting.</li> <li>Understand custom symbol formulas.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li><code>SYMBOL_CURRENCY_BASE</code> is the first currency in Forex pairs (EUR in EURUSD).</li> <li><code>SYMBOL_CURRENCY_PROFIT</code> determines how profit is calculated/converted.</li> <li><code>SYMBOL_CURRENCY_MARGIN</code> determines margin calculation currency.</li> <li><code>SYMBOL_DESCRIPTION</code> provides user-friendly names for display.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#1-get-symbol-description","title":"1) Get symbol description","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get description\n            var reply = account.symbolInfoString(\n                \"EURUSD\",\n                Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION\n            );\n            String description = reply.getData().getValue();\n\n            System.out.printf(\"EURUSD: %s%n\", description);\n            // Output: \"Euro vs US Dollar\" or similar\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#2-get-currency-information","title":"2) Get currency information","text":"<pre><code>public class CurrencyInfo {\n    public record SymbolCurrencies(\n        String base,\n        String profit,\n        String margin\n    ) {}\n\n    /**\n     * Get all currency information for a symbol\n     */\n    public static SymbolCurrencies getCurrencies(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        var baseReply = account.symbolInfoString(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_BASE\n        );\n        var profitReply = account.symbolInfoString(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_PROFIT\n        );\n        var marginReply = account.symbolInfoString(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_MARGIN\n        );\n\n        return new SymbolCurrencies(\n            baseReply.getData().getValue(),\n            profitReply.getData().getValue(),\n            marginReply.getData().getValue()\n        );\n    }\n\n    /**\n     * Print currency information\n     */\n    public static void printCurrencies(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var currencies = getCurrencies(account, symbol);\n\n        System.out.printf(\"=== %s Currency Information ===%n\", symbol);\n        System.out.printf(\"Base currency:   %s (what you buy/sell)%n\", currencies.base());\n        System.out.printf(\"Profit currency: %s (P/L calculated in)%n\", currencies.profit());\n        System.out.printf(\"Margin currency: %s (margin required in)%n\", currencies.margin());\n    }\n}\n\n// Usage\nCurrencyInfo.printCurrencies(account, \"EURUSD\");\nCurrencyInfo.printCurrencies(account, \"XAUUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#3-build-symbol-info-display","title":"3) Build symbol info display","text":"<pre><code>public class SymbolDisplay {\n    /**\n     * Get complete displayable symbol information\n     */\n    public static String getDisplayInfo(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var descReply = account.symbolInfoString(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION\n        );\n        var categoryReply = account.symbolInfoString(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY\n        );\n\n        String description = descReply.getData().getValue();\n        String category = categoryReply.getData().getValue();\n\n        return String.format(\"%s - %s (%s)\", symbol, description, category);\n    }\n}\n\n// Usage\nString display = SymbolDisplay.getDisplayInfo(account, \"GBPUSD\");\nSystem.out.println(display);\n// Output: \"GBPUSD - British Pound vs US Dollar (Forex)\"\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#4-check-if-symbols-are-from-same-category","title":"4) Check if symbols are from same category","text":"<pre><code>public class SymbolCategorizer {\n    /**\n     * Get symbol category\n     */\n    public static String getCategory(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var reply = account.symbolInfoString(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY\n        );\n        return reply.getData().getValue();\n    }\n\n    /**\n     * Check if symbols are from same category\n     */\n    public static boolean isSameCategory(\n            MT5Account account,\n            String symbol1,\n            String symbol2) throws ApiExceptionMT5 {\n\n        String cat1 = getCategory(account, symbol1);\n        String cat2 = getCategory(account, symbol2);\n\n        return cat1.equalsIgnoreCase(cat2);\n    }\n}\n\n// Usage\nif (SymbolCategorizer.isSameCategory(account, \"EURUSD\", \"GBPUSD\")) {\n    System.out.println(\"Both symbols are from the same category\");\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#5-symbol-information-record","title":"5) Symbol information record","text":"<pre><code>public record SymbolInfo(\n    String symbol,\n    String description,\n    String category,\n    String baseCurrency,\n    String profitCurrency,\n    String marginCurrency,\n    String exchange\n) {\n    /**\n     * Build from MT5 account\n     */\n    public static SymbolInfo fromMT5(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        return new SymbolInfo(\n            symbol,\n            getString(account, symbol, Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION),\n            getString(account, symbol, Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY),\n            getString(account, symbol, Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_BASE),\n            getString(account, symbol, Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_PROFIT),\n            getString(account, symbol, Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_MARGIN),\n            getString(account, symbol, Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_EXCHANGE)\n        );\n    }\n\n    private static String getString(\n            MT5Account account,\n            String symbol,\n            Mt5TermApiMarketInfo.SymbolInfoStringProperty property)\n            throws ApiExceptionMT5 {\n\n        var reply = account.symbolInfoString(symbol, property);\n        return reply.getData().getValue();\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\n            \"%s (%s)%n\" +\n            \"  Description: %s%n\" +\n            \"  Category: %s%n\" +\n            \"  Currencies: %s/%s (margin: %s)%n\" +\n            \"  Exchange: %s\",\n            symbol, description,\n            description,\n            category,\n            baseCurrency, profitCurrency, marginCurrency,\n            exchange.isEmpty() ? \"N/A\" : exchange\n        );\n    }\n}\n\n// Usage\nvar info = SymbolInfo.fromMT5(account, \"EURUSD\");\nSystem.out.println(info);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#6-filter-symbols-by-category","title":"6) Filter symbols by category","text":"<pre><code>public class SymbolFilter {\n    /**\n     * Get all symbols from specific category\n     */\n    public static java.util.List&lt;String&gt; getSymbolsByCategory(\n            MT5Account account,\n            String targetCategory,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        // Get all symbols\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        java.util.List&lt;String&gt; matching = new java.util.ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            String symbol = nameReply.getData().getName();\n\n            try {\n                var catReply = account.symbolInfoString(\n                    symbol,\n                    Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY\n                );\n                String category = catReply.getData().getValue();\n\n                if (category.equalsIgnoreCase(targetCategory)) {\n                    matching.add(symbol);\n                }\n            } catch (ApiExceptionMT5 e) {\n                // Skip symbols that don't have category\n            }\n        }\n\n        return matching;\n    }\n}\n\n// Usage - get all Forex symbols\nvar forexSymbols = SymbolFilter.getSymbolsByCategory(account, \"Forex\", true);\nSystem.out.println(\"Forex symbols: \" + forexSymbols);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#7-symbol-details-panel","title":"7) Symbol details panel","text":"<pre><code>public class SymbolDetailsPanel {\n    public static void printDetails(MT5Account account, String symbol) {\n        try {\n            System.out.printf(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557%n\");\n            System.out.printf(\"\u2551        SYMBOL DETAILS: %-20s\u2551%n\", symbol);\n            System.out.printf(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563%n\");\n\n            // Description\n            var descReply = account.symbolInfoString(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION\n            );\n            System.out.printf(\"\u2551 Description:  %-31s \u2551%n\",\n                truncate(descReply.getData().getValue(), 31));\n\n            // Category\n            var catReply = account.symbolInfoString(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY\n            );\n            System.out.printf(\"\u2551 Category:     %-31s \u2551%n\",\n                truncate(catReply.getData().getValue(), 31));\n\n            // Currencies\n            var baseReply = account.symbolInfoString(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_BASE\n            );\n            var profitReply = account.symbolInfoString(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_PROFIT\n            );\n\n            System.out.printf(\"\u2551 Base:         %-31s \u2551%n\", baseReply.getData().getValue());\n            System.out.printf(\"\u2551 Profit:       %-31s \u2551%n\", profitReply.getData().getValue());\n\n            // Exchange\n            var exReply = account.symbolInfoString(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_EXCHANGE\n            );\n            String exchange = exReply.getData().getValue();\n            System.out.printf(\"\u2551 Exchange:     %-31s \u2551%n\",\n                exchange.isEmpty() ? \"N/A\" : truncate(exchange, 31));\n\n            System.out.printf(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d%n\");\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        }\n    }\n\n    private static String truncate(String str, int maxLen) {\n        if (str.length() &lt;= maxLen) return str;\n        return str.substring(0, maxLen - 3) + \"...\";\n    }\n}\n\n// Usage\nSymbolDetailsPanel.printDetails(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#8-create-symbol-dropdown-data","title":"8) Create symbol dropdown data","text":"<pre><code>public class SymbolDropdownBuilder {\n    public record SymbolItem(\n        String symbol,\n        String displayText,\n        String category\n    ) implements Comparable&lt;SymbolItem&gt; {\n        @Override\n        public int compareTo(SymbolItem other) {\n            int catCompare = this.category.compareTo(other.category);\n            if (catCompare != 0) return catCompare;\n            return this.symbol.compareTo(other.symbol);\n        }\n    }\n\n    /**\n     * Build sorted list for UI dropdown\n     */\n    public static java.util.List&lt;SymbolItem&gt; buildDropdownList(\n            MT5Account account,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        java.util.List&lt;SymbolItem&gt; items = new java.util.ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            String symbol = nameReply.getData().getName();\n\n            try {\n                var descReply = account.symbolInfoString(\n                    symbol,\n                    Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION\n                );\n                var catReply = account.symbolInfoString(\n                    symbol,\n                    Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY\n                );\n\n                String desc = descReply.getData().getValue();\n                String cat = catReply.getData().getValue();\n                String displayText = String.format(\"%s - %s\", symbol, desc);\n\n                items.add(new SymbolItem(symbol, displayText, cat));\n\n            } catch (ApiExceptionMT5 e) {\n                // Use symbol name only if description not available\n                items.add(new SymbolItem(symbol, symbol, \"Other\"));\n            }\n        }\n\n        java.util.Collections.sort(items);\n        return items;\n    }\n\n    /**\n     * Print dropdown list\n     */\n    public static void printDropdownList(java.util.List&lt;SymbolItem&gt; items) {\n        String lastCategory = \"\";\n\n        for (var item : items) {\n            if (!item.category().equals(lastCategory)) {\n                System.out.printf(\"%n=== %s ===%n\", item.category());\n                lastCategory = item.category();\n            }\n            System.out.println(\"  \" + item.displayText());\n        }\n    }\n}\n\n// Usage\nvar dropdownItems = SymbolDropdownBuilder.buildDropdownList(account, true);\nSymbolDropdownBuilder.printDropdownList(dropdownItems);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#9-export-symbol-database","title":"9) Export symbol database","text":"<pre><code>public class SymbolDatabase {\n    /**\n     * Export symbol information to CSV\n     */\n    public static void exportToCSV(\n            MT5Account account,\n            String filename,\n            boolean selectedOnly) throws Exception {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        try (java.io.PrintWriter writer = new java.io.PrintWriter(filename)) {\n            // CSV header\n            writer.println(\"Symbol,Description,Category,BaseCurrency,ProfitCurrency,Exchange\");\n\n            for (int i = 0; i &lt; total; i++) {\n                var nameReply = account.symbolName(i, selectedOnly);\n                String symbol = nameReply.getData().getName();\n\n                try {\n                    String desc = account.symbolInfoString(symbol,\n                        Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION\n                    ).getData().getValue();\n\n                    String cat = account.symbolInfoString(symbol,\n                        Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CATEGORY\n                    ).getData().getValue();\n\n                    String base = account.symbolInfoString(symbol,\n                        Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_BASE\n                    ).getData().getValue();\n\n                    String profit = account.symbolInfoString(symbol,\n                        Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_CURRENCY_PROFIT\n                    ).getData().getValue();\n\n                    String exchange = account.symbolInfoString(symbol,\n                        Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_EXCHANGE\n                    ).getData().getValue();\n\n                    writer.printf(\"\\\"%s\\\",\\\"%s\\\",\\\"%s\\\",\\\"%s\\\",\\\"%s\\\",\\\"%s\\\"%n\",\n                        symbol, desc, cat, base, profit, exchange);\n\n                } catch (ApiExceptionMT5 e) {\n                    // Write partial data\n                    writer.printf(\"\\\"%s\\\",\\\"N/A\\\",\\\"N/A\\\",\\\"N/A\\\",\\\"N/A\\\",\\\"N/A\\\"%n\", symbol);\n                }\n            }\n        }\n\n        System.out.printf(\"\u2705 Exported %d symbols to %s%n\", total, filename);\n    }\n}\n\n// Usage\nSymbolDatabase.exportToCSV(account, \"symbols.csv\", false);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoString/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolInfoStringRequest request =\n    Mt5TermApiMarketInfo.SymbolInfoStringRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setType(Mt5TermApiMarketInfo.SymbolInfoStringProperty.SYMBOL_DESCRIPTION)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolInfoStringReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolInfoString(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nString value = reply.getData().getValue();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/","title":"\u2705 Getting Latest Tick Data for Symbol","text":"<p>Request: current market tick data for a specified symbol. Returns real-time bid/ask prices, last trade price, volume, and timestamp.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolInfoTick(...)</code> and <code>MT5Account.quote(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolInfoTick</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolInfoTick(SymbolInfoTickRequest) \u2192 SymbolInfoTickRequestReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolInfoTick(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets the latest tick data for a specified symbol.\n     * Returns real-time market information including current bid/ask prices, last trade price, volume, and timestamp.\n     * This is the primary method for retrieving current market prices for trading decisions.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\", \"GBPUSD\")\n     * @return Latest tick data with bid/ask prices, last price, volume, and time\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolInfoTickRequestReply symbolInfoTick(String symbol) throws ApiExceptionMT5;\n\n    /**\n     * Gets the current market quote (Bid/Ask prices) for a trading symbol.\n     * This is a convenience method that internally calls symbolInfoTick().\n     *\n     * @param symbol Trading symbol name (e.g., \"EURUSD\", \"GBPUSD\")\n     * @return Current tick data including bid, ask, last price, and volume\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolInfoTickRequestReply quote(String symbol) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolInfoTickRequest { symbol: string }</code></p> <p>Reply message: <code>SymbolInfoTickRequestReply { data: MrpcMqlTick }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\")"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#output-mrpcmqltick","title":"\u2b06\ufe0f Output - <code>MrpcMqlTick</code>","text":"Field Type Description <code>time</code> <code>long</code> Time of the last prices update (Unix timestamp in seconds) <code>bid</code> <code>double</code> Current Bid price (sell price) <code>ask</code> <code>double</code> Current Ask price (buy price) <code>last</code> <code>double</code> Price of the last deal (Last) <code>volume</code> <code>long</code> Volume for the current Last price <code>time_msc</code> <code>long</code> Time of a price last update in milliseconds since 1970.01.01 <code>flags</code> <code>int</code> Tick flags (see MQL5 documentation) <code>volume_real</code> <code>double</code> Volume for the current Last price with greater accuracy <p>Access the tick data using <code>reply.getData()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Single RPC returning current market prices and tick information for a symbol.</li> <li>Why you need it. Essential for getting real-time quotes before placing orders or analyzing market conditions.</li> <li>Performance. Lightweight call - ideal for frequent price checks.</li> <li>Spread calculation. Spread = Ask - Bid (in price units, not points).</li> <li>Alternative. Use <code>quoteMany()</code> to fetch quotes for multiple symbols in batch.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Get current bid/ask prices before placing market orders.</li> <li>Calculate spread for trading decisions.</li> <li>Monitor real-time price changes.</li> <li>Verify market is active (check if prices are updating).</li> <li>Get last trade information (price and volume).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>The symbol must be selected in MarketWatch or the call may fail.</li> <li>Use <code>symbolSelect(symbol, true)</code> first if you're unsure if the symbol is selected.</li> <li>For Forex symbols, typically use <code>bid</code> for selling and <code>ask</code> for buying.</li> <li>The <code>time_msc</code> field provides millisecond precision for high-frequency trading.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code> to handle transient errors.</li> <li>For monitoring multiple symbols, consider using <code>quoteMany()</code> or tick subscriptions (<code>onSymbolTick()</code>).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#1-get-current-bidask-prices","title":"1) Get current bid/ask prices","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get current tick\n            Mt5TermApiMarketInfo.SymbolInfoTickRequestReply reply =\n                account.symbolInfoTick(\"EURUSD\");\n            Mt5TermApiMarketInfo.MrpcMqlTick tick = reply.getData();\n\n            System.out.printf(\"Symbol: EURUSD%n\");\n            System.out.printf(\"Bid: %.5f%n\", tick.getBid());\n            System.out.printf(\"Ask: %.5f%n\", tick.getAsk());\n            System.out.printf(\"Spread: %.5f%n\", tick.getAsk() - tick.getBid());\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#2-using-the-quote-convenience-method","title":"2) Using the <code>quote()</code> convenience method","text":"<pre><code>// Simpler syntax using quote() wrapper\nvar reply = account.quote(\"GBPUSD\");\nvar tick = reply.getData();\n\nSystem.out.printf(\"GBPUSD Bid: %.5f | Ask: %.5f%n\",\n    tick.getBid(), tick.getAsk());\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#3-calculate-spread-in-points","title":"3) Calculate spread in points","text":"<pre><code>var reply = account.symbolInfoTick(\"EURUSD\");\nvar tick = reply.getData();\n\n// Get symbol point size (e.g., 0.00001 for EURUSD)\nvar symbolReply = account.symbolInfoDouble(\n    \"EURUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT\n);\ndouble point = symbolReply.getData().getValue();\n\n// Calculate spread\ndouble spreadPrice = tick.getAsk() - tick.getBid();\ndouble spreadPoints = spreadPrice / point;\n\nSystem.out.printf(\"Spread: %.1f points (%.5f)%n\", spreadPoints, spreadPrice);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#4-get-tick-with-timestamp","title":"4) Get tick with timestamp","text":"<pre><code>var reply = account.symbolInfoTick(\"XAUUSD\");\nvar tick = reply.getData();\n\n// Convert Unix timestamp to Java Instant\njava.time.Instant tickTime = java.time.Instant.ofEpochSecond(tick.getTime());\njava.time.Instant tickTimeMsc = java.time.Instant.ofEpochMilli(tick.getTimeMsc());\n\nSystem.out.printf(\"Gold price at %s:%n\", tickTime);\nSystem.out.printf(\"Bid: %.2f | Ask: %.2f%n\", tick.getBid(), tick.getAsk());\nSystem.out.printf(\"Millisecond precision: %s%n\", tickTimeMsc);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#5-monitor-price-changes","title":"5) Monitor price changes","text":"<pre><code>import java.util.concurrent.TimeUnit;\n\npublic class PriceMonitor {\n    public static void monitorPrice(MT5Account account, String symbol) {\n        double lastBid = 0;\n\n        while (true) {\n            try {\n                var reply = account.quote(symbol);\n                var tick = reply.getData();\n\n                if (tick.getBid() != lastBid) {\n                    System.out.printf(\"[%s] %s: %.5f / %.5f (Spread: %.5f)%n\",\n                        java.time.LocalTime.now(),\n                        symbol,\n                        tick.getBid(),\n                        tick.getAsk(),\n                        tick.getAsk() - tick.getBid()\n                    );\n                    lastBid = tick.getBid();\n                }\n\n                TimeUnit.SECONDS.sleep(1);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"API Error: \" + e.getMessage());\n                try {\n                    TimeUnit.SECONDS.sleep(1);\n                } catch (InterruptedException ie) {\n                    break;\n                }\n            } catch (InterruptedException e) {\n                break;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#6-get-quotes-for-multiple-symbols","title":"6) Get quotes for multiple symbols","text":"<pre><code>// Get quotes for multiple symbols using quoteMany()\nString[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"};\n\nvar quotes = account.quoteMany(symbols);\n\nfor (int i = 0; i &lt; symbols.length; i++) {\n    var tick = quotes[i].getData();\n    System.out.printf(\"%s: Bid %.5f | Ask %.5f%n\",\n        symbols[i],\n        tick.getBid(),\n        tick.getAsk()\n    );\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#7-check-if-market-is-active","title":"7) Check if market is active","text":"<pre><code>public class MarketChecker {\n    /**\n     * Check if market is actively trading by comparing tick timestamps\n     */\n    public static boolean isMarketActive(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        var reply = account.symbolInfoTick(symbol);\n        var tick = reply.getData();\n\n        // Get current time\n        long currentTime = System.currentTimeMillis();\n        long tickTime = tick.getTimeMsc();\n\n        // Check if tick is fresh (within last 5 seconds)\n        long ageMillis = currentTime - tickTime;\n        boolean isActive = ageMillis &lt; 5000;\n\n        System.out.printf(\"Symbol: %s%n\", symbol);\n        System.out.printf(\"Tick age: %.1f seconds%n\", ageMillis / 1000.0);\n        System.out.printf(\"Market active: %s%n\", isActive);\n\n        return isActive;\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#8-create-a-tick-data-record","title":"8) Create a tick data record","text":"<pre><code>/**\n * Immutable record for tick data\n */\npublic record TickData(\n    String symbol,\n    double bid,\n    double ask,\n    double last,\n    double spread,\n    java.time.Instant time\n) {\n    public static TickData fromProto(String symbol, Mt5TermApiMarketInfo.MrpcMqlTick tick) {\n        return new TickData(\n            symbol,\n            tick.getBid(),\n            tick.getAsk(),\n            tick.getLast(),\n            tick.getAsk() - tick.getBid(),\n            java.time.Instant.ofEpochMilli(tick.getTimeMsc())\n        );\n    }\n\n    @Override\n    public String toString() {\n        return String.format(\"%s @ %s: Bid=%.5f Ask=%.5f Spread=%.5f\",\n            symbol, time, bid, ask, spread);\n    }\n}\n\n// Usage\nvar reply = account.quote(\"EURUSD\");\nvar tickData = TickData.fromProto(\"EURUSD\", reply.getData());\nSystem.out.println(tickData);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#9-pre-trade-price-check","title":"9) Pre-trade price check","text":"<pre><code>public class TradeHelper {\n    /**\n     * Get current price for order placement\n     */\n    public static double getCurrentPrice(\n            MT5Account account,\n            String symbol,\n            boolean isBuy) throws ApiExceptionMT5 {\n\n        var reply = account.quote(symbol);\n        var tick = reply.getData();\n\n        // Buy at Ask, Sell at Bid\n        double price = isBuy ? tick.getAsk() : tick.getBid();\n\n        System.out.printf(\"%s %s at price: %.5f%n\",\n            isBuy ? \"Buying\" : \"Selling\",\n            symbol,\n            price);\n\n        return price;\n    }\n\n    /**\n     * Check if spread is acceptable\n     */\n    public static boolean isSpreadAcceptable(\n            MT5Account account,\n            String symbol,\n            double maxSpreadPoints) throws ApiExceptionMT5 {\n\n        var reply = account.quote(symbol);\n        var tick = reply.getData();\n\n        // Get point size\n        var pointReply = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_POINT\n        );\n        double point = pointReply.getData().getValue();\n\n        // Calculate spread in points\n        double spreadPoints = (tick.getAsk() - tick.getBid()) / point;\n\n        boolean acceptable = spreadPoints &lt;= maxSpreadPoints;\n\n        if (!acceptable) {\n            System.out.printf(\"\u26a0\ufe0f Spread too high: %.1f points (max: %.1f)%n\",\n                spreadPoints, maxSpreadPoints);\n        }\n\n        return acceptable;\n    }\n}\n\n// Usage\nif (TradeHelper.isSpreadAcceptable(account, \"EURUSD\", 3.0)) {\n    double buyPrice = TradeHelper.getCurrentPrice(account, \"EURUSD\", true);\n    // Place buy order at buyPrice\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolInfoTick/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolInfoTickRequest request =\n    Mt5TermApiMarketInfo.SymbolInfoTickRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolInfoTickRequestReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolInfoTick(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nMt5TermApiMarketInfo.MrpcMqlTick tick = reply.getData();\ndouble bid = tick.getBid();\ndouble ask = tick.getAsk();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/","title":"\u2705 Check if Symbol Data is Synchronized","text":"<p>Request: verify if symbol data in terminal is synchronized with trade server. Ensures you're working with up-to-date market information.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolIsSynchronized(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolIsSynchronized</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolIsSynchronized(SymbolIsSynchronizedRequest) \u2192 SymbolIsSynchronizedReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolIsSynchronized(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Checks if symbol data in the terminal is synchronized with the trade server.\n     * Returns true if data is synchronized and up-to-date, false otherwise.\n     *\n     * @param symbol Symbol name to check (e.g., \"EURUSD\")\n     * @return Synchronization status\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolIsSynchronizedReply symbolIsSynchronized(String symbol) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolIsSynchronizedRequest { symbol: string }</code></p> <p>Reply message: <code>SymbolIsSynchronizedReply { data: SymbolIsSynchronizedData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\")"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#output-symbolissynchronizeddata","title":"\u2b06\ufe0f Output - <code>SymbolIsSynchronizedData</code>","text":"Field Type Description <code>synchronized</code> <code>boolean</code> <code>true</code> if data is synchronized, <code>false</code> if outdated <p>Access using <code>reply.getData().getSynchronized()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to check if terminal has up-to-date symbol data from server.</li> <li>Why you need it. Ensure prices and symbol properties are current before trading.</li> <li>When false. Data may be outdated due to connection issues or terminal startup.</li> <li>Performance. Quick validation call before critical trading operations.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Verify data freshness before placing orders.</li> <li>Check if terminal finished loading symbol data after connection.</li> <li>Diagnose why quotes appear stale or frozen.</li> <li>Validate data quality for trading algorithms.</li> <li>Ensure accurate price data for backtesting or analysis.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Symbol must be selected in MarketWatch for this check.</li> <li>Returns <code>false</code> during terminal startup while data is loading.</li> <li>Check this after connection before getting critical market data.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>If <code>false</code>, wait a moment and retry - synchronization may be in progress.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#1-basic-synchronization-check","title":"1) Basic synchronization check","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Check synchronization\n            Mt5TermApiMarketInfo.SymbolIsSynchronizedReply reply =\n                account.symbolIsSynchronized(\"EURUSD\");\n            boolean synced = reply.getData().getSynchronized();\n\n            if (synced) {\n                System.out.println(\"\u2705 EURUSD data is synchronized\");\n            } else {\n                System.out.println(\"\u26a0\ufe0f EURUSD data is NOT synchronized\");\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#2-wait-for-synchronization","title":"2) Wait for synchronization","text":"<pre><code>public class SyncWaiter {\n    /**\n     * Wait for symbol to synchronize (with timeout)\n     */\n    public static boolean waitForSync(\n            MT5Account account,\n            String symbol,\n            int timeoutSeconds) throws ApiExceptionMT5, InterruptedException {\n\n        System.out.printf(\"Waiting for %s to synchronize...%n\", symbol);\n\n        long startTime = System.currentTimeMillis();\n        long timeoutMillis = timeoutSeconds * 1000L;\n\n        while (System.currentTimeMillis() - startTime &lt; timeoutMillis) {\n            var reply = account.symbolIsSynchronized(symbol);\n\n            if (reply.getData().getSynchronized()) {\n                System.out.println(\"\u2705 Synchronized\");\n                return true;\n            }\n\n            System.out.print(\".\");\n            Thread.sleep(500); // Wait 500ms before retry\n        }\n\n        System.out.println(\"\\n\u26a0\ufe0f Timeout - not synchronized\");\n        return false;\n    }\n}\n\n// Usage\nif (SyncWaiter.waitForSync(account, \"EURUSD\", 10)) {\n    // Safe to proceed\n    var tick = account.quote(\"EURUSD\");\n    System.out.printf(\"Bid: %.5f%n\", tick.getData().getBid());\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#3-pre-trade-validation","title":"3) Pre-trade validation","text":"<pre><code>public class TradeValidator {\n    /**\n     * Validate symbol before trading\n     */\n    public static boolean validateSymbol(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        System.out.printf(\"Validating %s...%n\", symbol);\n\n        // Check existence\n        var existReply = account.symbolExist(symbol);\n        if (!existReply.getData().getExists()) {\n            System.out.println(\"\u274c Symbol does not exist\");\n            return false;\n        }\n        System.out.println(\"\u2705 Symbol exists\");\n\n        // Select symbol\n        var selectReply = account.symbolSelect(symbol, true);\n        if (!selectReply.getData().getSuccess()) {\n            System.out.println(\"\u274c Failed to select symbol\");\n            return false;\n        }\n        System.out.println(\"\u2705 Symbol selected\");\n\n        // Check synchronization\n        var syncReply = account.symbolIsSynchronized(symbol);\n        if (!syncReply.getData().getSynchronized()) {\n            System.out.println(\"\u26a0\ufe0f Symbol not synchronized - data may be outdated\");\n            return false;\n        }\n        System.out.println(\"\u2705 Symbol synchronized\");\n\n        return true;\n    }\n}\n\n// Usage\nif (TradeValidator.validateSymbol(account, \"GBPUSD\")) {\n    System.out.println(\"Ready to trade GBPUSD\");\n    // Place order\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#4-check-multiple-symbols","title":"4) Check multiple symbols","text":"<pre><code>public class MultiSymbolSync {\n    public record SyncStatus(\n        String symbol,\n        boolean synchronized,\n        String message\n    ) {}\n\n    /**\n     * Check sync status for multiple symbols\n     */\n    public static java.util.List&lt;SyncStatus&gt; checkMultiple(\n            MT5Account account,\n            String... symbols) {\n\n        java.util.List&lt;SyncStatus&gt; results = new java.util.ArrayList&lt;&gt;();\n\n        for (String symbol : symbols) {\n            try {\n                var reply = account.symbolIsSynchronized(symbol);\n                boolean synced = reply.getData().getSynchronized();\n\n                results.add(new SyncStatus(\n                    symbol,\n                    synced,\n                    synced ? \"Synchronized\" : \"Not synchronized\"\n                ));\n\n            } catch (ApiExceptionMT5 e) {\n                results.add(new SyncStatus(\n                    symbol,\n                    false,\n                    \"Error: \" + e.getMessage()\n                ));\n            }\n        }\n\n        return results;\n    }\n\n    /**\n     * Print sync status report\n     */\n    public static void printReport(java.util.List&lt;SyncStatus&gt; results) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551   SYMBOL SYNCHRONIZATION STATUS     \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var status : results) {\n            String icon = status.synchronized() ? \"\u2705\" : \"\u26a0\ufe0f\";\n            System.out.printf(\"\u2551 %s %-10s %-20s \u2551%n\",\n                icon,\n                status.symbol(),\n                status.message()\n            );\n        }\n\n        long syncedCount = results.stream()\n            .filter(SyncStatus::synchronized)\n            .count();\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Synchronized: %d/%d                 \u2551%n\",\n            syncedCount, results.size());\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar statuses = MultiSymbolSync.checkMultiple(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"\n);\nMultiSymbolSync.printReport(statuses);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#5-retry-with-exponential-backoff","title":"5) Retry with exponential backoff","text":"<pre><code>public class SyncRetry {\n    /**\n     * Wait for sync with exponential backoff\n     */\n    public static boolean waitWithBackoff(\n            MT5Account account,\n            String symbol,\n            int maxRetries) throws ApiExceptionMT5 {\n\n        int retryDelay = 100; // Start with 100ms\n\n        for (int retry = 0; retry &lt; maxRetries; retry++) {\n            var reply = account.symbolIsSynchronized(symbol);\n\n            if (reply.getData().getSynchronized()) {\n                System.out.printf(\"\u2705 %s synchronized (attempt %d/%d)%n\",\n                    symbol, retry + 1, maxRetries);\n                return true;\n            }\n\n            System.out.printf(\"\u23f3 Attempt %d/%d - waiting %dms...%n\",\n                retry + 1, maxRetries, retryDelay);\n\n            try {\n                Thread.sleep(retryDelay);\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n                return false;\n            }\n\n            // Exponential backoff: 100ms, 200ms, 400ms, 800ms, ...\n            retryDelay = Math.min(retryDelay * 2, 5000); // Cap at 5 seconds\n        }\n\n        System.out.printf(\"\u274c %s failed to synchronize after %d attempts%n\",\n            symbol, maxRetries);\n        return false;\n    }\n}\n\n// Usage\nif (SyncRetry.waitWithBackoff(account, \"EURUSD\", 5)) {\n    // Proceed with trading\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#6-connection-health-check","title":"6) Connection health check","text":"<pre><code>public class ConnectionHealth {\n    /**\n     * Check overall connection health via symbol sync\n     */\n    public static boolean isConnectionHealthy(\n            MT5Account account,\n            String... testSymbols) throws ApiExceptionMT5 {\n\n        if (testSymbols.length == 0) {\n            testSymbols = new String[]{\"EURUSD\"};\n        }\n\n        int syncedCount = 0;\n\n        for (String symbol : testSymbols) {\n            var reply = account.symbolIsSynchronized(symbol);\n            if (reply.getData().getSynchronized()) {\n                syncedCount++;\n            }\n        }\n\n        double syncRate = (double) syncedCount / testSymbols.length;\n        boolean healthy = syncRate &gt;= 0.8; // 80% threshold\n\n        System.out.printf(\"Connection health: %.0f%% (%d/%d symbols synced)%n\",\n            syncRate * 100, syncedCount, testSymbols.length);\n\n        if (!healthy) {\n            System.out.println(\"\u26a0\ufe0f Connection may be unstable\");\n        }\n\n        return healthy;\n    }\n}\n\n// Usage - check major pairs\nboolean healthy = ConnectionHealth.isConnectionHealthy(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"USDCHF\"\n);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#7-symbol-readiness-validator","title":"7) Symbol readiness validator","text":"<pre><code>public class SymbolReadiness {\n    public enum Status {\n        READY,\n        NOT_SELECTED,\n        NOT_SYNCHRONIZED,\n        ERROR\n    }\n\n    public record ReadinessResult(\n        String symbol,\n        Status status,\n        String message\n    ) {\n        public boolean isReady() {\n            return status == Status.READY;\n        }\n    }\n\n    /**\n     * Check if symbol is ready for trading\n     */\n    public static ReadinessResult checkReadiness(\n            MT5Account account,\n            String symbol) {\n\n        try {\n            // Check if selected\n            var intReply = account.symbolInfoInteger(\n                symbol,\n                Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SELECT\n            );\n\n            if (intReply.getData().getValue() == 0) {\n                return new ReadinessResult(\n                    symbol,\n                    Status.NOT_SELECTED,\n                    \"Symbol not in MarketWatch\"\n                );\n            }\n\n            // Check synchronization\n            var syncReply = account.symbolIsSynchronized(symbol);\n\n            if (!syncReply.getData().getSynchronized()) {\n                return new ReadinessResult(\n                    symbol,\n                    Status.NOT_SYNCHRONIZED,\n                    \"Symbol data not synchronized\"\n                );\n            }\n\n            return new ReadinessResult(\n                symbol,\n                Status.READY,\n                \"Symbol ready for trading\"\n            );\n\n        } catch (ApiExceptionMT5 e) {\n            return new ReadinessResult(\n                symbol,\n                Status.ERROR,\n                \"Error: \" + e.getMessage()\n            );\n        }\n    }\n\n    /**\n     * Ensure symbol is ready (auto-fix if possible)\n     */\n    public static boolean ensureReady(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5, InterruptedException {\n\n        var readiness = checkReadiness(account, symbol);\n\n        switch (readiness.status()) {\n            case READY:\n                System.out.printf(\"\u2705 %s is ready%n\", symbol);\n                return true;\n\n            case NOT_SELECTED:\n                System.out.printf(\"\u2699\ufe0f Selecting %s...%n\", symbol);\n                account.symbolSelect(symbol, true);\n                Thread.sleep(500);\n                return ensureReady(account, symbol); // Retry\n\n            case NOT_SYNCHRONIZED:\n                System.out.printf(\"\u23f3 Waiting for %s to synchronize...%n\", symbol);\n                return SyncWaiter.waitForSync(account, symbol, 10);\n\n            case ERROR:\n                System.out.printf(\"\u274c %s: %s%n\", symbol, readiness.message());\n                return false;\n\n            default:\n                return false;\n        }\n    }\n}\n\n// Usage\nif (SymbolReadiness.ensureReady(account, \"XAUUSD\")) {\n    System.out.println(\"Ready to trade gold\");\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#8-data-quality-monitor","title":"8) Data quality monitor","text":"<pre><code>public class DataQualityMonitor {\n    /**\n     * Monitor data quality in real-time\n     */\n    public static void monitor(\n            MT5Account account,\n            String symbol,\n            int durationSeconds) throws InterruptedException {\n\n        System.out.printf(\"Monitoring %s data quality for %d seconds...%n\",\n            symbol, durationSeconds);\n        System.out.println(\"\u2550\".repeat(50));\n\n        long startTime = System.currentTimeMillis();\n        long endTime = startTime + (durationSeconds * 1000L);\n\n        int checkCount = 0;\n        int syncedCount = 0;\n\n        while (System.currentTimeMillis() &lt; endTime) {\n            try {\n                var reply = account.symbolIsSynchronized(symbol);\n                boolean synced = reply.getData().getSynchronized();\n\n                checkCount++;\n                if (synced) syncedCount++;\n\n                String status = synced ? \"\u2705 SYNCED\" : \"\u26a0\ufe0f NOT SYNCED\";\n                System.out.printf(\"[%s] Check %d: %s%n\",\n                    java.time.LocalTime.now(),\n                    checkCount,\n                    status\n                );\n\n                Thread.sleep(1000); // Check every second\n\n            } catch (ApiExceptionMT5 e) {\n                System.out.printf(\"\u274c Error: %s%n\", e.getMessage());\n            }\n        }\n\n        double reliability = (syncedCount * 100.0) / checkCount;\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Reliability: %.1f%% (%d/%d checks synced)%n\",\n            reliability, syncedCount, checkCount);\n    }\n}\n\n// Usage\nDataQualityMonitor.monitor(account, \"EURUSD\", 30);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolIsSynchronized/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolIsSynchronizedRequest request =\n    Mt5TermApiMarketInfo.SymbolIsSynchronizedRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolIsSynchronizedReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolIsSynchronized(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nboolean synchronized = reply.getData().getSynchronized();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/","title":"\u2705 Get Symbol Name by Index","text":"<p>Request: retrieve symbol name by its index position. Use with <code>symbolsTotal()</code> to iterate through all available symbols.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolName(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolName</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolName(SymbolNameRequest) \u2192 SymbolNameReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolName(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets the name of a symbol by its index position.\n     * Use in combination with symbolsTotal() to iterate through all symbols.\n     *\n     * @param index Zero-based index of the symbol\n     * @param selectedOnly If true, search only in MarketWatch; if false, search all symbols\n     * @return Symbol name at the specified index\n     * @throws ApiExceptionMT5 if the call fails or index is out of range\n     */\n    public Mt5TermApiMarketInfo.SymbolNameReply symbolName(int index, boolean selectedOnly) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolNameRequest { index: int32, selected: bool }</code></p> <p>Reply message: <code>SymbolNameReply { data: SymbolNameData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>index</code> <code>int</code> \u2705 Zero-based index (0 to total-1) <code>selectedOnly</code> <code>boolean</code> \u2705 <code>true</code> = MarketWatch only, <code>false</code> = all available symbols"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#output-symbolnamedata","title":"\u2b06\ufe0f Output - <code>SymbolNameData</code>","text":"Field Type Description <code>name</code> <code>String</code> Symbol name at the specified index <p>Access the name using <code>reply.getData().getName()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to get symbol name by index position in the symbol list.</li> <li>Why you need it. To iterate through all symbols with <code>symbolsTotal()</code> + loop.</li> <li>Index range. Must be <code>0 &lt;= index &lt; symbolsTotal()</code> or will throw error.</li> <li>Use case. Primary method for discovering all available symbols on broker.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Iterate through all symbols in MarketWatch.</li> <li>Discover all symbols available on the broker.</li> <li>Build a complete symbol list programmatically.</li> <li>Find symbols matching specific patterns.</li> <li>Create symbol selection UIs.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Always call <code>symbolsTotal()</code> first to get the valid index range.</li> <li>Index is zero-based: valid range is <code>[0, total-1]</code>.</li> <li>Out-of-range index will throw <code>ApiExceptionMT5</code>.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>Symbol order may change if symbols are added/removed between calls.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#1-get-symbol-by-index","title":"1) Get symbol by index","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get first symbol in MarketWatch\n            Mt5TermApiMarketInfo.SymbolNameReply reply =\n                account.symbolName(0, true);\n            String symbolName = reply.getData().getName();\n\n            System.out.printf(\"First symbol in MarketWatch: %s%n\", symbolName);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#2-list-all-marketwatch-symbols","title":"2) List all MarketWatch symbols","text":"<pre><code>// Get count\nvar totalReply = account.symbolsTotal(true);\nint total = totalReply.getData().getTotal();\n\nSystem.out.printf(\"Symbols in MarketWatch: %d%n\", total);\nSystem.out.println(\"\u2550\".repeat(40));\n\n// Iterate through all\nfor (int i = 0; i &lt; total; i++) {\n    var nameReply = account.symbolName(i, true);\n    String symbol = nameReply.getData().getName();\n    System.out.printf(\"%3d. %s%n\", i + 1, symbol);\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#3-list-all-available-symbols-limited","title":"3) List all available symbols (limited)","text":"<pre><code>// Get total count\nvar totalReply = account.symbolsTotal(false);\nint total = totalReply.getData().getTotal();\n\nSystem.out.printf(\"Total available symbols: %d%n\", total);\nSystem.out.println(\"Showing first 20:\");\nSystem.out.println(\"\u2550\".repeat(40));\n\n// Iterate (limit to avoid thousands of symbols)\nint limit = Math.min(total, 20);\nfor (int i = 0; i &lt; limit; i++) {\n    var nameReply = account.symbolName(i, false);\n    String symbol = nameReply.getData().getName();\n    System.out.printf(\"%3d. %s%n\", i + 1, symbol);\n}\n\nif (total &gt; limit) {\n    System.out.printf(\"... and %d more%n\", total - limit);\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#4-get-all-symbol-names-as-list","title":"4) Get all symbol names as List","text":"<pre><code>public class SymbolListHelper {\n    /**\n     * Get all symbol names as a List\n     */\n    public static java.util.List&lt;String&gt; getAllSymbols(\n            MT5Account account,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        // Get total\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        // Pre-allocate list\n        java.util.List&lt;String&gt; symbols = new java.util.ArrayList&lt;&gt;(total);\n\n        // Fetch all names\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            symbols.add(nameReply.getData().getName());\n        }\n\n        return symbols;\n    }\n}\n\n// Usage\nvar marketWatchSymbols = SymbolListHelper.getAllSymbols(account, true);\nSystem.out.println(\"MarketWatch: \" + marketWatchSymbols);\n\nvar allSymbols = SymbolListHelper.getAllSymbols(account, false);\nSystem.out.printf(\"Total symbols: %d%n\", allSymbols.size());\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#5-find-symbols-by-prefix","title":"5) Find symbols by prefix","text":"<pre><code>public class SymbolFinder {\n    /**\n     * Find all symbols starting with prefix\n     */\n    public static java.util.List&lt;String&gt; findByPrefix(\n            MT5Account account,\n            String prefix,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        java.util.List&lt;String&gt; matching = new java.util.ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            String symbol = nameReply.getData().getName();\n\n            if (symbol.startsWith(prefix)) {\n                matching.add(symbol);\n            }\n        }\n\n        return matching;\n    }\n}\n\n// Usage - find all EUR pairs\nvar eurPairs = SymbolFinder.findByPrefix(account, \"EUR\", true);\nSystem.out.println(\"EUR pairs: \" + eurPairs);\n\n// Find all gold symbols\nvar goldSymbols = SymbolFinder.findByPrefix(account, \"XAU\", false);\nSystem.out.println(\"Gold symbols: \" + goldSymbols);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#6-find-symbols-by-pattern-regex","title":"6) Find symbols by pattern (regex)","text":"<pre><code>public class SymbolPatternMatcher {\n    /**\n     * Find symbols matching regex pattern\n     */\n    public static java.util.List&lt;String&gt; findByPattern(\n            MT5Account account,\n            String regex,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        java.util.List&lt;String&gt; matching = new java.util.ArrayList&lt;&gt;();\n        java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(regex);\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            String symbol = nameReply.getData().getName();\n\n            if (pattern.matcher(symbol).matches()) {\n                matching.add(symbol);\n            }\n        }\n\n        return matching;\n    }\n}\n\n// Usage - find major FX pairs (6 characters)\nvar majorPairs = SymbolPatternMatcher.findByPattern(\n    account, \"^[A-Z]{6}$\", true\n);\nSystem.out.println(\"Major pairs: \" + majorPairs);\n\n// Find symbols ending with specific suffix\nvar suffixSymbols = SymbolPatternMatcher.findByPattern(\n    account, \".*\\\\.m$\", false\n);\nSystem.out.println(\"Symbols with .m suffix: \" + suffixSymbols);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#7-group-symbols-by-type","title":"7) Group symbols by type","text":"<pre><code>public class SymbolGrouper {\n    /**\n     * Group symbols by currency, metals, crypto, etc.\n     */\n    public static java.util.Map&lt;String, java.util.List&lt;String&gt;&gt; groupSymbols(\n            MT5Account account,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        java.util.Map&lt;String, java.util.List&lt;String&gt;&gt; groups = new java.util.LinkedHashMap&lt;&gt;();\n        groups.put(\"Forex\", new java.util.ArrayList&lt;&gt;());\n        groups.put(\"Metals\", new java.util.ArrayList&lt;&gt;());\n        groups.put(\"Crypto\", new java.util.ArrayList&lt;&gt;());\n        groups.put(\"Indices\", new java.util.ArrayList&lt;&gt;());\n        groups.put(\"Other\", new java.util.ArrayList&lt;&gt;());\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            String symbol = nameReply.getData().getName();\n\n            if (symbol.matches(\"^[A-Z]{6}$\")) {\n                groups.get(\"Forex\").add(symbol);\n            } else if (symbol.startsWith(\"XAU\") || symbol.startsWith(\"XAG\")) {\n                groups.get(\"Metals\").add(symbol);\n            } else if (symbol.contains(\"BTC\") || symbol.contains(\"ETH\")) {\n                groups.get(\"Crypto\").add(symbol);\n            } else if (symbol.contains(\"30\") || symbol.contains(\"500\")) {\n                groups.get(\"Indices\").add(symbol);\n            } else {\n                groups.get(\"Other\").add(symbol);\n            }\n        }\n\n        return groups;\n    }\n\n    /**\n     * Print grouped symbols\n     */\n    public static void printGroups(java.util.Map&lt;String, java.util.List&lt;String&gt;&gt; groups) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551     SYMBOLS BY CATEGORY           \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var entry : groups.entrySet()) {\n            if (!entry.getValue().isEmpty()) {\n                System.out.printf(\"\u2551 %-15s: %-3d symbols     \u2551%n\",\n                    entry.getKey(), entry.getValue().size());\n                for (String symbol : entry.getValue()) {\n                    System.out.printf(\"\u2551   \u2022 %-29s \u2551%n\", symbol);\n                }\n                System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n            }\n        }\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar groups = SymbolGrouper.groupSymbols(account, true);\nSymbolGrouper.printGroups(groups);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#8-build-symbol-cache","title":"8) Build symbol cache","text":"<pre><code>public class SymbolCache {\n    private final java.util.List&lt;String&gt; symbols;\n    private final java.util.Map&lt;String, Integer&gt; indexMap;\n\n    private SymbolCache(java.util.List&lt;String&gt; symbols) {\n        this.symbols = java.util.List.copyOf(symbols);\n        this.indexMap = new java.util.HashMap&lt;&gt;();\n\n        for (int i = 0; i &lt; symbols.size(); i++) {\n            indexMap.put(symbols.get(i), i);\n        }\n    }\n\n    /**\n     * Build cache from MT5\n     */\n    public static SymbolCache build(MT5Account account, boolean selectedOnly)\n            throws ApiExceptionMT5 {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        java.util.List&lt;String&gt; symbols = new java.util.ArrayList&lt;&gt;(total);\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            symbols.add(nameReply.getData().getName());\n        }\n\n        return new SymbolCache(symbols);\n    }\n\n    public java.util.List&lt;String&gt; getAll() {\n        return symbols;\n    }\n\n    public int getCount() {\n        return symbols.size();\n    }\n\n    public boolean contains(String symbol) {\n        return indexMap.containsKey(symbol);\n    }\n\n    public int getIndex(String symbol) {\n        return indexMap.getOrDefault(symbol, -1);\n    }\n\n    public String getByIndex(int index) {\n        if (index &lt; 0 || index &gt;= symbols.size()) {\n            return null;\n        }\n        return symbols.get(index);\n    }\n\n    public java.util.List&lt;String&gt; filter(java.util.function.Predicate&lt;String&gt; predicate) {\n        return symbols.stream()\n            .filter(predicate)\n            .collect(java.util.stream.Collectors.toList());\n    }\n}\n\n// Usage\nvar cache = SymbolCache.build(account, true);\n\nSystem.out.printf(\"Cached %d symbols%n\", cache.getCount());\nSystem.out.println(\"EUR pairs: \" + cache.filter(s -&gt; s.startsWith(\"EUR\")));\nSystem.out.println(\"EURUSD exists: \" + cache.contains(\"EURUSD\"));\nSystem.out.println(\"EURUSD index: \" + cache.getIndex(\"EURUSD\"));\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#9-export-symbols-to-file","title":"9) Export symbols to file","text":"<pre><code>public class SymbolExporter {\n    /**\n     * Export all symbols to text file\n     */\n    public static void exportToFile(\n            MT5Account account,\n            String filename,\n            boolean selectedOnly) throws Exception {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        try (java.io.PrintWriter writer = new java.io.PrintWriter(filename)) {\n            writer.println(\"# MT5 Symbols Export\");\n            writer.println(\"# Generated: \" + java.time.LocalDateTime.now());\n            writer.println(\"# Source: \" + (selectedOnly ? \"MarketWatch\" : \"All Symbols\"));\n            writer.println(\"# Total: \" + total);\n            writer.println();\n\n            for (int i = 0; i &lt; total; i++) {\n                var nameReply = account.symbolName(i, selectedOnly);\n                String symbol = nameReply.getData().getName();\n                writer.println(symbol);\n            }\n        }\n\n        System.out.printf(\"\u2705 Exported %d symbols to %s%n\", total, filename);\n    }\n\n    /**\n     * Export with detailed info\n     */\n    public static void exportDetailed(\n            MT5Account account,\n            String filename,\n            boolean selectedOnly) throws Exception {\n\n        var totalReply = account.symbolsTotal(selectedOnly);\n        int total = totalReply.getData().getTotal();\n\n        try (java.io.PrintWriter writer = new java.io.PrintWriter(filename)) {\n            writer.println(\"Index,Symbol,Type\");\n\n            for (int i = 0; i &lt; total; i++) {\n                var nameReply = account.symbolName(i, selectedOnly);\n                String symbol = nameReply.getData().getName();\n\n                // Determine type\n                String type = \"Other\";\n                if (symbol.matches(\"^[A-Z]{6}$\")) type = \"Forex\";\n                else if (symbol.startsWith(\"XAU\")) type = \"Gold\";\n                else if (symbol.contains(\"BTC\")) type = \"Crypto\";\n\n                writer.printf(\"%d,%s,%s%n\", i, symbol, type);\n            }\n        }\n\n        System.out.printf(\"\u2705 Exported %d symbols with details to %s%n\", total, filename);\n    }\n}\n\n// Usage\nSymbolExporter.exportToFile(account, \"symbols.txt\", true);\nSymbolExporter.exportDetailed(account, \"symbols.csv\", false);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolName/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolNameRequest request =\n    Mt5TermApiMarketInfo.SymbolNameRequest.newBuilder()\n        .setIndex(0)\n        .setSelected(true)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolNameReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolName(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nString name = reply.getData().getName();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/","title":"\u2705 Select/Deselect Symbol in MarketWatch","text":"<p>Request: select or deselect a symbol in the MarketWatch window. Symbols must be selected to receive price updates and place trades.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolSelect(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolSelect</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolSelect(SymbolSelectRequest) \u2192 SymbolSelectReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolSelect(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Selects or deselects a symbol in the Market Watch window.\n     * Symbols must be selected in Market Watch to receive price updates and place trades.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @param select True to select symbol, false to remove from Market Watch\n     * @return Reply with success status\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolSelectReply symbolSelect(String symbol, boolean select) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolSelectRequest { symbol: string, select: bool }</code></p> <p>Reply message: <code>SymbolSelectReply { data: SymbolSelectData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\") <code>select</code> <code>boolean</code> \u2705 <code>true</code> to add to MarketWatch, <code>false</code> to remove"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#output-symbolselectdata","title":"\u2b06\ufe0f Output - <code>SymbolSelectData</code>","text":"Field Type Description <code>success</code> <code>boolean</code> <code>true</code> if operation succeeded, <code>false</code> on failure <p>Access the result using <code>reply.getData().getSuccess()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to add/remove symbols from MarketWatch window.</li> <li>Why you need it. Symbols must be in MarketWatch to receive quotes and trade them.</li> <li>Important. Cannot remove symbol if chart is open or positions exist for it.</li> <li>Auto-selection. Some symbols auto-select for margin calculations even if not visible.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Add a symbol to MarketWatch before getting quotes.</li> <li>Enable price updates for a symbol.</li> <li>Prepare symbol for trading operations.</li> <li>Clean up MarketWatch by removing unused symbols.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Always select a symbol before calling <code>symbolInfoTick()</code> or trading it.</li> <li>Cannot remove a symbol if:</li> <li>Symbol chart is currently open</li> <li>Open positions exist for the symbol</li> <li>Pending orders exist for the symbol</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>Some symbols are auto-selected by MT5 for margin calculations.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#1-select-a-symbol","title":"1) Select a symbol","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Select GBPUSD in MarketWatch\n            Mt5TermApiMarketInfo.SymbolSelectReply reply =\n                account.symbolSelect(\"GBPUSD\", true);\n\n            if (reply.getData().getSuccess()) {\n                System.out.println(\"\u2705 GBPUSD added to MarketWatch\");\n            } else {\n                System.out.println(\"\u274c Failed to add GBPUSD\");\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#2-remove-symbol-from-marketwatch","title":"2) Remove symbol from MarketWatch","text":"<pre><code>// Remove symbol\nvar reply = account.symbolSelect(\"GBPUSD\", false);\n\nif (reply.getData().getSuccess()) {\n    System.out.println(\"\u2705 GBPUSD removed from MarketWatch\");\n} else {\n    System.out.println(\"\u274c Failed to remove GBPUSD (chart open or positions exist?)\");\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#3-ensure-symbol-is-selected-before-trading","title":"3) Ensure symbol is selected before trading","text":"<pre><code>public class SymbolHelper {\n    /**\n     * Ensure symbol is selected before trading\n     */\n    public static void ensureSymbolSelected(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        // Try to select symbol\n        var reply = account.symbolSelect(symbol, true);\n\n        if (!reply.getData().getSuccess()) {\n            throw new ApiExceptionMT5(\n                \"Failed to select symbol: \" + symbol\n            );\n        }\n\n        System.out.printf(\"\u2705 Symbol selected: %s%n\", symbol);\n    }\n}\n\n// Usage\nSymbolHelper.ensureSymbolSelected(account, \"EURUSD\");\n\n// Now safe to get quotes\nvar tick = account.quote(\"EURUSD\");\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#4-select-multiple-symbols","title":"4) Select multiple symbols","text":"<pre><code>public class MultiSymbolSelector {\n    /**\n     * Select multiple symbols in MarketWatch\n     */\n    public static void selectSymbols(MT5Account account, String... symbols)\n            throws ApiExceptionMT5 {\n\n        int successful = 0;\n        int failed = 0;\n\n        for (String symbol : symbols) {\n            var reply = account.symbolSelect(symbol, true);\n\n            if (reply.getData().getSuccess()) {\n                System.out.printf(\"\u2705 Selected: %s%n\", symbol);\n                successful++;\n            } else {\n                System.out.printf(\"\u274c Failed: %s%n\", symbol);\n                failed++;\n            }\n        }\n\n        System.out.printf(\"%nResults: %d selected, %d failed%n\", successful, failed);\n    }\n}\n\n// Usage\nMultiSymbolSelector.selectSymbols(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"\n);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#5-clean-up-marketwatch","title":"5) Clean up MarketWatch","text":"<pre><code>public class MarketWatchCleaner {\n    /**\n     * Remove all unused symbols from MarketWatch\n     */\n    public static void cleanupMarketWatch(MT5Account account, String[] keepSymbols)\n            throws ApiExceptionMT5 {\n\n        // Get all symbols in MarketWatch\n        var totalReply = account.symbolsTotal(true);\n        int total = totalReply.getData().getTotal();\n\n        java.util.Set&lt;String&gt; keep = java.util.Set.of(keepSymbols);\n        int removed = 0;\n\n        System.out.println(\"Cleaning up MarketWatch...\");\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, true);\n            String symbol = nameReply.getData().getName();\n\n            // Skip symbols we want to keep\n            if (keep.contains(symbol)) {\n                continue;\n            }\n\n            // Try to remove symbol\n            var reply = account.symbolSelect(symbol, false);\n            if (reply.getData().getSuccess()) {\n                System.out.printf(\"Removed: %s%n\", symbol);\n                removed++;\n            }\n        }\n\n        System.out.printf(\"%n\u2705 Cleanup complete: removed %d symbols%n\", removed);\n    }\n}\n\n// Usage - keep only major pairs\nMarketWatchCleaner.cleanupMarketWatch(account, new String[]{\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"USDCHF\"\n});\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#6-toggle-symbol-visibility","title":"6) Toggle symbol visibility","text":"<pre><code>public class SymbolToggler {\n    /**\n     * Toggle symbol in/out of MarketWatch\n     */\n    public static boolean toggleSymbol(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        // Check if symbol is currently selected\n        var intReply = account.symbolInfoInteger(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_SELECT\n        );\n        boolean isSelected = intReply.getData().getValue() == 1;\n\n        // Toggle selection\n        var reply = account.symbolSelect(symbol, !isSelected);\n\n        if (reply.getData().getSuccess()) {\n            System.out.printf(\"\u2705 %s: %s \u2192 %s%n\",\n                symbol,\n                isSelected ? \"selected\" : \"not selected\",\n                !isSelected ? \"selected\" : \"not selected\"\n            );\n            return true;\n        }\n\n        return false;\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#7-check-if-symbol-can-be-selected","title":"7) Check if symbol can be selected","text":"<pre><code>public class SymbolValidator {\n    /**\n     * Check if symbol exists and can be selected\n     */\n    public static boolean canSelectSymbol(MT5Account account, String symbol)\n            throws ApiExceptionMT5 {\n\n        // Check if symbol exists\n        var existReply = account.symbolExist(symbol);\n\n        if (!existReply.getData().getExists()) {\n            System.out.printf(\"\u274c Symbol does not exist: %s%n\", symbol);\n            return false;\n        }\n\n        System.out.printf(\"\u2705 Symbol exists: %s%n\", symbol);\n\n        // Try to select it\n        var selectReply = account.symbolSelect(symbol, true);\n\n        if (selectReply.getData().getSuccess()) {\n            System.out.printf(\"\u2705 Symbol selected successfully%n\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed to select symbol%n\");\n            return false;\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#8-batch-symbol-operations","title":"8) Batch symbol operations","text":"<pre><code>public class SymbolBatchOperations {\n    public record SelectionResult(\n        String symbol,\n        boolean success,\n        String message\n    ) {}\n\n    /**\n     * Batch select symbols with detailed results\n     */\n    public static java.util.List&lt;SelectionResult&gt; batchSelect(\n            MT5Account account,\n            java.util.List&lt;String&gt; symbols,\n            boolean select) throws ApiExceptionMT5 {\n\n        java.util.List&lt;SelectionResult&gt; results = new java.util.ArrayList&lt;&gt;();\n\n        for (String symbol : symbols) {\n            try {\n                var reply = account.symbolSelect(symbol, select);\n                boolean success = reply.getData().getSuccess();\n\n                results.add(new SelectionResult(\n                    symbol,\n                    success,\n                    success\n                        ? (select ? \"Added to MarketWatch\" : \"Removed from MarketWatch\")\n                        : \"Operation failed\"\n                ));\n\n            } catch (ApiExceptionMT5 e) {\n                results.add(new SelectionResult(\n                    symbol,\n                    false,\n                    \"Error: \" + e.getMessage()\n                ));\n            }\n        }\n\n        return results;\n    }\n\n    /**\n     * Print batch operation results\n     */\n    public static void printResults(java.util.List&lt;SelectionResult&gt; results) {\n        System.out.println(\"\\nBatch Operation Results:\");\n        System.out.println(\"\u2550\".repeat(60));\n\n        int successful = 0;\n        for (var result : results) {\n            String status = result.success() ? \"\u2705\" : \"\u274c\";\n            System.out.printf(\"%s %-10s - %s%n\",\n                status, result.symbol(), result.message());\n\n            if (result.success()) successful++;\n        }\n\n        System.out.println(\"\u2550\".repeat(60));\n        System.out.printf(\"Total: %d | Success: %d | Failed: %d%n\",\n            results.size(), successful, results.size() - successful);\n    }\n}\n\n// Usage\nvar symbols = java.util.List.of(\"EURUSD\", \"GBPUSD\", \"INVALID\", \"XAUUSD\");\nvar results = SymbolBatchOperations.batchSelect(account, symbols, true);\nSymbolBatchOperations.printResults(results);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolSelect/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolSelectRequest request =\n    Mt5TermApiMarketInfo.SymbolSelectRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setSelect(true)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolSelectReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolSelect(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nboolean success = reply.getData().getSuccess();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/","title":"MT5Account \u00b7 Symbol Information - Overview","text":"<p>Symbol properties, current quotes, trading rules, and symbol availability. Use this page to choose the right API for accessing market data and symbol parameters.</p>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>SymbolInfoTick - current quote for a symbol (bid, ask, last, volume, time).</li> <li>SymbolsTotal - count of available symbols (all or selected only).</li> <li>SymbolName - get symbol name by index position.</li> <li>SymbolSelect - enable/disable symbol in Market Watch.</li> <li>SymbolExist - check if symbol exists on server.</li> <li>SymbolIsSynchronized - check if symbol data is synchronized.</li> <li>SymbolInfoDouble - single double property (bid, ask, point, volume min/max, etc.).</li> <li>SymbolInfoInteger - single integer property (digits, spread, stops level, etc.).</li> <li>SymbolInfoString - single string property (description, base/profit currency, path).</li> <li>TickValueWithSize - batch tick values for multiple symbols at once.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>SymbolInfoTick \u2192 your live price for a symbol (pull mode).</li> <li>SymbolsTotal / SymbolName \u2192 list all available symbols from terminal.</li> <li>SymbolSelect \u2192 add/remove symbols from Market Watch.</li> <li>SymbolExist / SymbolIsSynchronized \u2192 validate symbol before trading.</li> <li>SymbolInfo (Double/Integer/String) \u2192 symbol properties* one at a time.</li> <li>TickValueWithSize \u2192 efficient batch retrieval for multiple symbols.</li> </ul> <p>Rule of thumb: need price \u2192 <code>SymbolInfoTick</code>; need trading rules \u2192 <code>SymbolInfo*</code> (digits, point, min volume); need list \u2192 <code>SymbolsTotal</code> + <code>SymbolName</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Current price for symbol <code>SymbolInfoTick</code> Bid, ask, last, volume <code>symbol</code> Count of available symbols <code>SymbolsTotal</code> Symbol count <code>selected_only</code> (bool) Symbol name by position <code>SymbolName</code> Symbol name <code>index</code>, <code>selected_only</code> Add/remove symbol in Market Watch <code>SymbolSelect</code> Success/failure <code>symbol</code>, <code>select</code> (bool) Check if symbol exists <code>SymbolExist</code> Boolean <code>symbol</code> Check symbol synchronization <code>SymbolIsSynchronized</code> Boolean <code>symbol</code> Single double property (bid, point, volume, etc.) <code>SymbolInfoDouble</code> Single <code>double</code> <code>symbol</code>, property enum Single integer property (digits, spread, etc.) <code>SymbolInfoInteger</code> Single <code>long</code> <code>symbol</code>, property enum Single string property (description, currency) <code>SymbolInfoString</code> Single <code>String</code> <code>symbol</code>, property enum Tick values for multiple symbols <code>TickValueWithSize</code> Batch tick values <code>symbols: String[]</code>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Digits \u2192 decimal places for price formatting (e.g., 5 for EURUSD = 1.12345).</li> <li>Point \u2192 smallest price change (e.g., 0.00001 for 5-digit EURUSD).</li> <li>Volume Min/Max/Step \u2192 allowed lot sizes (validate before OrderSend).</li> <li>Stops Level \u2192 minimum distance for SL/TP from current price.</li> <li>Spread \u2192 difference between ask and bid (in points).</li> <li>SymbolSelect \u2192 must enable symbol before getting quotes.</li> <li>Synchronization \u2192 symbol data may be outdated if not synchronized.</li> <li>Tick Value \u2192 monetary value per 1 point move (for risk calculations).</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Get current price for EURUSD\nvar quote = account.symbolInfoTick(\"EURUSD\");\nvar data = quote.getData();\nSystem.out.printf(\"EURUSD: Bid=%.5f, Ask=%.5f, Spread=%.5f%n\",\n    data.getBid(), data.getAsk(), data.getAsk() - data.getBid());\n</code></pre> <pre><code>// List all available symbols\nvar total = account.symbolsTotal(false);\nint count = total.getData().getTotal();\nfor (int i = 0; i &lt; count; i++) {\n    var name = account.symbolName(i, false);\n    System.out.println(name.getData().getName());\n}\n</code></pre> <pre><code>// Enable symbol in Market Watch\naccount.symbolSelect(\"GBPUSD\", true);\n</code></pre> <pre><code>// Get symbol digits (decimal places)\nvar reply = account.symbolInfoInteger(\n    \"EURUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoIntegerProperty.SYMBOL_DIGITS\n);\nlong digits = reply.getData().getValue();\nSystem.out.printf(\"EURUSD digits: %d%n\", digits);\n</code></pre> <pre><code>// Get minimum volume for symbol\nvar reply = account.symbolInfoDouble(\n    \"XAUUSD\",\n    Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_VOLUME_MIN\n);\ndouble minVolume = reply.getData().getValue();\nSystem.out.printf(\"Min volume: %.2f lots%n\", minVolume);\n</code></pre> <pre><code>// Validate symbol before trading\nvar exists = account.symbolExist(\"EURUSD\");\nvar synced = account.symbolIsSynchronized(\"EURUSD\");\nif (exists.getData().getValue() &amp;&amp; synced.getData().getValue()) {\n    System.out.println(\"\u2705 Symbol ready for trading\");\n}\n</code></pre> <pre><code>// Get tick values for multiple symbols\nString[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\nvar reply = account.tickValueWithSize(symbols);\nfor (var tickValue : reply.getData().getTickValuesList()) {\n    System.out.printf(\"%s: $%.2f per lot%n\",\n        tickValue.getSymbol(), tickValue.getTickValue());\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/Symbol_Information.Overview/#see-also","title":"See also","text":"<ul> <li>Subscriptions: <code>OnSymbolTick</code> - real-time price stream</li> <li>Trading calculations: <code>OrderCalcMargin</code>, <code>OrderCalcProfit</code></li> <li>Market depth: <code>MarketBookAdd</code> - Level II quotes</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/","title":"\u2705 Getting Total Number of Symbols","text":"<p>Request: total count of available symbols on the MT5 server. Returns either all symbols or only those visible in MarketWatch.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.symbolsTotal(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>SymbolsTotal</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>SymbolsTotal(SymbolsTotalRequest) \u2192 SymbolsTotalReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.symbolsTotal(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets the total count of available symbols on the MT5 server.\n     * Returns either all symbols known to the server or only those currently shown in the MarketWatch window.\n     * Use this to determine how many symbols are available before requesting detailed symbol information.\n     *\n     * @param selectedOnly If true, returns only symbols visible in MarketWatch; if false, returns all available symbols\n     * @return Total number of symbols matching the filter criteria\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.SymbolsTotalReply symbolsTotal(boolean selectedOnly) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>SymbolsTotalRequest { mode: bool }</code></p> <p>Reply message: <code>SymbolsTotalReply { data: SymbolsTotalData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>selectedOnly</code> <code>boolean</code> \u2705 <code>true</code> = only MarketWatch symbols, <code>false</code> = all symbols"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#output-symbolstotaldata","title":"\u2b06\ufe0f Output - <code>SymbolsTotalData</code>","text":"Field Type Description <code>total</code> <code>int</code> Number of symbols (MarketWatch count if <code>mode=true</code>, all symbols if <code>false</code>) <p>Access the total using <code>reply.getData().getTotal()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Simple RPC returning the count of available symbols.</li> <li>Why you need it. To determine how many symbols exist before iterating through them with <code>symbolName()</code>.</li> <li>Performance. Very lightweight call - just returns a count, no symbol details.</li> <li>Use case. Typically used with <code>symbolName()</code> to iterate through all symbols.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Count how many symbols are in MarketWatch.</li> <li>Get the total number of symbols available on the broker.</li> <li>Iterate through all symbols using <code>symbolName(index, selectedOnly)</code>.</li> <li>Verify symbol availability before requesting data.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Pass <code>true</code> to count only symbols in MarketWatch (selected symbols).</li> <li>Pass <code>false</code> to count all symbols available on the broker (can be thousands).</li> <li>Use this with <code>symbolName()</code> to loop through all symbols.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>MarketWatch symbols are those you've selected or that auto-selected for margin calculations.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#1-count-marketwatch-symbols","title":"1) Count MarketWatch symbols","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Count symbols in MarketWatch\n            Mt5TermApiMarketInfo.SymbolsTotalReply reply =\n                account.symbolsTotal(true);\n            int count = reply.getData().getTotal();\n\n            System.out.printf(\"Symbols in MarketWatch: %d%n\", count);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#2-count-all-available-symbols","title":"2) Count all available symbols","text":"<pre><code>// Get total number of symbols on broker\nvar reply = account.symbolsTotal(false);\nint totalSymbols = reply.getData().getTotal();\n\nSystem.out.printf(\"Total symbols available: %d%n\", totalSymbols);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#3-compare-marketwatch-vs-all-symbols","title":"3) Compare MarketWatch vs all symbols","text":"<pre><code>// Count selected symbols\nvar selectedReply = account.symbolsTotal(true);\nint selectedCount = selectedReply.getData().getTotal();\n\n// Count all symbols\nvar allReply = account.symbolsTotal(false);\nint allCount = allReply.getData().getTotal();\n\nSystem.out.printf(\"MarketWatch symbols: %d%n\", selectedCount);\nSystem.out.printf(\"Total symbols:       %d%n\", allCount);\nSystem.out.printf(\"Not in MarketWatch:  %d%n\", allCount - selectedCount);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#4-iterate-through-all-marketwatch-symbols","title":"4) Iterate through all MarketWatch symbols","text":"<pre><code>// Get count of symbols in MarketWatch\nvar reply = account.symbolsTotal(true);\nint count = reply.getData().getTotal();\n\nSystem.out.printf(\"Listing %d symbols in MarketWatch:%n\", count);\n\n// Iterate through all selected symbols\nfor (int i = 0; i &lt; count; i++) {\n    var nameReply = account.symbolName(i, true);\n    String symbolName = nameReply.getData().getName();\n    System.out.printf(\"%d. %s%n\", i + 1, symbolName);\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#5-iterate-through-all-available-symbols","title":"5) Iterate through all available symbols","text":"<pre><code>// Get total count\nvar reply = account.symbolsTotal(false);\nint total = reply.getData().getTotal();\n\nSystem.out.printf(\"Found %d total symbols:%n\", total);\n\n// WARNING: This can be thousands of symbols!\nfor (int i = 0; i &lt; Math.min(total, 10); i++) {  // Limit to first 10\n    var nameReply = account.symbolName(i, false);\n    String symbol = nameReply.getData().getName();\n    System.out.printf(\"%d. %s%n\", i + 1, symbol);\n}\n\nif (total &gt; 10) {\n    System.out.printf(\"... and %d more symbols%n\", total - 10);\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#6-find-specific-symbols-with-pattern","title":"6) Find specific symbols with pattern","text":"<pre><code>public class SymbolFinder {\n    /**\n     * Find all symbols matching a pattern (e.g., \"EUR*\")\n     */\n    public static java.util.List&lt;String&gt; findSymbols(\n            MT5Account account,\n            String pattern,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        var reply = account.symbolsTotal(selectedOnly);\n        int total = reply.getData().getTotal();\n\n        java.util.List&lt;String&gt; matchingSymbols = new java.util.ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            String symbol = nameReply.getData().getName();\n\n            if (symbol.matches(pattern.replace(\"*\", \".*\"))) {\n                matchingSymbols.add(symbol);\n            }\n        }\n\n        return matchingSymbols;\n    }\n}\n\n// Usage - find all EUR pairs in MarketWatch\nvar eurPairs = SymbolFinder.findSymbols(account, \"EUR.*\", true);\nSystem.out.println(\"EUR pairs: \" + eurPairs);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#7-check-if-any-symbols-in-marketwatch","title":"7) Check if any symbols in MarketWatch","text":"<pre><code>public class MarketWatchChecker {\n    /**\n     * Check if MarketWatch has any symbols\n     */\n    public static boolean hasSymbolsInMarketWatch(MT5Account account)\n            throws ApiExceptionMT5 {\n\n        var reply = account.symbolsTotal(true);\n        int count = reply.getData().getTotal();\n\n        if (count == 0) {\n            System.out.println(\"\u26a0\ufe0f No symbols in MarketWatch!\");\n            return false;\n        }\n\n        System.out.printf(\"\u2705 MarketWatch has %d symbols%n\", count);\n        return true;\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#8-get-all-symbol-names-efficiently","title":"8) Get all symbol names efficiently","text":"<pre><code>public class SymbolList {\n    /**\n     * Get list of all symbol names in MarketWatch\n     */\n    public static java.util.List&lt;String&gt; getAllSymbolNames(\n            MT5Account account,\n            boolean selectedOnly) throws ApiExceptionMT5 {\n\n        // Get total count\n        var reply = account.symbolsTotal(selectedOnly);\n        int total = reply.getData().getTotal();\n\n        // Pre-allocate list\n        java.util.List&lt;String&gt; symbols = new java.util.ArrayList&lt;&gt;(total);\n\n        // Fetch all symbol names\n        for (int i = 0; i &lt; total; i++) {\n            var nameReply = account.symbolName(i, selectedOnly);\n            symbols.add(nameReply.getData().getName());\n        }\n\n        return symbols;\n    }\n}\n\n// Usage\nvar marketWatchSymbols = SymbolList.getAllSymbolNames(account, true);\nSystem.out.println(\"MarketWatch symbols: \" + marketWatchSymbols);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#9-display-symbol-statistics","title":"9) Display symbol statistics","text":"<pre><code>public class SymbolStats {\n    public static void displayStatistics(MT5Account account) throws ApiExceptionMT5 {\n        var selectedReply = account.symbolsTotal(true);\n        var allReply = account.symbolsTotal(false);\n\n        int selected = selectedReply.getData().getTotal();\n        int total = allReply.getData().getTotal();\n\n        double percentage = (selected * 100.0) / total;\n\n        System.out.println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551      SYMBOL STATISTICS            \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total available:      %-11d \u2551%n\", total);\n        System.out.printf(\"\u2551 In MarketWatch:       %-11d \u2551%n\", selected);\n        System.out.printf(\"\u2551 Not selected:         %-11d \u2551%n\", total - selected);\n        System.out.printf(\"\u2551 Selection ratio:      %-7.2f %%   \u2551%n\", percentage);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/SymbolsTotal/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.SymbolsTotalRequest request =\n    Mt5TermApiMarketInfo.SymbolsTotalRequest.newBuilder()\n        .setMode(true)  // true = MarketWatch only\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.SymbolsTotalReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .symbolsTotal(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nint total = reply.getData().getTotal();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/","title":"\ud83d\udcb0 Get Tick Value and Size for Multiple Symbols","text":"<p>Request: retrieve tick value, tick size, and contract size information for multiple symbols in a single call. Essential data for profit/loss calculations and position sizing.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.tickValueWithSize(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>TickValueWithSize</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>TickValueWithSize(TickValueWithSizeRequest) \u2192 TickValueWithSizeReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperGrpc.AccountHelperBlockingStub.tickValueWithSize(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Get tick value and size information for multiple symbols.\n     * Returns tick values, contract size, and tick size for trading calculations.\n     *\n     * @param symbolNames Array of symbol names\n     * @return Tick value and size data for all requested symbols\n     * @throws ApiExceptionMT5 if call fails\n     */\n    public Mt5TermApiAccountHelper.TickValueWithSizeReply tickValueWithSize(String[] symbolNames) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>TickValueWithSizeRequest { symbol_names: repeated string }</code></p> <p>Reply message: <code>TickValueWithSizeReply { data: TickValueWithSizeData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbolNames</code> <code>String[]</code> \u2705 Array of symbol names to query"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#output-tickvaluewithsizedata","title":"\u2b06\ufe0f Output - <code>TickValueWithSizeData</code>","text":"Field Type Description <code>symbol_tick_size_infos</code> <code>List&lt;TickSizeSymbol&gt;</code> List of tick/size info for each requested symbol <p>Access using <code>reply.getData().getSymbolTickSizeInfosList()</code>.</p>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#structure-ticksizesymbol","title":"Structure: <code>TickSizeSymbol</code>","text":"Field Type Description <code>Index</code> <code>int</code> Symbol index in request array <code>Name</code> <code>String</code> Symbol name (e.g., \"EURUSD\") <code>TradeTickValue</code> <code>double</code> Calculated tick value in account currency <code>TradeTickValueProfit</code> <code>double</code> Calculated tick value for profit direction <code>TradeTickValueLoss</code> <code>double</code> Calculated tick value for loss direction <code>TradeTickSize</code> <code>double</code> Minimal price change (tick size) <code>TradeContractSize</code> <code>double</code> Trade contract size (lot size in base units) <p>Access using: - <code>symbol.getIndex()</code> - Position in request array - <code>symbol.getName()</code> - Symbol name - <code>symbol.getTradeTickValue()</code> - General tick value - <code>symbol.getTradeTickValueProfit()</code> - Tick value for profit - <code>symbol.getTradeTickValueLoss()</code> - Tick value for loss - <code>symbol.getTradeTickSize()</code> - Minimum price change - <code>symbol.getTradeContractSize()</code> - Contract/lot size</p>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Batch RPC to get tick value and contract size data for multiple symbols.</li> <li>Why you need it. Calculate profit/loss, position sizing, margin requirements.</li> <li>Tick value. Cost of one tick movement in account currency.</li> <li>Contract size. Size of one lot in base units (e.g., 100,000 for EURUSD).</li> <li>Tick size. Minimum price change step.</li> <li>Batch operation. More efficient than querying symbols individually.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate profit/loss for positions.</li> <li>Determine position size based on risk.</li> <li>Calculate margin requirements.</li> <li>Convert pips/points to account currency.</li> <li>Optimize trading calculations for multiple symbols.</li> <li>Build portfolio risk management systems.</li> <li>Calculate transaction costs.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Batch efficiency. Query multiple symbols in one call for better performance.</li> <li>Account currency. Tick values are in your account currency.</li> <li>Different directions. Some symbols have different tick values for profit/loss.</li> <li>Forex symbols. Contract size typically 100,000 (1 standard lot).</li> <li>CFD/Futures. Contract size varies by instrument.</li> <li>Tick size. Used to validate price levels and calculate pip values.</li> <li>Missing symbols. Invalid symbols may be omitted from results.</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#1-basic-tick-value-retrieval","title":"1) Basic tick value retrieval","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get tick values for multiple symbols\n            String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\n            Mt5TermApiAccountHelper.TickValueWithSizeReply reply =\n                account.tickValueWithSize(symbols);\n\n            var tickInfos = reply.getData().getSymbolTickSizeInfosList();\n\n            System.out.println(\"Tick Value and Size Information:\");\n            System.out.println(\"\u2550\".repeat(70));\n\n            for (var info : tickInfos) {\n                System.out.printf(\"\\n%s:%n\", info.getName());\n                System.out.printf(\"  Tick Value: %.2f %s%n\",\n                    info.getTradeTickValue(), \"USD\");  // Assuming USD account\n                System.out.printf(\"  Tick Size: %.5f%n\", info.getTradeTickSize());\n                System.out.printf(\"  Contract Size: %.0f%n\", info.getTradeContractSize());\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#2-calculate-pip-value","title":"2) Calculate pip value","text":"<pre><code>public class PipValueCalculator {\n    /**\n     * Calculate pip value for a symbol\n     */\n    public static double calculatePipValue(\n            MT5Account account,\n            String symbol,\n            double lots) throws ApiExceptionMT5 {\n\n        String[] symbols = {symbol};\n        var reply = account.tickValueWithSize(symbols);\n\n        if (reply.getData().getSymbolTickSizeInfosList().isEmpty()) {\n            throw new ApiExceptionMT5(\"Symbol not found: \" + symbol);\n        }\n\n        var info = reply.getData().getSymbolTickSizeInfosList().get(0);\n\n        // For most forex pairs, 1 pip = 0.0001 (4 decimal places)\n        // For JPY pairs, 1 pip = 0.01 (2 decimal places)\n        double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n\n        // Calculate how many ticks in a pip\n        double ticksPerPip = pipSize / info.getTradeTickSize();\n\n        // Pip value = tick value * ticks per pip * lots\n        double pipValue = info.getTradeTickValue() * ticksPerPip * lots;\n\n        System.out.printf(\"%s Pip Value Calculation:%n\", symbol);\n        System.out.printf(\"  Lot Size: %.2f%n\", lots);\n        System.out.printf(\"  Tick Value: %.2f%n\", info.getTradeTickValue());\n        System.out.printf(\"  Tick Size: %.5f%n\", info.getTradeTickSize());\n        System.out.printf(\"  Pip Size: %.5f%n\", pipSize);\n        System.out.printf(\"  Ticks per Pip: %.0f%n\", ticksPerPip);\n        System.out.printf(\"  Pip Value: %.2f%n\", pipValue);\n\n        return pipValue;\n    }\n}\n\n// Usage\ndouble pipValue = PipValueCalculator.calculatePipValue(account, \"EURUSD\", 1.0);\nSystem.out.printf(\"\\n1 pip movement = $%.2f for 1 lot EURUSD%n\", pipValue);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#3-calculate-profitloss","title":"3) Calculate profit/loss","text":"<pre><code>public class ProfitLossCalculator {\n    /**\n     * Calculate profit/loss for a position\n     */\n    public static double calculateProfit(\n            MT5Account account,\n            String symbol,\n            double lots,\n            double openPrice,\n            double currentPrice,\n            boolean isBuy) throws ApiExceptionMT5 {\n\n        String[] symbols = {symbol};\n        var reply = account.tickValueWithSize(symbols);\n        var info = reply.getData().getSymbolTickSizeInfosList().get(0);\n\n        // Calculate price difference in ticks\n        double priceDiff = isBuy\n            ? (currentPrice - openPrice)\n            : (openPrice - currentPrice);\n\n        double ticks = priceDiff / info.getTradeTickSize();\n\n        // Use appropriate tick value (profit or loss direction)\n        double tickValue = priceDiff &gt;= 0\n            ? info.getTradeTickValueProfit()\n            : info.getTradeTickValueLoss();\n\n        double profit = ticks * tickValue * lots;\n\n        System.out.printf(\"\\nProfit/Loss Calculation for %s:%n\", symbol);\n        System.out.printf(\"  Position: %s %.2f lots%n\",\n            isBuy ? \"BUY\" : \"SELL\", lots);\n        System.out.printf(\"  Open Price: %.5f%n\", openPrice);\n        System.out.printf(\"  Current Price: %.5f%n\", currentPrice);\n        System.out.printf(\"  Price Difference: %.5f%n\", priceDiff);\n        System.out.printf(\"  Ticks: %.0f%n\", ticks);\n        System.out.printf(\"  Tick Value: %.2f%n\", tickValue);\n        System.out.printf(\"  Profit/Loss: %.2f%n\", profit);\n\n        return profit;\n    }\n}\n\n// Usage\ndouble profit = ProfitLossCalculator.calculateProfit(\n    account,\n    \"EURUSD\",\n    1.0,        // 1 lot\n    1.10000,    // Open price\n    1.10050,    // Current price\n    true        // BUY position\n);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#4-position-sizing-based-on-risk","title":"4) Position sizing based on risk","text":"<pre><code>public class PositionSizer {\n    /**\n     * Calculate lot size based on risk amount and stop loss\n     */\n    public static double calculateLotSize(\n            MT5Account account,\n            String symbol,\n            double riskAmount,\n            double stopLossPips) throws ApiExceptionMT5 {\n\n        String[] symbols = {symbol};\n        var reply = account.tickValueWithSize(symbols);\n        var info = reply.getData().getSymbolTickSizeInfosList().get(0);\n\n        // Calculate pip value for 1 lot\n        double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n        double ticksPerPip = pipSize / info.getTradeTickSize();\n        double pipValuePerLot = info.getTradeTickValue() * ticksPerPip;\n\n        // Calculate lot size\n        double lotSize = riskAmount / (stopLossPips * pipValuePerLot);\n\n        // Round to valid lot size (typically 0.01 step)\n        lotSize = Math.round(lotSize * 100.0) / 100.0;\n\n        System.out.printf(\"\\nPosition Sizing for %s:%n\", symbol);\n        System.out.printf(\"  Risk Amount: $%.2f%n\", riskAmount);\n        System.out.printf(\"  Stop Loss: %.1f pips%n\", stopLossPips);\n        System.out.printf(\"  Pip Value (1 lot): $%.2f%n\", pipValuePerLot);\n        System.out.printf(\"  Calculated Lot Size: %.2f%n\", lotSize);\n        System.out.printf(\"  Actual Risk: $%.2f%n\",\n            lotSize * stopLossPips * pipValuePerLot);\n\n        return lotSize;\n    }\n}\n\n// Usage - risk $100 with 50 pip stop loss\ndouble lotSize = PositionSizer.calculateLotSize(\n    account,\n    \"EURUSD\",\n    100.0,  // Risk $100\n    50.0    // 50 pip stop loss\n);\nSystem.out.printf(\"Trade %.2f lots%n\", lotSize);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#5-compare-tick-values-across-symbols","title":"5) Compare tick values across symbols","text":"<pre><code>import java.util.*;\n\npublic class TickValueComparison {\n    public record SymbolTickInfo(\n        String symbol,\n        double tickValue,\n        double tickSize,\n        double contractSize,\n        double pipValue\n    ) {}\n\n    /**\n     * Compare tick values for multiple symbols\n     */\n    public static List&lt;SymbolTickInfo&gt; compareSymbols(\n            MT5Account account,\n            String... symbols) throws ApiExceptionMT5 {\n\n        var reply = account.tickValueWithSize(symbols);\n        var tickInfos = reply.getData().getSymbolTickSizeInfosList();\n\n        List&lt;SymbolTickInfo&gt; comparison = new ArrayList&lt;&gt;();\n\n        for (var info : tickInfos) {\n            String symbol = info.getName();\n            double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n            double ticksPerPip = pipSize / info.getTradeTickSize();\n            double pipValue = info.getTradeTickValue() * ticksPerPip;\n\n            comparison.add(new SymbolTickInfo(\n                symbol,\n                info.getTradeTickValue(),\n                info.getTradeTickSize(),\n                info.getTradeContractSize(),\n                pipValue\n            ));\n        }\n\n        return comparison;\n    }\n\n    /**\n     * Print comparison table\n     */\n    public static void printComparison(List&lt;SymbolTickInfo&gt; comparison) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551            TICK VALUE COMPARISON (1 LOT)                     \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.println(\"\u2551 Symbol   \u2502 Tick Val \u2502 Tick Size \u2502 Contract  \u2502 Pip Value   \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var info : comparison) {\n            System.out.printf(\"\u2551 %-8s \u2502 $%-7.2f \u2502 %-9.5f \u2502 %-9.0f \u2502 $%-10.2f\u2551%n\",\n                info.symbol(),\n                info.tickValue(),\n                info.tickSize(),\n                info.contractSize(),\n                info.pipValue()\n            );\n        }\n\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar comparison = TickValueComparison.compareSymbols(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"AUDUSD\", \"USDCHF\"\n);\nTickValueComparison.printComparison(comparison);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#6-portfolio-risk-calculator","title":"6) Portfolio risk calculator","text":"<pre><code>import java.util.*;\n\npublic class PortfolioRiskCalculator {\n    public record PositionRisk(\n        String symbol,\n        double lots,\n        double stopLossPips,\n        double riskAmount\n    ) {}\n\n    /**\n     * Calculate total portfolio risk\n     */\n    public static double calculatePortfolioRisk(\n            MT5Account account,\n            List&lt;PositionRisk&gt; positions) throws ApiExceptionMT5 {\n\n        // Get tick values for all symbols\n        String[] symbols = positions.stream()\n            .map(PositionRisk::symbol)\n            .toArray(String[]::new);\n\n        var reply = account.tickValueWithSize(symbols);\n        var tickInfos = reply.getData().getSymbolTickSizeInfosList();\n\n        // Create symbol -&gt; tick info map\n        Map&lt;String, Mt5TermApiAccountHelper.TickSizeSymbol&gt; tickMap =\n            new HashMap&lt;&gt;();\n        for (var info : tickInfos) {\n            tickMap.put(info.getName(), info);\n        }\n\n        double totalRisk = 0;\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551         PORTFOLIO RISK ANALYSIS                 \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.println(\"\u2551 Symbol   \u2502 Lots \u2502 SL Pips \u2502 Risk Amount       \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var position : positions) {\n            var info = tickMap.get(position.symbol());\n            if (info == null) continue;\n\n            // Calculate pip value\n            String symbol = position.symbol();\n            double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n            double ticksPerPip = pipSize / info.getTradeTickSize();\n            double pipValue = info.getTradeTickValue() * ticksPerPip;\n\n            // Calculate risk\n            double risk = position.lots() * position.stopLossPips() * pipValue;\n            totalRisk += risk;\n\n            System.out.printf(\"\u2551 %-8s \u2502 %.2f \u2502 %-7.1f \u2502 $%-16.2f \u2551%n\",\n                position.symbol(),\n                position.lots(),\n                position.stopLossPips(),\n                risk\n            );\n        }\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 TOTAL PORTFOLIO RISK: $%-25.2f \u2551%n\", totalRisk);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n\n        return totalRisk;\n    }\n}\n\n// Usage\nList&lt;PortfolioRiskCalculator.PositionRisk&gt; positions = List.of(\n    new PortfolioRiskCalculator.PositionRisk(\"EURUSD\", 1.0, 50, 0),\n    new PortfolioRiskCalculator.PositionRisk(\"GBPUSD\", 0.5, 40, 0),\n    new PortfolioRiskCalculator.PositionRisk(\"USDJPY\", 1.5, 30, 0)\n);\n\ndouble totalRisk = PortfolioRiskCalculator.calculatePortfolioRisk(\n    account, positions\n);\n\nSystem.out.printf(\"\\nTotal risk exposure: $%.2f%n\", totalRisk);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#7-convert-points-to-currency","title":"7) Convert points to currency","text":"<pre><code>public class PointToCurrencyConverter {\n    /**\n     * Convert points/pips to account currency\n     */\n    public static double convertPointsToCurrency(\n            MT5Account account,\n            String symbol,\n            double points,\n            double lots) throws ApiExceptionMT5 {\n\n        String[] symbols = {symbol};\n        var reply = account.tickValueWithSize(symbols);\n        var info = reply.getData().getSymbolTickSizeInfosList().get(0);\n\n        // Calculate ticks (points = price difference in symbol's point unit)\n        double ticks = points / info.getTradeTickSize();\n\n        // Convert to currency\n        double currencyValue = ticks * info.getTradeTickValue() * lots;\n\n        System.out.printf(\"\\nPoint-to-Currency Conversion for %s:%n\", symbol);\n        System.out.printf(\"  Points: %.1f%n\", points);\n        System.out.printf(\"  Lots: %.2f%n\", lots);\n        System.out.printf(\"  Tick Size: %.5f%n\", info.getTradeTickSize());\n        System.out.printf(\"  Ticks: %.0f%n\", ticks);\n        System.out.printf(\"  Tick Value: %.2f%n\", info.getTradeTickValue());\n        System.out.printf(\"  Currency Value: $%.2f%n\", currencyValue);\n\n        return currencyValue;\n    }\n\n    /**\n     * Convert currency to points\n     */\n    public static double convertCurrencyToPoints(\n            MT5Account account,\n            String symbol,\n            double currencyAmount,\n            double lots) throws ApiExceptionMT5 {\n\n        String[] symbols = {symbol};\n        var reply = account.tickValueWithSize(symbols);\n        var info = reply.getData().getSymbolTickSizeInfosList().get(0);\n\n        // Calculate ticks needed\n        double ticks = currencyAmount / (info.getTradeTickValue() * lots);\n\n        // Convert to points\n        double points = ticks * info.getTradeTickSize();\n\n        System.out.printf(\"\\nCurrency-to-Point Conversion for %s:%n\", symbol);\n        System.out.printf(\"  Currency Amount: $%.2f%n\", currencyAmount);\n        System.out.printf(\"  Lots: %.2f%n\", lots);\n        System.out.printf(\"  Required Points: %.5f%n\", points);\n\n        return points;\n    }\n}\n\n// Usage\n// How much is 50 pips worth?\ndouble value = PointToCurrencyConverter.convertPointsToCurrency(\n    account, \"EURUSD\", 0.0050, 1.0\n);\n\n// How many pips to make $100?\ndouble pips = PointToCurrencyConverter.convertCurrencyToPoints(\n    account, \"EURUSD\", 100.0, 1.0\n);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#8-batch-symbol-data-exporter","title":"8) Batch symbol data exporter","text":"<pre><code>import java.io.*;\n\npublic class SymbolDataExporter {\n    /**\n     * Export tick value data to CSV\n     */\n    public static void exportToCsv(\n            MT5Account account,\n            String filename,\n            String... symbols) throws ApiExceptionMT5, IOException {\n\n        var reply = account.tickValueWithSize(symbols);\n        var tickInfos = reply.getData().getSymbolTickSizeInfosList();\n\n        try (PrintWriter writer = new PrintWriter(new FileWriter(filename))) {\n            // CSV header\n            writer.println(\"Symbol,TickValue,TickValueProfit,TickValueLoss,\" +\n                \"TickSize,ContractSize,PipValue\");\n\n            // Data rows\n            for (var info : tickInfos) {\n                String symbol = info.getName();\n                double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n                double ticksPerPip = pipSize / info.getTradeTickSize();\n                double pipValue = info.getTradeTickValue() * ticksPerPip;\n\n                writer.printf(\"%s,%.5f,%.5f,%.5f,%.7f,%.2f,%.5f%n\",\n                    info.getName(),\n                    info.getTradeTickValue(),\n                    info.getTradeTickValueProfit(),\n                    info.getTradeTickValueLoss(),\n                    info.getTradeTickSize(),\n                    info.getTradeContractSize(),\n                    pipValue\n                );\n            }\n\n            System.out.printf(\"\u2705 Exported %d symbols to %s%n\",\n                tickInfos.size(), filename);\n        }\n    }\n}\n\n// Usage\nSymbolDataExporter.exportToCsv(account, \"symbol_tick_data.csv\",\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"AUDUSD\", \"USDCHF\",\n    \"NZDUSD\", \"USDCAD\", \"EURJPY\", \"GBPJPY\", \"XAUUSD\"\n);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\nimport java.util.Arrays;\n\n// Create request\nMt5TermApiAccountHelper.TickValueWithSizeRequest request =\n    Mt5TermApiAccountHelper.TickValueWithSizeRequest.newBuilder()\n        .addAllSymbolNames(Arrays.asList(\"EURUSD\", \"GBPUSD\", \"USDJPY\"))\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountHelper.TickValueWithSizeReply reply = accountHelperClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .tickValueWithSize(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nList&lt;Mt5TermApiAccountHelper.TickSizeSymbol&gt; tickInfos =\n    reply.getData().getSymbolTickSizeInfosList();\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#understanding-tick-values","title":"\ud83d\udcca Understanding Tick Values","text":""},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#tick-value","title":"Tick Value:","text":"<ul> <li>Cost of one minimum price change (tick) in your account currency</li> <li>Used to calculate profit/loss from price movements</li> <li>Different for each symbol and account currency</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#tick-size","title":"Tick Size:","text":"<ul> <li>Minimum price change for the symbol</li> <li>Example: EURUSD = 0.00001 (1 point)</li> <li>Used to validate prices and count ticks</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#contract-size","title":"Contract Size:","text":"<ul> <li>Size of one standard lot</li> <li>Forex: typically 100,000 units of base currency</li> <li>CFDs/Futures: varies by instrument</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#profitloss-tick-values","title":"Profit/Loss Tick Values:","text":"<ul> <li>Some instruments have different tick values for profit vs loss direction</li> <li>Usually same for forex, different for some CFDs/futures</li> <li>Use appropriate value for accurate P/L calculations</li> </ul>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#key-formulas","title":"Key Formulas:","text":"<pre><code>// Calculate profit/loss\nticks = (closePrice - openPrice) / tickSize;\nprofit = ticks * tickValue * lots;\n\n// Calculate pip value\nticksPerPip = pipSize / tickSize;\npipValue = tickValue * ticksPerPip;\n\n// Calculate position size from risk\nlotSize = riskAmount / (stopLossPips * pipValue);\n</code></pre>"},{"location":"MT5Account/2.%20Symbol_information/TickValueWithSize/#common-pip-sizes","title":"Common Pip Sizes:","text":"<ul> <li>Most forex pairs: 0.0001 (4 decimals)</li> <li>JPY pairs: 0.01 (2 decimals)</li> <li>Some brokers show 5 decimal places (pipettes)</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/","title":"\u2705 Getting All Open Positions and Pending Orders","text":"<p>Request: retrieve complete information about all currently open positions and pending orders. Returns detailed data including prices, volumes, profits, timestamps, and more.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.openedOrders(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>OpenedOrders</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>OpenedOrders(OpenedOrdersRequest) \u2192 OpenedOrdersReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperGrpc.AccountHelperBlockingStub.openedOrders(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets complete details for all currently open positions and pending orders.\n     * Returns comprehensive information including symbols, volumes, prices, profits, and timestamps.\n     * Use this to retrieve the full state of all active trading operations with sorting options.\n     *\n     * @param sortType Sort order for results (by symbol, open time, profit, etc.)\n     * @return Complete list of open positions and pending orders with all details\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountHelper.OpenedOrdersReply openedOrders(\n        Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE sortType) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>OpenedOrdersRequest { inputSortMode: BMT5_ENUM_OPENED_ORDER_SORT_TYPE }</code></p> <p>Reply message: <code>OpenedOrdersReply { data: OpenedOrdersData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>sortType</code> <code>BMT5_ENUM_OPENED_ORDER_SORT_TYPE</code> \u2705 Sort order for results (see enum below)"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#output-openedordersdata","title":"\u2b06\ufe0f Output - <code>OpenedOrdersData</code>","text":"Field Type Description <code>opened_orders</code> <code>List&lt;OpenedOrderInfo&gt;</code> List of pending orders <code>position_infos</code> <code>List&lt;PositionInfo&gt;</code> List of open positions"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#positioninfo-fields","title":"<code>PositionInfo</code> Fields","text":"Field Type Description <code>index</code> <code>int</code> Index in result array <code>ticket</code> <code>long</code> Unique position ticket number <code>open_time</code> <code>Timestamp</code> Position open time <code>volume</code> <code>double</code> Position volume (lots) <code>price_open</code> <code>double</code> Open price <code>stop_loss</code> <code>double</code> Stop Loss price (0 if not set) <code>take_profit</code> <code>double</code> Take Profit price (0 if not set) <code>price_current</code> <code>double</code> Current market price <code>swap</code> <code>double</code> Accumulated swap <code>profit</code> <code>double</code> Current profit/loss <code>last_update_time</code> <code>Timestamp</code> Last update timestamp <code>type</code> <code>enum</code> Position type (BUY/SELL) <code>magic_number</code> <code>long</code> Expert Advisor ID <code>identifier</code> <code>long</code> Position identifier <code>reason</code> <code>enum</code> Position open reason (CLIENT/MOBILE/WEB/EXPERT) <code>symbol</code> <code>String</code> Trading symbol <code>comment</code> <code>String</code> Position comment <code>external_id</code> <code>String</code> External system ID <code>position_commission</code> <code>double</code> Commission charged <code>account_login</code> <code>long</code> Account number"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#openedorderinfo-fields","title":"<code>OpenedOrderInfo</code> Fields","text":"Field Type Description <code>index</code> <code>int</code> Index in result array <code>ticket</code> <code>long</code> Unique order ticket number <code>price_current</code> <code>double</code> Current market price <code>price_open</code> <code>double</code> Order price <code>stop_limit</code> <code>double</code> Stop Limit price (for STOP_LIMIT orders) <code>stop_loss</code> <code>double</code> Stop Loss price <code>take_profit</code> <code>double</code> Take Profit price <code>volume_current</code> <code>double</code> Current volume <code>volume_initial</code> <code>double</code> Initial volume <code>magic_number</code> <code>long</code> Expert Advisor ID <code>reason</code> <code>int</code> Order placement reason <code>type</code> <code>enum</code> Order type (BUY_LIMIT, SELL_STOP, etc.) <code>state</code> <code>enum</code> Order state <code>time_expiration</code> <code>Timestamp</code> Order expiration time <code>time_setup</code> <code>Timestamp</code> Order setup time <code>time_done</code> <code>Timestamp</code> Order execution/cancellation time <code>type_filling</code> <code>enum</code> Filling type (FOK, IOC, Return) <code>type_time</code> <code>enum</code> Time in force type <code>position_id</code> <code>long</code> Position ID <code>position_by_id</code> <code>long</code> Opposite position ID (for close by) <code>symbol</code> <code>String</code> Trading symbol <code>external_id</code> <code>String</code> External system ID <code>comment</code> <code>String</code> Order comment <code>account_login</code> <code>long</code> Account number"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#related-enums-from-proto","title":"\ud83e\uddf1 Related enums (from proto)","text":""},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#bmt5_enum_opened_order_sort_type","title":"<code>BMT5_ENUM_OPENED_ORDER_SORT_TYPE</code>","text":"Enum Value Value Description <code>BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC</code> 0 Sort by open time (oldest first) <code>BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC</code> 1 Sort by open time (newest first) <code>BMT5_OPENED_ORDER_SORT_BY_ORDER_TICKET_ID_ASC</code> 2 Sort by ticket ID (ascending) <code>BMT5_OPENED_ORDER_SORT_BY_ORDER_TICKET_ID_DESC</code> 3 Sort by ticket ID (descending)"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#bmt5_enum_position_type","title":"<code>BMT5_ENUM_POSITION_TYPE</code>","text":"Enum Value Value Description <code>BMT5_POSITION_TYPE_BUY</code> 0 Long position <code>BMT5_POSITION_TYPE_SELL</code> 1 Short position"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#bmt5_enum_position_reason","title":"<code>BMT5_ENUM_POSITION_REASON</code>","text":"Enum Value Value Description <code>BMT5_POSITION_REASON_CLIENT</code> 0 Opened from desktop terminal <code>BMT5_POSITION_REASON_MOBILE</code> 1 Opened from mobile app <code>BMT5_POSITION_REASON_WEB</code> 2 Opened from web terminal <code>BMT5_POSITION_REASON_EXPERT</code> 3 Opened by Expert Advisor <code>ORDER_REASON_SL</code> 4 Closed by Stop Loss <code>ORDER_REASON_TP</code> 5 Closed by Take Profit <code>ORDER_REASON_SO</code> 6 Closed by Stop Out (margin call)"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Comprehensive RPC returning ALL open positions and pending orders with full details.</li> <li>Why you need it. Essential for portfolio monitoring, risk management, and trading decisions.</li> <li>Performance. More expensive than <code>positionsTotal()</code> - fetches complete data for all positions.</li> <li>Two lists. Returns both positions (actively in market) and pending orders (not yet executed).</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Display all active trades in UI/dashboard.</li> <li>Calculate total exposure and risk.</li> <li>Monitor profit/loss across all positions.</li> <li>Check for positions on specific symbols.</li> <li>Implement automated risk management.</li> <li>Close or modify existing positions.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>The method returns two separate lists: positions and pending orders.</li> <li>Use <code>positionsTotal()</code> first to check if positions exist before calling this.</li> <li>Profit and swap are in account currency.</li> <li>Timestamps are protobuf <code>Timestamp</code> - convert using <code>.getSeconds()</code> for Unix time.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>Empty lists returned if no positions/orders exist.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#1-get-all-open-positions","title":"1) Get all open positions","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get all opened orders and positions\n            var reply = account.openedOrders(\n                Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                    .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC\n            );\n            var data = reply.getData();\n\n            System.out.printf(\"Open positions: %d%n\", data.getPositionInfosCount());\n            System.out.printf(\"Pending orders: %d%n\", data.getOpenedOrdersCount());\n\n            // Display positions\n            for (var position : data.getPositionInfosList()) {\n                System.out.printf(\"Ticket #%d: %s %.2f lots @ %.5f, P/L: %.2f%n\",\n                    position.getTicket(),\n                    position.getSymbol(),\n                    position.getVolume(),\n                    position.getPriceOpen(),\n                    position.getProfit()\n                );\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#2-calculate-total-profitloss","title":"2) Calculate total profit/loss","text":"<pre><code>public class ProfitCalculator {\n    /**\n     * Calculate total P/L across all positions\n     */\n    public static double getTotalProfit(MT5Account account) throws ApiExceptionMT5 {\n        var reply = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n        );\n\n        double totalProfit = 0.0;\n        double totalSwap = 0.0;\n\n        for (var position : reply.getData().getPositionInfosList()) {\n            totalProfit += position.getProfit();\n            totalSwap += position.getSwap();\n        }\n\n        double netProfit = totalProfit + totalSwap;\n\n        System.out.printf(\"Gross P/L:  %.2f%n\", totalProfit);\n        System.out.printf(\"Swap:       %.2f%n\", totalSwap);\n        System.out.printf(\"Net P/L:    %.2f%n\", netProfit);\n\n        return netProfit;\n    }\n}\n\n// Usage\ndouble totalPL = ProfitCalculator.getTotalProfit(account);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#3-find-positions-by-symbol","title":"3) Find positions by symbol","text":"<pre><code>public class PositionFinder {\n    /**\n     * Find all positions for specific symbol\n     */\n    public static java.util.List&lt;Mt5TermApiAccountHelper.PositionInfo&gt; findBySymbol(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        var reply = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC\n        );\n\n        return reply.getData().getPositionInfosList().stream()\n            .filter(p -&gt; p.getSymbol().equals(symbol))\n            .collect(java.util.stream.Collectors.toList());\n    }\n}\n\n// Usage\nvar eurusdPositions = PositionFinder.findBySymbol(account, \"EURUSD\");\nSystem.out.printf(\"Found %d EURUSD positions%n\", eurusdPositions.size());\n\nfor (var pos : eurusdPositions) {\n    String type = pos.getType() == Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_BUY\n        ? \"BUY\" : \"SELL\";\n    System.out.printf(\"  #%d %s %.2f lots, P/L: %.2f%n\",\n        pos.getTicket(), type, pos.getVolume(), pos.getProfit());\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#4-display-positions-table","title":"4) Display positions table","text":"<pre><code>public class PositionsTable {\n    public static void printTable(MT5Account account) throws ApiExceptionMT5 {\n        var reply = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC\n        );\n\n        var positions = reply.getData().getPositionInfosList();\n\n        if (positions.isEmpty()) {\n            System.out.println(\"No open positions\");\n            return;\n        }\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551                        OPEN POSITIONS                                 \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.println(\"\u2551 Ticket   \u2502 Symbol  \u2502 Type \u2502 Volume \u2502 Open    \u2502 Current \u2502 P/L      \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        double totalPL = 0.0;\n\n        for (var pos : positions) {\n            String type = pos.getType() == Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_BUY\n                ? \"BUY \" : \"SELL\";\n\n            System.out.printf(\"\u2551 %-8d \u2502 %-7s \u2502 %s \u2502 %6.2f \u2502 %.5f \u2502 %.5f \u2502 %8.2f \u2551%n\",\n                pos.getTicket(),\n                pos.getSymbol(),\n                type,\n                pos.getVolume(),\n                pos.getPriceOpen(),\n                pos.getPriceCurrent(),\n                pos.getProfit()\n            );\n\n            totalPL += pos.getProfit();\n        }\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total P/L: %54.2f \u2551%n\", totalPL);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nPositionsTable.printTable(account);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#5-check-risk-exposure","title":"5) Check risk exposure","text":"<pre><code>public class RiskCalculator {\n    public record RiskMetrics(\n        int totalPositions,\n        double totalVolume,\n        double totalProfit,\n        double largestLoss,\n        java.util.Map&lt;String, Integer&gt; symbolCounts\n    ) {}\n\n    /**\n     * Calculate risk metrics\n     */\n    public static RiskMetrics calculateRisk(MT5Account account) throws ApiExceptionMT5 {\n        var reply = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n        );\n\n        var positions = reply.getData().getPositionInfosList();\n\n        double totalVolume = 0.0;\n        double totalProfit = 0.0;\n        double largestLoss = 0.0;\n        java.util.Map&lt;String, Integer&gt; symbolCounts = new java.util.HashMap&lt;&gt;();\n\n        for (var pos : positions) {\n            totalVolume += pos.getVolume();\n            totalProfit += pos.getProfit();\n\n            if (pos.getProfit() &lt; largestLoss) {\n                largestLoss = pos.getProfit();\n            }\n\n            symbolCounts.merge(pos.getSymbol(), 1, Integer::sum);\n        }\n\n        return new RiskMetrics(\n            positions.size(),\n            totalVolume,\n            totalProfit,\n            largestLoss,\n            symbolCounts\n        );\n    }\n\n    /**\n     * Print risk report\n     */\n    public static void printRiskReport(RiskMetrics metrics) {\n        System.out.println(\"\\n=== RISK ANALYSIS ===\");\n        System.out.printf(\"Total positions:  %d%n\", metrics.totalPositions());\n        System.out.printf(\"Total volume:     %.2f lots%n\", metrics.totalVolume());\n        System.out.printf(\"Total P/L:        %.2f%n\", metrics.totalProfit());\n        System.out.printf(\"Largest loss:     %.2f%n\", metrics.largestLoss());\n        System.out.println(\"\\nPositions by symbol:\");\n        metrics.symbolCounts().forEach((symbol, count) -&gt;\n            System.out.printf(\"  %s: %d position(s)%n\", symbol, count)\n        );\n    }\n}\n\n// Usage\nvar risk = RiskCalculator.calculateRisk(account);\nRiskCalculator.printRiskReport(risk);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#6-monitor-positions-in-real-time","title":"6) Monitor positions in real-time","text":"<pre><code>public class PositionMonitor {\n    /**\n     * Monitor positions and alert on changes\n     */\n    public static void monitor(MT5Account account, int durationSeconds)\n            throws InterruptedException {\n\n        System.out.println(\"Monitoring positions...\");\n        System.out.println(\"\u2550\".repeat(70));\n\n        long startTime = System.currentTimeMillis();\n        long endTime = startTime + (durationSeconds * 1000L);\n\n        java.util.Set&lt;Long&gt; lastTickets = new java.util.HashSet&lt;&gt;();\n\n        while (System.currentTimeMillis() &lt; endTime) {\n            try {\n                var reply = account.openedOrders(\n                    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                        .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC\n                );\n\n                java.util.Set&lt;Long&gt; currentTickets = reply.getData().getPositionInfosList()\n                    .stream()\n                    .map(Mt5TermApiAccountHelper.PositionInfo::getTicket)\n                    .collect(java.util.stream.Collectors.toSet());\n\n                // Check for new positions\n                for (long ticket : currentTickets) {\n                    if (!lastTickets.contains(ticket)) {\n                        System.out.printf(\"[%s] \ud83c\udd95 New position opened: #%d%n\",\n                            java.time.LocalTime.now(), ticket);\n                    }\n                }\n\n                // Check for closed positions\n                for (long ticket : lastTickets) {\n                    if (!currentTickets.contains(ticket)) {\n                        System.out.printf(\"[%s] \u274c Position closed: #%d%n\",\n                            java.time.LocalTime.now(), ticket);\n                    }\n                }\n\n                lastTickets = currentTickets;\n                Thread.sleep(2000);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"Error: \" + e.getMessage());\n                Thread.sleep(2000);\n            }\n        }\n\n        System.out.println(\"\u2550\".repeat(70));\n        System.out.println(\"Monitoring stopped\");\n    }\n}\n\n// Usage\nPositionMonitor.monitor(account, 60);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#7-export-positions-to-csv","title":"7) Export positions to CSV","text":"<pre><code>public class PositionExporter {\n    /**\n     * Export all positions to CSV file\n     */\n    public static void exportToCSV(MT5Account account, String filename)\n            throws Exception {\n\n        var reply = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n        );\n\n        try (java.io.PrintWriter writer = new java.io.PrintWriter(filename)) {\n            // CSV header\n            writer.println(\"Ticket,Symbol,Type,Volume,OpenPrice,CurrentPrice,StopLoss,TakeProfit,Profit,Swap,OpenTime,Comment\");\n\n            for (var pos : reply.getData().getPositionInfosList()) {\n                String type = pos.getType() == Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_BUY\n                    ? \"BUY\" : \"SELL\";\n\n                long openTimeSec = pos.getOpenTime().getSeconds();\n                String openTime = java.time.Instant.ofEpochSecond(openTimeSec).toString();\n\n                writer.printf(\"%d,%s,%s,%.2f,%.5f,%.5f,%.5f,%.5f,%.2f,%.2f,%s,\\\"%s\\\"%n\",\n                    pos.getTicket(),\n                    pos.getSymbol(),\n                    type,\n                    pos.getVolume(),\n                    pos.getPriceOpen(),\n                    pos.getPriceCurrent(),\n                    pos.getStopLoss(),\n                    pos.getTakeProfit(),\n                    pos.getProfit(),\n                    pos.getSwap(),\n                    openTime,\n                    pos.getComment()\n                );\n            }\n        }\n\n        System.out.printf(\"\u2705 Exported %d positions to %s%n\",\n            reply.getData().getPositionInfosCount(), filename);\n    }\n}\n\n// Usage\nPositionExporter.exportToCSV(account, \"positions.csv\");\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#8-find-positions-without-stop-loss","title":"8) Find positions without stop loss","text":"<pre><code>public class StopLossChecker {\n    /**\n     * Find positions without stop loss\n     */\n    public static void findUnprotectedPositions(MT5Account account)\n            throws ApiExceptionMT5 {\n\n        var reply = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n                .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC\n        );\n\n        var unprotected = reply.getData().getPositionInfosList().stream()\n            .filter(p -&gt; p.getStopLoss() == 0.0)\n            .collect(java.util.stream.Collectors.toList());\n\n        if (unprotected.isEmpty()) {\n            System.out.println(\"\u2705 All positions have stop loss\");\n            return;\n        }\n\n        System.out.printf(\"\u26a0\ufe0f Found %d positions WITHOUT stop loss:%n\", unprotected.size());\n\n        for (var pos : unprotected) {\n            String type = pos.getType() == Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_BUY\n                ? \"BUY\" : \"SELL\";\n\n            System.out.printf(\"  #%d %s %s %.2f lots @ %.5f (P/L: %.2f)%n\",\n                pos.getTicket(),\n                pos.getSymbol(),\n                type,\n                pos.getVolume(),\n                pos.getPriceOpen(),\n                pos.getProfit()\n            );\n        }\n    }\n}\n\n// Usage\nStopLossChecker.findUnprotectedPositions(account);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrders/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiAccountHelper.OpenedOrdersRequest request =\n    Mt5TermApiAccountHelper.OpenedOrdersRequest.newBuilder()\n        .setInputSortMode(Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE\n            .BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountHelper.OpenedOrdersReply reply = accountClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .openedOrders(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nvar data = reply.getData();\nvar positions = data.getPositionInfosList();\nvar orders = data.getOpenedOrdersList();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/","title":"\ud83c\udfab Get Ticket Numbers for Open Positions and Orders","text":"<p>Request: retrieve only the ticket IDs of all open positions and pending orders. Lightweight alternative to <code>openedOrders()</code> when you only need to track which positions exist.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.openedOrdersTickets()</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>OpenedOrdersTickets</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>OpenedOrdersTickets(OpenedOrdersTicketsRequest) \u2192 OpenedOrdersTicketsReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperGrpc.AccountHelperBlockingStub.openedOrdersTickets(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets only the ticket numbers of all open positions and pending orders.\n     * This lightweight method returns just the ticket IDs without full position details.\n     * Use this when you only need to track which positions exist or for efficient position monitoring.\n     *\n     * @return Reply containing lists of position and order ticket IDs\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountHelper.OpenedOrdersTicketsReply openedOrdersTickets() throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>OpenedOrdersTicketsRequest { }</code> (empty - no parameters)</p> <p>Reply message: <code>OpenedOrdersTicketsReply { data: OpenedOrdersTicketsData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#input","title":"\ud83d\udd3d Input","text":"<p>No parameters required. This method takes no input parameters.</p>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#output-openedordersticketsdata","title":"\u2b06\ufe0f Output - <code>OpenedOrdersTicketsData</code>","text":"Field Type Description <code>opened_orders_tickets</code> <code>List&lt;Long&gt;</code> List of ticket IDs for pending orders <code>opened_position_tickets</code> <code>List&lt;Long&gt;</code> List of ticket IDs for open positions <p>Access using: - <code>reply.getData().getOpenedOrdersTicketsList()</code> - List of order tickets - <code>reply.getData().getOpenedPositionTicketsList()</code> - List of position tickets</p>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Lightweight RPC that returns only ticket numbers for open positions and pending orders.</li> <li>Why you need it. Efficient monitoring without transferring full position details.</li> <li>Use case. Track which positions exist, detect new/closed positions, or monitor position count.</li> <li>Performance. Much faster than <code>openedOrders()</code> when you don't need full details.</li> <li>When to upgrade. Call <code>openedOrders()</code> when you need full position information.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Monitor which positions and orders are currently active.</li> <li>Track changes in position/order count efficiently.</li> <li>Detect newly opened or closed positions without full data.</li> <li>Build position monitoring systems with minimal bandwidth.</li> <li>Check if specific ticket IDs still exist.</li> <li>Implement polling-based position watchers.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Returns two separate lists: one for positions, one for pending orders.</li> <li>Much lighter than <code>openedOrders()</code> - only transfers ticket numbers.</li> <li>Use this for frequent polling/monitoring scenarios.</li> <li>Ticket IDs are unique identifiers (int64/long type).</li> <li>Empty lists indicate no open positions or pending orders.</li> <li>For full position details, use <code>openedOrders()</code> instead.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#1-basic-ticket-retrieval","title":"1) Basic ticket retrieval","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get ticket numbers\n            Mt5TermApiAccountHelper.OpenedOrdersTicketsReply reply =\n                account.openedOrdersTickets();\n\n            var data = reply.getData();\n            var positionTickets = data.getOpenedPositionTicketsList();\n            var orderTickets = data.getOpenedOrdersTicketsList();\n\n            System.out.printf(\"Open positions: %d%n\", positionTickets.size());\n            System.out.printf(\"Pending orders: %d%n\", orderTickets.size());\n\n            System.out.println(\"\\nPosition tickets:\");\n            positionTickets.forEach(ticket -&gt;\n                System.out.printf(\"  #%d%n\", ticket)\n            );\n\n            System.out.println(\"\\nOrder tickets:\");\n            orderTickets.forEach(ticket -&gt;\n                System.out.printf(\"  #%d%n\", ticket)\n            );\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#2-position-change-detector","title":"2) Position change detector","text":"<pre><code>import java.util.*;\n\npublic class PositionChangeDetector {\n    private Set&lt;Long&gt; lastPositionTickets = new HashSet&lt;&gt;();\n    private Set&lt;Long&gt; lastOrderTickets = new HashSet&lt;&gt;();\n\n    /**\n     * Detect changes in positions and orders\n     */\n    public ChangeReport detectChanges(MT5Account account) throws ApiExceptionMT5 {\n        var reply = account.openedOrdersTickets();\n        var data = reply.getData();\n\n        // Current tickets\n        Set&lt;Long&gt; currentPositions = new HashSet&lt;&gt;(\n            data.getOpenedPositionTicketsList()\n        );\n        Set&lt;Long&gt; currentOrders = new HashSet&lt;&gt;(\n            data.getOpenedOrdersTicketsList()\n        );\n\n        // Find new and closed positions\n        Set&lt;Long&gt; newPositions = new HashSet&lt;&gt;(currentPositions);\n        newPositions.removeAll(lastPositionTickets);\n\n        Set&lt;Long&gt; closedPositions = new HashSet&lt;&gt;(lastPositionTickets);\n        closedPositions.removeAll(currentPositions);\n\n        // Find new and removed orders\n        Set&lt;Long&gt; newOrders = new HashSet&lt;&gt;(currentOrders);\n        newOrders.removeAll(lastOrderTickets);\n\n        Set&lt;Long&gt; removedOrders = new HashSet&lt;&gt;(lastOrderTickets);\n        removedOrders.removeAll(currentOrders);\n\n        // Update last known state\n        lastPositionTickets = currentPositions;\n        lastOrderTickets = currentOrders;\n\n        return new ChangeReport(\n            newPositions,\n            closedPositions,\n            newOrders,\n            removedOrders,\n            currentPositions.size(),\n            currentOrders.size()\n        );\n    }\n\n    public record ChangeReport(\n        Set&lt;Long&gt; newPositions,\n        Set&lt;Long&gt; closedPositions,\n        Set&lt;Long&gt; newOrders,\n        Set&lt;Long&gt; removedOrders,\n        int totalPositions,\n        int totalOrders\n    ) {\n        public boolean hasChanges() {\n            return !newPositions.isEmpty() ||\n                   !closedPositions.isEmpty() ||\n                   !newOrders.isEmpty() ||\n                   !removedOrders.isEmpty();\n        }\n\n        public void print() {\n            System.out.printf(\"[%s] Positions: %d, Orders: %d%n\",\n                java.time.LocalTime.now(),\n                totalPositions,\n                totalOrders\n            );\n\n            if (!newPositions.isEmpty()) {\n                System.out.println(\"  \u2705 New positions: \" + newPositions);\n            }\n            if (!closedPositions.isEmpty()) {\n                System.out.println(\"  \u274c Closed positions: \" + closedPositions);\n            }\n            if (!newOrders.isEmpty()) {\n                System.out.println(\"  \ud83d\udcdd New orders: \" + newOrders);\n            }\n            if (!removedOrders.isEmpty()) {\n                System.out.println(\"  \ud83d\uddd1\ufe0f Removed orders: \" + removedOrders);\n            }\n        }\n    }\n}\n\n// Usage - monitor changes every 5 seconds\nvar detector = new PositionChangeDetector();\nwhile (true) {\n    var changes = detector.detectChanges(account);\n    if (changes.hasChanges()) {\n        changes.print();\n    }\n    Thread.sleep(5000);\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#3-check-if-specific-ticket-exists","title":"3) Check if specific ticket exists","text":"<pre><code>public class TicketChecker {\n    /**\n     * Check if a ticket ID is currently active\n     */\n    public static boolean isTicketActive(\n            MT5Account account,\n            long ticketId) throws ApiExceptionMT5 {\n\n        var reply = account.openedOrdersTickets();\n        var data = reply.getData();\n\n        // Check in positions\n        if (data.getOpenedPositionTicketsList().contains(ticketId)) {\n            System.out.printf(\"\u2705 Ticket #%d is an active position%n\", ticketId);\n            return true;\n        }\n\n        // Check in orders\n        if (data.getOpenedOrdersTicketsList().contains(ticketId)) {\n            System.out.printf(\"\u2705 Ticket #%d is a pending order%n\", ticketId);\n            return true;\n        }\n\n        System.out.printf(\"\u274c Ticket #%d not found%n\", ticketId);\n        return false;\n    }\n\n    /**\n     * Get ticket type\n     */\n    public static String getTicketType(\n            MT5Account account,\n            long ticketId) throws ApiExceptionMT5 {\n\n        var reply = account.openedOrdersTickets();\n        var data = reply.getData();\n\n        if (data.getOpenedPositionTicketsList().contains(ticketId)) {\n            return \"POSITION\";\n        }\n        if (data.getOpenedOrdersTicketsList().contains(ticketId)) {\n            return \"ORDER\";\n        }\n        return \"NOT_FOUND\";\n    }\n}\n\n// Usage\nlong myTicket = 123456789;\nif (TicketChecker.isTicketActive(account, myTicket)) {\n    String type = TicketChecker.getTicketType(account, myTicket);\n    System.out.printf(\"Ticket type: %s%n\", type);\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#4-wait-for-position-closure","title":"4) Wait for position closure","text":"<pre><code>public class PositionWaiter {\n    /**\n     * Wait for a specific position to close\n     */\n    public static boolean waitForClosure(\n            MT5Account account,\n            long positionTicket,\n            int timeoutSeconds) throws ApiExceptionMT5, InterruptedException {\n\n        System.out.printf(\"Waiting for position #%d to close...%n\", positionTicket);\n\n        long startTime = System.currentTimeMillis();\n        long timeoutMillis = timeoutSeconds * 1000L;\n\n        while (System.currentTimeMillis() - startTime &lt; timeoutMillis) {\n            var reply = account.openedOrdersTickets();\n            var tickets = reply.getData().getOpenedPositionTicketsList();\n\n            if (!tickets.contains(positionTicket)) {\n                System.out.println(\"\u2705 Position closed\");\n                return true;\n            }\n\n            System.out.print(\".\");\n            Thread.sleep(1000);\n        }\n\n        System.out.println(\"\\n\u26a0\ufe0f Timeout - position still open\");\n        return false;\n    }\n\n    /**\n     * Wait for all positions to close\n     */\n    public static boolean waitForAllClosure(\n            MT5Account account,\n            int timeoutSeconds) throws ApiExceptionMT5, InterruptedException {\n\n        System.out.println(\"Waiting for all positions to close...\");\n\n        long startTime = System.currentTimeMillis();\n        long timeoutMillis = timeoutSeconds * 1000L;\n\n        while (System.currentTimeMillis() - startTime &lt; timeoutMillis) {\n            var reply = account.openedOrdersTickets();\n            var data = reply.getData();\n\n            int posCount = data.getOpenedPositionTicketsList().size();\n            int ordCount = data.getOpenedOrdersTicketsList().size();\n\n            if (posCount == 0 &amp;&amp; ordCount == 0) {\n                System.out.println(\"\u2705 All positions and orders closed\");\n                return true;\n            }\n\n            System.out.printf(\"[%s] Positions: %d, Orders: %d%n\",\n                java.time.LocalTime.now(), posCount, ordCount);\n\n            Thread.sleep(2000);\n        }\n\n        System.out.println(\"\u26a0\ufe0f Timeout - not all positions closed\");\n        return false;\n    }\n}\n\n// Usage\nif (PositionWaiter.waitForClosure(account, 123456789, 30)) {\n    System.out.println(\"Safe to proceed\");\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#5-simple-position-monitor-with-alerts","title":"5) Simple position monitor with alerts","text":"<pre><code>public class SimpleMonitor {\n    /**\n     * Monitor positions with threshold alerts\n     */\n    public static void monitorWithAlerts(\n            MT5Account account,\n            int maxPositions,\n            int maxOrders,\n            int checkIntervalSeconds) throws InterruptedException {\n\n        System.out.printf(\"Monitoring (max positions: %d, max orders: %d)%n\",\n            maxPositions, maxOrders);\n        System.out.println(\"\u2550\".repeat(50));\n\n        while (true) {\n            try {\n                var reply = account.openedOrdersTickets();\n                var data = reply.getData();\n\n                int posCount = data.getOpenedPositionTicketsList().size();\n                int ordCount = data.getOpenedOrdersTicketsList().size();\n\n                // Check thresholds\n                boolean posAlert = posCount &gt; maxPositions;\n                boolean ordAlert = ordCount &gt; maxOrders;\n\n                String posIcon = posAlert ? \"\u26a0\ufe0f\" : \"\u2705\";\n                String ordIcon = ordAlert ? \"\u26a0\ufe0f\" : \"\u2705\";\n\n                System.out.printf(\"[%s] %s Positions: %d/%d | %s Orders: %d/%d%n\",\n                    java.time.LocalTime.now(),\n                    posIcon, posCount, maxPositions,\n                    ordIcon, ordCount, maxOrders\n                );\n\n                if (posAlert) {\n                    System.out.printf(\"  \ud83d\udea8 ALERT: Position count exceeded! \" +\n                        \"(%d &gt; %d)%n\", posCount, maxPositions);\n                }\n                if (ordAlert) {\n                    System.out.printf(\"  \ud83d\udea8 ALERT: Order count exceeded! \" +\n                        \"(%d &gt; %d)%n\", ordCount, maxOrders);\n                }\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"\u274c Error: %s%n\", e.getMessage());\n            }\n\n            Thread.sleep(checkIntervalSeconds * 1000L);\n        }\n    }\n}\n\n// Usage\nSimpleMonitor.monitorWithAlerts(account, 10, 5, 5);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#6-batch-ticket-validator","title":"6) Batch ticket validator","text":"<pre><code>import java.util.*;\nimport java.util.stream.*;\n\npublic class BatchTicketValidator {\n    public record ValidationResult(\n        long ticket,\n        boolean exists,\n        String type  // \"POSITION\", \"ORDER\", or \"NOT_FOUND\"\n    ) {}\n\n    /**\n     * Validate multiple tickets at once\n     */\n    public static List&lt;ValidationResult&gt; validateTickets(\n            MT5Account account,\n            long... tickets) throws ApiExceptionMT5 {\n\n        var reply = account.openedOrdersTickets();\n        var data = reply.getData();\n\n        Set&lt;Long&gt; positions = new HashSet&lt;&gt;(\n            data.getOpenedPositionTicketsList()\n        );\n        Set&lt;Long&gt; orders = new HashSet&lt;&gt;(\n            data.getOpenedOrdersTicketsList()\n        );\n\n        return Arrays.stream(tickets)\n            .mapToObj(ticket -&gt; {\n                if (positions.contains(ticket)) {\n                    return new ValidationResult(ticket, true, \"POSITION\");\n                } else if (orders.contains(ticket)) {\n                    return new ValidationResult(ticket, true, \"ORDER\");\n                } else {\n                    return new ValidationResult(ticket, false, \"NOT_FOUND\");\n                }\n            })\n            .toList();\n    }\n\n    /**\n     * Print validation report\n     */\n    public static void printReport(List&lt;ValidationResult&gt; results) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551     TICKET VALIDATION REPORT       \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var result : results) {\n            String icon = result.exists() ? \"\u2705\" : \"\u274c\";\n            System.out.printf(\"\u2551 %s Ticket #%-12d %-10s \u2551%n\",\n                icon,\n                result.ticket(),\n                result.type()\n            );\n        }\n\n        long existsCount = results.stream()\n            .filter(ValidationResult::exists)\n            .count();\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Valid: %d/%d                        \u2551%n\",\n            existsCount, results.size());\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nlong[] ticketsToCheck = {123456, 789012, 345678, 901234};\nvar results = BatchTicketValidator.validateTickets(account, ticketsToCheck);\nBatchTicketValidator.printReport(results);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#7-efficient-position-polling-system","title":"7) Efficient position polling system","text":"<pre><code>public class PositionPoller {\n    private final MT5Account account;\n    private final int pollIntervalMs;\n    private volatile boolean running = false;\n\n    public PositionPoller(MT5Account account, int pollIntervalMs) {\n        this.account = account;\n        this.pollIntervalMs = pollIntervalMs;\n    }\n\n    /**\n     * Start polling in background thread\n     */\n    public Thread startPolling(PositionListener listener) {\n        running = true;\n\n        Thread thread = new Thread(() -&gt; {\n            Set&lt;Long&gt; previousPositions = new HashSet&lt;&gt;();\n            Set&lt;Long&gt; previousOrders = new HashSet&lt;&gt;();\n\n            while (running) {\n                try {\n                    var reply = account.openedOrdersTickets();\n                    var data = reply.getData();\n\n                    Set&lt;Long&gt; currentPositions = new HashSet&lt;&gt;(\n                        data.getOpenedPositionTicketsList()\n                    );\n                    Set&lt;Long&gt; currentOrders = new HashSet&lt;&gt;(\n                        data.getOpenedOrdersTicketsList()\n                    );\n\n                    // Detect new positions\n                    for (long ticket : currentPositions) {\n                        if (!previousPositions.contains(ticket)) {\n                            listener.onPositionOpened(ticket);\n                        }\n                    }\n\n                    // Detect closed positions\n                    for (long ticket : previousPositions) {\n                        if (!currentPositions.contains(ticket)) {\n                            listener.onPositionClosed(ticket);\n                        }\n                    }\n\n                    // Detect new orders\n                    for (long ticket : currentOrders) {\n                        if (!previousOrders.contains(ticket)) {\n                            listener.onOrderPlaced(ticket);\n                        }\n                    }\n\n                    // Detect removed orders\n                    for (long ticket : previousOrders) {\n                        if (!currentOrders.contains(ticket)) {\n                            listener.onOrderRemoved(ticket);\n                        }\n                    }\n\n                    previousPositions = currentPositions;\n                    previousOrders = currentOrders;\n\n                    Thread.sleep(pollIntervalMs);\n\n                } catch (ApiExceptionMT5 e) {\n                    listener.onError(e);\n                } catch (InterruptedException e) {\n                    break;\n                }\n            }\n        });\n\n        thread.start();\n        return thread;\n    }\n\n    /**\n     * Stop polling\n     */\n    public void stop() {\n        running = false;\n    }\n\n    /**\n     * Listener interface for position events\n     */\n    public interface PositionListener {\n        void onPositionOpened(long ticket);\n        void onPositionClosed(long ticket);\n        void onOrderPlaced(long ticket);\n        void onOrderRemoved(long ticket);\n        void onError(ApiExceptionMT5 error);\n    }\n}\n\n// Usage\nvar poller = new PositionPoller(account, 2000);  // Poll every 2 seconds\n\nThread pollerThread = poller.startPolling(new PositionPoller.PositionListener() {\n    @Override\n    public void onPositionOpened(long ticket) {\n        System.out.printf(\"\u2705 Position opened: #%d%n\", ticket);\n    }\n\n    @Override\n    public void onPositionClosed(long ticket) {\n        System.out.printf(\"\u274c Position closed: #%d%n\", ticket);\n    }\n\n    @Override\n    public void onOrderPlaced(long ticket) {\n        System.out.printf(\"\ud83d\udcdd Order placed: #%d%n\", ticket);\n    }\n\n    @Override\n    public void onOrderRemoved(long ticket) {\n        System.out.printf(\"\ud83d\uddd1\ufe0f Order removed: #%d%n\", ticket);\n    }\n\n    @Override\n    public void onError(ApiExceptionMT5 error) {\n        System.err.printf(\"\u274c Polling error: %s%n\", error.getMessage());\n    }\n});\n\n// Later: stop polling\n// poller.stop();\n// pollerThread.join();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#8-statistics-tracker","title":"8) Statistics tracker","text":"<pre><code>public class TicketStatistics {\n    /**\n     * Track ticket statistics over time\n     */\n    public static class StatsTracker {\n        private final List&lt;Snapshot&gt; history = new ArrayList&lt;&gt;();\n\n        public record Snapshot(\n            java.time.Instant timestamp,\n            int positionCount,\n            int orderCount,\n            List&lt;Long&gt; positionTickets,\n            List&lt;Long&gt; orderTickets\n        ) {}\n\n        public void recordSnapshot(MT5Account account) throws ApiExceptionMT5 {\n            var reply = account.openedOrdersTickets();\n            var data = reply.getData();\n\n            var snapshot = new Snapshot(\n                java.time.Instant.now(),\n                data.getOpenedPositionTicketsList().size(),\n                data.getOpenedOrdersTicketsList().size(),\n                new ArrayList&lt;&gt;(data.getOpenedPositionTicketsList()),\n                new ArrayList&lt;&gt;(data.getOpenedOrdersTicketsList())\n            );\n\n            history.add(snapshot);\n        }\n\n        public void printSummary() {\n            if (history.isEmpty()) {\n                System.out.println(\"No data recorded\");\n                return;\n            }\n\n            System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n            System.out.println(\"\u2551      TICKET STATISTICS SUMMARY     \u2551\");\n            System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n            int avgPos = (int) history.stream()\n                .mapToInt(Snapshot::positionCount)\n                .average()\n                .orElse(0);\n\n            int avgOrd = (int) history.stream()\n                .mapToInt(Snapshot::orderCount)\n                .average()\n                .orElse(0);\n\n            int maxPos = history.stream()\n                .mapToInt(Snapshot::positionCount)\n                .max()\n                .orElse(0);\n\n            int maxOrd = history.stream()\n                .mapToInt(Snapshot::orderCount)\n                .max()\n                .orElse(0);\n\n            var latest = history.get(history.size() - 1);\n\n            System.out.printf(\"\u2551 Snapshots taken: %-18d \u2551%n\", history.size());\n            System.out.printf(\"\u2551 Current positions: %-16d \u2551%n\", latest.positionCount());\n            System.out.printf(\"\u2551 Current orders: %-19d \u2551%n\", latest.orderCount());\n            System.out.printf(\"\u2551 Average positions: %-16d \u2551%n\", avgPos);\n            System.out.printf(\"\u2551 Average orders: %-19d \u2551%n\", avgOrd);\n            System.out.printf(\"\u2551 Max positions: %-20d \u2551%n\", maxPos);\n            System.out.printf(\"\u2551 Max orders: %-23d \u2551%n\", maxOrd);\n            System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n        }\n\n        public void printHistory() {\n            System.out.println(\"\\nHistory:\");\n            for (int i = 0; i &lt; history.size(); i++) {\n                var snapshot = history.get(i);\n                System.out.printf(\"[%d] %s - Pos: %d, Ord: %d%n\",\n                    i + 1,\n                    snapshot.timestamp(),\n                    snapshot.positionCount(),\n                    snapshot.orderCount()\n                );\n            }\n        }\n    }\n}\n\n// Usage\nvar tracker = new TicketStatistics.StatsTracker();\n\n// Record snapshots every 10 seconds for 1 minute\nfor (int i = 0; i &lt; 6; i++) {\n    tracker.recordSnapshot(account);\n    Thread.sleep(10000);\n}\n\ntracker.printSummary();\ntracker.printHistory();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request (empty)\nMt5TermApiAccountHelper.OpenedOrdersTicketsRequest request =\n    Mt5TermApiAccountHelper.OpenedOrdersTicketsRequest.newBuilder()\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountHelper.OpenedOrdersTicketsReply reply = accountHelperClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .openedOrdersTickets(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nList&lt;Long&gt; positionTickets = reply.getData().getOpenedPositionTicketsList();\nList&lt;Long&gt; orderTickets = reply.getData().getOpenedOrdersTicketsList();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#comparison-openedorderstickets-vs-openedorders","title":"\ud83d\udcca Comparison: <code>openedOrdersTickets()</code> vs <code>openedOrders()</code>","text":"Aspect <code>openedOrdersTickets()</code> <code>openedOrders()</code> Data returned Only ticket numbers Full position and order details Bandwidth Very low (just IDs) High (complete structures) Performance Fast Slower (more data to transfer) Use case Monitoring, change detection Full analysis, profit calculation Polling Ideal for frequent polling Use sparingly for polling Information Minimal (just ticket IDs) Complete (prices, volumes, times, etc.)"},{"location":"MT5Account/3.%20Positions_and_orders/OpenedOrdersTickets/#when-to-use-which","title":"When to use which:","text":"<ul> <li>Use <code>openedOrdersTickets()</code> for frequent monitoring loops</li> <li>Use <code>openedOrders()</code> when you need detailed position information</li> <li>Common pattern: Poll with <code>openedOrdersTickets()</code>, then call <code>openedOrders()</code> when changes detected</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/","title":"\ud83d\udcdc Get Historical Orders and Deals","text":"<p>Request: retrieve historical orders and deals for a specified time period with pagination support. Returns comprehensive order and deal data including execution details, prices, and timestamps.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderHistory(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>OrderHistory</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>OrderHistory(OrderHistoryRequest) \u2192 OrderHistoryReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperGrpc.AccountHelperBlockingStub.orderHistory(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Retrieves historical orders and deals for the specified time period.\n     * Supports pagination and different sorting options.\n     * Returns both order data (placement, modification) and deal data (execution, closure).\n     *\n     * @param from Start time (server time)\n     * @param to End time (server time)\n     * @param sortType Sort order for results\n     * @param pageNumber Page number (0-based, use 0 for first page)\n     * @param itemsPerPage Items per page (use 0 for all items)\n     * @return Reply containing paginated history data\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountHelper.OrderHistoryReply orderHistory(\n        com.google.protobuf.Timestamp from,\n        com.google.protobuf.Timestamp to,\n        Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE sortType,\n        int pageNumber,\n        int itemsPerPage\n    ) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>OrderHistoryRequest { inputFrom, inputTo, inputSortMode, pageNumber, itemsPerPage }</code></p> <p>Reply message: <code>OrderHistoryReply { data: OrdersHistoryData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#input-parameters","title":"\ud83d\udd3d Input Parameters","text":"Parameter Type Required Description <code>from</code> <code>Timestamp</code> \u2705 Start time (server time) for history period <code>to</code> <code>Timestamp</code> \u2705 End time (server time) for history period <code>sortType</code> <code>BMT5_ENUM_ORDER_HISTORY_SORT_TYPE</code> \u2705 Sorting mode for results <code>pageNumber</code> <code>int</code> \u2705 Page number (0-based); use 0 for first page <code>itemsPerPage</code> <code>int</code> \u2705 Items per page; use 0 to get all items"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#enum-bmt5_enum_order_history_sort_type","title":"Enum: <code>BMT5_ENUM_ORDER_HISTORY_SORT_TYPE</code>","text":"Value Number Description <code>BMT5_SORT_BY_OPEN_TIME_ASC</code> 0 Sort by order setup time (ascending) <code>BMT5_SORT_BY_OPEN_TIME_DESC</code> 1 Sort by order setup time (descending) <code>BMT5_SORT_BY_CLOSE_TIME_ASC</code> 2 Sort by order done time (ascending) <code>BMT5_SORT_BY_CLOSE_TIME_DESC</code> 3 Sort by order done time (descending) <code>BMT5_SORT_BY_ORDER_TICKET_ID_ASC</code> 4 Sort by ticket ID (ascending) <code>BMT5_SORT_BY_ORDER_TICKET_ID_DESC</code> 5 Sort by ticket ID (descending)"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#output-ordershistorydata","title":"\u2b06\ufe0f Output - <code>OrdersHistoryData</code>","text":"Field Type Description <code>arrayTotal</code> <code>int</code> Total number of items in full history (all pages) <code>pageNumber</code> <code>int</code> Current page number (0-based) <code>itemsPerPage</code> <code>int</code> Items per page (0 = all items) <code>history_data</code> <code>List&lt;HistoryData&gt;</code> List of history entries (orders + deals) <p>Access using: - <code>reply.getData().getArrayTotal()</code> - Total items count - <code>reply.getData().getPageNumber()</code> - Current page - <code>reply.getData().getItemsPerPage()</code> - Items per page - <code>reply.getData().getHistoryDataList()</code> - List of history entries</p>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#structure-historydata","title":"Structure: <code>HistoryData</code>","text":"<p>Each history entry contains:</p> Field Type Description <code>index</code> <code>int</code> Index in result list <code>history_order</code> <code>OrderHistoryData</code> Order information (placement, modification, status) <code>history_deal</code> <code>DealHistoryData</code> Deal information (execution, profit, commission)"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#structure-orderhistorydata-order-details","title":"Structure: <code>OrderHistoryData</code> (Order Details)","text":"Field Type Description <code>ticket</code> <code>long</code> Order ticket number (unique ID) <code>setup_time</code> <code>Timestamp</code> Order setup time (when placed) <code>done_time</code> <code>Timestamp</code> Order done time (when filled/cancelled/expired) <code>state</code> <code>BMT5_ENUM_ORDER_STATE</code> Order state (filled, cancelled, expired, etc.) <code>price_current</code> <code>double</code> Current price (at time of request) <code>price_open</code> <code>double</code> Order price (limit/stop price) <code>stop_limit</code> <code>double</code> Stop limit price (for stop-limit orders) <code>stop_loss</code> <code>double</code> Stop loss price <code>take_profit</code> <code>double</code> Take profit price <code>volume_current</code> <code>double</code> Current unfilled volume (lots) <code>volume_initial</code> <code>double</code> Initial order volume (lots) <code>magic_number</code> <code>long</code> Expert Advisor ID (magic number) <code>type</code> <code>BMT5_ENUM_ORDER_TYPE</code> Order type (BUY, SELL, BUY_LIMIT, etc.) <code>time_expiration</code> <code>Timestamp</code> Order expiration time <code>type_filling</code> <code>BMT5_ENUM_ORDER_TYPE_FILLING</code> Filling type (FOK, IOC, RETURN) <code>type_time</code> <code>BMT5_ENUM_ORDER_TYPE_TIME</code> Time type (GTC, DAY, SPECIFIED) <code>position_id</code> <code>long</code> Position ID this order belongs to <code>symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>external_id</code> <code>string</code> External order ID"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#structure-dealhistorydata-dealexecution-details","title":"Structure: <code>DealHistoryData</code> (Deal/Execution Details)","text":"Field Type Description <code>ticket</code> <code>long</code> Deal ticket number (unique ID) <code>profit</code> <code>double</code> Profit from deal (in account currency) <code>commission</code> <code>double</code> Commission charged <code>fee</code> <code>double</code> Additional fees <code>price</code> <code>double</code> Execution price <code>stop_loss</code> <code>double</code> Stop loss at deal execution <code>take_profit</code> <code>double</code> Take profit at deal execution <code>swap</code> <code>double</code> Swap charges <code>volume</code> <code>double</code> Deal volume (lots) <code>entry_type</code> <code>BMT5_ENUM_DEAL_ENTRY_TYPE</code> Entry type (IN, OUT, INOUT, OUT_BY) <code>time</code> <code>Timestamp</code> Deal execution time <code>type</code> <code>BMT5_ENUM_DEAL_TYPE</code> Deal type (BUY, SELL, BALANCE, etc.) <code>reason</code> <code>BMT5_ENUM_DEAL_REASON</code> Deal reason (CLIENT, SL, TP, etc.) <code>position_id</code> <code>long</code> Position ID this deal belongs to"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#enums-reference","title":"\ud83d\udccb Enums Reference","text":""},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_order_state-order-status","title":"<code>BMT5_ENUM_ORDER_STATE</code> (Order Status)","text":"Value Number Description <code>BMT5_ORDER_STATE_STARTED</code> 0 Order checked, but not yet accepted by broker <code>BMT5_ORDER_STATE_PLACED</code> 1 Order accepted by broker <code>BMT5_ORDER_STATE_CANCELED</code> 2 Order canceled by client <code>BMT5_ORDER_STATE_PARTIAL</code> 3 Order partially executed <code>BMT5_ORDER_STATE_FILLED</code> 4 Order fully executed <code>BMT5_ORDER_STATE_REJECTED</code> 5 Order rejected by broker <code>BMT5_ORDER_STATE_EXPIRED</code> 6 Order expired <code>BMT5_ORDER_STATE_REQUEST_ADD</code> 7 Order is being registered <code>BMT5_ORDER_STATE_REQUEST_MODIFY</code> 8 Order is being modified <code>BMT5_ORDER_STATE_REQUEST_CANCEL</code> 9 Order is being deleted"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_order_type-order-types","title":"<code>BMT5_ENUM_ORDER_TYPE</code> (Order Types)","text":"Value Number Description <code>BMT5_ORDER_TYPE_BUY</code> 0 Market Buy order <code>BMT5_ORDER_TYPE_SELL</code> 1 Market Sell order <code>BMT5_ORDER_TYPE_BUY_LIMIT</code> 2 Buy Limit pending order <code>BMT5_ORDER_TYPE_SELL_LIMIT</code> 3 Sell Limit pending order <code>BMT5_ORDER_TYPE_BUY_STOP</code> 4 Buy Stop pending order <code>BMT5_ORDER_TYPE_SELL_STOP</code> 5 Sell Stop pending order <code>BMT5_ORDER_TYPE_BUY_STOP_LIMIT</code> 6 Buy Stop Limit order <code>BMT5_ORDER_TYPE_SELL_STOP_LIMIT</code> 7 Sell Stop Limit order <code>BMT5_ORDER_TYPE_CLOSE_BY</code> 8 Order to close position by opposite one"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_order_type_filling-fill-policies","title":"<code>BMT5_ENUM_ORDER_TYPE_FILLING</code> (Fill Policies)","text":"Value Number Description <code>BMT5_ORDER_FILLING_FOK</code> 0 Fill or Kill (full volume or nothing) <code>BMT5_ORDER_FILLING_IOC</code> 1 Immediate or Cancel (partial fills allowed) <code>BMT5_ORDER_FILLING_RETURN</code> 2 Return orders (remaining volume stays as order) <code>BMT5_ORDER_FILLING_BOC</code> 3 Book or Cancel"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_order_type_time-time-in-force","title":"<code>BMT5_ENUM_ORDER_TYPE_TIME</code> (Time-in-Force)","text":"Value Number Description <code>BMT5_ORDER_TIME_GTC</code> 0 Good Till Cancel <code>BMT5_ORDER_TIME_DAY</code> 1 Good Till Current Trade Day <code>BMT5_ORDER_TIME_SPECIFIED</code> 2 Good Till Specified Time <code>BMT5_ORDER_TIME_SPECIFIED_DAY</code> 3 Good Till End of Specified Day (23:59:59)"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_deal_entry_type-deal-entry-direction","title":"<code>BMT5_ENUM_DEAL_ENTRY_TYPE</code> (Deal Entry Direction)","text":"Value Number Description <code>BMT5_DEAL_ENTRY_IN</code> 0 Entry into market (opening position) <code>BMT5_DEAL_ENTRY_OUT</code> 1 Exit from market (closing position) <code>BMT5_DEAL_ENTRY_INOUT</code> 2 Position reversal (close + open opposite) <code>BMT5_DEAL_ENTRY_OUT_BY</code> 3 Closing by opposite position"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_deal_type-deal-operation-type","title":"<code>BMT5_ENUM_DEAL_TYPE</code> (Deal Operation Type)","text":"Value Number Description <code>BMT5_DEAL_TYPE_BUY</code> 0 Buy operation <code>BMT5_DEAL_TYPE_SELL</code> 1 Sell operation <code>BMT5_DEAL_TYPE_BALANCE</code> 2 Balance operation <code>BMT5_DEAL_TYPE_CREDIT</code> 3 Credit operation <code>BMT5_DEAL_TYPE_CHARGE</code> 4 Additional charge <code>BMT5_DEAL_TYPE_CORRECTION</code> 5 Correction <code>BMT5_DEAL_TYPE_BONUS</code> 6 Bonus <code>BMT5_DEAL_TYPE_COMMISSION</code> 7 Additional commission <code>BMT5_DEAL_TYPE_COMMISSION_DAILY</code> 8 Daily commission <code>BMT5_DEAL_TYPE_COMMISSION_MONTHLY</code> 9 Monthly commission <code>BMT5_DEAL_TYPE_COMMISSION_AGENT_DAILY</code> 10 Daily agent commission <code>BMT5_DEAL_TYPE_COMMISSION_AGENT_MONTHLY</code> 11 Monthly agent commission <code>BMT5_DEAL_TYPE_INTEREST</code> 12 Interest rate <code>BMT5_DEAL_TYPE_BUY_CANCELED</code> 13 Canceled buy deal <code>BMT5_DEAL_TYPE_SELL_CANCELED</code> 14 Canceled sell deal <code>BMT5_DEAL_DIVIDEND</code> 15 Dividend operations <code>BMT5_DEAL_DIVIDEND_FRANKED</code> 16 Franked (non-taxable) dividend <code>BMT5_DEAL_TAX</code> 17 Tax charges"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#bmt5_enum_deal_reason-deal-execution-reason","title":"<code>BMT5_ENUM_DEAL_REASON</code> (Deal Execution Reason)","text":"Value Number Description <code>BMT5_DEAL_REASON_CLIENT</code> 0 Deal from desktop terminal order <code>BMT5_DEAL_REASON_MOBILE</code> 1 Deal from mobile app order <code>BMT5_DEAL_REASON_WEB</code> 2 Deal from web platform order <code>BMT5_DEAL_REASON_EXPERT</code> 3 Deal from Expert Advisor/script <code>BMT5_DEAL_REASON_SL</code> 4 Deal from Stop Loss activation <code>BMT5_DEAL_REASON_TP</code> 5 Deal from Take Profit activation <code>BMT5_DEAL_REASON_SO</code> 6 Deal from Stop Out <code>BMT5_DEAL_REASON_ROLLOVER</code> 7 Deal due to rollover <code>BMT5_DEAL_REASON_VMARGIN</code> 8 Deal after variation margin charge <code>BMT5_DEAL_REASON_SPLIT</code> 9 Deal after stock split <code>BMT5_DEAL_REASON_CORPORATE_ACTION</code> 10 Deal from corporate action"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Comprehensive RPC for retrieving order and deal history with pagination.</li> <li>Why you need it. Analyze trading performance, generate reports, track execution quality.</li> <li>Two data types. Returns both orders (placement/modification) and deals (actual executions).</li> <li>Pagination. Handles large history datasets with page-based navigation.</li> <li>Time range. Specify exact time period using server timestamps.</li> <li>Sorting. Multiple sort options by time or ticket ID.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Analyze past trading activity and performance.</li> <li>Generate trading reports and statistics.</li> <li>Track order execution quality (slippage, fills).</li> <li>Calculate realized profits and losses.</li> <li>Audit trading history for compliance.</li> <li>Debug Expert Advisor trading strategies.</li> <li>Export trading history for analysis tools.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Server time. All timestamps use server time, not local time.</li> <li>Pagination. Use <code>pageNumber=0, itemsPerPage=0</code> to get all items at once.</li> <li>Two data types. Each <code>HistoryData</code> contains both order and deal info.</li> <li>Order vs Deal. Orders track placement/modification; deals track actual execution/closure.</li> <li>Large datasets. For long time ranges, use pagination to avoid timeouts.</li> <li>Sorting. Choose sort type based on your analysis needs (time vs ticket).</li> <li>Performance. Shorter time ranges = faster response times.</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#1-basic-history-retrieval-last-7-days","title":"1) Basic history retrieval (last 7 days)","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountHelper;\nimport com.google.protobuf.Timestamp;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get last 7 days of history\n            Instant now = Instant.now();\n            Instant weekAgo = now.minus(7, ChronoUnit.DAYS);\n\n            Timestamp from = Timestamp.newBuilder()\n                .setSeconds(weekAgo.getEpochSecond())\n                .build();\n            Timestamp to = Timestamp.newBuilder()\n                .setSeconds(now.getEpochSecond())\n                .build();\n\n            Mt5TermApiAccountHelper.OrderHistoryReply reply =\n                account.orderHistory(\n                    from,\n                    to,\n                    Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n                    0,  // First page\n                    0   // All items\n                );\n\n            var data = reply.getData();\n            System.out.printf(\"Total history items: %d%n\", data.getArrayTotal());\n\n            for (var historyItem : data.getHistoryDataList()) {\n                var order = historyItem.getHistoryOrder();\n                var deal = historyItem.getHistoryDeal();\n\n                System.out.printf(\"\\nOrder #%d - %s - %s%n\",\n                    order.getTicket(),\n                    order.getSymbol(),\n                    order.getType()\n                );\n\n                if (deal.getTicket() &gt; 0) {\n                    System.out.printf(\"  Deal #%d - Profit: %.2f, Commission: %.2f%n\",\n                        deal.getTicket(),\n                        deal.getProfit(),\n                        deal.getCommission()\n                    );\n                }\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#2-calculate-total-profit-from-history","title":"2) Calculate total profit from history","text":"<pre><code>import java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\npublic class ProfitCalculator {\n    /**\n     * Calculate total profit/loss for a time period\n     */\n    public static double calculateTotalProfit(\n            MT5Account account,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.orderHistory(\n            from, to,\n            Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n            0, 0\n        );\n\n        double totalProfit = 0.0;\n        double totalCommission = 0.0;\n        double totalFees = 0.0;\n        double totalSwap = 0.0;\n\n        for (var historyItem : reply.getData().getHistoryDataList()) {\n            var deal = historyItem.getHistoryDeal();\n            totalProfit += deal.getProfit();\n            totalCommission += deal.getCommission();\n            totalFees += deal.getFee();\n            totalSwap += deal.getSwap();\n        }\n\n        double netProfit = totalProfit - totalCommission - totalFees + totalSwap;\n\n        System.out.printf(\"Trading Period: Last %d days%n\", daysBack);\n        System.out.printf(\"Gross Profit: %.2f%n\", totalProfit);\n        System.out.printf(\"Commission: %.2f%n\", totalCommission);\n        System.out.printf(\"Fees: %.2f%n\", totalFees);\n        System.out.printf(\"Swap: %.2f%n\", totalSwap);\n        System.out.printf(\"Net Profit: %.2f%n\", netProfit);\n\n        return netProfit;\n    }\n}\n\n// Usage\ndouble profit = ProfitCalculator.calculateTotalProfit(account, 30);\nSystem.out.printf(\"Monthly profit: %.2f%n\", profit);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#3-paginated-history-retrieval","title":"3) Paginated history retrieval","text":"<pre><code>public class PaginatedHistory {\n    /**\n     * Retrieve history with pagination\n     */\n    public static void fetchPaginated(\n            MT5Account account,\n            Timestamp from,\n            Timestamp to,\n            int itemsPerPage) throws ApiExceptionMT5 {\n\n        int currentPage = 0;\n        int totalItems = 0;\n\n        System.out.println(\"Fetching paginated history...\\n\");\n\n        do {\n            var reply = account.orderHistory(\n                from, to,\n                Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n                currentPage,\n                itemsPerPage\n            );\n\n            var data = reply.getData();\n            totalItems = data.getArrayTotal();\n\n            System.out.printf(\"Page %d/%d (Items: %d/%d)%n\",\n                currentPage + 1,\n                (totalItems + itemsPerPage - 1) / itemsPerPage,\n                data.getHistoryDataList().size(),\n                totalItems\n            );\n\n            // Process items on this page\n            for (var item : data.getHistoryDataList()) {\n                var order = item.getHistoryOrder();\n                System.out.printf(\"  Order #%d - %s%n\",\n                    order.getTicket(),\n                    order.getSymbol()\n                );\n            }\n\n            currentPage++;\n\n            // Check if more pages exist\n            int itemsProcessed = currentPage * itemsPerPage;\n            if (itemsProcessed &gt;= totalItems) {\n                break;\n            }\n\n        } while (true);\n\n        System.out.printf(\"\\nTotal items processed: %d%n\", totalItems);\n    }\n}\n\n// Usage\nInstant now = Instant.now();\nInstant monthAgo = now.minus(30, ChronoUnit.DAYS);\n\nTimestamp from = Timestamp.newBuilder()\n    .setSeconds(monthAgo.getEpochSecond())\n    .build();\nTimestamp to = Timestamp.newBuilder()\n    .setSeconds(now.getEpochSecond())\n    .build();\n\nPaginatedHistory.fetchPaginated(account, from, to, 50);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#4-filter-by-symbol","title":"4) Filter by symbol","text":"<pre><code>public class SymbolFilter {\n    /**\n     * Get history for specific symbol\n     */\n    public static java.util.List&lt;Mt5TermApiAccountHelper.HistoryData&gt; getSymbolHistory(\n            MT5Account account,\n            String symbol,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.orderHistory(\n            from, to,\n            Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n            0, 0\n        );\n\n        // Filter by symbol\n        return reply.getData().getHistoryDataList().stream()\n            .filter(item -&gt; item.getHistoryOrder().getSymbol().equals(symbol))\n            .toList();\n    }\n\n    /**\n     * Print symbol history summary\n     */\n    public static void printSymbolSummary(\n            java.util.List&lt;Mt5TermApiAccountHelper.HistoryData&gt; history,\n            String symbol) {\n\n        double totalProfit = history.stream()\n            .mapToDouble(item -&gt; item.getHistoryDeal().getProfit())\n            .sum();\n\n        long tradeCount = history.stream()\n            .filter(item -&gt; item.getHistoryDeal().getTicket() &gt; 0)\n            .count();\n\n        System.out.printf(\"\\n%s History Summary%n\", symbol);\n        System.out.println(\"\u2550\".repeat(40));\n        System.out.printf(\"Total Trades: %d%n\", tradeCount);\n        System.out.printf(\"Total Profit: %.2f%n\", totalProfit);\n        System.out.printf(\"Average Per Trade: %.2f%n\",\n            tradeCount &gt; 0 ? totalProfit / tradeCount : 0.0);\n    }\n}\n\n// Usage\nvar eurusdHistory = SymbolFilter.getSymbolHistory(account, \"EURUSD\", 30);\nSymbolFilter.printSymbolSummary(eurusdHistory, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#5-trading-statistics-analyzer","title":"5) Trading statistics analyzer","text":"<pre><code>public class TradingStats {\n    public record Statistics(\n        int totalTrades,\n        int winningTrades,\n        int losingTrades,\n        double winRate,\n        double totalProfit,\n        double totalLoss,\n        double netProfit,\n        double largestWin,\n        double largestLoss,\n        double averageWin,\n        double averageLoss,\n        double profitFactor\n    ) {}\n\n    /**\n     * Calculate detailed trading statistics\n     */\n    public static Statistics analyze(\n            MT5Account account,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.orderHistory(\n            from, to,\n            Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n            0, 0\n        );\n\n        java.util.List&lt;Double&gt; profits = new java.util.ArrayList&lt;&gt;();\n\n        for (var item : reply.getData().getHistoryDataList()) {\n            var deal = item.getHistoryDeal();\n            if (deal.getTicket() &gt; 0) {\n                double netProfit = deal.getProfit() - deal.getCommission() - deal.getFee();\n                profits.add(netProfit);\n            }\n        }\n\n        if (profits.isEmpty()) {\n            return new Statistics(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n        }\n\n        int winningTrades = (int) profits.stream().filter(p -&gt; p &gt; 0).count();\n        int losingTrades = (int) profits.stream().filter(p -&gt; p &lt; 0).count();\n        int totalTrades = profits.size();\n\n        double totalProfit = profits.stream().filter(p -&gt; p &gt; 0).mapToDouble(Double::doubleValue).sum();\n        double totalLoss = Math.abs(profits.stream().filter(p -&gt; p &lt; 0).mapToDouble(Double::doubleValue).sum());\n        double netProfit = totalProfit - totalLoss;\n\n        double largestWin = profits.stream().filter(p -&gt; p &gt; 0).mapToDouble(Double::doubleValue).max().orElse(0);\n        double largestLoss = Math.abs(profits.stream().filter(p -&gt; p &lt; 0).mapToDouble(Double::doubleValue).min().orElse(0));\n\n        double averageWin = winningTrades &gt; 0 ? totalProfit / winningTrades : 0;\n        double averageLoss = losingTrades &gt; 0 ? totalLoss / losingTrades : 0;\n\n        double winRate = (double) winningTrades / totalTrades * 100;\n        double profitFactor = totalLoss &gt; 0 ? totalProfit / totalLoss : 0;\n\n        return new Statistics(\n            totalTrades,\n            winningTrades,\n            losingTrades,\n            winRate,\n            totalProfit,\n            totalLoss,\n            netProfit,\n            largestWin,\n            largestLoss,\n            averageWin,\n            averageLoss,\n            profitFactor\n        );\n    }\n\n    /**\n     * Print statistics report\n     */\n    public static void printReport(Statistics stats) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551       TRADING STATISTICS REPORT        \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total Trades: %-24d \u2551%n\", stats.totalTrades());\n        System.out.printf(\"\u2551 Winning Trades: %-22d \u2551%n\", stats.winningTrades());\n        System.out.printf(\"\u2551 Losing Trades: %-23d \u2551%n\", stats.losingTrades());\n        System.out.printf(\"\u2551 Win Rate: %-27.2f%% \u2551%n\", stats.winRate());\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total Profit: $%-23.2f \u2551%n\", stats.totalProfit());\n        System.out.printf(\"\u2551 Total Loss: $%-25.2f \u2551%n\", stats.totalLoss());\n        System.out.printf(\"\u2551 Net Profit: $%-25.2f \u2551%n\", stats.netProfit());\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Largest Win: $%-24.2f \u2551%n\", stats.largestWin());\n        System.out.printf(\"\u2551 Largest Loss: $%-23.2f \u2551%n\", stats.largestLoss());\n        System.out.printf(\"\u2551 Average Win: $%-24.2f \u2551%n\", stats.averageWin());\n        System.out.printf(\"\u2551 Average Loss: $%-23.2f \u2551%n\", stats.averageLoss());\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Profit Factor: %-23.2f \u2551%n\", stats.profitFactor());\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar stats = TradingStats.analyze(account, 30);\nTradingStats.printReport(stats);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#6-export-to-csv","title":"6) Export to CSV","text":"<pre><code>import java.io.*;\nimport java.time.Instant;\n\npublic class CsvExporter {\n    /**\n     * Export trading history to CSV file\n     */\n    public static void exportToCsv(\n            MT5Account account,\n            Timestamp from,\n            Timestamp to,\n            String filename) throws ApiExceptionMT5, IOException {\n\n        var reply = account.orderHistory(\n            from, to,\n            Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n            0, 0\n        );\n\n        try (PrintWriter writer = new PrintWriter(new FileWriter(filename))) {\n            // CSV header\n            writer.println(\"OrderTicket,Symbol,OrderType,OrderState,\" +\n                \"SetupTime,DoneTime,VolumeInitial,VolumeCurrent,\" +\n                \"PriceOpen,StopLoss,TakeProfit,\" +\n                \"DealTicket,DealType,DealProfit,Commission,Fee,Swap,\" +\n                \"DealPrice,DealVolume,DealTime,EntryType,DealReason\");\n\n            // Data rows\n            for (var item : reply.getData().getHistoryDataList()) {\n                var order = item.getHistoryOrder();\n                var deal = item.getHistoryDeal();\n\n                Instant setupTime = Instant.ofEpochSecond(\n                    order.getSetupTime().getSeconds()\n                );\n                Instant doneTime = Instant.ofEpochSecond(\n                    order.getDoneTime().getSeconds()\n                );\n                Instant dealTime = Instant.ofEpochSecond(\n                    deal.getTime().getSeconds()\n                );\n\n                writer.printf(\"%d,%s,%s,%s,%s,%s,%.2f,%.2f,%.5f,%.5f,%.5f,\" +\n                    \"%d,%s,%.2f,%.2f,%.2f,%.2f,%.5f,%.2f,%s,%s,%s%n\",\n                    order.getTicket(),\n                    order.getSymbol(),\n                    order.getType(),\n                    order.getState(),\n                    setupTime,\n                    doneTime,\n                    order.getVolumeInitial(),\n                    order.getVolumeCurrent(),\n                    order.getPriceOpen(),\n                    order.getStopLoss(),\n                    order.getTakeProfit(),\n                    deal.getTicket(),\n                    deal.getType(),\n                    deal.getProfit(),\n                    deal.getCommission(),\n                    deal.getFee(),\n                    deal.getSwap(),\n                    deal.getPrice(),\n                    deal.getVolume(),\n                    dealTime,\n                    deal.getEntryType(),\n                    deal.getReason()\n                );\n            }\n\n            System.out.printf(\"\u2705 Exported %d records to %s%n\",\n                reply.getData().getArrayTotal(),\n                filename\n            );\n        }\n    }\n}\n\n// Usage\nInstant now = Instant.now();\nInstant monthAgo = now.minus(30, ChronoUnit.DAYS);\n\nTimestamp from = Timestamp.newBuilder()\n    .setSeconds(monthAgo.getEpochSecond())\n    .build();\nTimestamp to = Timestamp.newBuilder()\n    .setSeconds(now.getEpochSecond())\n    .build();\n\nCsvExporter.exportToCsv(account, from, to, \"trading_history.csv\");\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#7-find-orders-by-magic-number","title":"7) Find orders by magic number","text":"<pre><code>public class MagicNumberFilter {\n    /**\n     * Find all orders/deals by magic number (EA ID)\n     */\n    public static java.util.List&lt;Mt5TermApiAccountHelper.HistoryData&gt; findByMagicNumber(\n            MT5Account account,\n            long magicNumber,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.orderHistory(\n            from, to,\n            Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n            0, 0\n        );\n\n        return reply.getData().getHistoryDataList().stream()\n            .filter(item -&gt; item.getHistoryOrder().getMagicNumber() == magicNumber)\n            .toList();\n    }\n\n    /**\n     * Print EA performance report\n     */\n    public static void printEaReport(\n            java.util.List&lt;Mt5TermApiAccountHelper.HistoryData&gt; history,\n            long magicNumber) {\n\n        double totalProfit = history.stream()\n            .mapToDouble(item -&gt; {\n                var deal = item.getHistoryDeal();\n                return deal.getProfit() - deal.getCommission() - deal.getFee();\n            })\n            .sum();\n\n        long tradeCount = history.stream()\n            .filter(item -&gt; item.getHistoryDeal().getTicket() &gt; 0)\n            .count();\n\n        System.out.printf(\"\\nEA Report (Magic: %d)%n\", magicNumber);\n        System.out.println(\"\u2550\".repeat(40));\n        System.out.printf(\"Trades: %d%n\", tradeCount);\n        System.out.printf(\"Net Profit: %.2f%n\", totalProfit);\n    }\n}\n\n// Usage\nlong eaMagic = 123456;\nvar eaHistory = MagicNumberFilter.findByMagicNumber(account, eaMagic, 30);\nMagicNumberFilter.printEaReport(eaHistory, eaMagic);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#8-find-stop-loss-and-take-profit-executions","title":"8) Find Stop Loss and Take Profit executions","text":"<pre><code>public class SlTpAnalyzer {\n    /**\n     * Analyze SL and TP execution statistics\n     */\n    public static void analyzeSlTpExecutions(\n            MT5Account account,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.orderHistory(\n            from, to,\n            Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC,\n            0, 0\n        );\n\n        int slCount = 0;\n        int tpCount = 0;\n        double slTotalProfit = 0.0;\n        double tpTotalProfit = 0.0;\n\n        for (var item : reply.getData().getHistoryDataList()) {\n            var deal = item.getHistoryDeal();\n            var reason = deal.getReason();\n\n            if (reason == Mt5TermApiAccountHelper.BMT5_ENUM_DEAL_REASON.BMT5_DEAL_REASON_SL) {\n                slCount++;\n                slTotalProfit += deal.getProfit();\n            } else if (reason == Mt5TermApiAccountHelper.BMT5_ENUM_DEAL_REASON.BMT5_DEAL_REASON_TP) {\n                tpCount++;\n                tpTotalProfit += deal.getProfit();\n            }\n        }\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551      SL/TP EXECUTION ANALYSIS      \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Stop Loss hits: %-18d \u2551%n\", slCount);\n        System.out.printf(\"\u2551 Take Profit hits: %-16d \u2551%n\", tpCount);\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 SL Total P/L: $%-19.2f \u2551%n\", slTotalProfit);\n        System.out.printf(\"\u2551 TP Total P/L: $%-19.2f \u2551%n\", tpTotalProfit);\n        System.out.printf(\"\u2551 SL Average: $%-21.2f \u2551%n\",\n            slCount &gt; 0 ? slTotalProfit / slCount : 0.0);\n        System.out.printf(\"\u2551 TP Average: $%-21.2f \u2551%n\",\n            tpCount &gt; 0 ? tpTotalProfit / tpCount : 0.0);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nSlTpAnalyzer.analyzeSlTpExecutions(account, 30);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\nimport com.google.protobuf.Timestamp;\n\n// Create request\nTimestamp from = Timestamp.newBuilder()\n    .setSeconds(Instant.now().minus(7, ChronoUnit.DAYS).getEpochSecond())\n    .build();\nTimestamp to = Timestamp.newBuilder()\n    .setSeconds(Instant.now().getEpochSecond())\n    .build();\n\nMt5TermApiAccountHelper.OrderHistoryRequest request =\n    Mt5TermApiAccountHelper.OrderHistoryRequest.newBuilder()\n        .setInputFrom(from)\n        .setInputTo(to)\n        .setInputSortMode(Mt5TermApiAccountHelper.BMT5_ENUM_ORDER_HISTORY_SORT_TYPE.BMT5_SORT_BY_CLOSE_TIME_DESC)\n        .setPageNumber(0)\n        .setItemsPerPage(0)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountHelper.OrderHistoryReply reply = accountHelperClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .orderHistory(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nList&lt;Mt5TermApiAccountHelper.HistoryData&gt; history =\n    reply.getData().getHistoryDataList();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/OrderHistory/#understanding-orders-vs-deals","title":"\ud83d\udcca Understanding Orders vs Deals","text":"<p>Orders represent trading intentions and modifications: - Order placement (BUY, SELL, BUY_LIMIT, etc.) - Order modifications (SL/TP changes, price changes) - Order cancellations and expirations</p> <p>Deals represent actual market executions: - Position openings (entry into market) - Position closings (exit from market) - Position reversals (close + open opposite) - Actual profit/loss from executions</p> <p>Key difference: One order can result in multiple deals (partial fills), and each deal shows actual execution details including profit/loss.</p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/","title":"\ud83d\udcca Get Closed Positions History","text":"<p>Request: retrieve historical closed positions for a specified time period with pagination support. Returns complete position lifecycle data including entry/exit prices, profit/loss, and trading costs.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.positionsHistory(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.AccountHelper</code></li> <li>Proto definition: <code>PositionsHistory</code> (defined in <code>mt5-term-api-account-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.AccountHelper</code></li> <li>Method: <code>PositionsHistory(PositionsHistoryRequest) \u2192 PositionsHistoryReply</code></li> <li>Low\u2011level client (generated): <code>AccountHelperGrpc.AccountHelperBlockingStub.positionsHistory(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Retrieves closed positions history for the specified time period.\n     * Supports pagination and different sorting options.\n     * Returns complete position lifecycle including entry/exit prices and profit/loss.\n     *\n     * @param sortType Sort order for results\n     * @param from Optional start time (position open time), null for no limit\n     * @param to Optional end time (position open time), null for no limit\n     * @param pageNumber Optional page number (0-based), null for default (0)\n     * @param itemsPerPage Optional items per page, null for default (all items)\n     * @return Reply containing paginated closed positions data\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiAccountHelper.PositionsHistoryReply positionsHistory(\n        Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE sortType,\n        com.google.protobuf.Timestamp from,\n        com.google.protobuf.Timestamp to,\n        Integer pageNumber,\n        Integer itemsPerPage\n    ) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>PositionsHistoryRequest { sort_type, position_open_time_from?, position_open_time_to?, page_number?, items_per_page? }</code></p> <p>Reply message: <code>PositionsHistoryReply { data: PositionsHistoryData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#input-parameters","title":"\ud83d\udd3d Input Parameters","text":"Parameter Type Required Description <code>sortType</code> <code>AH_ENUM_POSITIONS_HISTORY_SORT_TYPE</code> \u2705 Sorting mode for results <code>from</code> <code>Timestamp</code> \u274c Start time (position open time); null = no limit <code>to</code> <code>Timestamp</code> \u274c End time (position open time); null = no limit <code>pageNumber</code> <code>Integer</code> \u274c Page number (0-based); null = 0 <code>itemsPerPage</code> <code>Integer</code> \u274c Items per page; null = all items"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#enum-ah_enum_positions_history_sort_type","title":"Enum: <code>AH_ENUM_POSITIONS_HISTORY_SORT_TYPE</code>","text":"Value Number Description <code>AH_POSITION_OPEN_TIME_ASC</code> 0 Sort by position open time (ascending) <code>AH_POSITION_OPEN_TIME_DESC</code> 1 Sort by position open time (descending) <code>AH_POSITION_TICKET_ASC</code> 2 Sort by position ticket ID (ascending) <code>AH_POSITION_TICKET_DESC</code> 3 Sort by position ticket ID (descending)"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#output-positionshistorydata","title":"\u2b06\ufe0f Output - <code>PositionsHistoryData</code>","text":"Field Type Description <code>history_positions</code> <code>List&lt;PositionHistoryInfo&gt;</code> List of closed position records <p>Access using: <code>reply.getData().getHistoryPositionsList()</code></p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#structure-positionhistoryinfo","title":"Structure: <code>PositionHistoryInfo</code>","text":"Field Type Description <code>index</code> <code>int</code> Index in result list <code>position_ticket</code> <code>long</code> Position ticket number (unique ID) <code>order_type</code> <code>AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE</code> Position type (BUY, SELL, etc.) <code>open_time</code> <code>Timestamp</code> Position opening time <code>close_time</code> <code>Timestamp</code> Position closing time <code>volume</code> <code>double</code> Position volume (lots) <code>open_price</code> <code>double</code> Opening price <code>close_price</code> <code>double</code> Closing price <code>stop_loss</code> <code>double</code> Stop loss level <code>take_profit</code> <code>double</code> Take profit level <code>market_value</code> <code>double</code> Position market value <code>commission</code> <code>double</code> Total commission charged <code>fee</code> <code>double</code> Additional fees <code>profit</code> <code>double</code> Gross profit/loss (in account currency) <code>swap</code> <code>double</code> Swap charges (rollover) <code>comment</code> <code>string</code> Position comment <code>symbol</code> <code>string</code> Symbol name (e.g., \"EURUSD\") <code>magic</code> <code>long</code> Expert Advisor ID (magic number)"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#enum-ah_enum_positions_history_order_type","title":"Enum: <code>AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE</code>","text":"Value Number Description <code>AH_ORDER_TYPE_BUY</code> 0 Buy position (long) <code>AH_ORDER_TYPE_SELL</code> 1 Sell position (short) <code>AH_ORDER_TYPE_BUY_LIMIT</code> 2 Buy Limit order <code>AH_ORDER_TYPE_SELL_LIMIT</code> 3 Sell Limit order <code>AH_ORDER_TYPE_BUY_STOP</code> 4 Buy Stop order <code>AH_ORDER_TYPE_SELL_STOP</code> 5 Sell Stop order <code>AH_ORDER_TYPE_BUY_STOP_LIMIT</code> 6 Buy Stop Limit order <code>AH_ORDER_TYPE_SELL_STOP_LIMIT</code> 7 Sell Stop Limit order <code>AH_ORDER_TYPE_CLOSE_BY</code> 8 Position closed by opposite position"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to retrieve closed positions history with complete lifecycle data.</li> <li>Why you need it. Analyze trading performance, calculate metrics, generate reports.</li> <li>Complete data. Includes entry/exit prices, profit/loss, costs, and timestamps.</li> <li>Flexible filtering. Optional time range filtering by position open time.</li> <li>Pagination. Handles large datasets efficiently.</li> <li>Net profit. Calculate using: <code>profit - commission - fee + swap</code>.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Analyze trading performance and strategy effectiveness.</li> <li>Calculate trading statistics (win rate, profit factor, etc.).</li> <li>Generate profit/loss reports for specific periods.</li> <li>Track commission and swap costs.</li> <li>Audit closed positions for compliance.</li> <li>Export trading history for external analysis.</li> <li>Monitor Expert Advisor performance by magic number.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Time filter. <code>from</code> and <code>to</code> filter by position open time, not close time.</li> <li>Optional params. Pass <code>null</code> for <code>from</code>/<code>to</code> to get all positions.</li> <li>Net profit. Calculate as: <code>profit - commission - fee + swap</code>.</li> <li>Pagination. Use <code>pageNumber=null, itemsPerPage=null</code> for all items.</li> <li>Market value. Calculated position value at closure.</li> <li>Swap charges. Overnight rollover costs (can be positive or negative).</li> <li>Magic number. Use to filter positions by Expert Advisor.</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#1-basic-closed-positions-retrieval-last-30-days","title":"1) Basic closed positions retrieval (last 30 days)","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiAccountHelper;\nimport com.google.protobuf.Timestamp;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get last 30 days of closed positions\n            Instant now = Instant.now();\n            Instant monthAgo = now.minus(30, ChronoUnit.DAYS);\n\n            Timestamp from = Timestamp.newBuilder()\n                .setSeconds(monthAgo.getEpochSecond())\n                .build();\n            Timestamp to = Timestamp.newBuilder()\n                .setSeconds(now.getEpochSecond())\n                .build();\n\n            Mt5TermApiAccountHelper.PositionsHistoryReply reply =\n                account.positionsHistory(\n                    Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC,\n                    from,\n                    to,\n                    null,  // All pages\n                    null   // All items\n                );\n\n            var positions = reply.getData().getHistoryPositionsList();\n            System.out.printf(\"Closed positions: %d%n%n\", positions.size());\n\n            for (var position : positions) {\n                double netProfit = position.getProfit() -\n                                   position.getCommission() -\n                                   position.getFee() +\n                                   position.getSwap();\n\n                System.out.printf(\"Position #%d%n\", position.getPositionTicket());\n                System.out.printf(\"  Symbol: %s%n\", position.getSymbol());\n                System.out.printf(\"  Type: %s%n\", position.getOrderType());\n                System.out.printf(\"  Volume: %.2f lots%n\", position.getVolume());\n                System.out.printf(\"  Open: %.5f @ %s%n\",\n                    position.getOpenPrice(),\n                    Instant.ofEpochSecond(position.getOpenTime().getSeconds())\n                );\n                System.out.printf(\"  Close: %.5f @ %s%n\",\n                    position.getClosePrice(),\n                    Instant.ofEpochSecond(position.getCloseTime().getSeconds())\n                );\n                System.out.printf(\"  Profit: %.2f%n\", position.getProfit());\n                System.out.printf(\"  Net P/L: %.2f%n%n\", netProfit);\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#2-calculate-trading-statistics","title":"2) Calculate trading statistics","text":"<pre><code>import java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport java.time.Duration;\n\npublic class TradingStatistics {\n    public record Stats(\n        int totalTrades,\n        int winningTrades,\n        int losingTrades,\n        double winRate,\n        double totalProfit,\n        double totalLoss,\n        double netProfit,\n        double largestWin,\n        double largestLoss,\n        double averageWin,\n        double averageLoss,\n        double profitFactor,\n        double averageHoldingTime,\n        double totalCommission,\n        double totalSwap\n    ) {}\n\n    /**\n     * Calculate comprehensive trading statistics\n     */\n    public static Stats calculate(\n            MT5Account account,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC,\n            from, to, null, null\n        );\n\n        var positions = reply.getData().getHistoryPositionsList();\n        if (positions.isEmpty()) {\n            return new Stats(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n        }\n\n        java.util.List&lt;Double&gt; netProfits = new java.util.ArrayList&lt;&gt;();\n        double totalCommission = 0;\n        double totalSwap = 0;\n        long totalHoldingSeconds = 0;\n\n        for (var pos : positions) {\n            double netProfit = pos.getProfit() - pos.getCommission() -\n                               pos.getFee() + pos.getSwap();\n            netProfits.add(netProfit);\n\n            totalCommission += pos.getCommission();\n            totalSwap += pos.getSwap();\n\n            // Calculate holding time\n            long holdingSec = pos.getCloseTime().getSeconds() -\n                              pos.getOpenTime().getSeconds();\n            totalHoldingSeconds += holdingSec;\n        }\n\n        int totalTrades = positions.size();\n        int winningTrades = (int) netProfits.stream().filter(p -&gt; p &gt; 0).count();\n        int losingTrades = (int) netProfits.stream().filter(p -&gt; p &lt; 0).count();\n\n        double totalProfit = netProfits.stream()\n            .filter(p -&gt; p &gt; 0)\n            .mapToDouble(Double::doubleValue)\n            .sum();\n        double totalLoss = Math.abs(netProfits.stream()\n            .filter(p -&gt; p &lt; 0)\n            .mapToDouble(Double::doubleValue)\n            .sum());\n        double netProfit = totalProfit - totalLoss;\n\n        double largestWin = netProfits.stream()\n            .filter(p -&gt; p &gt; 0)\n            .mapToDouble(Double::doubleValue)\n            .max()\n            .orElse(0);\n        double largestLoss = Math.abs(netProfits.stream()\n            .filter(p -&gt; p &lt; 0)\n            .mapToDouble(Double::doubleValue)\n            .min()\n            .orElse(0));\n\n        double averageWin = winningTrades &gt; 0 ? totalProfit / winningTrades : 0;\n        double averageLoss = losingTrades &gt; 0 ? totalLoss / losingTrades : 0;\n\n        double winRate = (double) winningTrades / totalTrades * 100;\n        double profitFactor = totalLoss &gt; 0 ? totalProfit / totalLoss : 0;\n\n        double averageHoldingTime = (double) totalHoldingSeconds / totalTrades;\n\n        return new Stats(\n            totalTrades,\n            winningTrades,\n            losingTrades,\n            winRate,\n            totalProfit,\n            totalLoss,\n            netProfit,\n            largestWin,\n            largestLoss,\n            averageWin,\n            averageLoss,\n            profitFactor,\n            averageHoldingTime,\n            totalCommission,\n            totalSwap\n        );\n    }\n\n    /**\n     * Print statistics report\n     */\n    public static void printReport(Stats stats) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551    CLOSED POSITIONS STATISTICS         \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total Trades: %-24d \u2551%n\", stats.totalTrades());\n        System.out.printf(\"\u2551 Winning Trades: %-22d \u2551%n\", stats.winningTrades());\n        System.out.printf(\"\u2551 Losing Trades: %-23d \u2551%n\", stats.losingTrades());\n        System.out.printf(\"\u2551 Win Rate: %-27.2f%% \u2551%n\", stats.winRate());\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total Profit: $%-23.2f \u2551%n\", stats.totalProfit());\n        System.out.printf(\"\u2551 Total Loss: $%-25.2f \u2551%n\", stats.totalLoss());\n        System.out.printf(\"\u2551 Net Profit: $%-25.2f \u2551%n\", stats.netProfit());\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Largest Win: $%-24.2f \u2551%n\", stats.largestWin());\n        System.out.printf(\"\u2551 Largest Loss: $%-23.2f \u2551%n\", stats.largestLoss());\n        System.out.printf(\"\u2551 Average Win: $%-24.2f \u2551%n\", stats.averageWin());\n        System.out.printf(\"\u2551 Average Loss: $%-23.2f \u2551%n\", stats.averageLoss());\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Profit Factor: %-23.2f \u2551%n\", stats.profitFactor());\n        System.out.printf(\"\u2551 Avg Hold Time: %-19.1f hrs \u2551%n\",\n            stats.averageHoldingTime() / 3600);\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Total Commission: $%-19.2f \u2551%n\", stats.totalCommission());\n        System.out.printf(\"\u2551 Total Swap: $%-25.2f \u2551%n\", stats.totalSwap());\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar stats = TradingStatistics.calculate(account, 30);\nTradingStatistics.printReport(stats);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#3-filter-positions-by-symbol","title":"3) Filter positions by symbol","text":"<pre><code>public class SymbolAnalyzer {\n    /**\n     * Get closed positions for specific symbol\n     */\n    public static java.util.List&lt;Mt5TermApiAccountHelper.PositionHistoryInfo&gt; getBySymbol(\n            MT5Account account,\n            String symbol,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC,\n            from, to, null, null\n        );\n\n        return reply.getData().getHistoryPositionsList().stream()\n            .filter(pos -&gt; pos.getSymbol().equals(symbol))\n            .toList();\n    }\n\n    /**\n     * Print symbol performance summary\n     */\n    public static void printSymbolPerformance(\n            java.util.List&lt;Mt5TermApiAccountHelper.PositionHistoryInfo&gt; positions,\n            String symbol) {\n\n        if (positions.isEmpty()) {\n            System.out.printf(\"No positions found for %s%n\", symbol);\n            return;\n        }\n\n        double totalNetProfit = positions.stream()\n            .mapToDouble(p -&gt; p.getProfit() - p.getCommission() -\n                              p.getFee() + p.getSwap())\n            .sum();\n\n        long wins = positions.stream()\n            .filter(p -&gt; (p.getProfit() - p.getCommission() -\n                          p.getFee() + p.getSwap()) &gt; 0)\n            .count();\n\n        double winRate = (double) wins / positions.size() * 100;\n\n        System.out.printf(\"\\n%s Performance Summary%n\", symbol);\n        System.out.println(\"\u2550\".repeat(40));\n        System.out.printf(\"Total Positions: %d%n\", positions.size());\n        System.out.printf(\"Winning Positions: %d%n\", wins);\n        System.out.printf(\"Win Rate: %.2f%%%n\", winRate);\n        System.out.printf(\"Net Profit: $%.2f%n\", totalNetProfit);\n        System.out.printf(\"Average Per Trade: $%.2f%n\",\n            totalNetProfit / positions.size());\n    }\n}\n\n// Usage\nvar eurusdPositions = SymbolAnalyzer.getBySymbol(account, \"EURUSD\", 30);\nSymbolAnalyzer.printSymbolPerformance(eurusdPositions, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#4-analyze-positions-by-magic-number-ea-tracking","title":"4) Analyze positions by magic number (EA tracking)","text":"<pre><code>public class ExpertAdvisorAnalyzer {\n    /**\n     * Get positions by Expert Advisor (magic number)\n     */\n    public static java.util.List&lt;Mt5TermApiAccountHelper.PositionHistoryInfo&gt; getByMagic(\n            MT5Account account,\n            long magicNumber,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC,\n            from, to, null, null\n        );\n\n        return reply.getData().getHistoryPositionsList().stream()\n            .filter(pos -&gt; pos.getMagic() == magicNumber)\n            .toList();\n    }\n\n    /**\n     * Print EA performance report\n     */\n    public static void printEaReport(\n            java.util.List&lt;Mt5TermApiAccountHelper.PositionHistoryInfo&gt; positions,\n            long magicNumber) {\n\n        if (positions.isEmpty()) {\n            System.out.printf(\"No positions found for EA (magic: %d)%n\", magicNumber);\n            return;\n        }\n\n        double totalProfit = 0;\n        double totalCommission = 0;\n        double totalSwap = 0;\n        int wins = 0;\n        int losses = 0;\n\n        for (var pos : positions) {\n            double netProfit = pos.getProfit() - pos.getCommission() -\n                               pos.getFee() + pos.getSwap();\n            totalProfit += netProfit;\n            totalCommission += pos.getCommission();\n            totalSwap += pos.getSwap();\n\n            if (netProfit &gt; 0) wins++;\n            else if (netProfit &lt; 0) losses++;\n        }\n\n        System.out.printf(\"\\nExpert Advisor Report (Magic: %d)%n\", magicNumber);\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Total Trades: %d%n\", positions.size());\n        System.out.printf(\"Wins: %d | Losses: %d%n\", wins, losses);\n        System.out.printf(\"Win Rate: %.2f%%%n\",\n            (double) wins / positions.size() * 100);\n        System.out.printf(\"Net Profit: $%.2f%n\", totalProfit);\n        System.out.printf(\"Total Commission: $%.2f%n\", totalCommission);\n        System.out.printf(\"Total Swap: $%.2f%n\", totalSwap);\n    }\n}\n\n// Usage\nlong myEaMagic = 123456;\nvar eaPositions = ExpertAdvisorAnalyzer.getByMagic(account, myEaMagic, 30);\nExpertAdvisorAnalyzer.printEaReport(eaPositions, myEaMagic);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#5-export-to-csv","title":"5) Export to CSV","text":"<pre><code>import java.io.*;\nimport java.time.Instant;\n\npublic class CsvExporter {\n    /**\n     * Export closed positions to CSV file\n     */\n    public static void exportToCsv(\n            MT5Account account,\n            Timestamp from,\n            Timestamp to,\n            String filename) throws ApiExceptionMT5, IOException {\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC,\n            from, to, null, null\n        );\n\n        try (PrintWriter writer = new PrintWriter(new FileWriter(filename))) {\n            // CSV header\n            writer.println(\"PositionTicket,Symbol,Type,Volume,\" +\n                \"OpenTime,CloseTime,OpenPrice,ClosePrice,\" +\n                \"StopLoss,TakeProfit,Profit,Commission,Fee,Swap,\" +\n                \"NetProfit,MarketValue,Magic,Comment\");\n\n            // Data rows\n            for (var pos : reply.getData().getHistoryPositionsList()) {\n                Instant openTime = Instant.ofEpochSecond(\n                    pos.getOpenTime().getSeconds()\n                );\n                Instant closeTime = Instant.ofEpochSecond(\n                    pos.getCloseTime().getSeconds()\n                );\n\n                double netProfit = pos.getProfit() - pos.getCommission() -\n                                   pos.getFee() + pos.getSwap();\n\n                writer.printf(\"%d,%s,%s,%.2f,%s,%s,%.5f,%.5f,%.5f,%.5f,\" +\n                    \"%.2f,%.2f,%.2f,%.2f,%.2f,%.2f,%d,%s%n\",\n                    pos.getPositionTicket(),\n                    pos.getSymbol(),\n                    pos.getOrderType(),\n                    pos.getVolume(),\n                    openTime,\n                    closeTime,\n                    pos.getOpenPrice(),\n                    pos.getClosePrice(),\n                    pos.getStopLoss(),\n                    pos.getTakeProfit(),\n                    pos.getProfit(),\n                    pos.getCommission(),\n                    pos.getFee(),\n                    pos.getSwap(),\n                    netProfit,\n                    pos.getMarketValue(),\n                    pos.getMagic(),\n                    pos.getComment().replace(\",\", \";\")  // Escape commas\n                );\n            }\n\n            System.out.printf(\"\u2705 Exported %d positions to %s%n\",\n                reply.getData().getHistoryPositionsList().size(),\n                filename\n            );\n        }\n    }\n}\n\n// Usage\nInstant now = Instant.now();\nInstant monthAgo = now.minus(30, ChronoUnit.DAYS);\n\nTimestamp from = Timestamp.newBuilder()\n    .setSeconds(monthAgo.getEpochSecond())\n    .build();\nTimestamp to = Timestamp.newBuilder()\n    .setSeconds(now.getEpochSecond())\n    .build();\n\nCsvExporter.exportToCsv(account, from, to, \"closed_positions.csv\");\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#6-winloss-streak-analyzer","title":"6) Win/Loss streak analyzer","text":"<pre><code>public class StreakAnalyzer {\n    public record StreakInfo(\n        int currentStreak,\n        int longestWinStreak,\n        int longestLossStreak,\n        boolean isWinStreak\n    ) {}\n\n    /**\n     * Analyze winning and losing streaks\n     */\n    public static StreakInfo analyzeStreaks(\n            MT5Account account,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_ASC,  // Oldest first\n            from, to, null, null\n        );\n\n        var positions = reply.getData().getHistoryPositionsList();\n        if (positions.isEmpty()) {\n            return new StreakInfo(0, 0, 0, true);\n        }\n\n        int currentStreak = 0;\n        int longestWinStreak = 0;\n        int longestLossStreak = 0;\n        boolean lastWasWin = false;\n        boolean isWinStreak = false;\n\n        for (var pos : positions) {\n            double netProfit = pos.getProfit() - pos.getCommission() -\n                               pos.getFee() + pos.getSwap();\n            boolean isWin = netProfit &gt; 0;\n\n            if (currentStreak == 0) {\n                // First trade\n                currentStreak = 1;\n                lastWasWin = isWin;\n                isWinStreak = isWin;\n            } else if (isWin == lastWasWin) {\n                // Streak continues\n                currentStreak++;\n            } else {\n                // Streak breaks - record and reset\n                if (lastWasWin) {\n                    longestWinStreak = Math.max(longestWinStreak, currentStreak);\n                } else {\n                    longestLossStreak = Math.max(longestLossStreak, currentStreak);\n                }\n                currentStreak = 1;\n                lastWasWin = isWin;\n                isWinStreak = isWin;\n            }\n        }\n\n        // Record final streak\n        if (lastWasWin) {\n            longestWinStreak = Math.max(longestWinStreak, currentStreak);\n        } else {\n            longestLossStreak = Math.max(longestLossStreak, currentStreak);\n        }\n\n        return new StreakInfo(\n            currentStreak,\n            longestWinStreak,\n            longestLossStreak,\n            isWinStreak\n        );\n    }\n\n    /**\n     * Print streak analysis\n     */\n    public static void printStreakReport(StreakInfo info) {\n        String currentStreakType = info.isWinStreak() ? \"WIN\" : \"LOSS\";\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551       STREAK ANALYSIS              \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Current Streak: %-2d %-13s \u2551%n\",\n            info.currentStreak(), currentStreakType);\n        System.out.printf(\"\u2551 Longest Win Streak: %-14d \u2551%n\",\n            info.longestWinStreak());\n        System.out.printf(\"\u2551 Longest Loss Streak: %-13d \u2551%n\",\n            info.longestLossStreak());\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar streakInfo = StreakAnalyzer.analyzeStreaks(account, 30);\nStreakAnalyzer.printStreakReport(streakInfo);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#7-calculate-risk-reward-ratio","title":"7) Calculate Risk-Reward ratio","text":"<pre><code>public class RiskRewardAnalyzer {\n    /**\n     * Calculate average risk-reward ratio from closed positions\n     */\n    public static void analyzeRiskReward(\n            MT5Account account,\n            int daysBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(daysBack, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC,\n            from, to, null, null\n        );\n\n        java.util.List&lt;Double&gt; riskRewardRatios = new java.util.ArrayList&lt;&gt;();\n\n        for (var pos : reply.getData().getHistoryPositionsList()) {\n            if (pos.getStopLoss() == 0 || pos.getTakeProfit() == 0) {\n                continue;  // Skip positions without SL/TP\n            }\n\n            boolean isBuy = pos.getOrderType() ==\n                Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_ORDER_TYPE.AH_ORDER_TYPE_BUY;\n\n            double risk, reward;\n            if (isBuy) {\n                risk = Math.abs(pos.getOpenPrice() - pos.getStopLoss());\n                reward = Math.abs(pos.getTakeProfit() - pos.getOpenPrice());\n            } else {\n                risk = Math.abs(pos.getStopLoss() - pos.getOpenPrice());\n                reward = Math.abs(pos.getOpenPrice() - pos.getTakeProfit());\n            }\n\n            if (risk &gt; 0) {\n                riskRewardRatios.add(reward / risk);\n            }\n        }\n\n        if (riskRewardRatios.isEmpty()) {\n            System.out.println(\"No positions with SL/TP found\");\n            return;\n        }\n\n        double avgRiskReward = riskRewardRatios.stream()\n            .mapToDouble(Double::doubleValue)\n            .average()\n            .orElse(0);\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551     RISK-REWARD ANALYSIS           \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Positions with SL/TP: %-12d \u2551%n\",\n            riskRewardRatios.size());\n        System.out.printf(\"\u2551 Avg Risk-Reward Ratio: 1:%-8.2f \u2551%n\",\n            avgRiskReward);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nRiskRewardAnalyzer.analyzeRiskReward(account, 30);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#8-monthly-performance-breakdown","title":"8) Monthly performance breakdown","text":"<pre><code>import java.time.*;\nimport java.time.format.DateTimeFormatter;\nimport java.util.*;\n\npublic class MonthlyPerformance {\n    public record MonthData(\n        YearMonth month,\n        int trades,\n        double netProfit,\n        double winRate\n    ) {}\n\n    /**\n     * Break down performance by month\n     */\n    public static java.util.List&lt;MonthData&gt; getMonthlyBreakdown(\n            MT5Account account,\n            int monthsBack) throws ApiExceptionMT5 {\n\n        Instant now = Instant.now();\n        Instant start = now.minus(monthsBack * 30L, ChronoUnit.DAYS);\n\n        Timestamp from = Timestamp.newBuilder()\n            .setSeconds(start.getEpochSecond())\n            .build();\n        Timestamp to = Timestamp.newBuilder()\n            .setSeconds(now.getEpochSecond())\n            .build();\n\n        var reply = account.positionsHistory(\n            Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_ASC,\n            from, to, null, null\n        );\n\n        // Group by month\n        Map&lt;YearMonth, java.util.List&lt;Mt5TermApiAccountHelper.PositionHistoryInfo&gt;&gt; byMonth =\n            new TreeMap&lt;&gt;();\n\n        for (var pos : reply.getData().getHistoryPositionsList()) {\n            Instant openTime = Instant.ofEpochSecond(\n                pos.getOpenTime().getSeconds()\n            );\n            YearMonth month = YearMonth.from(\n                LocalDate.ofInstant(openTime, ZoneId.systemDefault())\n            );\n\n            byMonth.computeIfAbsent(month, k -&gt; new ArrayList&lt;&gt;()).add(pos);\n        }\n\n        // Calculate monthly stats\n        java.util.List&lt;MonthData&gt; monthlyData = new ArrayList&lt;&gt;();\n\n        for (var entry : byMonth.entrySet()) {\n            var positions = entry.getValue();\n            int trades = positions.size();\n\n            double netProfit = positions.stream()\n                .mapToDouble(p -&gt; p.getProfit() - p.getCommission() -\n                                  p.getFee() + p.getSwap())\n                .sum();\n\n            long wins = positions.stream()\n                .filter(p -&gt; (p.getProfit() - p.getCommission() -\n                              p.getFee() + p.getSwap()) &gt; 0)\n                .count();\n\n            double winRate = (double) wins / trades * 100;\n\n            monthlyData.add(new MonthData(\n                entry.getKey(),\n                trades,\n                netProfit,\n                winRate\n            ));\n        }\n\n        return monthlyData;\n    }\n\n    /**\n     * Print monthly performance report\n     */\n    public static void printMonthlyReport(java.util.List&lt;MonthData&gt; data) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551         MONTHLY PERFORMANCE BREAKDOWN          \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.println(\"\u2551  Month    | Trades | Net Profit | Win Rate   \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"MMM yyyy\");\n\n        for (var month : data) {\n            System.out.printf(\"\u2551 %-9s | %-6d | $%-9.2f | %-8.1f%% \u2551%n\",\n                month.month().format(formatter),\n                month.trades(),\n                month.netProfit(),\n                month.winRate()\n            );\n        }\n\n        double totalProfit = data.stream()\n            .mapToDouble(MonthData::netProfit)\n            .sum();\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 TOTAL                | $%-9.2f           \u2551%n\",\n            totalProfit);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar monthlyData = MonthlyPerformance.getMonthlyBreakdown(account, 12);\nMonthlyPerformance.printMonthlyReport(monthlyData);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\nimport com.google.protobuf.Timestamp;\n\n// Create request\nTimestamp from = Timestamp.newBuilder()\n    .setSeconds(Instant.now().minus(30, ChronoUnit.DAYS).getEpochSecond())\n    .build();\nTimestamp to = Timestamp.newBuilder()\n    .setSeconds(Instant.now().getEpochSecond())\n    .build();\n\nMt5TermApiAccountHelper.PositionsHistoryRequest request =\n    Mt5TermApiAccountHelper.PositionsHistoryRequest.newBuilder()\n        .setSortType(Mt5TermApiAccountHelper.AH_ENUM_POSITIONS_HISTORY_SORT_TYPE.AH_POSITION_OPEN_TIME_DESC)\n        .setPositionOpenTimeFrom(from)\n        .setPositionOpenTimeTo(to)\n        .setPageNumber(0)\n        .setItemsPerPage(0)\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiAccountHelper.PositionsHistoryReply reply = accountHelperClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .positionsHistory(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nList&lt;Mt5TermApiAccountHelper.PositionHistoryInfo&gt; positions =\n    reply.getData().getHistoryPositionsList();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsHistory/#key-metrics-calculations","title":"\ud83d\udcca Key Metrics Calculations","text":"<p>Net Profit (per position): <pre><code>double netProfit = position.getProfit() - position.getCommission()\n                   - position.getFee() + position.getSwap();\n</code></pre></p> <p>Win Rate: <pre><code>double winRate = (double) winningTrades / totalTrades * 100;\n</code></pre></p> <p>Profit Factor: <pre><code>double profitFactor = totalProfit / totalLoss;  // &gt; 1 is profitable\n</code></pre></p> <p>Average Holding Time: <pre><code>long holdingSeconds = position.getCloseTime().getSeconds()\n                      - position.getOpenTime().getSeconds();\ndouble holdingHours = holdingSeconds / 3600.0;\n</code></pre></p> <p>Price Movement (pips): <pre><code>double priceMove = position.getOrderType() == AH_ORDER_TYPE_BUY\n    ? (position.getClosePrice() - position.getOpenPrice())\n    : (position.getOpenPrice() - position.getClosePrice());\n</code></pre></p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/","title":"\u2705 Getting Total Number of Open Positions","text":"<p>Request: retrieve the count of currently open positions on the account. Returns a simple integer count without position details.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.positionsTotal()</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>PositionsTotal</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>PositionsTotal(Empty) \u2192 PositionsTotalReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsGrpc.TradeFunctionsBlockingStub.positionsTotal(Empty)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets the total count of currently open positions on the account.\n     * Returns a simple count of all active positions regardless of symbol.\n     * Use this for quick checks of position count before retrieving detailed position information.\n     *\n     * @return Total number of open positions\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiTradeFunctions.PositionsTotalReply positionsTotal() throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>Empty {}</code> (no parameters)</p> <p>Reply message: <code>PositionsTotalReply { data: PositionsTotalData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#input","title":"\ud83d\udd3d Input","text":"<p>No parameters required. The method automatically uses connection metadata (instance ID).</p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#output-positionstotaldata","title":"\u2b06\ufe0f Output - <code>PositionsTotalData</code>","text":"Field Type Description <code>total</code> <code>int</code> Total number of currently open positions <p>Access the count using <code>reply.getData().getTotal()</code>.</p>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Simple RPC returning the count of open positions.</li> <li>Why you need it. Quick check before fetching full position details, monitoring position count limits.</li> <li>Performance. Very lightweight - just returns a count, no position data.</li> <li>Use case. Often used with <code>openedOrders()</code> to iterate through positions.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Check if there are any open positions before querying details.</li> <li>Monitor position count for risk management.</li> <li>Verify positions were closed successfully.</li> <li>Check against broker position limits.</li> <li>Display position count in UI dashboards.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Returns only open positions, not pending orders (use <code>openedOrders()</code> for both).</li> <li>Count includes positions on all symbols.</li> <li>The method uses automatic reconnection via <code>executeWithReconnect()</code>.</li> <li>If count is 0, calling <code>openedOrders()</code> will return empty list.</li> <li>Does not count historical/closed positions.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#1-basic-position-count","title":"1) Basic position count","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradeFunctions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Get position count\n            Mt5TermApiTradeFunctions.PositionsTotalReply reply = account.positionsTotal();\n            int total = reply.getData().getTotal();\n\n            System.out.printf(\"Open positions: %d%n\", total);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#2-check-if-any-positions-exist","title":"2) Check if any positions exist","text":"<pre><code>// Quick check before querying details\nvar reply = account.positionsTotal();\nint count = reply.getData().getTotal();\n\nif (count == 0) {\n    System.out.println(\"No open positions\");\n} else {\n    System.out.printf(\"Found %d open positions%n\", count);\n    // Now fetch details\n    var ordersReply = account.openedOrders(\n        Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_DESC\n    );\n    // Process positions...\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#3-wait-for-all-positions-to-close","title":"3) Wait for all positions to close","text":"<pre><code>public class PositionWaiter {\n    /**\n     * Wait for all positions to close (with timeout)\n     */\n    public static boolean waitForAllClosed(\n            MT5Account account,\n            int timeoutSeconds) throws InterruptedException {\n\n        System.out.println(\"Waiting for all positions to close...\");\n\n        long startTime = System.currentTimeMillis();\n        long timeoutMillis = timeoutSeconds * 1000L;\n\n        while (System.currentTimeMillis() - startTime &lt; timeoutMillis) {\n            try {\n                var reply = account.positionsTotal();\n                int count = reply.getData().getTotal();\n\n                if (count == 0) {\n                    System.out.println(\"\u2705 All positions closed\");\n                    return true;\n                }\n\n                System.out.printf(\"\u23f3 Waiting... (%d positions still open)%n\", count);\n                Thread.sleep(1000);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"Error: \" + e.getMessage());\n                Thread.sleep(1000);\n            }\n        }\n\n        System.out.println(\"\u26a0\ufe0f Timeout - positions still open\");\n        return false;\n    }\n}\n\n// Usage\nif (PositionWaiter.waitForAllClosed(account, 30)) {\n    System.out.println(\"Safe to disconnect\");\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#4-monitor-position-count","title":"4) Monitor position count","text":"<pre><code>public class PositionMonitor {\n    /**\n     * Monitor position count in real-time\n     */\n    public static void monitor(MT5Account account, int durationSeconds)\n            throws InterruptedException {\n\n        System.out.printf(\"Monitoring positions for %d seconds...%n\", durationSeconds);\n        System.out.println(\"\u2550\".repeat(50));\n\n        long startTime = System.currentTimeMillis();\n        long endTime = startTime + (durationSeconds * 1000L);\n\n        int lastCount = -1;\n\n        while (System.currentTimeMillis() &lt; endTime) {\n            try {\n                var reply = account.positionsTotal();\n                int count = reply.getData().getTotal();\n\n                if (count != lastCount) {\n                    System.out.printf(\"[%s] Position count: %d%n\",\n                        java.time.LocalTime.now(),\n                        count);\n                    lastCount = count;\n                }\n\n                Thread.sleep(1000);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"Error: \" + e.getMessage());\n                Thread.sleep(1000);\n            }\n        }\n\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Final count: %d%n\", lastCount);\n    }\n}\n\n// Usage\nPositionMonitor.monitor(account, 60);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#5-check-position-limit","title":"5) Check position limit","text":"<pre><code>public class PositionLimitChecker {\n    /**\n     * Check if opening new position would exceed limit\n     */\n    public static boolean canOpenPosition(\n            MT5Account account,\n            int maxPositions) throws ApiExceptionMT5 {\n\n        var reply = account.positionsTotal();\n        int current = reply.getData().getTotal();\n\n        boolean allowed = current &lt; maxPositions;\n\n        System.out.printf(\"Positions: %d/%d%n\", current, maxPositions);\n\n        if (!allowed) {\n            System.out.println(\"\u26a0\ufe0f Position limit reached\");\n        } else {\n            System.out.printf(\"\u2705 Can open %d more positions%n\", maxPositions - current);\n        }\n\n        return allowed;\n    }\n}\n\n// Usage - check against broker limit or personal limit\nif (PositionLimitChecker.canOpenPosition(account, 10)) {\n    // Safe to open new position\n    System.out.println(\"Opening new position...\");\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#6-dashboard-status-display","title":"6) Dashboard status display","text":"<pre><code>public class TradingDashboard {\n    public static void displayStatus(MT5Account account) {\n        try {\n            // Get position count\n            var posReply = account.positionsTotal();\n            int positions = posReply.getData().getTotal();\n\n            // Get account summary\n            var accReply = account.accountSummary();\n            var accData = accReply.getData();\n\n            System.out.println(\"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n            System.out.println(\"\u2551       TRADING DASHBOARD               \u2551\");\n            System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n            System.out.printf(\"\u2551 Account:       %-22d \u2551%n\", accData.getAccountLogin());\n            System.out.printf(\"\u2551 Balance:       %-15.2f %s    \u2551%n\",\n                accData.getAccountBalance(),\n                accData.getAccountCurrency());\n            System.out.printf(\"\u2551 Equity:        %-15.2f %s    \u2551%n\",\n                accData.getAccountEquity(),\n                accData.getAccountCurrency());\n            System.out.printf(\"\u2551 Open Positions: %-21d \u2551%n\", positions);\n\n            String status = positions == 0 ? \"No active trades\" :\n                           positions == 1 ? \"1 active trade\" :\n                           positions + \" active trades\";\n            System.out.printf(\"\u2551 Status:        %-22s \u2551%n\", status);\n            System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        }\n    }\n}\n\n// Usage\nTradingDashboard.displayStatus(account);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#7-compare-position-count-over-time","title":"7) Compare position count over time","text":"<pre><code>public class PositionTracker {\n    public record PositionSnapshot(\n        java.time.Instant timestamp,\n        int count\n    ) {}\n\n    private final java.util.List&lt;PositionSnapshot&gt; snapshots = new java.util.ArrayList&lt;&gt;();\n\n    /**\n     * Take a snapshot of current position count\n     */\n    public void takeSnapshot(MT5Account account) throws ApiExceptionMT5 {\n        var reply = account.positionsTotal();\n        int count = reply.getData().getTotal();\n\n        snapshots.add(new PositionSnapshot(\n            java.time.Instant.now(),\n            count\n        ));\n    }\n\n    /**\n     * Print position history\n     */\n    public void printHistory() {\n        System.out.println(\"\\n=== Position Count History ===\");\n        for (var snapshot : snapshots) {\n            System.out.printf(\"[%s] %d positions%n\",\n                snapshot.timestamp(),\n                snapshot.count());\n        }\n\n        if (snapshots.size() &gt;= 2) {\n            int first = snapshots.get(0).count();\n            int last = snapshots.get(snapshots.size() - 1).count();\n            int change = last - first;\n\n            System.out.printf(\"%nChange: %+d positions%n\", change);\n        }\n    }\n}\n\n// Usage\nvar tracker = new PositionTracker();\n\nfor (int i = 0; i &lt; 5; i++) {\n    tracker.takeSnapshot(account);\n    Thread.sleep(5000);\n}\n\ntracker.printHistory();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#8-position-count-alert","title":"8) Position count alert","text":"<pre><code>public class PositionAlertSystem {\n    /**\n     * Alert when position count reaches threshold\n     */\n    public static void monitorWithAlert(\n            MT5Account account,\n            int warningThreshold,\n            int durationSeconds) throws InterruptedException {\n\n        System.out.printf(\"Monitoring positions (alert at %d)...%n\", warningThreshold);\n\n        long startTime = System.currentTimeMillis();\n        long endTime = startTime + (durationSeconds * 1000L);\n\n        boolean alerted = false;\n\n        while (System.currentTimeMillis() &lt; endTime) {\n            try {\n                var reply = account.positionsTotal();\n                int count = reply.getData().getTotal();\n\n                if (count &gt;= warningThreshold &amp;&amp; !alerted) {\n                    System.out.printf(\"\ud83d\udea8 ALERT: %d positions (threshold: %d)%n\",\n                        count, warningThreshold);\n                    alerted = true;\n                } else if (count &lt; warningThreshold &amp;&amp; alerted) {\n                    System.out.printf(\"\u2705 Position count back to normal: %d%n\", count);\n                    alerted = false;\n                }\n\n                Thread.sleep(2000);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.println(\"Error: \" + e.getMessage());\n                Thread.sleep(2000);\n            }\n        }\n    }\n}\n\n// Usage - alert if 5 or more positions open\nPositionAlertSystem.monitorWithAlert(account, 5, 60);\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#9-pre-trade-validation","title":"9) Pre-trade validation","text":"<pre><code>public class TradeValidator {\n    /**\n     * Validate trading conditions before opening position\n     */\n    public static boolean validateBeforeTrade(\n            MT5Account account,\n            int maxPositions,\n            double maxMarginUsage) throws ApiExceptionMT5 {\n\n        System.out.println(\"Validating trading conditions...\");\n\n        // Check position count\n        var posReply = account.positionsTotal();\n        int positions = posReply.getData().getTotal();\n\n        if (positions &gt;= maxPositions) {\n            System.out.printf(\"\u274c Too many positions: %d/%d%n\", positions, maxPositions);\n            return false;\n        }\n        System.out.printf(\"\u2705 Position count OK: %d/%d%n\", positions, maxPositions);\n\n        // Check margin level\n        var marginReply = account.accountInfoDouble(\n            Mt5TermApiAccountInformation.AccountInfoDoublePropertyType.ACCOUNT_MARGIN_LEVEL\n        );\n        double marginLevel = marginReply.getData().getRequestedValue();\n\n        if (marginLevel &lt; maxMarginUsage) {\n            System.out.printf(\"\u274c Insufficient margin: %.2f%% &lt; %.2f%%%n\",\n                marginLevel, maxMarginUsage);\n            return false;\n        }\n        System.out.printf(\"\u2705 Margin level OK: %.2f%%%n\", marginLevel);\n\n        System.out.println(\"\u2705 All checks passed - ready to trade\");\n        return true;\n    }\n}\n\n// Usage\nif (TradeValidator.validateBeforeTrade(account, 5, 200.0)) {\n    // Place order\n    System.out.println(\"Placing order...\");\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/PositionsTotal/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\nimport com.google.protobuf.Empty;\n\n// Create request (empty)\nEmpty request = Empty.newBuilder().build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiTradeFunctions.PositionsTotalReply reply = tradeFunctionsClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .positionsTotal(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nint total = reply.getData().getTotal();\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/","title":"MT5Account \u00b7 Positions &amp; Orders - Overview","text":"<p>Open positions, pending orders, historical deals, and order history. Use this page to choose the right API for querying trading state and history.</p>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>PositionsTotal - count of currently open positions.</li> <li>OpenedOrders - full details of all open positions and pending orders.</li> <li>OpenedOrdersTickets - ticket numbers only for positions and orders (lightweight).</li> <li>OrderHistory - historical orders within a time range.</li> <li>PositionsHistory - historical deals (executed positions) within a time range.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>PositionsTotal \u2192 quick count of open positions (no details).</li> <li>OpenedOrders \u2192 complete picture of all current positions and pending orders (symbol, volume, profit, SL/TP, etc.).</li> <li>OpenedOrdersTickets \u2192 lightweight list of ticket numbers (efficient for tracking changes).</li> <li>OrderHistory \u2192 what orders were placed/canceled in the past (order audit trail).</li> <li>PositionsHistory \u2192 what deals were executed (actual trades with profit/loss).</li> </ul> <p>Rule of thumb: need full current state \u2192 <code>OpenedOrders</code>; need just count \u2192 <code>PositionsTotal</code>; need past trades \u2192 <code>PositionsHistory</code>; need past orders \u2192 <code>OrderHistory</code>.</p>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Number of open positions <code>PositionsTotal</code> Position count (none) Full details of all open positions/orders <code>OpenedOrders</code> Complete position/order data <code>with_history_orders</code> (bool) Just ticket numbers (lightweight) <code>OpenedOrdersTickets</code> Ticket arrays (none) Historical orders (time range) <code>OrderHistory</code> Order history list <code>from_time</code>, <code>to_time</code> Historical deals/trades (time range) <code>PositionsHistory</code> Deal history list <code>from_time</code>, <code>to_time</code>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Positions vs Orders: Position = open trade; Pending Order = not yet executed.</li> <li>OpenedOrders returns BOTH positions and pending orders in one call.</li> <li>OpenedOrdersTickets is lightweight - use for change detection, then query full details if needed.</li> <li>OrderHistory shows order lifecycle (placed, modified, filled, canceled).</li> <li>PositionsHistory shows actual trade executions (deals) with profit/loss.</li> <li>Time range for history queries must be within broker's history limit.</li> <li>Magic numbers can filter orders/positions by Expert Advisor.</li> <li>UTC timestamps for historical queries.</li> </ul>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Count open positions\nvar total = account.positionsTotal();\nint count = total.getData().getTotal();\nSystem.out.printf(\"Open positions: %d%n\", count);\n</code></pre> <pre><code>// Get all open positions and orders\nvar reply = account.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n);\nvar data = reply.getData();\n\nSystem.out.printf(\"Open Positions: %d%n\", data.getPositionInfosCount());\nfor (int i = 0; i &lt; data.getPositionInfosCount(); i++) {\n    var pos = data.getPositionInfos(i);\n    System.out.printf(\"  #%d %s %.2f lots: $%.2f%n\",\n        pos.getTicket(),\n        pos.getSymbol(),\n        pos.getVolume(),\n        pos.getProfit());\n}\n\nSystem.out.printf(\"Pending Orders: %d%n\", data.getOpenedOrdersCount());\nfor (int i = 0; i &lt; data.getOpenedOrdersCount(); i++) {\n    var order = data.getOpenedOrders(i);\n    System.out.printf(\"  #%d %s %s @ %.5f%n\",\n        order.getTicket(),\n        order.getSymbol(),\n        order.getType(),\n        order.getPrice());\n}\n</code></pre> <pre><code>// Get just ticket numbers (lightweight)\nvar reply = account.openedOrdersTickets();\nvar data = reply.getData();\n\nSystem.out.println(\"Position tickets:\");\nfor (long ticket : data.getOpenedPositionTicketsList()) {\n    System.out.printf(\"  #%d%n\", ticket);\n}\n\nSystem.out.println(\"Order tickets:\");\nfor (long ticket : data.getOpenedOrdersTicketsList()) {\n    System.out.printf(\"  #%d%n\", ticket);\n}\n</code></pre> <pre><code>// Get historical deals (last 7 days)\nimport com.google.protobuf.Timestamp;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\nInstant to = Instant.now();\nInstant from = to.minus(7, ChronoUnit.DAYS);\n\nTimestamp fromTs = Timestamp.newBuilder().setSeconds(from.getEpochSecond()).build();\nTimestamp toTs = Timestamp.newBuilder().setSeconds(to.getEpochSecond()).build();\n\nvar reply = account.positionsHistory(fromTs, toTs);\nvar deals = reply.getData().getDealsList();\n\nSystem.out.printf(\"Historical deals (last 7 days): %d%n\", deals.size());\nfor (var deal : deals) {\n    System.out.printf(\"  #%d %s %.2f @ %.5f = $%.2f%n\",\n        deal.getDealTicket(),\n        deal.getSymbol(),\n        deal.getVolume(),\n        deal.getPrice(),\n        deal.getProfit());\n}\n</code></pre> <pre><code>// Get order history (last 30 days)\nInstant to = Instant.now();\nInstant from = to.minus(30, ChronoUnit.DAYS);\n\nTimestamp fromTs = Timestamp.newBuilder().setSeconds(from.getEpochSecond()).build();\nTimestamp toTs = Timestamp.newBuilder().setSeconds(to.getEpochSecond()).build();\n\nvar reply = account.orderHistory(fromTs, toTs);\nvar orders = reply.getData().getOrdersList();\n\nSystem.out.printf(\"Order history (last 30 days): %d%n\", orders.size());\nfor (var order : orders) {\n    System.out.printf(\"  #%d %s %s: %s%n\",\n        order.getTicket(),\n        order.getSymbol(),\n        order.getType(),\n        order.getState());\n}\n</code></pre>"},{"location":"MT5Account/3.%20Positions_and_orders/Positions_And_Orders.Overview/#see-also","title":"See also","text":"<ul> <li>Subscriptions: <code>OnTrade</code> - real-time position/order changes</li> <li>Subscriptions: <code>OnPositionsAndPendingOrdersTickets</code> - real-time ticket tracking</li> <li>Trading actions: <code>OrderSend</code>, <code>OrderClose</code></li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/","title":"\ud83d\udcca Subscribe to Market Depth (DOM / Level II)","text":"<p>Request: subscribe to Market Depth (Depth of Market / Level II) updates for a symbol. Enables access to order book data showing pending buy/sell orders at different price levels.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.marketBookAdd(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>MarketBookAdd</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>MarketBookAdd(MarketBookAddRequest) \u2192 MarketBookAddReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.marketBookAdd(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Subscribes to Market Depth (DOM/Level II) updates for a specified symbol.\n     * After subscription, you can retrieve current order book data showing pending buy and sell orders.\n     * Use this to access liquidity information and see the market depth before placing large orders.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @return Subscription confirmation response\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.MarketBookAddReply marketBookAdd(String symbol) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>MarketBookAddRequest { symbol: string }</code></p> <p>Reply message: <code>MarketBookAddReply { data: MarketBookAddData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\")"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#output-marketbookadddata","title":"\u2b06\ufe0f Output - <code>MarketBookAddData</code>","text":"Field Type Description <code>opened_successfully</code> <code>boolean</code> <code>true</code> if subscription successful, <code>false</code> otherwise <p>Access using <code>reply.getData().getOpenedSuccessfully()</code>.</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to subscribe to Market Depth (order book) updates for a symbol.</li> <li>Why you need it. Access liquidity data, see pending orders at different price levels.</li> <li>Required first. Must subscribe before calling <code>marketBookGet()</code> to retrieve data.</li> <li>Broker support. Not all brokers/symbols support Market Depth - check availability first.</li> <li>Resource usage. Subscription uses resources - call <code>marketBookRelease()</code> when done.</li> <li>Use case. Analyze liquidity, identify support/resistance, optimize large order execution.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Access order book data (pending buy/sell orders at different prices).</li> <li>Analyze market liquidity before placing large orders.</li> <li>Identify support and resistance levels from order concentration.</li> <li>Assess market depth to avoid slippage on big trades.</li> <li>Monitor order flow for trading signals.</li> <li>Build advanced trading algorithms using Level II data.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Broker support. Not all brokers provide Market Depth data - verify support first.</li> <li>Symbol must exist. Use <code>symbolExist()</code> to verify symbol availability.</li> <li>Symbol selection. Symbol doesn't need to be in MarketWatch for DOM subscription.</li> <li>One subscription per symbol. Calling twice for same symbol is safe (idempotent).</li> <li>Resource cleanup. Call <code>marketBookRelease()</code> when done to free resources.</li> <li>After subscription. Use <code>marketBookGet()</code> to retrieve actual order book data.</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> <li>Success flag. Check <code>opened_successfully</code> to verify subscription worked.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#1-basic-subscription","title":"1) Basic subscription","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Subscribe to Market Depth\n            Mt5TermApiMarketInfo.MarketBookAddReply reply =\n                account.marketBookAdd(\"EURUSD\");\n\n            if (reply.getData().getOpenedSuccessfully()) {\n                System.out.println(\"\u2705 Successfully subscribed to EURUSD Market Depth\");\n\n                // Now you can use marketBookGet() to retrieve order book data\n            } else {\n                System.out.println(\"\u274c Failed to subscribe to Market Depth\");\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#2-subscribe-with-validation","title":"2) Subscribe with validation","text":"<pre><code>public class SafeSubscription {\n    /**\n     * Subscribe to Market Depth with validation\n     */\n    public static boolean subscribeWithValidation(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        System.out.printf(\"Attempting to subscribe to %s Market Depth...%n\", symbol);\n\n        // Step 1: Verify symbol exists\n        var existReply = account.symbolExist(symbol);\n        if (!existReply.getData().getExists()) {\n            System.out.printf(\"\u274c Symbol %s does not exist%n\", symbol);\n            return false;\n        }\n        System.out.println(\"\u2705 Symbol exists\");\n\n        // Step 2: Subscribe to Market Depth\n        var reply = account.marketBookAdd(symbol);\n\n        if (reply.getData().getOpenedSuccessfully()) {\n            System.out.printf(\"\u2705 Successfully subscribed to %s Market Depth%n\", symbol);\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed to subscribe - broker may not support DOM for %s%n\", symbol);\n            return false;\n        }\n    }\n}\n\n// Usage\nif (SafeSubscription.subscribeWithValidation(account, \"EURUSD\")) {\n    // Proceed to use marketBookGet()\n}\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#3-subscribe-to-multiple-symbols","title":"3) Subscribe to multiple symbols","text":"<pre><code>import java.util.*;\n\npublic class MultiSymbolSubscription {\n    /**\n     * Subscribe to Market Depth for multiple symbols\n     */\n    public static Map&lt;String, Boolean&gt; subscribeMultiple(\n            MT5Account account,\n            String... symbols) {\n\n        Map&lt;String, Boolean&gt; results = new LinkedHashMap&lt;&gt;();\n\n        System.out.printf(\"Subscribing to Market Depth for %d symbols...%n\", symbols.length);\n        System.out.println(\"\u2550\".repeat(50));\n\n        for (String symbol : symbols) {\n            try {\n                var reply = account.marketBookAdd(symbol);\n                boolean success = reply.getData().getOpenedSuccessfully();\n                results.put(symbol, success);\n\n                String status = success ? \"\u2705 SUCCESS\" : \"\u274c FAILED\";\n                System.out.printf(\"%s: %s%n\", symbol, status);\n\n            } catch (ApiExceptionMT5 e) {\n                results.put(symbol, false);\n                System.out.printf(\"%s: \u274c ERROR - %s%n\", symbol, e.getMessage());\n            }\n        }\n\n        long successCount = results.values().stream()\n            .filter(success -&gt; success)\n            .count();\n\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Subscribed: %d/%d symbols%n\", successCount, symbols.length);\n\n        return results;\n    }\n\n    /**\n     * Print subscription report\n     */\n    public static void printReport(Map&lt;String, Boolean&gt; results) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551   MARKET DEPTH SUBSCRIPTIONS       \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (var entry : results.entrySet()) {\n            String icon = entry.getValue() ? \"\u2705\" : \"\u274c\";\n            String status = entry.getValue() ? \"ACTIVE\" : \"FAILED\";\n            System.out.printf(\"\u2551 %s %-10s %-16s \u2551%n\",\n                icon,\n                entry.getKey(),\n                status\n            );\n        }\n\n        long activeCount = results.values().stream()\n            .filter(success -&gt; success)\n            .count();\n\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Active: %d/%d                       \u2551%n\",\n            activeCount, results.size());\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar results = MultiSymbolSubscription.subscribeMultiple(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"\n);\nMultiSymbolSubscription.printReport(results);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#4-subscribe-with-retry-logic","title":"4) Subscribe with retry logic","text":"<pre><code>public class RetrySubscription {\n    /**\n     * Subscribe with retry attempts\n     */\n    public static boolean subscribeWithRetry(\n            MT5Account account,\n            String symbol,\n            int maxRetries,\n            int retryDelayMs) throws InterruptedException {\n\n        System.out.printf(\"Subscribing to %s (max retries: %d)...%n\", symbol, maxRetries);\n\n        for (int attempt = 1; attempt &lt;= maxRetries; attempt++) {\n            try {\n                var reply = account.marketBookAdd(symbol);\n\n                if (reply.getData().getOpenedSuccessfully()) {\n                    System.out.printf(\"\u2705 Subscribed successfully (attempt %d/%d)%n\",\n                        attempt, maxRetries);\n                    return true;\n                }\n\n                System.out.printf(\"\u26a0\ufe0f Subscription failed (attempt %d/%d)%n\",\n                    attempt, maxRetries);\n\n            } catch (ApiExceptionMT5 e) {\n                System.out.printf(\"\u274c Error on attempt %d/%d: %s%n\",\n                    attempt, maxRetries, e.getMessage());\n            }\n\n            if (attempt &lt; maxRetries) {\n                System.out.printf(\"\u23f3 Waiting %dms before retry...%n\", retryDelayMs);\n                Thread.sleep(retryDelayMs);\n            }\n        }\n\n        System.out.printf(\"\u274c Failed to subscribe after %d attempts%n\", maxRetries);\n        return false;\n    }\n}\n\n// Usage\nif (RetrySubscription.subscribeWithRetry(account, \"EURUSD\", 3, 1000)) {\n    System.out.println(\"Ready to retrieve Market Depth data\");\n}\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#5-subscription-manager-class","title":"5) Subscription manager class","text":"<pre><code>public class MarketDepthManager {\n    private final MT5Account account;\n    private final Set&lt;String&gt; subscribedSymbols = new HashSet&lt;&gt;();\n\n    public MarketDepthManager(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Subscribe to Market Depth\n     */\n    public boolean subscribe(String symbol) throws ApiExceptionMT5 {\n        if (subscribedSymbols.contains(symbol)) {\n            System.out.printf(\"\u26a0\ufe0f Already subscribed to %s%n\", symbol);\n            return true;\n        }\n\n        var reply = account.marketBookAdd(symbol);\n        boolean success = reply.getData().getOpenedSuccessfully();\n\n        if (success) {\n            subscribedSymbols.add(symbol);\n            System.out.printf(\"\u2705 Subscribed to %s Market Depth%n\", symbol);\n        } else {\n            System.out.printf(\"\u274c Failed to subscribe to %s%n\", symbol);\n        }\n\n        return success;\n    }\n\n    /**\n     * Unsubscribe from Market Depth\n     */\n    public boolean unsubscribe(String symbol) throws ApiExceptionMT5 {\n        if (!subscribedSymbols.contains(symbol)) {\n            System.out.printf(\"\u26a0\ufe0f Not subscribed to %s%n\", symbol);\n            return true;\n        }\n\n        var reply = account.marketBookRelease(symbol);\n        boolean success = reply.getData().getReleasedSuccessfully();\n\n        if (success) {\n            subscribedSymbols.remove(symbol);\n            System.out.printf(\"\u2705 Unsubscribed from %s Market Depth%n\", symbol);\n        } else {\n            System.out.printf(\"\u274c Failed to unsubscribe from %s%n\", symbol);\n        }\n\n        return success;\n    }\n\n    /**\n     * Check if subscribed\n     */\n    public boolean isSubscribed(String symbol) {\n        return subscribedSymbols.contains(symbol);\n    }\n\n    /**\n     * Get all subscribed symbols\n     */\n    public Set&lt;String&gt; getSubscribedSymbols() {\n        return new HashSet&lt;&gt;(subscribedSymbols);\n    }\n\n    /**\n     * Unsubscribe from all\n     */\n    public void unsubscribeAll() {\n        System.out.printf(\"Unsubscribing from %d symbols...%n\",\n            subscribedSymbols.size());\n\n        var symbols = new ArrayList&lt;&gt;(subscribedSymbols);\n        for (String symbol : symbols) {\n            try {\n                unsubscribe(symbol);\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"Error unsubscribing from %s: %s%n\",\n                    symbol, e.getMessage());\n            }\n        }\n    }\n\n    /**\n     * Print status\n     */\n    public void printStatus() {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551   MARKET DEPTH SUBSCRIPTIONS       \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Active subscriptions: %-12d \u2551%n\",\n            subscribedSymbols.size());\n\n        if (!subscribedSymbols.isEmpty()) {\n            System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n            for (String symbol : subscribedSymbols) {\n                System.out.printf(\"\u2551 \u2705 %-30s \u2551%n\", symbol);\n            }\n        }\n\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar manager = new MarketDepthManager(account);\n\nmanager.subscribe(\"EURUSD\");\nmanager.subscribe(\"GBPUSD\");\nmanager.subscribe(\"XAUUSD\");\n\nmanager.printStatus();\n\n// Later: cleanup\nmanager.unsubscribeAll();\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#6-check-broker-dom-support","title":"6) Check broker DOM support","text":"<pre><code>public class DomSupportChecker {\n    /**\n     * Check if broker supports Market Depth for symbol\n     */\n    public static boolean checkDomSupport(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        System.out.printf(\"Checking Market Depth support for %s...%n\", symbol);\n\n        // Try to subscribe\n        var addReply = account.marketBookAdd(symbol);\n\n        if (!addReply.getData().getOpenedSuccessfully()) {\n            System.out.printf(\"\u274c %s: Market Depth not supported%n\", symbol);\n            return false;\n        }\n\n        System.out.printf(\"\u2705 %s: Market Depth supported%n\", symbol);\n\n        // Try to get data to confirm\n        try {\n            var getReply = account.marketBookGet(symbol);\n            int bookSize = getReply.getData().getMqlBookInfosList().size();\n            System.out.printf(\"   Order book entries: %d%n\", bookSize);\n\n            // Clean up\n            account.marketBookRelease(symbol);\n\n            return true;\n\n        } catch (ApiExceptionMT5 e) {\n            System.out.printf(\"\u26a0\ufe0f %s: Subscribed but failed to get data: %s%n\",\n                symbol, e.getMessage());\n\n            // Clean up\n            try {\n                account.marketBookRelease(symbol);\n            } catch (ApiExceptionMT5 ignored) {}\n\n            return false;\n        }\n    }\n\n    /**\n     * Test multiple symbols for DOM support\n     */\n    public static Map&lt;String, Boolean&gt; testMultipleSymbols(\n            MT5Account account,\n            String... symbols) {\n\n        Map&lt;String, Boolean&gt; support = new LinkedHashMap&lt;&gt;();\n\n        System.out.println(\"Testing Market Depth support...\");\n        System.out.println(\"\u2550\".repeat(50));\n\n        for (String symbol : symbols) {\n            try {\n                boolean supported = checkDomSupport(account, symbol);\n                support.put(symbol, supported);\n            } catch (ApiExceptionMT5 e) {\n                support.put(symbol, false);\n                System.err.printf(\"\u274c %s: Error - %s%n\", symbol, e.getMessage());\n            }\n            System.out.println();\n        }\n\n        return support;\n    }\n}\n\n// Usage\nvar support = DomSupportChecker.testMultipleSymbols(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"BTCUSD\"\n);\n\nSystem.out.println(\"Symbols with DOM support:\");\nsupport.forEach((symbol, supported) -&gt; {\n    if (supported) {\n        System.out.printf(\"  \u2705 %s%n\", symbol);\n    }\n});\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#7-subscribe-on-demand-before-data-retrieval","title":"7) Subscribe on-demand before data retrieval","text":"<pre><code>public class LazyDomSubscription {\n    private final MT5Account account;\n    private final Set&lt;String&gt; subscribed = new HashSet&lt;&gt;();\n\n    public LazyDomSubscription(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Ensure subscription exists, subscribe if needed\n     */\n    public boolean ensureSubscription(String symbol) throws ApiExceptionMT5 {\n        if (subscribed.contains(symbol)) {\n            return true;  // Already subscribed\n        }\n\n        System.out.printf(\"Auto-subscribing to %s Market Depth...%n\", symbol);\n\n        var reply = account.marketBookAdd(symbol);\n        boolean success = reply.getData().getOpenedSuccessfully();\n\n        if (success) {\n            subscribed.add(symbol);\n            System.out.printf(\"\u2705 Subscribed to %s%n\", symbol);\n        } else {\n            System.out.printf(\"\u274c Failed to subscribe to %s%n\", symbol);\n        }\n\n        return success;\n    }\n\n    /**\n     * Get market book with auto-subscription\n     */\n    public Mt5TermApiMarketInfo.MarketBookGetReply getMarketBook(\n            String symbol) throws ApiExceptionMT5 {\n\n        // Ensure subscription exists\n        if (!ensureSubscription(symbol)) {\n            throw new ApiExceptionMT5(\"Failed to subscribe to Market Depth for \" + symbol);\n        }\n\n        // Retrieve data\n        return account.marketBookGet(symbol);\n    }\n}\n\n// Usage\nvar lazyDom = new LazyDomSubscription(account);\n\n// First call: auto-subscribes, then retrieves data\nvar book1 = lazyDom.getMarketBook(\"EURUSD\");\nSystem.out.printf(\"EURUSD order book size: %d%n\",\n    book1.getData().getMqlBookInfosList().size());\n\n// Second call: already subscribed, just retrieves data\nvar book2 = lazyDom.getMarketBook(\"EURUSD\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#8-batch-subscription-with-progress-tracking","title":"8) Batch subscription with progress tracking","text":"<pre><code>public class BatchSubscription {\n    /**\n     * Subscribe to multiple symbols with progress tracking\n     */\n    public static Map&lt;String, Boolean&gt; batchSubscribe(\n            MT5Account account,\n            String... symbols) {\n\n        Map&lt;String, Boolean&gt; results = new LinkedHashMap&lt;&gt;();\n        int total = symbols.length;\n\n        System.out.printf(\"Batch subscribing to %d symbols...%n\", total);\n        System.out.println();\n\n        for (int i = 0; i &lt; total; i++) {\n            String symbol = symbols[i];\n            int progress = (int) ((i + 1) * 100.0 / total);\n\n            System.out.printf(\"[%3d%%] Subscribing to %s... \", progress, symbol);\n\n            try {\n                var reply = account.marketBookAdd(symbol);\n                boolean success = reply.getData().getOpenedSuccessfully();\n                results.put(symbol, success);\n\n                System.out.println(success ? \"\u2705 OK\" : \"\u274c FAILED\");\n\n            } catch (ApiExceptionMT5 e) {\n                results.put(symbol, false);\n                System.out.printf(\"\u274c ERROR: %s%n\", e.getMessage());\n            }\n\n            // Small delay between subscriptions\n            if (i &lt; total - 1) {\n                try {\n                    Thread.sleep(100);\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                    break;\n                }\n            }\n        }\n\n        long successCount = results.values().stream()\n            .filter(success -&gt; success)\n            .count();\n\n        System.out.println();\n        System.out.printf(\"\u2705 Successfully subscribed: %d/%d symbols%n\",\n            successCount, total);\n\n        return results;\n    }\n}\n\n// Usage\nvar results = BatchSubscription.batchSubscribe(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"AUDUSD\", \"USDCHF\",\n    \"NZDUSD\", \"USDCAD\", \"XAUUSD\", \"XAGUSD\", \"BTCUSD\"\n);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.MarketBookAddRequest request =\n    Mt5TermApiMarketInfo.MarketBookAddRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.MarketBookAddReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .marketBookAdd(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Check success\nboolean success = reply.getData().getOpenedSuccessfully();\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookAdd/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Broker Compatibility: - Not all brokers provide Market Depth data - Some brokers only support DOM for specific instruments (e.g., futures, stocks) - Forex brokers often don't provide true Level II data - Check with your broker about DOM availability</p> <p>Typical Workflow: 1. Call <code>marketBookAdd(symbol)</code> to subscribe 2. Check <code>opened_successfully</code> flag 3. Use <code>marketBookGet(symbol)</code> to retrieve order book data 4. Call <code>marketBookRelease(symbol)</code> when done to free resources</p> <p>Resource Management: - Each subscription uses terminal/server resources - Always call <code>marketBookRelease()</code> when done - Avoid subscribing to unnecessary symbols - Consider using a subscription manager for cleanup</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/","title":"\ud83d\udcd6 Get Market Depth Order Book Data","text":"<p>Request: retrieve current Market Depth (order book) data for a subscribed symbol. Returns pending buy/sell orders at different price levels with volumes.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.marketBookGet(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>MarketBookGet</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>MarketBookGet(MarketBookGetRequest) \u2192 MarketBookGetReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.marketBookGet(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Gets the current Market Depth (order book) data for a subscribed symbol.\n     * Returns pending buy and sell orders with prices and volumes from the order book.\n     * Use this to analyze liquidity, identify support/resistance levels, or optimize order placement.\n     *\n     * @param symbol Symbol name (must be subscribed via marketBookAdd first)\n     * @return Market book data containing arrays of buy and sell orders with prices and volumes\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.MarketBookGetReply marketBookGet(String symbol) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>MarketBookGetRequest { symbol: string }</code></p> <p>Reply message: <code>MarketBookGetReply { data: MarketBookGetData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (must be subscribed first) <p>Important: Symbol must be subscribed via <code>marketBookAdd()</code> before calling this method.</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#output-marketbookgetdata","title":"\u2b06\ufe0f Output - <code>MarketBookGetData</code>","text":"Field Type Description <code>mql_book_infos</code> <code>List&lt;MrpcMqlBookInfo&gt;</code> List of order book entries (buy/sell orders) <p>Access using <code>reply.getData().getMqlBookInfosList()</code>.</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#structure-mrpcmqlbookinfo-order-book-entry","title":"Structure: <code>MrpcMqlBookInfo</code> (Order Book Entry)","text":"<p>Each order book entry contains:</p> Field Type Description <code>type</code> <code>BookType</code> Order type (BUY, SELL, BUY_MARKET, SELL_MARKET) <code>price</code> <code>double</code> Price level <code>volume</code> <code>long</code> Volume in integer units <code>volume_real</code> <code>double</code> Volume in real units (lots) <p>Access using: - <code>entry.getType()</code> - Order type (enum) - <code>entry.getPrice()</code> - Price level - <code>entry.getVolume()</code> - Volume (integer) - <code>entry.getVolumeReal()</code> - Volume in lots (double)</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#enum-booktype","title":"Enum: <code>BookType</code>","text":"Value Number Description <code>BOOK_TYPE_SELL</code> 0 Sell limit order (Ask/Offer side) <code>BOOK_TYPE_BUY</code> 1 Buy limit order (Bid side) <code>BOOK_TYPE_SELL_MARKET</code> 2 Market sell order <code>BOOK_TYPE_BUY_MARKET</code> 3 Market buy order"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to retrieve current order book (Level II) data for a symbol.</li> <li>Why you need it. See pending orders, analyze liquidity, identify price levels with high volume.</li> <li>Prerequisite. Must call <code>marketBookAdd()</code> first to subscribe.</li> <li>Data structure. Returns list of price levels with volumes, separated by buy/sell type.</li> <li>Use case. Liquidity analysis, support/resistance identification, large order optimization.</li> <li>Real-time. Data reflects current state at time of request.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Analyze market liquidity at different price levels.</li> <li>Identify support/resistance zones from order concentration.</li> <li>Assess potential slippage before placing large orders.</li> <li>Monitor order flow changes.</li> <li>Find best prices with sufficient liquidity.</li> <li>Build advanced trading algorithms using Level II data.</li> <li>Visualize market depth for trading dashboards.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Subscription required. Call <code>marketBookAdd()</code> first, otherwise this will fail.</li> <li>Snapshot data. Returns current state, not historical or streaming data.</li> <li>Price sorting. Entries are typically sorted by price (best prices first).</li> <li>Volume fields. Use <code>volume_real</code> (double) for lot-based calculations.</li> <li>Buy vs Sell. Filter by <code>BookType</code> to separate bids from asks.</li> <li>Market orders. Some brokers include executed market orders in the book.</li> <li>Empty book. Empty list doesn't mean error - symbol may have no pending orders.</li> <li>Polling. Call repeatedly for real-time monitoring (consider rate limits).</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#1-basic-order-book-retrieval","title":"1) Basic order book retrieval","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Subscribe to Market Depth\n            account.marketBookAdd(\"EURUSD\");\n\n            // Get order book data\n            Mt5TermApiMarketInfo.MarketBookGetReply reply =\n                account.marketBookGet(\"EURUSD\");\n\n            var bookEntries = reply.getData().getMqlBookInfosList();\n            System.out.printf(\"Order book entries: %d%n%n\", bookEntries.size());\n\n            // Display order book\n            for (var entry : bookEntries) {\n                String typeStr = entry.getType().name();\n                System.out.printf(\"%s | Price: %.5f | Volume: %.2f lots%n\",\n                    typeStr,\n                    entry.getPrice(),\n                    entry.getVolumeReal()\n                );\n            }\n\n            // Cleanup\n            account.marketBookRelease(\"EURUSD\");\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#2-separate-bids-and-asks","title":"2) Separate bids and asks","text":"<pre><code>import java.util.*;\n\npublic class OrderBookAnalyzer {\n    public record OrderLevel(double price, double volume) {}\n\n    public record OrderBook(\n        List&lt;OrderLevel&gt; bids,    // Buy orders\n        List&lt;OrderLevel&gt; asks     // Sell orders\n    ) {}\n\n    /**\n     * Parse order book into bids and asks\n     */\n    public static OrderBook parseOrderBook(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        var reply = account.marketBookGet(symbol);\n        var entries = reply.getData().getMqlBookInfosList();\n\n        List&lt;OrderLevel&gt; bids = new ArrayList&lt;&gt;();\n        List&lt;OrderLevel&gt; asks = new ArrayList&lt;&gt;();\n\n        for (var entry : entries) {\n            OrderLevel level = new OrderLevel(\n                entry.getPrice(),\n                entry.getVolumeReal()\n            );\n\n            switch (entry.getType()) {\n                case BOOK_TYPE_BUY:\n                case BOOK_TYPE_BUY_MARKET:\n                    bids.add(level);\n                    break;\n\n                case BOOK_TYPE_SELL:\n                case BOOK_TYPE_SELL_MARKET:\n                    asks.add(level);\n                    break;\n            }\n        }\n\n        // Sort: bids descending (best bid first), asks ascending (best ask first)\n        bids.sort((a, b) -&gt; Double.compare(b.price(), a.price()));\n        asks.sort((a, b) -&gt; Double.compare(a.price(), b.price()));\n\n        return new OrderBook(bids, asks);\n    }\n\n    /**\n     * Display formatted order book\n     */\n    public static void displayOrderBook(OrderBook book) {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551            ORDER BOOK (DOM)                \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.println(\"\u2551      BIDS (Buy)      \u2502      ASKS (Sell)    \u2551\");\n        System.out.println(\"\u2551  Price    \u2502 Volume   \u2502  Price    \u2502 Volume  \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        int maxRows = Math.max(book.bids().size(), book.asks().size());\n\n        for (int i = 0; i &lt; Math.min(maxRows, 10); i++) {  // Show top 10 levels\n            String bidPrice = i &lt; book.bids().size()\n                ? String.format(\"%.5f\", book.bids().get(i).price())\n                : \"        \";\n            String bidVol = i &lt; book.bids().size()\n                ? String.format(\"%.2f\", book.bids().get(i).volume())\n                : \"     \";\n\n            String askPrice = i &lt; book.asks().size()\n                ? String.format(\"%.5f\", book.asks().get(i).price())\n                : \"        \";\n            String askVol = i &lt; book.asks().size()\n                ? String.format(\"%.2f\", book.asks().get(i).volume())\n                : \"     \";\n\n            System.out.printf(\"\u2551 %s \u2502 %s \u2502 %s \u2502 %s  \u2551%n\",\n                bidPrice, bidVol, askPrice, askVol);\n        }\n\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar book = OrderBookAnalyzer.parseOrderBook(account, \"EURUSD\");\nOrderBookAnalyzer.displayOrderBook(book);\n\nSystem.out.printf(\"\\nBest Bid: %.5f (Volume: %.2f lots)%n\",\n    book.bids().get(0).price(),\n    book.bids().get(0).volume()\n);\nSystem.out.printf(\"Best Ask: %.5f (Volume: %.2f lots)%n\",\n    book.asks().get(0).price(),\n    book.asks().get(0).volume()\n);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#3-calculate-total-liquidity","title":"3) Calculate total liquidity","text":"<pre><code>public class LiquidityCalculator {\n    /**\n     * Calculate total liquidity on each side\n     */\n    public static void analyzeLiquidity(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        var reply = account.marketBookGet(symbol);\n        var entries = reply.getData().getMqlBookInfosList();\n\n        double totalBidVolume = 0;\n        double totalAskVolume = 0;\n        int bidLevels = 0;\n        int askLevels = 0;\n\n        for (var entry : entries) {\n            double volume = entry.getVolumeReal();\n\n            switch (entry.getType()) {\n                case BOOK_TYPE_BUY:\n                case BOOK_TYPE_BUY_MARKET:\n                    totalBidVolume += volume;\n                    bidLevels++;\n                    break;\n\n                case BOOK_TYPE_SELL:\n                case BOOK_TYPE_SELL_MARKET:\n                    totalAskVolume += volume;\n                    askLevels++;\n                    break;\n            }\n        }\n\n        double totalVolume = totalBidVolume + totalAskVolume;\n        double bidRatio = totalVolume &gt; 0 ? (totalBidVolume / totalVolume) * 100 : 0;\n        double askRatio = totalVolume &gt; 0 ? (totalAskVolume / totalVolume) * 100 : 0;\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551       LIQUIDITY ANALYSIS               \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Symbol: %-30s \u2551%n\", symbol);\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Bid Levels: %-26d \u2551%n\", bidLevels);\n        System.out.printf(\"\u2551 Ask Levels: %-26d \u2551%n\", askLevels);\n        System.out.printf(\"\u2551 Total Bid Volume: %-19.2f \u2551%n\", totalBidVolume);\n        System.out.printf(\"\u2551 Total Ask Volume: %-19.2f \u2551%n\", totalAskVolume);\n        System.out.printf(\"\u2551 Bid Ratio: %-25.2f%% \u2551%n\", bidRatio);\n        System.out.printf(\"\u2551 Ask Ratio: %-25.2f%% \u2551%n\", askRatio);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n\n        // Interpret imbalance\n        if (Math.abs(bidRatio - askRatio) &gt; 20) {\n            String side = bidRatio &gt; askRatio ? \"BUY\" : \"SELL\";\n            System.out.printf(\"\\n\u26a0\ufe0f Significant order imbalance: %s pressure detected%n\", side);\n        }\n    }\n}\n\n// Usage\nLiquidityCalculator.analyzeLiquidity(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#4-find-price-levels-with-high-volume","title":"4) Find price levels with high volume","text":"<pre><code>import java.util.*;\n\npublic class HighVolumeLevelFinder {\n    public record VolumeLevel(\n        double price,\n        double volume,\n        String type\n    ) {}\n\n    /**\n     * Find top volume levels in order book\n     */\n    public static List&lt;VolumeLevel&gt; findTopVolumeLevels(\n            MT5Account account,\n            String symbol,\n            int topN) throws ApiExceptionMT5 {\n\n        var reply = account.marketBookGet(symbol);\n        var entries = reply.getData().getMqlBookInfosList();\n\n        List&lt;VolumeLevel&gt; levels = new ArrayList&lt;&gt;();\n\n        for (var entry : entries) {\n            String typeStr = entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY ||\n                             entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY_MARKET\n                ? \"BID\" : \"ASK\";\n\n            levels.add(new VolumeLevel(\n                entry.getPrice(),\n                entry.getVolumeReal(),\n                typeStr\n            ));\n        }\n\n        // Sort by volume descending\n        levels.sort((a, b) -&gt; Double.compare(b.volume(), a.volume()));\n\n        return levels.subList(0, Math.min(topN, levels.size()));\n    }\n\n    /**\n     * Display high volume levels\n     */\n    public static void displayHighVolumeLevels(\n            List&lt;VolumeLevel&gt; levels,\n            String symbol) {\n\n        System.out.printf(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557%n\");\n        System.out.printf(\"\u2551  HIGH VOLUME LEVELS - %-16s \u2551%n\", symbol);\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.println(\"\u2551 Rank \u2502 Type \u2502   Price   \u2502   Volume   \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n\n        for (int i = 0; i &lt; levels.size(); i++) {\n            var level = levels.get(i);\n            System.out.printf(\"\u2551  %2d  \u2502 %-4s \u2502 %9.5f \u2502 %10.2f \u2551%n\",\n                i + 1,\n                level.type(),\n                level.price(),\n                level.volume()\n            );\n        }\n\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar topLevels = HighVolumeLevelFinder.findTopVolumeLevels(account, \"EURUSD\", 10);\nHighVolumeLevelFinder.displayHighVolumeLevels(topLevels, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#5-estimate-slippage-for-large-order","title":"5) Estimate slippage for large order","text":"<pre><code>public class SlippageEstimator {\n    /**\n     * Estimate slippage for a large market order\n     */\n    public static double estimateSlippage(\n            MT5Account account,\n            String symbol,\n            double volumeLots,\n            boolean isBuy) throws ApiExceptionMT5 {\n\n        var reply = account.marketBookGet(symbol);\n        var entries = reply.getData().getMqlBookInfosList();\n\n        // Get relevant side of book\n        var relevantSide = entries.stream()\n            .filter(entry -&gt; {\n                if (isBuy) {\n                    return entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_SELL ||\n                           entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_SELL_MARKET;\n                } else {\n                    return entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY ||\n                           entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY_MARKET;\n                }\n            })\n            .sorted((a, b) -&gt; {\n                // Sort by best price first\n                if (isBuy) {\n                    return Double.compare(a.getPrice(), b.getPrice());  // Ascending for buys\n                } else {\n                    return Double.compare(b.getPrice(), a.getPrice());  // Descending for sells\n                }\n            })\n            .toList();\n\n        if (relevantSide.isEmpty()) {\n            System.out.println(\"\u26a0\ufe0f No liquidity available on \" + (isBuy ? \"ask\" : \"bid\") + \" side\");\n            return Double.MAX_VALUE;\n        }\n\n        double remainingVolume = volumeLots;\n        double totalCost = 0;\n        double bestPrice = relevantSide.get(0).getPrice();\n\n        System.out.printf(\"\\nFilling %s order for %.2f lots:%n\",\n            isBuy ? \"BUY\" : \"SELL\", volumeLots);\n        System.out.println(\"\u2500\".repeat(50));\n\n        for (var entry : relevantSide) {\n            if (remainingVolume &lt;= 0) break;\n\n            double availableVolume = entry.getVolumeReal();\n            double fillVolume = Math.min(remainingVolume, availableVolume);\n\n            totalCost += fillVolume * entry.getPrice();\n            remainingVolume -= fillVolume;\n\n            System.out.printf(\"  Price: %.5f \u2502 Fill: %.2f/%.2f lots%n\",\n                entry.getPrice(),\n                fillVolume,\n                availableVolume\n            );\n        }\n\n        if (remainingVolume &gt; 0) {\n            System.out.printf(\"\\n\u26a0\ufe0f WARNING: Insufficient liquidity! %.2f lots unfilled%n\",\n                remainingVolume);\n            return Double.MAX_VALUE;\n        }\n\n        double avgPrice = totalCost / volumeLots;\n        double slippage = Math.abs(avgPrice - bestPrice);\n\n        System.out.println(\"\u2500\".repeat(50));\n        System.out.printf(\"Best Price: %.5f%n\", bestPrice);\n        System.out.printf(\"Avg Fill Price: %.5f%n\", avgPrice);\n        System.out.printf(\"Estimated Slippage: %.5f (%.1f pips)%n\",\n            slippage, slippage * 10000);\n\n        return slippage;\n    }\n}\n\n// Usage\ndouble slippage = SlippageEstimator.estimateSlippage(\n    account,\n    \"EURUSD\",\n    10.0,  // 10 lots\n    true   // BUY order\n);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#6-monitor-order-book-changes","title":"6) Monitor order book changes","text":"<pre><code>public class OrderBookMonitor {\n    /**\n     * Monitor order book for changes\n     */\n    public static void monitorChanges(\n            MT5Account account,\n            String symbol,\n            int durationSeconds) throws InterruptedException {\n\n        System.out.printf(\"Monitoring %s order book for %d seconds...%n\",\n            symbol, durationSeconds);\n        System.out.println(\"\u2550\".repeat(50));\n\n        var prevBids = new ArrayList&lt;Double&gt;();\n        var prevAsks = new ArrayList&lt;Double&gt;();\n\n        long endTime = System.currentTimeMillis() + (durationSeconds * 1000L);\n\n        while (System.currentTimeMillis() &lt; endTime) {\n            try {\n                var reply = account.marketBookGet(symbol);\n                var entries = reply.getData().getMqlBookInfosList();\n\n                var currentBids = entries.stream()\n                    .filter(e -&gt; e.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY)\n                    .map(e -&gt; e.getPrice())\n                    .sorted((a, b) -&gt; Double.compare(b, a))  // Descending\n                    .toList();\n\n                var currentAsks = entries.stream()\n                    .filter(e -&gt; e.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_SELL)\n                    .map(e -&gt; e.getPrice())\n                    .sorted()  // Ascending\n                    .toList();\n\n                // Check for changes\n                if (!currentBids.equals(prevBids) || !currentAsks.equals(prevAsks)) {\n                    System.out.printf(\"[%s] Order book changed%n\",\n                        java.time.LocalTime.now());\n\n                    if (!currentBids.isEmpty()) {\n                        System.out.printf(\"  Best Bid: %.5f%n\", currentBids.get(0));\n                    }\n                    if (!currentAsks.isEmpty()) {\n                        System.out.printf(\"  Best Ask: %.5f%n\", currentAsks.get(0));\n                    }\n                    if (!currentBids.isEmpty() &amp;&amp; !currentAsks.isEmpty()) {\n                        double spread = currentAsks.get(0) - currentBids.get(0);\n                        System.out.printf(\"  Spread: %.5f (%.1f pips)%n\",\n                            spread, spread * 10000);\n                    }\n                    System.out.println();\n\n                    prevBids = new ArrayList&lt;&gt;(currentBids);\n                    prevAsks = new ArrayList&lt;&gt;(currentAsks);\n                }\n\n                Thread.sleep(500);  // Check every 500ms\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"Error: %s%n\", e.getMessage());\n            }\n        }\n\n        System.out.println(\"Monitoring complete\");\n    }\n}\n\n// Usage\naccount.marketBookAdd(\"EURUSD\");\nOrderBookMonitor.monitorChanges(account, \"EURUSD\", 30);\naccount.marketBookRelease(\"EURUSD\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#7-calculate-bid-ask-spread-from-order-book","title":"7) Calculate bid-ask spread from order book","text":"<pre><code>public class SpreadCalculator {\n    /**\n     * Calculate bid-ask spread from order book\n     */\n    public static void calculateSpread(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        var reply = account.marketBookGet(symbol);\n        var entries = reply.getData().getMqlBookInfosList();\n\n        // Find best bid and ask\n        OptionalDouble bestBid = entries.stream()\n            .filter(e -&gt; e.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY)\n            .mapToDouble(e -&gt; e.getPrice())\n            .max();\n\n        OptionalDouble bestAsk = entries.stream()\n            .filter(e -&gt; e.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_SELL)\n            .mapToDouble(e -&gt; e.getPrice())\n            .min();\n\n        if (bestBid.isEmpty() || bestAsk.isEmpty()) {\n            System.out.println(\"\u26a0\ufe0f Incomplete order book (missing bid or ask)\");\n            return;\n        }\n\n        double bid = bestBid.getAsDouble();\n        double ask = bestAsk.getAsDouble();\n        double spread = ask - bid;\n        double spreadPips = spread * 10000;\n        double spreadPercent = (spread / bid) * 100;\n\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.printf(\"\u2551  SPREAD ANALYSIS - %-19s \u2551%n\", symbol);\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Best Bid: %-28.5f \u2551%n\", bid);\n        System.out.printf(\"\u2551 Best Ask: %-28.5f \u2551%n\", ask);\n        System.out.printf(\"\u2551 Spread: %-30.5f \u2551%n\", spread);\n        System.out.printf(\"\u2551 Spread (pips): %-23.1f \u2551%n\", spreadPips);\n        System.out.printf(\"\u2551 Spread (%%): %-26.4f \u2551%n\", spreadPercent);\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nSpreadCalculator.calculateSpread(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#8-export-order-book-to-json","title":"8) Export order book to JSON","text":"<pre><code>import com.google.gson.*;\nimport java.io.*;\n\npublic class OrderBookExporter {\n    /**\n     * Export order book to JSON file\n     */\n    public static void exportToJson(\n            MT5Account account,\n            String symbol,\n            String filename) throws ApiExceptionMT5, IOException {\n\n        var reply = account.marketBookGet(symbol);\n        var entries = reply.getData().getMqlBookInfosList();\n\n        // Build JSON structure\n        JsonObject root = new JsonObject();\n        root.addProperty(\"symbol\", symbol);\n        root.addProperty(\"timestamp\", java.time.Instant.now().toString());\n\n        JsonArray bids = new JsonArray();\n        JsonArray asks = new JsonArray();\n\n        for (var entry : entries) {\n            JsonObject level = new JsonObject();\n            level.addProperty(\"price\", entry.getPrice());\n            level.addProperty(\"volume\", entry.getVolumeReal());\n\n            boolean isBid = entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY ||\n                           entry.getType() == Mt5TermApiMarketInfo.BookType.BOOK_TYPE_BUY_MARKET;\n\n            if (isBid) {\n                bids.add(level);\n            } else {\n                asks.add(level);\n            }\n        }\n\n        root.add(\"bids\", bids);\n        root.add(\"asks\", asks);\n\n        // Write to file\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        try (FileWriter writer = new FileWriter(filename)) {\n            gson.toJson(root, writer);\n        }\n\n        System.out.printf(\"\u2705 Exported order book to %s%n\", filename);\n        System.out.printf(\"   Bids: %d levels, Asks: %d levels%n\",\n            bids.size(), asks.size());\n    }\n}\n\n// Usage\nOrderBookExporter.exportToJson(account, \"EURUSD\", \"eurusd_orderbook.json\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.MarketBookGetRequest request =\n    Mt5TermApiMarketInfo.MarketBookGetRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.MarketBookGetReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .marketBookGet(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Use data\nList&lt;Mt5TermApiMarketInfo.MrpcMqlBookInfo&gt; bookEntries =\n    reply.getData().getMqlBookInfosList();\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookGet/#understanding-order-book-data","title":"\ud83d\udccc Understanding Order Book Data","text":"<p>Order Types: - BOOK_TYPE_BUY - Pending buy limit orders (bids) - BOOK_TYPE_SELL - Pending sell limit orders (asks/offers) - BOOK_TYPE_BUY_MARKET - Market buy orders (rare in retail) - BOOK_TYPE_SELL_MARKET - Market sell orders (rare in retail)</p> <p>Price Levels: - Bid side: Buyers willing to buy at specific prices (below market) - Ask side: Sellers willing to sell at specific prices (above market) - Best bid: Highest bid price (top of bid side) - Best ask: Lowest ask price (top of ask side)</p> <p>Volume Interpretation: - Higher volume at a level = more liquidity - Large volumes = potential support/resistance - Volume imbalance = potential price movement direction</p> <p>Typical Workflow: 1. Subscribe with <code>marketBookAdd(symbol)</code> 2. Poll with <code>marketBookGet(symbol)</code> for current data 3. Parse and analyze bid/ask sides 4. Make trading decisions based on liquidity 5. Unsubscribe with <code>marketBookRelease(symbol)</code> when done</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/","title":"\ud83d\udd13 Unsubscribe from Market Depth (DOM)","text":"<p>Request: unsubscribe from Market Depth (DOM / Level II) updates for a symbol. Stops receiving order book data and releases associated resources.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.marketBookRelease(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.MarketInfo</code></li> <li>Proto definition: <code>MarketBookRelease</code> (defined in <code>mt5-term-api-market-info.proto</code>)</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.MarketInfo</code></li> <li>Method: <code>MarketBookRelease(MarketBookReleaseRequest) \u2192 MarketBookReleaseReply</code></li> <li>Low\u2011level client (generated): <code>MarketInfoGrpc.MarketInfoBlockingStub.marketBookRelease(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Unsubscribes from Market Depth updates for a specified symbol.\n     * Stops receiving order book data and releases associated resources.\n     * Use this when you no longer need DOM data for a symbol to free up resources.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @return Unsubscription confirmation response\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiMarketInfo.MarketBookReleaseReply marketBookRelease(String symbol) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>MarketBookReleaseRequest { symbol: string }</code></p> <p>Reply message: <code>MarketBookReleaseReply { data: MarketBookReleaseData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\", \"XAUUSD\")"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#output-marketbookreleasedata","title":"\u2b06\ufe0f Output - <code>MarketBookReleaseData</code>","text":"Field Type Description <code>closed_successfully</code> <code>boolean</code> <code>true</code> if unsubscription successful, <code>false</code> otherwise <p>Access using <code>reply.getData().getClosedSuccessfully()</code>.</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to unsubscribe from Market Depth (order book) updates.</li> <li>Why you need it. Free up resources when you no longer need DOM data.</li> <li>Resource cleanup. Always call this when done with Market Depth monitoring.</li> <li>Idempotent. Safe to call even if not subscribed (will return success).</li> <li>Best practice. Use in <code>finally</code> blocks or cleanup code to ensure resource release.</li> <li>Performance. Reduces memory/bandwidth usage by stopping unused subscriptions.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Stop receiving Market Depth updates for a symbol.</li> <li>Free up terminal/server resources after analysis is complete.</li> <li>Clean up subscriptions before disconnecting.</li> <li>Implement proper resource management in trading applications.</li> <li>Release unused subscriptions to avoid resource leaks.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Always cleanup. Call this method when done with DOM data to free resources.</li> <li>Idempotent. Safe to call multiple times or on unsubscribed symbols.</li> <li>Use finally. Place in <code>finally</code> blocks to ensure cleanup even on errors.</li> <li>Success flag. Check <code>closed_successfully</code> to verify release worked.</li> <li>No side effects. Won't affect other subscriptions or market data.</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> <li>Best practice. Always pair <code>marketBookAdd()</code> with <code>marketBookRelease()</code>.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#1-basic-unsubscription","title":"1) Basic unsubscription","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiMarketInfo;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Subscribe to Market Depth\n            account.marketBookAdd(\"EURUSD\");\n\n            // Use Market Depth data...\n            var bookData = account.marketBookGet(\"EURUSD\");\n            System.out.printf(\"Order book entries: %d%n\",\n                bookData.getData().getMqlBookInfosList().size());\n\n            // Unsubscribe when done\n            Mt5TermApiMarketInfo.MarketBookReleaseReply reply =\n                account.marketBookRelease(\"EURUSD\");\n\n            if (reply.getData().getClosedSuccessfully()) {\n                System.out.println(\"\u2705 Successfully unsubscribed from EURUSD Market Depth\");\n            } else {\n                System.out.println(\"\u26a0\ufe0f Failed to unsubscribe\");\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#2-proper-resource-cleanup-with-try-finally","title":"2) Proper resource cleanup with try-finally","text":"<pre><code>public class SafeCleanup {\n    /**\n     * Use Market Depth with guaranteed cleanup\n     */\n    public static void useMarketDepth(\n            MT5Account account,\n            String symbol) {\n\n        boolean subscribed = false;\n\n        try {\n            // Subscribe\n            var addReply = account.marketBookAdd(symbol);\n            subscribed = addReply.getData().getOpenedSuccessfully();\n\n            if (!subscribed) {\n                System.out.printf(\"Failed to subscribe to %s%n\", symbol);\n                return;\n            }\n\n            System.out.printf(\"\u2705 Subscribed to %s Market Depth%n\", symbol);\n\n            // Use Market Depth data\n            var bookReply = account.marketBookGet(symbol);\n            System.out.printf(\"Order book entries: %d%n\",\n                bookReply.getData().getMqlBookInfosList().size());\n\n            // Your analysis logic here...\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.printf(\"Error: %s%n\", e.getMessage());\n\n        } finally {\n            // Always cleanup\n            if (subscribed) {\n                try {\n                    var releaseReply = account.marketBookRelease(symbol);\n                    if (releaseReply.getData().getClosedSuccessfully()) {\n                        System.out.printf(\"\u2705 Cleaned up %s subscription%n\", symbol);\n                    }\n                } catch (ApiExceptionMT5 e) {\n                    System.err.printf(\"Cleanup error: %s%n\", e.getMessage());\n                }\n            }\n        }\n    }\n}\n\n// Usage\nSafeCleanup.useMarketDepth(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#3-unsubscribe-from-multiple-symbols","title":"3) Unsubscribe from multiple symbols","text":"<pre><code>import java.util.*;\n\npublic class MultiSymbolCleanup {\n    /**\n     * Unsubscribe from multiple symbols\n     */\n    public static Map&lt;String, Boolean&gt; releaseMultiple(\n            MT5Account account,\n            String... symbols) {\n\n        Map&lt;String, Boolean&gt; results = new LinkedHashMap&lt;&gt;();\n\n        System.out.printf(\"Unsubscribing from %d symbols...%n\", symbols.length);\n        System.out.println(\"\u2550\".repeat(50));\n\n        for (String symbol : symbols) {\n            try {\n                var reply = account.marketBookRelease(symbol);\n                boolean success = reply.getData().getClosedSuccessfully();\n                results.put(symbol, success);\n\n                String status = success ? \"\u2705 RELEASED\" : \"\u26a0\ufe0f FAILED\";\n                System.out.printf(\"%s: %s%n\", symbol, status);\n\n            } catch (ApiExceptionMT5 e) {\n                results.put(symbol, false);\n                System.out.printf(\"%s: \u274c ERROR - %s%n\", symbol, e.getMessage());\n            }\n        }\n\n        long successCount = results.values().stream()\n            .filter(success -&gt; success)\n            .count();\n\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Released: %d/%d subscriptions%n\", successCount, symbols.length);\n\n        return results;\n    }\n}\n\n// Usage\nMultiSymbolCleanup.releaseMultiple(account,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"\n);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#4-auto-closing-resource-try-with-resources-pattern","title":"4) Auto-closing resource (try-with-resources pattern)","text":"<pre><code>public class MarketDepthResource implements AutoCloseable {\n    private final MT5Account account;\n    private final String symbol;\n    private boolean subscribed = false;\n\n    public MarketDepthResource(MT5Account account, String symbol) throws ApiExceptionMT5 {\n        this.account = account;\n        this.symbol = symbol;\n\n        // Subscribe on creation\n        var reply = account.marketBookAdd(symbol);\n        this.subscribed = reply.getData().getOpenedSuccessfully();\n\n        if (!subscribed) {\n            throw new ApiExceptionMT5(\"Failed to subscribe to Market Depth for \" + symbol);\n        }\n\n        System.out.printf(\"\u2705 Subscribed to %s Market Depth%n\", symbol);\n    }\n\n    /**\n     * Get current order book\n     */\n    public Mt5TermApiMarketInfo.MarketBookGetReply getOrderBook() throws ApiExceptionMT5 {\n        if (!subscribed) {\n            throw new IllegalStateException(\"Not subscribed to Market Depth\");\n        }\n        return account.marketBookGet(symbol);\n    }\n\n    @Override\n    public void close() {\n        if (subscribed) {\n            try {\n                var reply = account.marketBookRelease(symbol);\n                if (reply.getData().getClosedSuccessfully()) {\n                    System.out.printf(\"\u2705 Released %s subscription%n\", symbol);\n                    subscribed = false;\n                }\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"Failed to release %s: %s%n\", symbol, e.getMessage());\n            }\n        }\n    }\n}\n\n// Usage with try-with-resources (automatic cleanup!)\ntry (var marketDepth = new MarketDepthResource(account, \"EURUSD\")) {\n    var book = marketDepth.getOrderBook();\n    System.out.printf(\"Order book size: %d%n\",\n        book.getData().getMqlBookInfosList().size());\n\n    // Analyze order book...\n\n}  // Automatic unsubscription happens here\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#5-subscription-manager-with-tracking","title":"5) Subscription manager with tracking","text":"<pre><code>public class SubscriptionManager {\n    private final MT5Account account;\n    private final Set&lt;String&gt; activeSubscriptions = new HashSet&lt;&gt;();\n\n    public SubscriptionManager(MT5Account account) {\n        this.account = account;\n    }\n\n    /**\n     * Subscribe with tracking\n     */\n    public boolean subscribe(String symbol) throws ApiExceptionMT5 {\n        if (activeSubscriptions.contains(symbol)) {\n            System.out.printf(\"Already subscribed to %s%n\", symbol);\n            return true;\n        }\n\n        var reply = account.marketBookAdd(symbol);\n        boolean success = reply.getData().getOpenedSuccessfully();\n\n        if (success) {\n            activeSubscriptions.add(symbol);\n            System.out.printf(\"\u2705 Subscribed to %s (%d active)%n\",\n                symbol, activeSubscriptions.size());\n        }\n\n        return success;\n    }\n\n    /**\n     * Unsubscribe with tracking\n     */\n    public boolean unsubscribe(String symbol) throws ApiExceptionMT5 {\n        if (!activeSubscriptions.contains(symbol)) {\n            System.out.printf(\"Not subscribed to %s%n\", symbol);\n            return true;\n        }\n\n        var reply = account.marketBookRelease(symbol);\n        boolean success = reply.getData().getClosedSuccessfully();\n\n        if (success) {\n            activeSubscriptions.remove(symbol);\n            System.out.printf(\"\u2705 Unsubscribed from %s (%d remaining)%n\",\n                symbol, activeSubscriptions.size());\n        }\n\n        return success;\n    }\n\n    /**\n     * Cleanup all subscriptions\n     */\n    public void cleanupAll() {\n        if (activeSubscriptions.isEmpty()) {\n            System.out.println(\"No active subscriptions to cleanup\");\n            return;\n        }\n\n        System.out.printf(\"Cleaning up %d subscriptions...%n\",\n            activeSubscriptions.size());\n\n        var symbols = new ArrayList&lt;&gt;(activeSubscriptions);\n        int successCount = 0;\n\n        for (String symbol : symbols) {\n            try {\n                if (unsubscribe(symbol)) {\n                    successCount++;\n                }\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"Failed to release %s: %s%n\",\n                    symbol, e.getMessage());\n            }\n        }\n\n        System.out.printf(\"\u2705 Cleaned up %d/%d subscriptions%n\",\n            successCount, symbols.size());\n    }\n\n    /**\n     * Get active subscription count\n     */\n    public int getActiveCount() {\n        return activeSubscriptions.size();\n    }\n\n    /**\n     * Get active subscriptions\n     */\n    public Set&lt;String&gt; getActiveSubscriptions() {\n        return new HashSet&lt;&gt;(activeSubscriptions);\n    }\n\n    /**\n     * Print status\n     */\n    public void printStatus() {\n        System.out.println(\"\\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\");\n        System.out.println(\"\u2551   MARKET DEPTH SUBSCRIPTIONS           \u2551\");\n        System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n        System.out.printf(\"\u2551 Active: %-30d \u2551%n\", activeSubscriptions.size());\n\n        if (!activeSubscriptions.isEmpty()) {\n            System.out.println(\"\u2560\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563\");\n            for (String symbol : activeSubscriptions) {\n                System.out.printf(\"\u2551 \u2705 %-36s \u2551%n\", symbol);\n            }\n        }\n\n        System.out.println(\"\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\");\n    }\n}\n\n// Usage\nvar manager = new SubscriptionManager(account);\n\n// Subscribe to symbols\nmanager.subscribe(\"EURUSD\");\nmanager.subscribe(\"GBPUSD\");\nmanager.subscribe(\"XAUUSD\");\n\nmanager.printStatus();\n\n// Use market depth data...\n\n// Cleanup when done\nmanager.cleanupAll();\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#6-cleanup-on-application-shutdown","title":"6) Cleanup on application shutdown","text":"<pre><code>public class ShutdownHookCleanup {\n    /**\n     * Register shutdown hook for cleanup\n     */\n    public static void registerCleanupHook(\n            MT5Account account,\n            Set&lt;String&gt; subscribedSymbols) {\n\n        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {\n            System.out.println(\"\\n\ud83d\uded1 Shutdown detected - cleaning up subscriptions...\");\n\n            for (String symbol : subscribedSymbols) {\n                try {\n                    var reply = account.marketBookRelease(symbol);\n                    if (reply.getData().getClosedSuccessfully()) {\n                        System.out.printf(\"\u2705 Released %s%n\", symbol);\n                    }\n                } catch (Exception e) {\n                    System.err.printf(\"Failed to release %s: %s%n\",\n                        symbol, e.getMessage());\n                }\n            }\n\n            System.out.println(\"Cleanup complete\");\n        }));\n    }\n}\n\n// Usage\nSet&lt;String&gt; subscriptions = new HashSet&lt;&gt;();\n\n// Register cleanup hook\nShutdownHookCleanup.registerCleanupHook(account, subscriptions);\n\n// Subscribe to symbols\naccount.marketBookAdd(\"EURUSD\");\nsubscriptions.add(\"EURUSD\");\n\naccount.marketBookAdd(\"GBPUSD\");\nsubscriptions.add(\"GBPUSD\");\n\n// Application runs...\n// On shutdown (Ctrl+C or exit), cleanup happens automatically\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#7-retry-release-with-exponential-backoff","title":"7) Retry release with exponential backoff","text":"<pre><code>public class RetryRelease {\n    /**\n     * Release subscription with retry logic\n     */\n    public static boolean releaseWithRetry(\n            MT5Account account,\n            String symbol,\n            int maxRetries) {\n\n        System.out.printf(\"Releasing %s (max retries: %d)...%n\", symbol, maxRetries);\n\n        int retryDelay = 100;  // Start with 100ms\n\n        for (int attempt = 1; attempt &lt;= maxRetries; attempt++) {\n            try {\n                var reply = account.marketBookRelease(symbol);\n\n                if (reply.getData().getClosedSuccessfully()) {\n                    System.out.printf(\"\u2705 Released successfully (attempt %d/%d)%n\",\n                        attempt, maxRetries);\n                    return true;\n                }\n\n                System.out.printf(\"\u26a0\ufe0f Release failed (attempt %d/%d)%n\",\n                    attempt, maxRetries);\n\n            } catch (ApiExceptionMT5 e) {\n                System.out.printf(\"\u274c Error on attempt %d/%d: %s%n\",\n                    attempt, maxRetries, e.getMessage());\n            }\n\n            if (attempt &lt; maxRetries) {\n                try {\n                    System.out.printf(\"\u23f3 Waiting %dms before retry...%n\", retryDelay);\n                    Thread.sleep(retryDelay);\n                    retryDelay = Math.min(retryDelay * 2, 5000);  // Cap at 5s\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                    return false;\n                }\n            }\n        }\n\n        System.out.printf(\"\u274c Failed to release after %d attempts%n\", maxRetries);\n        return false;\n    }\n}\n\n// Usage\nRetryRelease.releaseWithRetry(account, \"EURUSD\", 3);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#8-batch-cleanup-with-progress","title":"8) Batch cleanup with progress","text":"<pre><code>public class BatchCleanup {\n    /**\n     * Cleanup multiple subscriptions with progress tracking\n     */\n    public static void cleanupWithProgress(\n            MT5Account account,\n            Collection&lt;String&gt; symbols) {\n\n        if (symbols.isEmpty()) {\n            System.out.println(\"No subscriptions to cleanup\");\n            return;\n        }\n\n        int total = symbols.size();\n        int completed = 0;\n        int successful = 0;\n\n        System.out.printf(\"Cleaning up %d subscriptions...%n\", total);\n        System.out.println(\"\u2550\".repeat(50));\n\n        for (String symbol : symbols) {\n            completed++;\n            int progress = (completed * 100) / total;\n\n            System.out.printf(\"[%3d%%] Releasing %s... \", progress, symbol);\n\n            try {\n                var reply = account.marketBookRelease(symbol);\n                if (reply.getData().getClosedSuccessfully()) {\n                    successful++;\n                    System.out.println(\"\u2705 OK\");\n                } else {\n                    System.out.println(\"\u26a0\ufe0f FAILED\");\n                }\n\n            } catch (ApiExceptionMT5 e) {\n                System.out.printf(\"\u274c ERROR: %s%n\", e.getMessage());\n            }\n\n            // Small delay between releases\n            if (completed &lt; total) {\n                try {\n                    Thread.sleep(50);\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                    break;\n                }\n            }\n        }\n\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"\u2705 Successfully released: %d/%d%n\", successful, total);\n\n        if (successful &lt; total) {\n            System.out.printf(\"\u26a0\ufe0f Failed to release: %d%n\", total - successful);\n        }\n    }\n}\n\n// Usage\nSet&lt;String&gt; subscriptions = Set.of(\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"AUDUSD\",\n    \"USDCHF\", \"NZDUSD\", \"USDCAD\"\n);\n\nBatchCleanup.cleanupWithProgress(account, subscriptions);\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Create request\nMt5TermApiMarketInfo.MarketBookReleaseRequest request =\n    Mt5TermApiMarketInfo.MarketBookReleaseRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .build();\n\n// Add metadata headers\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiMarketInfo.MarketBookReleaseReply reply = marketInfoClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .marketBookRelease(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Check success\nboolean success = reply.getData().getClosedSuccessfully();\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/MarketBookRelease/#best-practices","title":"\ud83d\udccc Best Practices","text":"<p>Resource Management: 1. Always call <code>marketBookRelease()</code> after <code>marketBookAdd()</code> 2. Use try-finally blocks to ensure cleanup 3. Consider try-with-resources pattern for automatic cleanup 4. Register shutdown hooks for application-level cleanup</p> <p>Error Handling: - Check <code>closed_successfully</code> flag to verify release - Handle exceptions gracefully (release may fail after disconnect) - Safe to call even if not subscribed (idempotent) - Don't throw exceptions in cleanup code</p> <p>Performance: - Release unused subscriptions promptly - Avoid accumulating subscriptions over time - Track active subscriptions to prevent leaks - Clean up before application exit</p> <p>Typical Lifecycle: <pre><code>// 1. Subscribe\naccount.marketBookAdd(\"EURUSD\");\n\n// 2. Use data (multiple times)\nfor (int i = 0; i &lt; 10; i++) {\n    var book = account.marketBookGet(\"EURUSD\");\n    // Analyze...\n    Thread.sleep(1000);\n}\n\n// 3. Release (in finally)\naccount.marketBookRelease(\"EURUSD\");\n</code></pre></p> <p>Common Patterns: - Scoped usage: Subscribe \u2192 Use \u2192 Release immediately - Long-lived: Subscribe at startup \u2192 Use throughout session \u2192 Release at shutdown - On-demand: Subscribe when needed \u2192 Use briefly \u2192 Release after use</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/","title":"MT5Account \u00b7 Market Depth (DOM) - Overview","text":"<p>Level II quotes, order book data, market depth subscription. Use this page to choose the right API for accessing deep market liquidity information.</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>MarketBookAdd - subscribe to Market Depth (DOM/Level II) for a symbol.</li> <li>MarketBookGet - retrieve current order book data for a subscribed symbol.</li> <li>MarketBookRelease - unsubscribe from Market Depth updates.</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>MarketBookAdd \u2192 enable Level II quotes for a symbol (must do first).</li> <li>MarketBookGet \u2192 pull current order book (bid/ask sides with volumes).</li> <li>MarketBookRelease \u2192 disable Level II when done (free resources).</li> </ul> <p>Rule of thumb: Add \u2192 Get \u2192 Release. Always subscribe before retrieving data, and unsubscribe when finished.</p>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Enable Market Depth for symbol <code>MarketBookAdd</code> Success/failure <code>symbol</code> Get current order book (bid/ask sides) <code>MarketBookGet</code> Order book entries <code>symbol</code> (must be subscribed) Disable Market Depth for symbol <code>MarketBookRelease</code> Success/failure <code>symbol</code>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Must subscribe first: Call <code>MarketBookAdd</code> before <code>MarketBookGet</code>.</li> <li>Not all symbols: Market Depth may not be available for all symbols.</li> <li>Not all brokers: Some brokers don't provide Level II data.</li> <li>Resource intensive: Unsubscribe when done to free resources.</li> <li>Pull mode: Use <code>MarketBookGet</code> to poll; no streaming available.</li> <li>Bid side: Buy orders (demand) at various price levels.</li> <li>Ask side: Sell orders (supply) at various price levels.</li> <li>Volume at level: Shows liquidity available at each price.</li> <li>Order book types: SELL orders (ask side), BUY orders (bid side).</li> </ul>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Subscribe to Market Depth\naccount.marketBookAdd(\"EURUSD\");\n</code></pre> <pre><code>// Get order book data\nvar reply = account.marketBookGet(\"EURUSD\");\nvar data = reply.getData();\n\nSystem.out.printf(\"Market Depth for EURUSD (%d levels):%n\", data.getMqlBookInfosCount());\nfor (int i = 0; i &lt; data.getMqlBookInfosCount(); i++) {\n    var entry = data.getMqlBookInfos(i);\n    String type = entry.getType().getNumber() == 1 ? \"SELL\" : \"BUY \";\n    System.out.printf(\"  %s %.5f: %.2f lots%n\",\n        type, entry.getPrice(), entry.getVolumeReal());\n}\n</code></pre> <pre><code>// Calculate total liquidity by side\nvar reply = account.marketBookGet(\"GBPUSD\");\nvar data = reply.getData();\n\ndouble totalBidVolume = 0;\ndouble totalAskVolume = 0;\n\nfor (int i = 0; i &lt; data.getMqlBookInfosCount(); i++) {\n    var entry = data.getMqlBookInfos(i);\n    // Type: 0 = SELL (ask side), 1 = BUY (bid side)\n    if (entry.getType().getNumber() == 1) {\n        totalBidVolume += entry.getVolumeReal();\n    } else {\n        totalAskVolume += entry.getVolumeReal();\n    }\n}\n\nSystem.out.printf(\"Total bid liquidity: %.2f lots%n\", totalBidVolume);\nSystem.out.printf(\"Total ask liquidity: %.2f lots%n\", totalAskVolume);\nSystem.out.printf(\"Bid/Ask ratio: %.2f%n\", totalBidVolume / totalAskVolume);\n</code></pre> <pre><code>// Unsubscribe when done\naccount.marketBookRelease(\"EURUSD\");\n</code></pre> <pre><code>// Complete workflow: Subscribe \u2192 Get \u2192 Release\ntry {\n    // 1. Subscribe\n    account.marketBookAdd(\"XAUUSD\");\n\n    // 2. Get data\n    var reply = account.marketBookGet(\"XAUUSD\");\n    var data = reply.getData();\n\n    // 3. Process order book\n    System.out.printf(\"Best bid: %.2f (%.2f lots)%n\",\n        data.getBookListBid(0).getPrice(),\n        data.getBookListBid(0).getVolume());\n    System.out.printf(\"Best ask: %.2f (%.2f lots)%n\",\n        data.getBookListAsk(0).getPrice(),\n        data.getBookListAsk(0).getVolume());\n\n} finally {\n    // 4. Always unsubscribe\n    account.marketBookRelease(\"XAUUSD\");\n}\n</code></pre>"},{"location":"MT5Account/4.%20Market_depth_DOM/Market_Depth_DOM.Overview/#see-also","title":"See also","text":"<ul> <li>Symbol info: <code>SymbolInfoTick</code> - Level I quotes (bid/ask only)</li> <li>Subscriptions: <code>OnSymbolTick</code> - real-time price stream</li> <li>Trading: <code>OrderSend</code> - place orders based on liquidity analysis</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/","title":"\ud83d\udcb5 Calculate Required Margin","text":"<p>Request: calculate the margin required to open a position with specified parameters. Returns the amount of funds needed in account currency.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderCalcMargin(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>OrderCalcMargin</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>OrderCalcMargin(OrderCalcMarginRequest) \u2192 OrderCalcMarginReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsGrpc.TradeFunctionsBlockingStub.orderCalcMargin(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Calculates the margin required to open a position with specified parameters.\n     * Returns the amount of funds needed in account currency to maintain the position.\n     * Use this before placing orders to verify sufficient margin and avoid margin call risks.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @param orderType Order type (BUY or SELL)\n     * @param volume Position volume in lots\n     * @param openPrice Expected open price for the position\n     * @return Calculated margin requirement in account currency\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiTradeFunctions.OrderCalcMarginReply orderCalcMargin(\n        String symbol,\n        Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF orderType,\n        double volume,\n        double openPrice) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>orderType</code> <code>ENUM_ORDER_TYPE_TF</code> \u2705 Order type (BUY or SELL) <code>volume</code> <code>double</code> \u2705 Volume in lots <code>openPrice</code> <code>double</code> \u2705 Expected open price"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#enum-enum_order_type_tf","title":"Enum: <code>ENUM_ORDER_TYPE_TF</code>","text":"Value Number Description <code>ORDER_TYPE_TF_BUY</code> 0 Buy order <code>ORDER_TYPE_TF_SELL</code> 1 Sell order"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#output-ordercalcmargindata","title":"\u2b06\ufe0f Output - <code>OrderCalcMarginData</code>","text":"Field Type Description <code>margin</code> <code>double</code> Required margin in account currency <p>Access using <code>reply.getData().getMargin()</code>.</p>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Calculate margin needed to open a position.</li> <li>Why you need it. Verify sufficient funds before trading.</li> <li>Returns. Margin amount in your account currency.</li> <li>Use before trading. Check if you have enough balance.</li> <li>Depends on. Leverage, symbol, volume, and account settings.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Check if you have enough funds to open a position.</li> <li>Calculate maximum position size based on available margin.</li> <li>Implement risk management and position sizing.</li> <li>Avoid margin calls by pre-validating trades.</li> <li>Display margin requirements to users.</li> <li>Build automated trading systems with proper capital management.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#1-basic-margin-calculation","title":"1) Basic margin calculation","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradeFunctions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Calculate margin for 1 lot EURUSD\n            Mt5TermApiTradeFunctions.OrderCalcMarginReply reply =\n                account.orderCalcMargin(\n                    \"EURUSD\",\n                    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n                    1.0,      // 1 lot\n                    1.10000   // Price\n                );\n\n            double margin = reply.getData().getMargin();\n\n            System.out.printf(\"Required margin: $%.2f%n\", margin);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#2-check-if-enough-margin-available","title":"2) Check if enough margin available","text":"<pre><code>public class MarginChecker {\n    /**\n     * Check if there's enough free margin for a trade\n     */\n    public static boolean canOpenPosition(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            double price) throws ApiExceptionMT5 {\n\n        // Get required margin\n        var orderType = isBuy\n            ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n            : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL;\n\n        var marginReply = account.orderCalcMargin(\n            symbol, orderType, lots, price\n        );\n\n        double requiredMargin = marginReply.getData().getMargin();\n\n        // Get account free margin\n        var accountInfo = account.accountInfoDouble(\n            Mt5TermApiAccountInformation.AccountInfoDoublePropertyType.ACCOUNT_MARGIN_FREE\n        );\n\n        double freeMargin = accountInfo.getData().getRequestedValue();\n\n        System.out.printf(\"Trade analysis for %s %.2f lots:%n\", symbol, lots);\n        System.out.printf(\"  Required margin: $%.2f%n\", requiredMargin);\n        System.out.printf(\"  Free margin: $%.2f%n\", freeMargin);\n\n        if (freeMargin &gt;= requiredMargin) {\n            double marginAfter = freeMargin - requiredMargin;\n            System.out.printf(\"  \u2705 Sufficient margin (%.2f remaining)%n\", marginAfter);\n            return true;\n        } else {\n            double shortage = requiredMargin - freeMargin;\n            System.out.printf(\"  \u274c Insufficient margin (short by $%.2f)%n\", shortage);\n            return false;\n        }\n    }\n}\n\n// Usage\nif (MarginChecker.canOpenPosition(account, \"EURUSD\", true, 1.0, 1.10000)) {\n    System.out.println(\"Safe to place order\");\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#3-calculate-maximum-lot-size","title":"3) Calculate maximum lot size","text":"<pre><code>public class MaxLotCalculator {\n    /**\n     * Calculate maximum lot size based on available margin\n     */\n    public static double calculateMaxLots(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double price,\n            double marginUtilization) throws ApiExceptionMT5 {\n\n        // Get free margin\n        var accountInfo = account.accountInfoDouble(\n            Mt5TermApiAccountInformation.AccountInfoDoublePropertyType.ACCOUNT_MARGIN_FREE\n        );\n        double freeMargin = accountInfo.getData().getRequestedValue();\n\n        // Calculate margin for 1 lot\n        var orderType = isBuy\n            ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n            : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL;\n\n        var marginReply = account.orderCalcMargin(\n            symbol, orderType, 1.0, price\n        );\n\n        double marginPer1Lot = marginReply.getData().getMargin();\n\n        // Calculate max lots (with utilization factor)\n        double availableMargin = freeMargin * marginUtilization;\n        double maxLots = availableMargin / marginPer1Lot;\n\n        // Round down to 0.01\n        maxLots = Math.floor(maxLots * 100.0) / 100.0;\n\n        System.out.printf(\"Max Lot Calculation for %s:%n\", symbol);\n        System.out.printf(\"  Free Margin: $%.2f%n\", freeMargin);\n        System.out.printf(\"  Utilization: %.0f%%%n\", marginUtilization * 100);\n        System.out.printf(\"  Margin per 1 lot: $%.2f%n\", marginPer1Lot);\n        System.out.printf(\"  Max Lots: %.2f%n\", maxLots);\n\n        return maxLots;\n    }\n}\n\n// Usage - use 50% of free margin\ndouble maxLots = MaxLotCalculator.calculateMaxLots(\n    account, \"EURUSD\", true, 1.10000, 0.5\n);\nSystem.out.printf(\"Can trade up to %.2f lots%n\", maxLots);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#4-margin-comparison-across-symbols","title":"4) Margin comparison across symbols","text":"<pre><code>import java.util.*;\n\npublic class MarginComparison {\n    public record SymbolMargin(\n        String symbol,\n        double marginPerLot,\n        double maxLots\n    ) {}\n\n    /**\n     * Compare margin requirements for multiple symbols\n     */\n    public static List&lt;SymbolMargin&gt; compareSymbols(\n            MT5Account account,\n            double freeMargin,\n            String... symbols) throws ApiExceptionMT5 {\n\n        List&lt;SymbolMargin&gt; comparison = new ArrayList&lt;&gt;();\n\n        System.out.printf(\"Comparing margin for %.2f free margin:%n\", freeMargin);\n        System.out.println(\"\u2550\".repeat(60));\n\n        for (String symbol : symbols) {\n            try {\n                // Get current price\n                var quote = account.symbolInfoTick(symbol);\n                double price = quote.getData().getAsk();\n\n                // Calculate margin\n                var marginReply = account.orderCalcMargin(\n                    symbol,\n                    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n                    1.0,\n                    price\n                );\n\n                double marginPerLot = marginReply.getData().getMargin();\n                double maxLots = Math.floor((freeMargin / marginPerLot) * 100) / 100;\n\n                comparison.add(new SymbolMargin(symbol, marginPerLot, maxLots));\n\n                System.out.printf(\"%-10s: $%-8.2f/lot \u2192 max %.2f lots%n\",\n                    symbol, marginPerLot, maxLots);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"%-10s: Error - %s%n\", symbol, e.getMessage());\n            }\n        }\n\n        System.out.println(\"\u2550\".repeat(60));\n        return comparison;\n    }\n}\n\n// Usage\nMarginComparison.compareSymbols(account, 10000.0,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#5-portfolio-margin-calculator","title":"5) Portfolio margin calculator","text":"<pre><code>public class PortfolioMarginCalculator {\n    public record TradeRequest(\n        String symbol,\n        boolean isBuy,\n        double lots,\n        double price\n    ) {}\n\n    /**\n     * Calculate total margin for multiple trades\n     */\n    public static double calculatePortfolioMargin(\n            MT5Account account,\n            List&lt;TradeRequest&gt; trades) throws ApiExceptionMT5 {\n\n        double totalMargin = 0;\n\n        System.out.println(\"Portfolio Margin Calculation:\");\n        System.out.println(\"\u2550\".repeat(60));\n\n        for (int i = 0; i &lt; trades.size(); i++) {\n            var trade = trades.get(i);\n\n            var orderType = trade.isBuy()\n                ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n                : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL;\n\n            var reply = account.orderCalcMargin(\n                trade.symbol(),\n                orderType,\n                trade.lots(),\n                trade.price()\n            );\n\n            double margin = reply.getData().getMargin();\n            totalMargin += margin;\n\n            System.out.printf(\"Trade %d: %s %s %.2f lots @ %.5f \u2192 $%.2f%n\",\n                i + 1,\n                trade.isBuy() ? \"BUY\" : \"SELL\",\n                trade.symbol(),\n                trade.lots(),\n                trade.price(),\n                margin\n            );\n        }\n\n        System.out.println(\"\u2550\".repeat(60));\n        System.out.printf(\"Total Required Margin: $%.2f%n\", totalMargin);\n\n        // Check if sufficient\n        var accountInfo = account.accountInfoDouble(\n            Mt5TermApiAccountInformation.AccountInfoDoublePropertyType.ACCOUNT_MARGIN_FREE\n        );\n        double freeMargin = accountInfo.getData().getRequestedValue();\n\n        System.out.printf(\"Available Free Margin: $%.2f%n\", freeMargin);\n\n        if (freeMargin &gt;= totalMargin) {\n            System.out.printf(\"\u2705 Sufficient margin ($%.2f remaining)%n\",\n                freeMargin - totalMargin);\n        } else {\n            System.out.printf(\"\u274c Insufficient margin (short by $%.2f)%n\",\n                totalMargin - freeMargin);\n        }\n\n        return totalMargin;\n    }\n}\n\n// Usage\nList&lt;PortfolioMarginCalculator.TradeRequest&gt; portfolio = List.of(\n    new PortfolioMarginCalculator.TradeRequest(\"EURUSD\", true, 0.5, 1.10000),\n    new PortfolioMarginCalculator.TradeRequest(\"GBPUSD\", false, 0.3, 1.27000),\n    new PortfolioMarginCalculator.TradeRequest(\"USDJPY\", true, 0.4, 148.500)\n);\n\ndouble totalMargin = PortfolioMarginCalculator.calculatePortfolioMargin(\n    account, portfolio\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiTradeFunctions.OrderCalcMarginRequest request =\n    Mt5TermApiTradeFunctions.OrderCalcMarginRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setOrderType(Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY)\n        .setVolume(1.0)\n        .setOpenPrice(1.10000)\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiTradeFunctions.OrderCalcMarginReply reply = tradeFunctionsClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .orderCalcMargin(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Get margin\ndouble margin = reply.getData().getMargin();\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcMargin/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>What Affects Margin: - Account leverage (1:100, 1:500, etc.) - Symbol contract size - Symbol margin requirements - Account currency vs symbol currency - Current market conditions</p> <p>Calculation: - Returns margin as if account has no other positions - Actual margin may differ if you have existing positions - Use for pre-trade validation, not real-time monitoring</p> <p>Best Practices: - Always check before placing orders - Leave safety margin (don't use 100% of free margin) - Consider other open positions - Monitor free margin regularly - Use margin level alerts</p> <p>Typical Margins (1:100 leverage): - EURUSD 1 lot: ~$1,000 - GBPUSD 1 lot: ~$1,270 - XAUUSD 1 lot: ~$2,000+ - Varies by broker and account type</p>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/","title":"\ud83d\udcc8 Calculate Potential Profit/Loss","text":"<p>Request: calculate potential profit or loss for a trading operation. Returns P&amp;L in account currency for opening at one price and closing at another.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderCalcProfit(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>OrderCalcProfit</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>OrderCalcProfit(OrderCalcProfitRequest) \u2192 OrderCalcProfitReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsGrpc.TradeFunctionsBlockingStub.orderCalcProfit(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Calculates the potential profit or loss for a trading operation.\n     * Returns the P&amp;L in account currency for opening at one price and closing at another.\n     * Use this to evaluate potential trades, set profit targets, or calculate risk/reward ratios.\n     *\n     * @param symbol Symbol name (e.g., \"EURUSD\")\n     * @param orderType Order type (BUY or SELL)\n     * @param volume Position volume in lots\n     * @param openPrice Entry price for the position\n     * @param closePrice Exit price for the position\n     * @return Calculated profit/loss in account currency\n     * @throws ApiExceptionMT5 if the call fails or connection is lost\n     */\n    public Mt5TermApiTradeFunctions.OrderCalcProfitReply orderCalcProfit(\n        String symbol,\n        Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF orderType,\n        double volume,\n        double openPrice,\n        double closePrice) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>orderType</code> <code>ENUM_ORDER_TYPE_TF</code> \u2705 Order type (BUY or SELL) <code>volume</code> <code>double</code> \u2705 Volume in lots <code>openPrice</code> <code>double</code> \u2705 Entry price <code>closePrice</code> <code>double</code> \u2705 Exit price"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#output-ordercalcprofitdata","title":"\u2b06\ufe0f Output - <code>OrderCalcProfitData</code>","text":"Field Type Description <code>profit</code> <code>double</code> Calculated profit/loss in account currency <p>Access using <code>reply.getData().getProfit()</code>.</p> <p>Note: Positive value = profit, negative value = loss.</p>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Calculate P&amp;L for a trade scenario.</li> <li>Why you need it. Evaluate trades, calculate risk/reward, set targets.</li> <li>Returns. Profit/loss in your account currency.</li> <li>Positive = profit. Negative = loss.</li> <li>Pre-trade planning. Use before placing orders to assess potential.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate potential profit for a trade idea.</li> <li>Evaluate risk/reward ratios before trading.</li> <li>Set realistic profit targets.</li> <li>Calculate stop loss distances in currency.</li> <li>Compare profitability across different symbols.</li> <li>Build trading calculators and analysis tools.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#1-basic-profit-calculation","title":"1) Basic profit calculation","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradeFunctions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Calculate profit: BUY at 1.10000, SELL at 1.10500\n            Mt5TermApiTradeFunctions.OrderCalcProfitReply reply =\n                account.orderCalcProfit(\n                    \"EURUSD\",\n                    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n                    1.0,      // 1 lot\n                    1.10000,  // Entry\n                    1.10500   // Exit\n                );\n\n            double profit = reply.getData().getProfit();\n\n            System.out.printf(\"Potential profit: $%.2f%n\", profit);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#2-calculate-riskreward-ratio","title":"2) Calculate risk/reward ratio","text":"<pre><code>public class RiskRewardCalculator {\n    /**\n     * Calculate risk/reward ratio for a trade\n     */\n    public static double calculateRiskReward(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            double entryPrice,\n            double stopLoss,\n            double takeProfit) throws ApiExceptionMT5 {\n\n        var orderType = isBuy\n            ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n            : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL;\n\n        // Calculate potential profit (to TP)\n        var profitReply = account.orderCalcProfit(\n            symbol, orderType, lots, entryPrice, takeProfit\n        );\n        double potentialProfit = profitReply.getData().getProfit();\n\n        // Calculate potential loss (to SL)\n        var lossReply = account.orderCalcProfit(\n            symbol, orderType, lots, entryPrice, stopLoss\n        );\n        double potentialLoss = Math.abs(lossReply.getData().getProfit());\n\n        // Calculate ratio\n        double riskRewardRatio = potentialProfit / potentialLoss;\n\n        System.out.printf(\"\\nRisk/Reward Analysis for %s:%n\", symbol);\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Entry: %.5f%n\", entryPrice);\n        System.out.printf(\"Stop Loss: %.5f%n\", stopLoss);\n        System.out.printf(\"Take Profit: %.5f%n\", takeProfit);\n        System.out.println(\"\u2500\".repeat(50));\n        System.out.printf(\"Potential Risk: $%.2f%n\", potentialLoss);\n        System.out.printf(\"Potential Reward: $%.2f%n\", potentialProfit);\n        System.out.printf(\"Risk/Reward Ratio: 1:%.2f%n\", riskRewardRatio);\n        System.out.println(\"\u2550\".repeat(50));\n\n        if (riskRewardRatio &gt;= 2.0) {\n            System.out.println(\"\u2705 Good risk/reward (\u2265 1:2)\");\n        } else if (riskRewardRatio &gt;= 1.5) {\n            System.out.println(\"\u26a0\ufe0f Acceptable risk/reward (\u2265 1:1.5)\");\n        } else {\n            System.out.println(\"\u274c Poor risk/reward (&lt; 1:1.5)\");\n        }\n\n        return riskRewardRatio;\n    }\n}\n\n// Usage\ndouble ratio = RiskRewardCalculator.calculateRiskReward(\n    account,\n    \"EURUSD\",\n    true,       // BUY\n    1.0,        // 1 lot\n    1.10000,    // Entry\n    1.09500,    // SL (-50 pips)\n    1.11000     // TP (+100 pips)\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#3-calculate-profit-at-different-targets","title":"3) Calculate profit at different targets","text":"<pre><code>import java.util.*;\n\npublic class ProfitTargetCalculator {\n    /**\n     * Calculate profit at multiple price targets\n     */\n    public static void calculateTargets(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            double entryPrice,\n            int[] targetPips) throws ApiExceptionMT5 {\n\n        var orderType = isBuy\n            ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n            : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL;\n\n        double pipValue = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n\n        System.out.printf(\"\\nProfit Targets for %s %s %.2f lots @ %.5f:%n\",\n            isBuy ? \"BUY\" : \"SELL\", symbol, lots, entryPrice);\n        System.out.println(\"\u2550\".repeat(60));\n        System.out.printf(\"%-10s | %-12s | %-15s%n\", \"Target\", \"Price\", \"Profit\");\n        System.out.println(\"\u2500\".repeat(60));\n\n        for (int pips : targetPips) {\n            double targetPrice = entryPrice + (pips * pipValue * (isBuy ? 1 : -1));\n\n            var reply = account.orderCalcProfit(\n                symbol, orderType, lots, entryPrice, targetPrice\n            );\n\n            double profit = reply.getData().getProfit();\n\n            System.out.printf(\"%-10d | %.5f | $%-14.2f%n\",\n                pips, targetPrice, profit);\n        }\n\n        System.out.println(\"\u2550\".repeat(60));\n    }\n}\n\n// Usage\nProfitTargetCalculator.calculateTargets(\n    account,\n    \"EURUSD\",\n    true,\n    1.0,\n    1.10000,\n    new int[]{10, 25, 50, 100, 200}  // Pip targets\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#4-calculate-stop-loss-in-currency","title":"4) Calculate Stop Loss in currency","text":"<pre><code>public class StopLossCalculator {\n    /**\n     * Calculate how much you'll lose at different SL levels\n     */\n    public static void calculateStopLosses(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            double entryPrice,\n            double maxRiskAmount) throws ApiExceptionMT5 {\n\n        var orderType = isBuy\n            ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n            : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL;\n\n        double pipValue = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n\n        System.out.printf(\"\\nStop Loss Analysis (Max Risk: $%.2f):%n\", maxRiskAmount);\n        System.out.println(\"\u2550\".repeat(60));\n        System.out.printf(\"%-10s | %-12s | %-10s | Status%n\",\n            \"SL Pips\", \"SL Price\", \"Loss\");\n        System.out.println(\"\u2500\".repeat(60));\n\n        int[] slPips = {20, 30, 40, 50, 75, 100};\n\n        for (int pips : slPips) {\n            double slPrice = entryPrice - (pips * pipValue * (isBuy ? 1 : -1));\n\n            var reply = account.orderCalcProfit(\n                symbol, orderType, lots, entryPrice, slPrice\n            );\n\n            double loss = Math.abs(reply.getData().getProfit());\n            String status = loss &lt;= maxRiskAmount ? \"\u2705 OK\" : \"\u274c Too High\";\n\n            System.out.printf(\"%-10d | %.5f | $%-9.2f | %s%n\",\n                pips, slPrice, loss, status);\n        }\n\n        System.out.println(\"\u2550\".repeat(60));\n    }\n}\n\n// Usage - max risk $500\nStopLossCalculator.calculateStopLosses(\n    account, \"EURUSD\", true, 1.0, 1.10000, 500.0\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#5-compare-profitability-across-symbols","title":"5) Compare profitability across symbols","text":"<pre><code>public class SymbolProfitComparison {\n    public record SymbolProfit(\n        String symbol,\n        double profitPer100Pips\n    ) {}\n\n    /**\n     * Compare profit potential across different symbols\n     */\n    public static List&lt;SymbolProfit&gt; compareSymbols(\n            MT5Account account,\n            double lots,\n            String... symbols) throws ApiExceptionMT5 {\n\n        List&lt;SymbolProfit&gt; comparison = new ArrayList&lt;&gt;();\n\n        System.out.printf(\"Profit Comparison (%.2f lots, 100 pips move):%n\", lots);\n        System.out.println(\"\u2550\".repeat(50));\n\n        for (String symbol : symbols) {\n            try {\n                // Get current price\n                var quote = account.symbolInfoTick(symbol);\n                double entryPrice = quote.getData().getAsk();\n\n                // Calculate 100 pip move\n                double pipValue = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n                double targetPrice = entryPrice + (100 * pipValue);\n\n                // Calculate profit\n                var reply = account.orderCalcProfit(\n                    symbol,\n                    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n                    lots,\n                    entryPrice,\n                    targetPrice\n                );\n\n                double profit = reply.getData().getProfit();\n                comparison.add(new SymbolProfit(symbol, profit));\n\n                System.out.printf(\"%-10s: $%.2f%n\", symbol, profit);\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"%-10s: Error - %s%n\", symbol, e.getMessage());\n            }\n        }\n\n        System.out.println(\"\u2550\".repeat(50));\n\n        // Sort by profit\n        comparison.sort((a, b) -&gt;\n            Double.compare(b.profitPer100Pips(), a.profitPer100Pips())\n        );\n\n        System.out.println(\"\\nMost Profitable:\");\n        comparison.stream().limit(3).forEach(s -&gt;\n            System.out.printf(\"  %s: $%.2f%n\", s.symbol(), s.profitPer100Pips())\n        );\n\n        return comparison;\n    }\n}\n\n// Usage\nSymbolProfitComparison.compareSymbols(account, 1.0,\n    \"EURUSD\", \"GBPUSD\", \"USDJPY\", \"AUDUSD\", \"XAUUSD\"\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiTradeFunctions.OrderCalcProfitRequest request =\n    Mt5TermApiTradeFunctions.OrderCalcProfitRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setOrderType(Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY)\n        .setVolume(1.0)\n        .setOpenPrice(1.10000)\n        .setClosePrice(1.10500)\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiTradeFunctions.OrderCalcProfitReply reply = tradeFunctionsClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .orderCalcProfit(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Get profit\ndouble profit = reply.getData().getProfit();\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCalcProfit/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Profit Calculation: - Positive value = profit - Negative value = loss - In your account currency - Excludes commission, swap, fees</p> <p>For BUY orders: - Profit when close price &gt; open price - Loss when close price &lt; open price</p> <p>For SELL orders: - Profit when close price &lt; open price - Loss when close price &gt; open price</p> <p>Use Cases: - Pre-trade analysis - Risk/reward calculation - Profit target planning - Position sizing decisions - Trading calculator tools</p> <p>Limitations: - Does not include commission - Does not include swap charges - Does not include spreads - Actual profit may differ due to slippage - Use for planning, not exact P&amp;L tracking</p> <p>Best Practices: - Always calculate risk/reward before trading - Aim for minimum 1:2 risk/reward ratio - Factor in additional costs (commission, spread) - Use for trade evaluation and planning - Combine with margin calculations for complete analysis</p>"},{"location":"MT5Account/5.%20Trading/OrderCheck/","title":"\u2705 Validate Trading Request Before Execution","text":"<p>Request: validate a trading request without actually sending it. Returns detailed information about account state after the trade, required margin, and whether sufficient funds are available.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderCheck(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradeFunctions</code></li> <li>Proto definition: <code>OrderCheck</code> (defined in <code>mt5-term-api-trade-functions.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradeFunctions</code></li> <li>Method: <code>OrderCheck(OrderCheckRequest) \u2192 OrderCheckReply</code></li> <li>Low\u2011level client (generated): <code>TradeFunctionsGrpc.TradeFunctionsBlockingStub.orderCheck(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Validates a trading request before sending it to the broker.\n     * Returns estimated balance, equity, margin requirements, and profit after the trade.\n     * Use this to ensure sufficient funds before placing orders.\n     *\n     * @param request Trading request to validate (MrpcMqlTradeRequest)\n     * @return Validation result with margin, balance, equity, profit calculations\n     * @throws ApiExceptionMT5 if the validation fails or connection is lost\n     */\n    public Mt5TermApiTradeFunctions.OrderCheckReply orderCheck(\n        Mt5TermApiTradeFunctions.MrpcMqlTradeRequest request) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#input-mrpcmqltraderequest","title":"\ud83d\udd3d Input - <code>MrpcMqlTradeRequest</code>","text":"Parameter Type Required Description <code>action</code> <code>MRPC_ENUM_TRADE_REQUEST_ACTIONS</code> \u2705 Trade operation type (DEAL, PENDING, etc.) <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Requested volume in lots <code>order_type</code> <code>ENUM_ORDER_TYPE_TF</code> \u2705 Order type (BUY, SELL, BUY_LIMIT, etc.) <code>price</code> <code>double</code> \u274c Order price (required for pending orders) <code>stop_loss</code> <code>double</code> \u274c Stop Loss level <code>take_profit</code> <code>double</code> \u274c Take Profit level <code>deviation</code> <code>uint64</code> \u274c Maximum slippage in points <code>expert_advisor_magic_number</code> <code>uint64</code> \u274c Expert Advisor ID (magic number) <code>stop_limit</code> <code>double</code> \u274c Stop Limit price (for STOP_LIMIT orders) <code>type_filling</code> <code>MRPC_ENUM_ORDER_TYPE_FILLING</code> \u274c Order filling type (FOK, IOC, RETURN, BOC) <code>type_time</code> <code>MRPC_ENUM_ORDER_TYPE_TIME</code> \u274c Order expiration type <code>expiration</code> <code>Timestamp</code> \u274c Expiration time (if type is SPECIFIED) <code>comment</code> <code>String</code> \u274c Order comment <code>order</code> <code>uint64</code> \u274c Order ticket (for modify/remove actions) <code>position</code> <code>uint64</code> \u274c Position ticket (for SLTP action) <code>position_by</code> <code>uint64</code> \u274c Opposite position ticket (for CLOSE_BY action)"},{"location":"MT5Account/5.%20Trading/OrderCheck/#enum-mrpc_enum_trade_request_actions-trade-actions","title":"Enum: <code>MRPC_ENUM_TRADE_REQUEST_ACTIONS</code> (Trade Actions)","text":"Value Number Description <code>TRADE_ACTION_DEAL</code> 0 Market order for immediate execution <code>TRADE_ACTION_PENDING</code> 1 Pending order with specified conditions <code>TRADE_ACTION_SLTP</code> 2 Modify SL/TP of opened position <code>TRADE_ACTION_MODIFY</code> 3 Modify pending order parameters <code>TRADE_ACTION_REMOVE</code> 4 Delete pending order <code>TRADE_ACTION_CLOSE_BY</code> 5 Close position by opposite position"},{"location":"MT5Account/5.%20Trading/OrderCheck/#enum-enum_order_type_tf-order-types","title":"Enum: <code>ENUM_ORDER_TYPE_TF</code> (Order Types)","text":"Value Number Description <code>ORDER_TYPE_TF_BUY</code> 0 Market Buy order <code>ORDER_TYPE_TF_SELL</code> 1 Market Sell order <code>ORDER_TYPE_TF_BUY_LIMIT</code> 2 Buy Limit pending order <code>ORDER_TYPE_TF_SELL_LIMIT</code> 3 Sell Limit pending order <code>ORDER_TYPE_TF_BUY_STOP</code> 4 Buy Stop pending order <code>ORDER_TYPE_TF_SELL_STOP</code> 5 Sell Stop pending order <code>ORDER_TYPE_TF_BUY_STOP_LIMIT</code> 6 Buy Stop Limit order <code>ORDER_TYPE_TF_SELL_STOP_LIMIT</code> 7 Sell Stop Limit order <code>ORDER_TYPE_TF_CLOSE_BY</code> 8 Close by opposite position"},{"location":"MT5Account/5.%20Trading/OrderCheck/#enum-mrpc_enum_order_type_filling-order-filling-types","title":"Enum: <code>MRPC_ENUM_ORDER_TYPE_FILLING</code> (Order Filling Types)","text":"Value Number Description <code>ORDER_FILLING_FOK</code> 0 Fill or Kill - execute full volume or cancel <code>ORDER_FILLING_IOC</code> 1 Immediate or Cancel - execute available, cancel rest <code>ORDER_FILLING_RETURN</code> 2 Return orders - partial fills allowed <code>ORDER_FILLING_BOC</code> 3 Book or Cancel - must be in order book"},{"location":"MT5Account/5.%20Trading/OrderCheck/#enum-mrpc_enum_order_type_time-time-in-force","title":"Enum: <code>MRPC_ENUM_ORDER_TYPE_TIME</code> (Time in Force)","text":"Value Number Description <code>ORDER_TIME_GTC</code> 0 Good Till Cancel <code>ORDER_TIME_DAY</code> 1 Good Till End of Trading Day <code>ORDER_TIME_SPECIFIED</code> 2 Good Till Specified Time <code>ORDER_TIME_SPECIFIED_DAY</code> 3 Good Till End of Specified Day (23:59:59)"},{"location":"MT5Account/5.%20Trading/OrderCheck/#output-mrpcmqltradecheckresult","title":"\u2b06\ufe0f Output - <code>MrpcMqlTradeCheckResult</code>","text":"Field Type Description <code>returned_code</code> <code>uint32</code> Return code (10009 = success, other = error) <code>balance_after_deal</code> <code>double</code> Estimated account balance after trade execution <code>equity_after_deal</code> <code>double</code> Estimated account equity after trade execution <code>profit</code> <code>double</code> Estimated floating profit <code>margin</code> <code>double</code> Required margin for this trade <code>free_margin</code> <code>double</code> Free margin after trade execution <code>margin_level</code> <code>double</code> Margin level after trade (equity/margin * 100) <code>comment</code> <code>String</code> Broker comment (error description if failed) <p>Access using <code>reply.getData().getMqlTradeCheckResult().&lt;field&gt;</code>.</p> <p>Important: - <code>returned_code = 10009</code> means validation passed (sufficient funds) - Other codes indicate errors (insufficient margin, invalid parameters, etc.) - All financial values are estimated and may differ from actual execution</p>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Pre-validate trading requests before sending.</li> <li>Why you need it. Check funds, avoid rejected orders, calculate margin impact.</li> <li>Returns. Estimated balance, equity, margin, profit after trade.</li> <li>No actual trade. Validation only - no order is placed.</li> <li>Risk management. Essential for position sizing and fund verification.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Verify sufficient funds before placing orders.</li> <li>Calculate required margin for a trade.</li> <li>Estimate balance/equity after trade execution.</li> <li>Validate trading parameters without risking actual trade.</li> <li>Build position sizing calculators.</li> <li>Check if your account can handle a specific trade size.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Trading/OrderCheck/#1-basic-validation-check-if-order-is-possible","title":"1) Basic validation - check if order is possible","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradeFunctions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Build trade request\n            var tradeRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n                .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n                .setSymbol(\"EURUSD\")\n                .setVolume(1.0)  // 1 lot\n                .setOrderType(Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY)\n                .setDeviation(10)\n                .build();\n\n            // Validate order\n            var reply = account.orderCheck(tradeRequest);\n\n            var result = reply.getData().getMqlTradeCheckResult();\n\n            System.out.printf(\"Validation Result:%n\");\n            System.out.printf(\"Return Code: %d%n\", result.getReturnedCode());\n            System.out.printf(\"Required Margin: $%.2f%n\", result.getMargin());\n            System.out.printf(\"Free Margin After: $%.2f%n\", result.getFreeMargin());\n            System.out.printf(\"Margin Level After: %.2f%%%n\", result.getMarginLevel());\n\n            if (result.getReturnedCode() == 10009) {\n                System.out.println(\"\u2705 Order can be placed!\");\n            } else {\n                System.out.println(\"\u274c Order rejected: \" + result.getComment());\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#2-validate-order-with-sltp","title":"2) Validate order with SL/TP","text":"<pre><code>import com.google.protobuf.Timestamp;\n\npublic class ValidateOrderWithStops {\n    /**\n     * Check if order with Stop Loss and Take Profit is valid\n     */\n    public static boolean validateOrder(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            double stopLoss,\n            double takeProfit) throws ApiExceptionMT5 {\n\n        // Get current price\n        var quote = account.symbolInfoTick(symbol);\n        double entryPrice = isBuy ? quote.getData().getAsk() : quote.getData().getBid();\n\n        // Build trade request with SL/TP\n        var tradeRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n            .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n            .setSymbol(symbol)\n            .setVolume(lots)\n            .setOrderType(isBuy\n                ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n                : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL)\n            .setPrice(entryPrice)\n            .setStopLoss(stopLoss)\n            .setTakeProfit(takeProfit)\n            .setDeviation(10)\n            .build();\n\n        // Validate\n        var reply = account.orderCheck(tradeRequest);\n        var result = reply.getData().getMqlTradeCheckResult();\n\n        System.out.printf(\"\\n%s %s %.2f lots:%n\",\n            isBuy ? \"BUY\" : \"SELL\", symbol, lots);\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Entry: %.5f%n\", entryPrice);\n        System.out.printf(\"Stop Loss: %.5f%n\", stopLoss);\n        System.out.printf(\"Take Profit: %.5f%n\", takeProfit);\n        System.out.println(\"\u2500\".repeat(50));\n        System.out.printf(\"Required Margin: $%.2f%n\", result.getMargin());\n        System.out.printf(\"Free Margin After: $%.2f%n\", result.getFreeMargin());\n        System.out.printf(\"Balance After: $%.2f%n\", result.getBalanceAfterDeal());\n        System.out.printf(\"Equity After: $%.2f%n\", result.getEquityAfterDeal());\n        System.out.printf(\"Margin Level: %.2f%%%n\", result.getMarginLevel());\n        System.out.println(\"\u2550\".repeat(50));\n\n        boolean isValid = result.getReturnedCode() == 10009;\n\n        if (isValid) {\n            System.out.println(\"\u2705 Order valid - sufficient funds\");\n        } else {\n            System.out.println(\"\u274c Order invalid: \" + result.getComment());\n        }\n\n        return isValid;\n    }\n}\n\n// Usage\nboolean canTrade = ValidateOrderWithStops.validateOrder(\n    account, \"EURUSD\", true, 1.0, 1.09500, 1.11000\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#3-calculate-maximum-lot-size","title":"3) Calculate maximum lot size","text":"<pre><code>public class MaxLotSizeCalculator {\n    /**\n     * Calculate maximum lot size based on available margin\n     */\n    public static double calculateMaxLots(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double marginUsagePercent) throws ApiExceptionMT5 {\n\n        // Get account info\n        var accInfo = account.accountInformation();\n        double freeMargin = accInfo.getData().getMargin();\n        double maxMargin = freeMargin * (marginUsagePercent / 100.0);\n\n        System.out.printf(\"\\nCalculating max lot size for %s:%n\", symbol);\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Free Margin: $%.2f%n\", freeMargin);\n        System.out.printf(\"Max Usage: %.0f%% = $%.2f%n\",\n            marginUsagePercent, maxMargin);\n        System.out.println(\"\u2500\".repeat(50));\n\n        // Binary search for max lot size\n        double minLots = 0.01;\n        double maxLots = 100.0;\n        double bestLots = 0.0;\n\n        while (maxLots - minLots &gt; 0.01) {\n            double testLots = (minLots + maxLots) / 2.0;\n\n            // Build request\n            var tradeRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n                .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n                .setSymbol(symbol)\n                .setVolume(testLots)\n                .setOrderType(isBuy\n                    ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n                    : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL)\n                .build();\n\n            // Check if valid\n            var reply = account.orderCheck(tradeRequest);\n            var result = reply.getData().getMqlTradeCheckResult();\n\n            if (result.getReturnedCode() == 10009 &amp;&amp;\n                result.getMargin() &lt;= maxMargin) {\n                bestLots = testLots;\n                minLots = testLots;\n            } else {\n                maxLots = testLots;\n            }\n        }\n\n        System.out.printf(\"Maximum Lot Size: %.2f lots%n\", bestLots);\n\n        // Get margin for best lot size\n        var finalRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n            .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n            .setSymbol(symbol)\n            .setVolume(bestLots)\n            .setOrderType(isBuy\n                ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n                : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL)\n            .build();\n\n        var finalReply = account.orderCheck(finalRequest);\n        var finalResult = finalReply.getData().getMqlTradeCheckResult();\n\n        System.out.printf(\"Required Margin: $%.2f%n\", finalResult.getMargin());\n        System.out.printf(\"Free Margin After: $%.2f%n\", finalResult.getFreeMargin());\n        System.out.printf(\"Margin Level After: %.2f%%%n\", finalResult.getMarginLevel());\n        System.out.println(\"\u2550\".repeat(50));\n\n        return bestLots;\n    }\n}\n\n// Usage - use 80% of available margin\ndouble maxLots = MaxLotSizeCalculator.calculateMaxLots(\n    account, \"EURUSD\", true, 80.0\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#4-validate-pending-order","title":"4) Validate pending order","text":"<pre><code>import com.google.protobuf.Timestamp;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\npublic class ValidatePendingOrder {\n    /**\n     * Validate pending order before placing\n     */\n    public static boolean validateBuyLimit(\n            MT5Account account,\n            String symbol,\n            double lots,\n            double limitPrice,\n            double stopLoss,\n            double takeProfit) throws ApiExceptionMT5 {\n\n        // Set expiration to 24 hours\n        Instant expiration = Instant.now().plus(24, ChronoUnit.HOURS);\n        Timestamp expirationTs = Timestamp.newBuilder()\n            .setSeconds(expiration.getEpochSecond())\n            .build();\n\n        // Build pending order request\n        var tradeRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n            .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_PENDING)\n            .setSymbol(symbol)\n            .setVolume(lots)\n            .setOrderType(Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY_LIMIT)\n            .setPrice(limitPrice)\n            .setStopLoss(stopLoss)\n            .setTakeProfit(takeProfit)\n            .setTypeTime(Mt5TermApiTradeFunctions.MRPC_ENUM_ORDER_TYPE_TIME.ORDER_TIME_SPECIFIED)\n            .setExpiration(expirationTs)\n            .build();\n\n        // Validate\n        var reply = account.orderCheck(tradeRequest);\n        var result = reply.getData().getMqlTradeCheckResult();\n\n        System.out.printf(\"\\nBUY LIMIT Validation:%n\");\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Symbol: %s%n\", symbol);\n        System.out.printf(\"Volume: %.2f lots%n\", lots);\n        System.out.printf(\"Limit Price: %.5f%n\", limitPrice);\n        System.out.printf(\"Stop Loss: %.5f%n\", stopLoss);\n        System.out.printf(\"Take Profit: %.5f%n\", takeProfit);\n        System.out.println(\"\u2500\".repeat(50));\n        System.out.printf(\"Required Margin: $%.2f%n\", result.getMargin());\n        System.out.printf(\"Free Margin After: $%.2f%n\", result.getFreeMargin());\n        System.out.printf(\"Margin Level: %.2f%%%n\", result.getMarginLevel());\n        System.out.println(\"\u2550\".repeat(50));\n\n        boolean isValid = result.getReturnedCode() == 10009;\n\n        if (isValid) {\n            System.out.println(\"\u2705 Pending order valid\");\n        } else {\n            System.out.println(\"\u274c Pending order invalid: \" + result.getComment());\n        }\n\n        return isValid;\n    }\n}\n\n// Usage\nboolean canPlace = ValidatePendingOrder.validateBuyLimit(\n    account, \"EURUSD\", 1.0, 1.09500, 1.09000, 1.10500\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#5-batch-validation-for-multiple-symbols","title":"5) Batch validation for multiple symbols","text":"<pre><code>import java.util.*;\n\npublic class BatchOrderValidator {\n    public record ValidationResult(\n        String symbol,\n        double lots,\n        boolean isValid,\n        double requiredMargin,\n        double marginLevel,\n        String comment\n    ) {}\n\n    /**\n     * Validate multiple trading ideas at once\n     */\n    public static List&lt;ValidationResult&gt; validateMultipleOrders(\n            MT5Account account,\n            Map&lt;String, Double&gt; symbolsAndLots,\n            boolean isBuy) throws ApiExceptionMT5 {\n\n        List&lt;ValidationResult&gt; results = new ArrayList&lt;&gt;();\n\n        System.out.println(\"\\nBatch Order Validation:\");\n        System.out.println(\"\u2550\".repeat(80));\n        System.out.printf(\"%-12s | %-8s | %-15s | %-12s | Status%n\",\n            \"Symbol\", \"Lots\", \"Margin Req\", \"Margin Lvl\");\n        System.out.println(\"\u2500\".repeat(80));\n\n        for (Map.Entry&lt;String, Double&gt; entry : symbolsAndLots.entrySet()) {\n            String symbol = entry.getKey();\n            double lots = entry.getValue();\n\n            try {\n                // Build request\n                var tradeRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n                    .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n                    .setSymbol(symbol)\n                    .setVolume(lots)\n                    .setOrderType(isBuy\n                        ? Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY\n                        : Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_SELL)\n                    .build();\n\n                // Validate\n                var reply = account.orderCheck(tradeRequest);\n                var result = reply.getData().getMqlTradeCheckResult();\n\n                boolean isValid = result.getReturnedCode() == 10009;\n                String status = isValid ? \"\u2705 Valid\" : \"\u274c Invalid\";\n\n                System.out.printf(\"%-12s | %.2f | $%-14.2f | %9.2f%% | %s%n\",\n                    symbol, lots, result.getMargin(), result.getMarginLevel(), status);\n\n                results.add(new ValidationResult(\n                    symbol,\n                    lots,\n                    isValid,\n                    result.getMargin(),\n                    result.getMarginLevel(),\n                    result.getComment()\n                ));\n\n            } catch (ApiExceptionMT5 e) {\n                System.out.printf(\"%-12s | %.2f | Error: %s%n\",\n                    symbol, lots, e.getMessage());\n\n                results.add(new ValidationResult(\n                    symbol, lots, false, 0.0, 0.0, e.getMessage()\n                ));\n            }\n        }\n\n        System.out.println(\"\u2550\".repeat(80));\n\n        // Summary\n        long validCount = results.stream().filter(ValidationResult::isValid).count();\n        double totalMargin = results.stream()\n            .filter(ValidationResult::isValid)\n            .mapToDouble(ValidationResult::requiredMargin)\n            .sum();\n\n        System.out.printf(\"\\nSummary: %d/%d orders valid%n\", validCount, results.size());\n        System.out.printf(\"Total Required Margin: $%.2f%n\", totalMargin);\n\n        return results;\n    }\n}\n\n// Usage\nMap&lt;String, Double&gt; tradingIdeas = Map.of(\n    \"EURUSD\", 1.0,\n    \"GBPUSD\", 0.5,\n    \"USDJPY\", 1.5,\n    \"AUDUSD\", 0.75,\n    \"XAUUSD\", 0.1\n);\n\nList&lt;ValidationResult&gt; results = BatchOrderValidator.validateMultipleOrders(\n    account, tradingIdeas, true\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Build trade request\nMt5TermApiTradeFunctions.MrpcMqlTradeRequest tradeRequest =\n    Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n        .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n        .setSymbol(\"EURUSD\")\n        .setVolume(1.0)\n        .setOrderType(Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY)\n        .setDeviation(10)\n        .build();\n\n// Build check request\nMt5TermApiTradeFunctions.OrderCheckRequest request =\n    Mt5TermApiTradeFunctions.OrderCheckRequest.newBuilder()\n        .setMqlTradeRequest(tradeRequest)\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Call service\nMt5TermApiTradeFunctions.OrderCheckReply reply = tradeFunctionsClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .orderCheck(request);\n\n// Check for errors\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\n// Get validation result\nvar result = reply.getData().getMqlTradeCheckResult();\nboolean isValid = result.getReturnedCode() == 10009;\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#important-notes","title":"\ud83d\udccc Important Notes","text":""},{"location":"MT5Account/5.%20Trading/OrderCheck/#validation-results","title":"Validation Results:","text":"<ul> <li><code>returned_code = 10009</code> means order is valid</li> <li>Other codes indicate errors (check <code>comment</code> field)</li> <li>Validation does NOT place actual order</li> <li>Results are estimates and may differ from actual execution</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#financial-calculations","title":"Financial Calculations:","text":"<ul> <li><code>balance_after_deal</code> - estimated balance after trade</li> <li><code>equity_after_deal</code> - estimated equity after trade</li> <li><code>margin</code> - required margin for this trade</li> <li><code>free_margin</code> - available margin after trade</li> <li><code>margin_level</code> - (equity / margin) \u00d7 100</li> <li><code>profit</code> - estimated floating profit</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#use-cases","title":"Use Cases:","text":"<ul> <li>Pre-trade validation before OrderSend</li> <li>Position sizing calculators</li> <li>Risk management checks</li> <li>Margin requirement calculations</li> <li>Portfolio analysis tools</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#margin-level","title":"Margin Level:","text":"<ul> <li>Above 100% = healthy account</li> <li>Below 100% = approaching margin call</li> <li>Below broker's stop-out level = positions may be closed</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#best-practices","title":"Best Practices:","text":"<ul> <li>Always validate before placing large orders</li> <li>Check margin level stays above 200%</li> <li>Factor in multiple open positions</li> <li>Use for risk management and position sizing</li> <li>Combine with OrderCalcMargin for precise calculations</li> <li>Validate all pending orders before placement</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#limitations","title":"Limitations:","text":"<ul> <li>Does not account for slippage</li> <li>Does not include commission/swap</li> <li>Estimates may differ from actual execution</li> <li>Market conditions can change between check and order</li> <li>Server-side validation may have additional rules</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderCheck/#common-return-codes","title":"Common Return Codes:","text":"<ul> <li><code>10009</code> - TRADE_RETCODE_DONE - Valid</li> <li><code>10019</code> - TRADE_RETCODE_NO_MONEY - Insufficient funds</li> <li><code>10004</code> - TRADE_RETCODE_REJECT - Request rejected</li> <li><code>10006</code> - TRADE_RETCODE_INVALID - Invalid request</li> <li><code>10013</code> - TRADE_RETCODE_INVALID_VOLUME - Invalid volume</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderClose/","title":"\u274c Close Position or Delete Pending Order","text":"<p>Request: close an open position (full or partial) or delete a pending order. The primary method for exiting trades.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderClose(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradingHelper</code></li> <li>Proto definition: <code>OrderClose</code> (defined in <code>mt5-term-api-trading-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderClose/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradingHelper</code></li> <li>Method: <code>OrderClose(OrderCloseRequest) \u2192 OrderCloseReply</code></li> <li>Low\u2011level client (generated): <code>TradingHelperGrpc.TradingHelperBlockingStub.orderClose(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Closes an open position or deletes a pending order.\n     * For positions, you can specify partial closure by providing a volume less than the total position size.\n     *\n     * @param ticket The ticket number of the order or position to close\n     * @param volume Volume to close in lots (use position's full volume to close completely)\n     * @param slippage Maximum acceptable price slippage in points\n     * @return Response indicating success or failure of the closure\n     * @throws ApiExceptionMT5 if the closure fails or connection is lost\n     */\n    public Mt5TermApiTradingHelper.OrderCloseReply orderClose(\n        long ticket,\n        double volume,\n        int slippage) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>OrderCloseRequest { ticket, volume, slippage }</code></p> <p>Reply message: <code>OrderCloseReply { data: OrderCloseData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/5.%20Trading/OrderClose/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>ticket</code> <code>long</code> \u2705 Order or position ticket number <code>volume</code> <code>double</code> \u2705 Volume to close in lots <code>slippage</code> <code>int</code> \u2705 Maximum price slippage in points <p>Volume Notes: - For full closure: use position's total volume - For partial closure: use volume less than total - For pending orders: volume is ignored (always deleted fully)</p>"},{"location":"MT5Account/5.%20Trading/OrderClose/#output-orderclosedata","title":"\u2b06\ufe0f Output - <code>OrderCloseData</code>","text":"Field Type Description <code>returned_code</code> <code>int</code> Operation return code (10009 = success) <code>returned_string_code</code> <code>String</code> String representation of return code <code>returned_code_description</code> <code>String</code> Human-readable description <code>close_mode</code> <code>MRPC_ORDER_CLOSE_MODE</code> Type of closure performed"},{"location":"MT5Account/5.%20Trading/OrderClose/#enum-mrpc_order_close_mode","title":"Enum: <code>MRPC_ORDER_CLOSE_MODE</code>","text":"Value Number Description <code>MRPC_MARKET_ORDER_CLOSE</code> 0 Full position closed <code>MRPC_MARKET_ORDER_PARTIAL_CLOSE</code> 1 Partial position closed <code>MRPC_PENDING_ORDER_REMOVE</code> 2 Pending order deleted"},{"location":"MT5Account/5.%20Trading/OrderClose/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to close positions or delete pending orders.</li> <li>Full closure. Use position's full volume to close completely.</li> <li>Partial closure. Use volume less than total for partial close.</li> <li>Pending orders. Volume parameter ignored - always deleted fully.</li> <li>Slippage. In points (not pips) - maximum acceptable price deviation.</li> <li>Return code. 10009 = success.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderClose/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Close open positions (full or partial).</li> <li>Take profits or cut losses manually.</li> <li>Delete pending orders that are no longer needed.</li> <li>Implement exit strategies.</li> <li>Close positions based on signals or conditions.</li> <li>Scale out of positions gradually.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderClose/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Trading/OrderClose/#1-close-position-completely","title":"1) Close position completely","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradingHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            long ticket = 123456789;\n            double volume = 0.1;  // Full position volume\n            int slippage = 10;    // 10 points\n\n            Mt5TermApiTradingHelper.OrderCloseReply reply =\n                account.orderClose(ticket, volume, slippage);\n\n            var data = reply.getData();\n\n            if (data.getReturnedCode() == 10009) {\n                System.out.printf(\"\u2705 Position #%d closed%n\", ticket);\n                System.out.printf(\"   Mode: %s%n\", data.getCloseMode());\n            } else {\n                System.out.printf(\"\u274c Failed: %s (code: %d)%n\",\n                    data.getReturnedCodeDescription(),\n                    data.getReturnedCode());\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#2-close-with-position-lookup","title":"2) Close with position lookup","text":"<pre><code>public class PositionCloser {\n    /**\n     * Close position by ticket with automatic volume lookup\n     */\n    public static boolean closePosition(\n            MT5Account account,\n            long ticket) throws ApiExceptionMT5 {\n\n        // Get position volume\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var position = positions.stream()\n            .filter(p -&gt; p.getTicket() == ticket)\n            .findFirst()\n            .orElseThrow(() -&gt; new ApiExceptionMT5(\"Position not found: \" + ticket));\n\n        double volume = position.getVolume();\n        System.out.printf(\"Closing position #%d (%s %.2f lots)%n\",\n            ticket, position.getSymbol(), volume);\n\n        var reply = account.orderClose(ticket, volume, 10);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.println(\"\u2705 Position closed successfully\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\",\n                data.getReturnedCodeDescription());\n            return false;\n        }\n    }\n}\n\n// Usage\nboolean success = PositionCloser.closePosition(account, 123456789);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#3-partial-position-close","title":"3) Partial position close","text":"<pre><code>public class PartialCloser {\n    /**\n     * Close part of position\n     */\n    public static boolean closePartial(\n            MT5Account account,\n            long ticket,\n            double volumeToClose) throws ApiExceptionMT5 {\n\n        // Get current position\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var position = positions.stream()\n            .filter(p -&gt; p.getTicket() == ticket)\n            .findFirst()\n            .orElseThrow(() -&gt; new ApiExceptionMT5(\"Position not found\"));\n\n        double totalVolume = position.getVolume();\n\n        if (volumeToClose &gt;= totalVolume) {\n            System.out.println(\"\u26a0\ufe0f Volume &gt;= total, closing fully\");\n            volumeToClose = totalVolume;\n        }\n\n        System.out.printf(\"Closing %.2f of %.2f lots (%.1f%%)%n\",\n            volumeToClose,\n            totalVolume,\n            (volumeToClose / totalVolume) * 100);\n\n        var reply = account.orderClose(ticket, volumeToClose, 10);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            if (data.getCloseMode() == Mt5TermApiTradingHelper.MRPC_ORDER_CLOSE_MODE.MRPC_MARKET_ORDER_PARTIAL_CLOSE) {\n                System.out.printf(\"\u2705 Partial close: %.2f lots closed, %.2f remains%n\",\n                    volumeToClose,\n                    totalVolume - volumeToClose);\n            } else {\n                System.out.println(\"\u2705 Full position closed\");\n            }\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\", data.getReturnedCodeDescription());\n            return false;\n        }\n    }\n}\n\n// Usage - close half the position\nPartialCloser.closePartial(account, 123456789, 0.05);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#4-delete-pending-order","title":"4) Delete pending order","text":"<pre><code>public class PendingOrderDeleter {\n    /**\n     * Delete pending order\n     */\n    public static boolean deletePendingOrder(\n            MT5Account account,\n            long orderTicket) throws ApiExceptionMT5 {\n\n        System.out.printf(\"Deleting pending order #%d...%n\", orderTicket);\n\n        // For pending orders, volume doesn't matter\n        var reply = account.orderClose(orderTicket, 0.0, 0);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.println(\"\u2705 Pending order deleted\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s (code: %d)%n\",\n                data.getReturnedCodeDescription(),\n                data.getReturnedCode());\n            return false;\n        }\n    }\n}\n\n// Usage\nPendingOrderDeleter.deletePendingOrder(account, 123456);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#5-close-all-positions-for-symbol","title":"5) Close all positions for symbol","text":"<pre><code>public class SymbolCloser {\n    /**\n     * Close all positions for a specific symbol\n     */\n    public static int closeAllForSymbol(\n            MT5Account account,\n            String symbol) throws ApiExceptionMT5 {\n\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var symbolPositions = positions.stream()\n            .filter(p -&gt; p.getSymbol().equals(symbol))\n            .toList();\n\n        if (symbolPositions.isEmpty()) {\n            System.out.printf(\"No positions found for %s%n\", symbol);\n            return 0;\n        }\n\n        System.out.printf(\"Closing %d positions for %s...%n\",\n            symbolPositions.size(), symbol);\n\n        int closedCount = 0;\n\n        for (var position : symbolPositions) {\n            try {\n                var reply = account.orderClose(\n                    position.getTicket(),\n                    position.getVolume(),\n                    10\n                );\n\n                if (reply.getData().getReturnedCode() == 10009) {\n                    System.out.printf(\"\u2705 Closed #%d (%.2f lots)%n\",\n                        position.getTicket(),\n                        position.getVolume());\n                    closedCount++;\n                } else {\n                    System.out.printf(\"\u274c Failed #%d: %s%n\",\n                        position.getTicket(),\n                        reply.getData().getReturnedCodeDescription());\n                }\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"Error closing #%d: %s%n\",\n                    position.getTicket(), e.getMessage());\n            }\n        }\n\n        System.out.printf(\"Closed: %d/%d positions%n\",\n            closedCount, symbolPositions.size());\n\n        return closedCount;\n    }\n}\n\n// Usage\nint closed = SymbolCloser.closeAllForSymbol(account, \"EURUSD\");\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#6-close-all-losing-positions","title":"6) Close all losing positions","text":"<pre><code>public class LossCloser {\n    /**\n     * Close all positions with losses\n     */\n    public static int closeAllLosing(MT5Account account) throws ApiExceptionMT5 {\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var losingPositions = positions.stream()\n            .filter(p -&gt; p.getProfit() &lt; 0)\n            .toList();\n\n        if (losingPositions.isEmpty()) {\n            System.out.println(\"No losing positions\");\n            return 0;\n        }\n\n        System.out.printf(\"Closing %d losing positions...%n\", losingPositions.size());\n\n        int closedCount = 0;\n        double totalLoss = 0;\n\n        for (var position : losingPositions) {\n            try {\n                var reply = account.orderClose(\n                    position.getTicket(),\n                    position.getVolume(),\n                    10\n                );\n\n                if (reply.getData().getReturnedCode() == 10009) {\n                    System.out.printf(\"\u2705 Closed #%d: %.2f loss%n\",\n                        position.getTicket(),\n                        position.getProfit());\n                    closedCount++;\n                    totalLoss += position.getProfit();\n                }\n\n            } catch (ApiExceptionMT5 e) {\n                System.err.printf(\"Error: %s%n\", e.getMessage());\n            }\n        }\n\n        System.out.printf(\"Closed: %d positions, Total loss: %.2f%n\",\n            closedCount, totalLoss);\n\n        return closedCount;\n    }\n}\n\n// Usage\nLossCloser.closeAllLosing(account);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#7-scale-out-close-in-steps","title":"7) Scale out (close in steps)","text":"<pre><code>public class ScaleOutCloser {\n    /**\n     * Scale out of position in multiple steps\n     */\n    public static void scaleOut(\n            MT5Account account,\n            long ticket,\n            int steps) throws ApiExceptionMT5, InterruptedException {\n\n        // Get position\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var position = positions.stream()\n            .filter(p -&gt; p.getTicket() == ticket)\n            .findFirst()\n            .orElseThrow(() -&gt; new ApiExceptionMT5(\"Position not found\"));\n\n        double totalVolume = position.getVolume();\n        double volumePerStep = totalVolume / steps;\n\n        // Round to 0.01\n        volumePerStep = Math.round(volumePerStep * 100.0) / 100.0;\n\n        System.out.printf(\"Scaling out of position #%d in %d steps%n\",\n            ticket, steps);\n        System.out.printf(\"Total: %.2f lots, Per step: %.2f lots%n\",\n            totalVolume, volumePerStep);\n\n        double remainingVolume = totalVolume;\n\n        for (int i = 1; i &lt;= steps; i++) {\n            double volumeToClose = Math.min(volumePerStep, remainingVolume);\n\n            System.out.printf(\"\\nStep %d/%d: Closing %.2f lots...%n\",\n                i, steps, volumeToClose);\n\n            var reply = account.orderClose(ticket, volumeToClose, 10);\n\n            if (reply.getData().getReturnedCode() == 10009) {\n                remainingVolume -= volumeToClose;\n                System.out.printf(\"\u2705 Closed %.2f lots, %.2f remains%n\",\n                    volumeToClose, remainingVolume);\n\n                if (remainingVolume &lt;= 0.01) {\n                    System.out.println(\"Position fully closed\");\n                    break;\n                }\n            } else {\n                System.out.printf(\"\u274c Failed: %s%n\",\n                    reply.getData().getReturnedCodeDescription());\n                break;\n            }\n\n            // Wait before next step\n            if (i &lt; steps) {\n                Thread.sleep(1000);\n            }\n        }\n    }\n}\n\n// Usage - close position in 3 steps\nScaleOutCloser.scaleOut(account, 123456789, 3);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#8-emergency-close-all","title":"8) Emergency close all","text":"<pre><code>public class EmergencyCloser {\n    /**\n     * Emergency close all positions and delete all pending orders\n     */\n    public static void closeAll(MT5Account account) {\n        System.out.println(\"\ud83d\udea8 EMERGENCY CLOSE ALL \ud83d\udea8\");\n        System.out.println(\"\u2550\".repeat(50));\n\n        try {\n            var data = account.openedOrders(\n                Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n            ).getData();\n\n            int positionsCount = data.getPositionInfosCount();\n            int ordersCount = data.getOpenedOrdersCount();\n\n            System.out.printf(\"Found: %d positions, %d pending orders%n\",\n                positionsCount, ordersCount);\n\n            // Close all positions\n            int positionsClosed = 0;\n            for (var position : data.getPositionInfosList()) {\n                try {\n                    var reply = account.orderClose(\n                        position.getTicket(),\n                        position.getVolume(),\n                        50  // Allow high slippage\n                    );\n\n                    if (reply.getData().getReturnedCode() == 10009) {\n                        System.out.printf(\"\u2705 Closed position #%d%n\",\n                            position.getTicket());\n                        positionsClosed++;\n                    }\n                } catch (Exception e) {\n                    System.err.printf(\"\u274c Failed to close #%d: %s%n\",\n                        position.getTicket(), e.getMessage());\n                }\n            }\n\n            // Delete all pending orders\n            int ordersDeleted = 0;\n            for (var order : data.getOpenedOrdersList()) {\n                try {\n                    var reply = account.orderClose(order.getTicket(), 0.0, 0);\n\n                    if (reply.getData().getReturnedCode() == 10009) {\n                        System.out.printf(\"\u2705 Deleted order #%d%n\",\n                            order.getTicket());\n                        ordersDeleted++;\n                    }\n                } catch (Exception e) {\n                    System.err.printf(\"\u274c Failed to delete #%d: %s%n\",\n                        order.getTicket(), e.getMessage());\n                }\n            }\n\n            System.out.println(\"\u2550\".repeat(50));\n            System.out.printf(\"Results: %d/%d positions closed, %d/%d orders deleted%n\",\n                positionsClosed, positionsCount,\n                ordersDeleted, ordersCount);\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Fatal error: \" + e.getMessage());\n        }\n    }\n}\n\n// Usage - EMERGENCY ONLY!\nEmergencyCloser.closeAll(account);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderClose/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Slippage: - In points, not pips (10 points = 1 pip for EURUSD) - 0 = no slippage allowed (may cause rejections) - 10-50 typical for normal conditions - Higher slippage for emergency closes</p> <p>Partial Closure: - Creates new ticket for remaining position - Original ticket is closed - Useful for scaling out of positions</p> <p>Pending Orders: - Always deleted fully (volume ignored) - No slippage applies to pending orders</p> <p>Return Codes: - <code>10009</code> = SUCCESS - Other codes indicate failure</p> <p>Best Practices: - Always check return code - Use reasonable slippage values - Handle errors gracefully - Consider partial closes for large positions</p>"},{"location":"MT5Account/5.%20Trading/OrderModify/","title":"\u270f\ufe0f Modify Order or Position","text":"<p>Request: modify existing order or position parameters - update Stop Loss, Take Profit, price (for pending orders), or expiration time.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderModify(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradingHelper</code></li> <li>Proto definition: <code>OrderModify</code> (defined in <code>mt5-term-api-trading-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradingHelper</code></li> <li>Method: <code>OrderModify(OrderModifyRequest) \u2192 OrderModifyReply</code></li> <li>Low\u2011level client (generated): <code>TradingHelperGrpc.TradingHelperBlockingStub.orderModify(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Modifies an existing order or position parameters.\n     * Use this to update stop loss, take profit, price, or other parameters of an open position or pending order.\n     *\n     * @param request Modification request with order ticket and new parameters to update\n     * @return Response indicating success or failure of the modification\n     * @throws ApiExceptionMT5 if the modification fails or connection is lost\n     */\n    public Mt5TermApiTradingHelper.OrderModifyReply orderModify(\n        Mt5TermApiTradingHelper.OrderModifyRequest request) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>OrderModifyRequest { ticket, stop_loss?, take_profit?, price?, expiration_time_type?, expiration_time?, stop_limit? }</code></p> <p>Reply message: <code>OrderModifyReply { data: OrderModifyData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/5.%20Trading/OrderModify/#input-ordermodifyrequest","title":"\ud83d\udd3d Input - <code>OrderModifyRequest</code>","text":"Parameter Type Required Description <code>ticket</code> <code>long</code> \u2705 Order or position ticket number <code>stop_loss</code> <code>double</code> \u274c New Stop Loss price level <code>take_profit</code> <code>double</code> \u274c New Take Profit price level <code>price</code> <code>double</code> \u274c New order price (pending orders only) <code>expiration_time_type</code> <code>TMT5_ENUM_ORDER_TYPE_TIME</code> \u274c New expiration type (pending orders only) <code>expiration_time</code> <code>Timestamp</code> \u274c New expiration time (pending orders only) <code>stop_limit</code> <code>double</code> \u274c New stop limit price (stop-limit orders only) <p>Important: - <code>ticket</code> is the only required field - At least one optional parameter must be provided - <code>price</code>, <code>expiration_time_type</code>, <code>expiration_time</code>, <code>stop_limit</code> - only for pending orders - <code>stop_loss</code>, <code>take_profit</code> - for both positions and pending orders</p>"},{"location":"MT5Account/5.%20Trading/OrderModify/#enum-tmt5_enum_order_type_time-time-in-force","title":"Enum: <code>TMT5_ENUM_ORDER_TYPE_TIME</code> (Time-in-Force)","text":"Value Number Description <code>TMT5_ORDER_TIME_GTC</code> 0 Good Till Cancel (default) <code>TMT5_ORDER_TIME_DAY</code> 1 Good Till End of Trading Day <code>TMT5_ORDER_TIME_SPECIFIED</code> 2 Good Till Specified Time <code>TMT5_ORDER_TIME_SPECIFIED_DAY</code> 3 Good Till End of Specified Day (23:59:59)"},{"location":"MT5Account/5.%20Trading/OrderModify/#output-ordermodifydata","title":"\u2b06\ufe0f Output - <code>OrderModifyData</code>","text":"Field Type Description <code>returned_code</code> <code>int</code> Operation return code (10009 = success) <code>deal</code> <code>long</code> Deal ticket (usually 0 for modify operations) <code>order</code> <code>long</code> Order ticket that was modified <code>volume</code> <code>double</code> Order volume <code>price</code> <code>double</code> Current/modified price <code>bid</code> <code>double</code> Current Bid price <code>ask</code> <code>double</code> Current Ask price <code>comment</code> <code>String</code> Broker comment (error description if failed) <code>request_id</code> <code>int</code> Request ID"},{"location":"MT5Account/5.%20Trading/OrderModify/#success-code","title":"Success Code:","text":"<ul> <li><code>10009</code> - TRADE_RETCODE_DONE - Modification successful</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#common-error-codes","title":"Common Error Codes:","text":"<ul> <li><code>10004</code> - TRADE_RETCODE_REJECT - Request rejected</li> <li><code>10016</code> - TRADE_RETCODE_INVALID_STOPS - Invalid stop levels</li> <li><code>10025</code> - TRADE_RETCODE_INVALID_FILL - Invalid fill type</li> <li><code>10027</code> - TRADE_RETCODE_ERROR_ORDER - Order not found</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. RPC to modify existing orders or positions.</li> <li>For positions. Update Stop Loss and Take Profit only.</li> <li>For pending orders. Can also modify price, expiration, stop limit.</li> <li>At least one change. Must provide at least one parameter to modify.</li> <li>Return code. Check <code>returned_code</code> - 10009 means success.</li> <li>No partial changes. If modification fails, no changes are applied.</li> <li>Use cases. Trailing stops, breakeven stops, TP adjustment, order price updates.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Add or update Stop Loss on an open position.</li> <li>Add or update Take Profit on an open position.</li> <li>Implement trailing stop logic.</li> <li>Move stops to breakeven after profit target.</li> <li>Adjust pending order prices.</li> <li>Update order expiration times.</li> <li>Protect profits by moving stops.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Ticket required. Must provide valid ticket number of order or position.</li> <li>Positions. Can only modify SL/TP for open positions.</li> <li>Pending orders. Can modify price, SL/TP, expiration, and stop limit.</li> <li>Stop levels. Broker enforces minimum distance from current price.</li> <li>Zero to remove. Set SL or TP to 0.0 to remove protection.</li> <li>Price validation. Broker validates stop levels based on symbol properties.</li> <li>Return code. Always check <code>returned_code</code> for success (10009).</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Trading/OrderModify/#1-add-stop-loss-to-position","title":"1) Add Stop Loss to position","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradingHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            long positionTicket = 123456789;  // Your position ticket\n\n            // Add Stop Loss\n            Mt5TermApiTradingHelper.OrderModifyRequest request =\n                Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                    .setTicket(positionTicket)\n                    .setStopLoss(1.09500)\n                    .build();\n\n            Mt5TermApiTradingHelper.OrderModifyReply reply =\n                account.orderModify(request);\n\n            var data = reply.getData();\n\n            if (data.getReturnedCode() == 10009) {\n                System.out.printf(\"\u2705 Stop Loss set to %.5f%n\", 1.09500);\n            } else {\n                System.out.printf(\"\u274c Modification failed: %s (code: %d)%n\",\n                    data.getComment(), data.getReturnedCode());\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#2-update-both-sl-and-tp","title":"2) Update both SL and TP","text":"<pre><code>public class StopModifier {\n    /**\n     * Update Stop Loss and Take Profit\n     */\n    public static boolean updateStops(\n            MT5Account account,\n            long ticket,\n            double newStopLoss,\n            double newTakeProfit) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(ticket)\n                .setStopLoss(newStopLoss)\n                .setTakeProfit(newTakeProfit)\n                .build();\n\n        var reply = account.orderModify(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 Updated stops for ticket #%d%n\", ticket);\n            System.out.printf(\"   Stop Loss: %.5f%n\", newStopLoss);\n            System.out.printf(\"   Take Profit: %.5f%n\", newTakeProfit);\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s (code: %d)%n\",\n                data.getComment(), data.getReturnedCode());\n            return false;\n        }\n    }\n}\n\n// Usage\nboolean success = StopModifier.updateStops(\n    account,\n    123456789,  // Ticket\n    1.09500,    // New SL\n    1.10500     // New TP\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#3-trailing-stop-implementation","title":"3) Trailing stop implementation","text":"<pre><code>public class TrailingStop {\n    /**\n     * Implement trailing stop logic\n     */\n    public static void trailStop(\n            MT5Account account,\n            long ticket,\n            boolean isBuy,\n            int trailDistancePips) throws ApiExceptionMT5 {\n\n        // Get current position info\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var position = positions.stream()\n            .filter(p -&gt; p.getTicket() == ticket)\n            .findFirst()\n            .orElseThrow(() -&gt; new ApiExceptionMT5(\"Position not found\"));\n\n        double currentPrice = position.getPriceCurrent();\n        double currentSL = position.getStopLoss();\n        String symbol = position.getSymbol();\n\n        // Calculate pip value\n        double pipValue = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n        double trailDistance = trailDistancePips * pipValue;\n\n        // Calculate new SL\n        double newSL;\n        if (isBuy) {\n            newSL = currentPrice - trailDistance;\n            // Only move SL up, never down\n            if (currentSL &gt; 0 &amp;&amp; newSL &lt;= currentSL) {\n                System.out.println(\"SL already optimal, no update needed\");\n                return;\n            }\n        } else {\n            newSL = currentPrice + trailDistance;\n            // Only move SL down, never up\n            if (currentSL &gt; 0 &amp;&amp; newSL &gt;= currentSL) {\n                System.out.println(\"SL already optimal, no update needed\");\n                return;\n            }\n        }\n\n        // Update SL\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(ticket)\n                .setStopLoss(newSL)\n                .build();\n\n        var reply = account.orderModify(request);\n\n        if (reply.getData().getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 Trailing stop updated: %.5f \u2192 %.5f%n\",\n                currentSL, newSL);\n        } else {\n            System.out.printf(\"\u274c Failed to update: %s%n\",\n                reply.getData().getComment());\n        }\n    }\n}\n\n// Usage - trail stop 50 pips behind current price\nTrailingStop.trailStop(account, 123456789, true, 50);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#4-move-stop-to-breakeven","title":"4) Move stop to breakeven","text":"<pre><code>public class BreakevenStop {\n    /**\n     * Move stop loss to breakeven when profit threshold reached\n     */\n    public static boolean moveToBreakeven(\n            MT5Account account,\n            long ticket,\n            boolean isBuy,\n            int profitThresholdPips,\n            int breakevenOffsetPips) throws ApiExceptionMT5 {\n\n        // Get position\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var position = positions.stream()\n            .filter(p -&gt; p.getTicket() == ticket)\n            .findFirst()\n            .orElseThrow(() -&gt; new ApiExceptionMT5(\"Position not found\"));\n\n        String symbol = position.getSymbol();\n        double openPrice = position.getPriceOpen();\n        double currentPrice = position.getPriceCurrent();\n        double currentSL = position.getStopLoss();\n\n        // Calculate pip value\n        double pipValue = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n\n        // Calculate profit in pips\n        double profitPips;\n        if (isBuy) {\n            profitPips = (currentPrice - openPrice) / pipValue;\n        } else {\n            profitPips = (openPrice - currentPrice) / pipValue;\n        }\n\n        System.out.printf(\"Current profit: %.1f pips%n\", profitPips);\n\n        // Check if threshold reached\n        if (profitPips &lt; profitThresholdPips) {\n            System.out.printf(\"Threshold not reached (need %.1f pips)%n\",\n                (double) profitThresholdPips);\n            return false;\n        }\n\n        // Calculate breakeven price with offset\n        double breakevenPrice = openPrice + (breakevenOffsetPips * pipValue * (isBuy ? 1 : -1));\n\n        // Check if already at breakeven or better\n        if (isBuy &amp;&amp; currentSL &gt;= breakevenPrice) {\n            System.out.println(\"Already at breakeven or better\");\n            return false;\n        }\n        if (!isBuy &amp;&amp; currentSL &gt; 0 &amp;&amp; currentSL &lt;= breakevenPrice) {\n            System.out.println(\"Already at breakeven or better\");\n            return false;\n        }\n\n        // Move to breakeven\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(ticket)\n                .setStopLoss(breakevenPrice)\n                .build();\n\n        var reply = account.orderModify(request);\n\n        if (reply.getData().getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 Moved to breakeven: %.5f%n\", breakevenPrice);\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\", reply.getData().getComment());\n            return false;\n        }\n    }\n}\n\n// Usage - move to breakeven when 20 pips profit, with +2 pip offset\nboolean moved = BreakevenStop.moveToBreakeven(\n    account, 123456789, true, 20, 2\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#5-modify-pending-order-price","title":"5) Modify pending order price","text":"<pre><code>public class PendingOrderModifier {\n    /**\n     * Update pending order price\n     */\n    public static boolean updateOrderPrice(\n            MT5Account account,\n            long orderTicket,\n            double newPrice) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(orderTicket)\n                .setPrice(newPrice)\n                .build();\n\n        var reply = account.orderModify(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 Order price updated to %.5f%n\", newPrice);\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s (code: %d)%n\",\n                data.getComment(), data.getReturnedCode());\n            return false;\n        }\n    }\n\n    /**\n     * Update pending order with new price and stops\n     */\n    public static boolean updatePendingOrder(\n            MT5Account account,\n            long orderTicket,\n            double newPrice,\n            double newSL,\n            double newTP) throws ApiExceptionMT5 {\n\n        var builder = Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n            .setTicket(orderTicket)\n            .setPrice(newPrice);\n\n        if (newSL &gt; 0) builder.setStopLoss(newSL);\n        if (newTP &gt; 0) builder.setTakeProfit(newTP);\n\n        var reply = account.orderModify(builder.build());\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 Pending order updated%n\");\n            System.out.printf(\"   Price: %.5f%n\", newPrice);\n            if (newSL &gt; 0) System.out.printf(\"   SL: %.5f%n\", newSL);\n            if (newTP &gt; 0) System.out.printf(\"   TP: %.5f%n\", newTP);\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\", data.getComment());\n            return false;\n        }\n    }\n}\n\n// Usage\nPendingOrderModifier.updateOrderPrice(account, 123456, 1.10000);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#6-remove-stop-loss-or-take-profit","title":"6) Remove Stop Loss or Take Profit","text":"<pre><code>public class StopRemover {\n    /**\n     * Remove Stop Loss (set to 0)\n     */\n    public static boolean removeStopLoss(\n            MT5Account account,\n            long ticket) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(ticket)\n                .setStopLoss(0.0)  // 0 removes SL\n                .build();\n\n        var reply = account.orderModify(request);\n\n        if (reply.getData().getReturnedCode() == 10009) {\n            System.out.println(\"\u2705 Stop Loss removed\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\",\n                reply.getData().getComment());\n            return false;\n        }\n    }\n\n    /**\n     * Remove Take Profit (set to 0)\n     */\n    public static boolean removeTakeProfit(\n            MT5Account account,\n            long ticket) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(ticket)\n                .setTakeProfit(0.0)  // 0 removes TP\n                .build();\n\n        var reply = account.orderModify(request);\n\n        if (reply.getData().getReturnedCode() == 10009) {\n            System.out.println(\"\u2705 Take Profit removed\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\",\n                reply.getData().getComment());\n            return false;\n        }\n    }\n\n    /**\n     * Remove both SL and TP\n     */\n    public static boolean removeAllStops(\n            MT5Account account,\n            long ticket) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderModifyRequest request =\n            Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                .setTicket(ticket)\n                .setStopLoss(0.0)\n                .setTakeProfit(0.0)\n                .build();\n\n        var reply = account.orderModify(request);\n\n        if (reply.getData().getReturnedCode() == 10009) {\n            System.out.println(\"\u2705 All stops removed\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s%n\",\n                reply.getData().getComment());\n            return false;\n        }\n    }\n}\n\n// Usage\nStopRemover.removeStopLoss(account, 123456789);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#7-batch-modify-multiple-positions","title":"7) Batch modify multiple positions","text":"<pre><code>import java.util.*;\n\npublic class BatchModifier {\n    /**\n     * Modify SL for multiple positions\n     */\n    public static Map&lt;Long, Boolean&gt; batchUpdateStopLoss(\n            MT5Account account,\n            Map&lt;Long, Double&gt; ticketToSL) {\n\n        Map&lt;Long, Boolean&gt; results = new LinkedHashMap&lt;&gt;();\n\n        System.out.printf(\"Updating %d positions...%n\", ticketToSL.size());\n        System.out.println(\"\u2550\".repeat(50));\n\n        for (var entry : ticketToSL.entrySet()) {\n            long ticket = entry.getKey();\n            double stopLoss = entry.getValue();\n\n            try {\n                Mt5TermApiTradingHelper.OrderModifyRequest request =\n                    Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n                        .setTicket(ticket)\n                        .setStopLoss(stopLoss)\n                        .build();\n\n                var reply = account.orderModify(request);\n                boolean success = reply.getData().getReturnedCode() == 10009;\n                results.put(ticket, success);\n\n                String status = success ? \"\u2705\" : \"\u274c\";\n                System.out.printf(\"%s Ticket #%d: SL %.5f%n\",\n                    status, ticket, stopLoss);\n\n            } catch (ApiExceptionMT5 e) {\n                results.put(ticket, false);\n                System.out.printf(\"\u274c Ticket #%d: %s%n\", ticket, e.getMessage());\n            }\n        }\n\n        long successCount = results.values().stream()\n            .filter(success -&gt; success)\n            .count();\n\n        System.out.println(\"\u2550\".repeat(50));\n        System.out.printf(\"Success: %d/%d%n\", successCount, ticketToSL.size());\n\n        return results;\n    }\n}\n\n// Usage\nMap&lt;Long, Double&gt; updates = Map.of(\n    123456L, 1.09500,\n    789012L, 1.29500,\n    345678L, 140.500\n);\n\nvar results = BatchModifier.batchUpdateStopLoss(account, updates);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#8-smart-stop-modifier-with-validation","title":"8) Smart stop modifier with validation","text":"<pre><code>public class SmartStopModifier {\n    /**\n     * Modify stops with validation and error handling\n     */\n    public static boolean modifyStopsWithValidation(\n            MT5Account account,\n            long ticket,\n            Double newSL,\n            Double newTP) throws ApiExceptionMT5 {\n\n        // Get current position info\n        var positions = account.openedOrders(\n            Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_SORT_BY_TICKET_ASC\n        ).getData().getPositionInfosList();\n\n        var position = positions.stream()\n            .filter(p -&gt; p.getTicket() == ticket)\n            .findFirst()\n            .orElseThrow(() -&gt; new ApiExceptionMT5(\"Position not found: \" + ticket));\n\n        String symbol = position.getSymbol();\n        double currentPrice = position.getPriceCurrent();\n        boolean isBuy = position.getType() ==\n            Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_BUY;\n\n        // Get symbol info for validation\n        var symbolInfo = account.symbolInfoDouble(\n            symbol,\n            Mt5TermApiMarketInfo.SymbolInfoDoubleProperty.SYMBOL_TRADE_STOPS_LEVEL\n        );\n        double stopLevel = symbolInfo.getData().getRequestedValue() * 0.00001;  // Convert to price\n\n        System.out.printf(\"Modifying position #%d (%s %s)%n\",\n            ticket, isBuy ? \"BUY\" : \"SELL\", symbol);\n        System.out.printf(\"Current price: %.5f%n\", currentPrice);\n        System.out.printf(\"Min stop distance: %.5f%n\", stopLevel);\n\n        // Build request\n        var builder = Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n            .setTicket(ticket);\n\n        boolean hasChanges = false;\n\n        if (newSL != null &amp;&amp; newSL &gt; 0) {\n            // Validate SL distance\n            double slDistance = Math.abs(currentPrice - newSL);\n            if (slDistance &lt; stopLevel) {\n                System.out.printf(\"\u26a0\ufe0f Stop Loss too close (%.5f &lt; %.5f)%n\",\n                    slDistance, stopLevel);\n                return false;\n            }\n            builder.setStopLoss(newSL);\n            hasChanges = true;\n            System.out.printf(\"New SL: %.5f%n\", newSL);\n        }\n\n        if (newTP != null &amp;&amp; newTP &gt; 0) {\n            // Validate TP distance\n            double tpDistance = Math.abs(currentPrice - newTP);\n            if (tpDistance &lt; stopLevel) {\n                System.out.printf(\"\u26a0\ufe0f Take Profit too close (%.5f &lt; %.5f)%n\",\n                    tpDistance, stopLevel);\n                return false;\n            }\n            builder.setTakeProfit(newTP);\n            hasChanges = true;\n            System.out.printf(\"New TP: %.5f%n\", newTP);\n        }\n\n        if (!hasChanges) {\n            System.out.println(\"No changes to apply\");\n            return false;\n        }\n\n        // Execute modification\n        var reply = account.orderModify(builder.build());\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.println(\"\u2705 Modification successful\");\n            return true;\n        } else {\n            System.out.printf(\"\u274c Failed: %s (code: %d)%n\",\n                data.getComment(), data.getReturnedCode());\n            return false;\n        }\n    }\n}\n\n// Usage\nboolean success = SmartStopModifier.modifyStopsWithValidation(\n    account,\n    123456789,\n    1.09500,  // New SL\n    1.10500   // New TP\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiTradingHelper.OrderModifyRequest request =\n    Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n        .setTicket(123456789)\n        .setStopLoss(1.09500)\n        .setTakeProfit(1.10500)\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Modify order\nMt5TermApiTradingHelper.OrderModifyReply reply = tradingHelperClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .orderModify(request);\n\n// Check result\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\nif (reply.getData().getReturnedCode() == 10009) {\n    System.out.println(\"Modification successful\");\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderModify/#important-notes","title":"\ud83d\udccc Important Notes","text":""},{"location":"MT5Account/5.%20Trading/OrderModify/#what-can-be-modified","title":"What Can Be Modified:","text":""},{"location":"MT5Account/5.%20Trading/OrderModify/#open-positions","title":"Open Positions:","text":"<ul> <li>\u2705 Stop Loss</li> <li>\u2705 Take Profit</li> <li>\u274c Price (cannot change entry price)</li> <li>\u274c Volume (use partial close instead)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#pending-orders","title":"Pending Orders:","text":"<ul> <li>\u2705 Stop Loss</li> <li>\u2705 Take Profit</li> <li>\u2705 Order Price</li> <li>\u2705 Stop Limit Price</li> <li>\u2705 Expiration Time</li> <li>\u274c Order Type (delete and create new instead)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#stop-level-requirements","title":"Stop Level Requirements:","text":"<ul> <li>Broker enforces minimum distance from current price</li> <li>Check <code>SYMBOL_TRADE_STOPS_LEVEL</code> via <code>symbolInfoDouble()</code></li> <li>Too-close stops will be rejected with code 10016</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#removing-stops","title":"Removing Stops:","text":"<ul> <li>Set SL or TP to <code>0.0</code> to remove</li> <li>Useful for manual management or special strategies</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderModify/#best-practices","title":"Best Practices:","text":"<ul> <li>Always validate stop distances before modification</li> <li>Check return code for success (10009)</li> <li>Handle errors gracefully (log and retry if needed)</li> <li>Use trailing stops for trend-following strategies</li> <li>Move to breakeven to protect profits</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/","title":"\ud83d\udce4 Send Trading Order (Open Position / Place Pending Order)","text":"<p>Request: send a trading order to MT5 server - open market position (BUY/SELL) or place pending order (LIMIT/STOP). The primary method for executing trades.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.orderSend(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.TradingHelper</code></li> <li>Proto definition: <code>OrderSend</code> (defined in <code>mt5-term-api-trading-helper.proto</code>)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.TradingHelper</code></li> <li>Method: <code>OrderSend(OrderSendRequest) \u2192 OrderSendReply</code></li> <li>Low\u2011level client (generated): <code>TradingHelperGrpc.TradingHelperBlockingStub.orderSend(request)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Sends a trading order to the MT5 server (market or pending order).\n     * Use this method to open new positions or place pending orders with specified parameters\n     * including symbol, volume, price, stop loss, and take profit levels.\n     *\n     * @param request Complete order request containing symbol, order type, volume, prices, and other parameters\n     * @return Response with the order/deal ticket number if successful\n     * @throws ApiExceptionMT5 if the order fails or connection is lost\n     */\n    public Mt5TermApiTradingHelper.OrderSendReply orderSend(\n        Mt5TermApiTradingHelper.OrderSendRequest request) throws ApiExceptionMT5;\n}\n</code></pre> <p>Request message: <code>OrderSendRequest { symbol, operation, volume, price?, slippage?, stop_loss?, take_profit?, comment?, expert_id?, stop_limit_price?, expiration_time_type?, expiration_time? }</code></p> <p>Reply message: <code>OrderSendReply { data: OrderSendData }</code> or <code>{ error: Error }</code></p>"},{"location":"MT5Account/5.%20Trading/OrderSend/#input-ordersendrequest","title":"\ud83d\udd3d Input - <code>OrderSendRequest</code>","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>operation</code> <code>TMT5_ENUM_ORDER_TYPE</code> \u2705 Order type (BUY, SELL, BUY_LIMIT, etc.) <code>volume</code> <code>double</code> \u2705 Volume in lots <code>price</code> <code>double</code> \u274c Order price (required for pending orders, optional for market) <code>slippage</code> <code>long</code> \u274c Maximum price slippage in points <code>stop_loss</code> <code>double</code> \u274c Stop Loss price level <code>take_profit</code> <code>double</code> \u274c Take Profit price level <code>comment</code> <code>String</code> \u274c Order comment (max 31 characters) <code>expert_id</code> <code>long</code> \u274c Expert Advisor ID (magic number) <code>stop_limit_price</code> <code>double</code> \u274c Stop Limit price (for STOP_LIMIT orders) <code>expiration_time_type</code> <code>TMT5_ENUM_ORDER_TYPE_TIME</code> \u274c Order expiration type <code>expiration_time</code> <code>Timestamp</code> \u274c Expiration time (if type is SPECIFIED)"},{"location":"MT5Account/5.%20Trading/OrderSend/#enum-tmt5_enum_order_type-order-types","title":"Enum: <code>TMT5_ENUM_ORDER_TYPE</code> (Order Types)","text":"Value Number Description <code>TMT5_ORDER_TYPE_BUY</code> 0 Market Buy order (instant execution) <code>TMT5_ORDER_TYPE_SELL</code> 1 Market Sell order (instant execution) <code>TMT5_ORDER_TYPE_BUY_LIMIT</code> 2 Buy Limit pending order (buy below market) <code>TMT5_ORDER_TYPE_SELL_LIMIT</code> 3 Sell Limit pending order (sell above market) <code>TMT5_ORDER_TYPE_BUY_STOP</code> 4 Buy Stop pending order (buy above market) <code>TMT5_ORDER_TYPE_SELL_STOP</code> 5 Sell Stop pending order (sell below market) <code>TMT5_ORDER_TYPE_BUY_STOP_LIMIT</code> 6 Buy Stop Limit order <code>TMT5_ORDER_TYPE_SELL_STOP_LIMIT</code> 7 Sell Stop Limit order <code>TMT5_ORDER_TYPE_CLOSE_BY</code> 8 Close position by opposite position"},{"location":"MT5Account/5.%20Trading/OrderSend/#enum-tmt5_enum_order_type_time-time-in-force","title":"Enum: <code>TMT5_ENUM_ORDER_TYPE_TIME</code> (Time-in-Force)","text":"Value Number Description <code>TMT5_ORDER_TIME_GTC</code> 0 Good Till Cancel (default) <code>TMT5_ORDER_TIME_DAY</code> 1 Good Till End of Trading Day <code>TMT5_ORDER_TIME_SPECIFIED</code> 2 Good Till Specified Time <code>TMT5_ORDER_TIME_SPECIFIED_DAY</code> 3 Good Till End of Specified Day (23:59:59)"},{"location":"MT5Account/5.%20Trading/OrderSend/#output-ordersenddata","title":"\u2b06\ufe0f Output - <code>OrderSendData</code>","text":"Field Type Description <code>returned_code</code> <code>int</code> Operation return code (10009 = success) <code>deal</code> <code>long</code> Deal ticket number (if executed immediately) <code>order</code> <code>long</code> Order ticket number (for pending orders or positions) <code>volume</code> <code>double</code> Executed volume confirmed by broker <code>price</code> <code>double</code> Execution price confirmed by broker <code>bid</code> <code>double</code> Current Bid price at execution time <code>ask</code> <code>double</code> Current Ask price at execution time <code>comment</code> <code>String</code> Broker comment (error description if failed) <code>request_id</code> <code>int</code> Request ID set by terminal <code>ret_code_external</code> <code>int</code> External trading system return code"},{"location":"MT5Account/5.%20Trading/OrderSend/#success-return-codes","title":"Success Return Codes:","text":"<ul> <li><code>10009</code> - TRADE_RETCODE_DONE - Request completed successfully</li> <li><code>10008</code> - TRADE_RETCODE_PLACED - Order placed successfully</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#common-error-codes","title":"Common Error Codes:","text":"<ul> <li><code>10004</code> - TRADE_RETCODE_REJECT - Request rejected</li> <li><code>10006</code> - TRADE_RETCODE_REQUOTE - Requote</li> <li><code>10013</code> - TRADE_RETCODE_INVALID - Invalid request</li> <li><code>10014</code> - TRADE_RETCODE_INVALID_VOLUME - Invalid volume</li> <li><code>10015</code> - TRADE_RETCODE_INVALID_PRICE - Invalid price</li> <li><code>10016</code> - TRADE_RETCODE_INVALID_STOPS - Invalid stops</li> <li><code>10019</code> - TRADE_RETCODE_NO_MONEY - Not enough money</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Primary RPC for opening positions and placing pending orders.</li> <li>Market orders. Use BUY/SELL types - executed immediately at current price.</li> <li>Pending orders. Use LIMIT/STOP types - activated when price reaches level.</li> <li>Return codes. Check <code>returned_code</code> - 10009 means success.</li> <li>Tickets. Save <code>deal</code> or <code>order</code> ticket for tracking/modification/closure.</li> <li>Slippage. Maximum acceptable price deviation (in points, not pips).</li> <li>Magic number. Use <code>expert_id</code> to tag orders from your EA/strategy.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Open market positions (instant execution).</li> <li>Place pending orders (limit/stop orders).</li> <li>Set stop loss and take profit on order placement.</li> <li>Tag orders with magic numbers for strategy tracking.</li> <li>Control order expiration time.</li> <li>Execute automated trading strategies.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#notes-tips","title":"\ud83e\udde9 Notes &amp; Tips","text":"<ul> <li>Required fields. Symbol, operation, volume are mandatory.</li> <li>Market vs Pending. Market orders (BUY/SELL) execute immediately; pending orders wait for price.</li> <li>Price field. Optional for market orders (uses current price), required for pending orders.</li> <li>Stop Loss/Take Profit. Can be set on order placement or added later via <code>orderModify()</code>.</li> <li>Slippage. In points (not pips). For EURUSD: 10 points = 1 pip.</li> <li>Magic number. Use to identify orders from your trading system.</li> <li>Return code. Always check <code>returned_code</code> - 10009 = success.</li> <li>Ticket numbers. <code>deal</code> for market orders, <code>order</code> for pending orders.</li> <li>Volume. In standard lots (1.0 = 100,000 units for forex).</li> <li>Auto-reconnect. Uses <code>executeWithReconnect()</code> for reliability.</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/5.%20Trading/OrderSend/#1-simple-market-buy-order","title":"1) Simple market BUY order","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiTradingHelper;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Build market BUY order\n            Mt5TermApiTradingHelper.OrderSendRequest request =\n                Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                    .setSymbol(\"EURUSD\")\n                    .setOperation(Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY)\n                    .setVolume(0.01)  // 0.01 lots (micro lot)\n                    .setComment(\"Test buy order\")\n                    .build();\n\n            // Send order\n            Mt5TermApiTradingHelper.OrderSendReply reply =\n                account.orderSend(request);\n\n            var data = reply.getData();\n\n            if (data.getReturnedCode() == 10009) {  // Success\n                System.out.println(\"\u2705 Order executed successfully!\");\n                System.out.printf(\"Deal ticket: %d%n\", data.getDeal());\n                System.out.printf(\"Order ticket: %d%n\", data.getOrder());\n                System.out.printf(\"Execution price: %.5f%n\", data.getPrice());\n                System.out.printf(\"Volume: %.2f lots%n\", data.getVolume());\n            } else {\n                System.out.printf(\"\u274c Order failed: %s (code: %d)%n\",\n                    data.getComment(), data.getReturnedCode());\n            }\n\n        } catch (ApiExceptionMT5 e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#2-market-order-with-stop-loss-and-take-profit","title":"2) Market order with Stop Loss and Take Profit","text":"<pre><code>public class OrderWithProtection {\n    /**\n     * Place market order with SL/TP\n     */\n    public static long placeBuyWithProtection(\n            MT5Account account,\n            String symbol,\n            double lots,\n            double stopLossPrice,\n            double takeProfitPrice) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderSendRequest request =\n            Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                .setSymbol(symbol)\n                .setOperation(Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY)\n                .setVolume(lots)\n                .setStopLoss(stopLossPrice)\n                .setTakeProfit(takeProfitPrice)\n                .setSlippage(10)  // 10 points slippage\n                .setComment(\"Buy with SL/TP\")\n                .build();\n\n        var reply = account.orderSend(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 BUY order placed: %s %.2f lots%n\",\n                symbol, lots);\n            System.out.printf(\"   Entry: %.5f%n\", data.getPrice());\n            System.out.printf(\"   Stop Loss: %.5f%n\", stopLossPrice);\n            System.out.printf(\"   Take Profit: %.5f%n\", takeProfitPrice);\n            System.out.printf(\"   Ticket: %d%n\", data.getOrder());\n\n            return data.getOrder();\n        } else {\n            throw new ApiExceptionMT5(String.format(\n                \"Order failed: %s (code: %d)\",\n                data.getComment(), data.getReturnedCode()\n            ));\n        }\n    }\n}\n\n// Usage\nlong ticket = OrderWithProtection.placeBuyWithProtection(\n    account,\n    \"EURUSD\",\n    0.1,        // 0.1 lots\n    1.09500,    // Stop Loss\n    1.10500     // Take Profit\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#3-buy-limit-pending-order","title":"3) Buy Limit pending order","text":"<pre><code>public class PendingOrderPlacer {\n    /**\n     * Place Buy Limit order (buy below current price)\n     */\n    public static long placeBuyLimit(\n            MT5Account account,\n            String symbol,\n            double lots,\n            double limitPrice,\n            double stopLoss,\n            double takeProfit) throws ApiExceptionMT5 {\n\n        Mt5TermApiTradingHelper.OrderSendRequest request =\n            Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                .setSymbol(symbol)\n                .setOperation(Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY_LIMIT)\n                .setVolume(lots)\n                .setPrice(limitPrice)  // Required for pending orders\n                .setStopLoss(stopLoss)\n                .setTakeProfit(takeProfit)\n                .setComment(\"Buy Limit order\")\n                .build();\n\n        var reply = account.orderSend(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10008 || data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 BUY LIMIT order placed at %.5f%n\", limitPrice);\n            System.out.printf(\"   Ticket: %d%n\", data.getOrder());\n            return data.getOrder();\n        } else {\n            throw new ApiExceptionMT5(String.format(\n                \"Failed to place order: %s (code: %d)\",\n                data.getComment(), data.getReturnedCode()\n            ));\n        }\n    }\n}\n\n// Usage - buy when price drops to 1.09000\nlong ticket = PendingOrderPlacer.placeBuyLimit(\n    account,\n    \"EURUSD\",\n    0.1,\n    1.09000,  // Limit price\n    1.08500,  // Stop Loss\n    1.09500   // Take Profit\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#4-order-with-magic-number-ea-tagging","title":"4) Order with magic number (EA tagging)","text":"<pre><code>public class MagicNumberOrder {\n    private static final long EA_MAGIC = 123456;\n\n    /**\n     * Place order with EA identification\n     */\n    public static long placeOrderWithMagic(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots) throws ApiExceptionMT5 {\n\n        var orderType = isBuy\n            ? Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY\n            : Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_SELL;\n\n        Mt5TermApiTradingHelper.OrderSendRequest request =\n            Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                .setSymbol(symbol)\n                .setOperation(orderType)\n                .setVolume(lots)\n                .setExpertId(EA_MAGIC)  // Tag with magic number\n                .setComment(\"EA Order\")\n                .build();\n\n        var reply = account.orderSend(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 %s order placed with magic %d%n\",\n                isBuy ? \"BUY\" : \"SELL\", EA_MAGIC);\n            System.out.printf(\"   Ticket: %d%n\", data.getOrder());\n            return data.getOrder();\n        } else {\n            throw new ApiExceptionMT5(data.getComment());\n        }\n    }\n}\n\n// Usage\nlong ticket = MagicNumberOrder.placeOrderWithMagic(\n    account, \"EURUSD\", true, 0.1\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#5-order-with-expiration-time","title":"5) Order with expiration time","text":"<pre><code>import com.google.protobuf.Timestamp;\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\n\npublic class ExpiringOrder {\n    /**\n     * Place pending order with expiration\n     */\n    public static long placeBuyStopWithExpiration(\n            MT5Account account,\n            String symbol,\n            double lots,\n            double stopPrice,\n            int expirationMinutes) throws ApiExceptionMT5 {\n\n        // Calculate expiration time\n        Instant expiry = Instant.now().plus(expirationMinutes, ChronoUnit.MINUTES);\n        Timestamp expiryTimestamp = Timestamp.newBuilder()\n            .setSeconds(expiry.getEpochSecond())\n            .build();\n\n        Mt5TermApiTradingHelper.OrderSendRequest request =\n            Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                .setSymbol(symbol)\n                .setOperation(Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY_STOP)\n                .setVolume(lots)\n                .setPrice(stopPrice)\n                .setExpirationTimeType(\n                    Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE_TIME.TMT5_ORDER_TIME_SPECIFIED\n                )\n                .setExpirationTime(expiryTimestamp)\n                .setComment(String.format(\"Expires in %d min\", expirationMinutes))\n                .build();\n\n        var reply = account.orderSend(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10008 || data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 BUY STOP at %.5f (expires: %s)%n\",\n                stopPrice, expiry);\n            return data.getOrder();\n        } else {\n            throw new ApiExceptionMT5(data.getComment());\n        }\n    }\n}\n\n// Usage - order expires in 60 minutes\nlong ticket = ExpiringOrder.placeBuyStopWithExpiration(\n    account, \"EURUSD\", 0.1, 1.10500, 60\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#6-calculate-sltp-from-pips","title":"6) Calculate SL/TP from pips","text":"<pre><code>public class OrderWithPipSLTP {\n    /**\n     * Place order with SL/TP in pips\n     */\n    public static long placeOrderWithPips(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            int stopLossPips,\n            int takeProfitPips) throws ApiExceptionMT5 {\n\n        // Get current price\n        var quote = account.symbolInfoTick(symbol);\n        var tick = quote.getData();\n\n        double entryPrice = isBuy ? tick.getAsk() : tick.getBid();\n\n        // Calculate pip value (0.0001 for most pairs, 0.01 for JPY)\n        double pipValue = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n\n        // Calculate SL/TP prices\n        double stopLoss, takeProfit;\n        if (isBuy) {\n            stopLoss = entryPrice - (stopLossPips * pipValue);\n            takeProfit = entryPrice + (takeProfitPips * pipValue);\n        } else {\n            stopLoss = entryPrice + (stopLossPips * pipValue);\n            takeProfit = entryPrice - (takeProfitPips * pipValue);\n        }\n\n        // Place order\n        var orderType = isBuy\n            ? Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY\n            : Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_SELL;\n\n        Mt5TermApiTradingHelper.OrderSendRequest request =\n            Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                .setSymbol(symbol)\n                .setOperation(orderType)\n                .setVolume(lots)\n                .setStopLoss(stopLoss)\n                .setTakeProfit(takeProfit)\n                .setSlippage(10)\n                .setComment(String.format(\"SL:%d TP:%d pips\", stopLossPips, takeProfitPips))\n                .build();\n\n        var reply = account.orderSend(request);\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009) {\n            System.out.printf(\"\u2705 %s %.2f lots %s%n\",\n                isBuy ? \"BUY\" : \"SELL\", lots, symbol);\n            System.out.printf(\"   Entry: %.5f%n\", data.getPrice());\n            System.out.printf(\"   SL: %.5f (%d pips)%n\", stopLoss, stopLossPips);\n            System.out.printf(\"   TP: %.5f (%d pips)%n\", takeProfit, takeProfitPips);\n            return data.getOrder();\n        } else {\n            throw new ApiExceptionMT5(data.getComment());\n        }\n    }\n}\n\n// Usage - 50 pip SL, 100 pip TP\nlong ticket = OrderWithPipSLTP.placeOrderWithPips(\n    account, \"EURUSD\", true, 0.1, 50, 100\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#7-retry-logic-for-order-placement","title":"7) Retry logic for order placement","text":"<pre><code>public class ReliableOrderPlacer {\n    /**\n     * Place order with retry on requote\n     */\n    public static long placeOrderWithRetry(\n            MT5Account account,\n            String symbol,\n            boolean isBuy,\n            double lots,\n            int maxRetries) throws ApiExceptionMT5 {\n\n        var orderType = isBuy\n            ? Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY\n            : Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_SELL;\n\n        for (int attempt = 1; attempt &lt;= maxRetries; attempt++) {\n            Mt5TermApiTradingHelper.OrderSendRequest request =\n                Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n                    .setSymbol(symbol)\n                    .setOperation(orderType)\n                    .setVolume(lots)\n                    .setSlippage(20)  // Allow more slippage\n                    .setComment(String.format(\"Attempt %d\", attempt))\n                    .build();\n\n            var reply = account.orderSend(request);\n            var data = reply.getData();\n\n            if (data.getReturnedCode() == 10009) {\n                System.out.printf(\"\u2705 Order placed on attempt %d%n\", attempt);\n                return data.getOrder();\n            }\n\n            // Check if we should retry\n            if (data.getReturnedCode() == 10006) {  // Requote\n                System.out.printf(\"\u26a0\ufe0f Requote on attempt %d, retrying...%n\", attempt);\n                continue;\n            }\n\n            // Other error - don't retry\n            throw new ApiExceptionMT5(String.format(\n                \"Order failed: %s (code: %d)\",\n                data.getComment(), data.getReturnedCode()\n            ));\n        }\n\n        throw new ApiExceptionMT5(\"Failed after \" + maxRetries + \" attempts\");\n    }\n}\n\n// Usage\nlong ticket = ReliableOrderPlacer.placeOrderWithRetry(\n    account, \"EURUSD\", true, 0.1, 3\n);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#8-advanced-order-builder-class","title":"8) Advanced order builder class","text":"<pre><code>public class OrderBuilder {\n    private final MT5Account account;\n    private String symbol;\n    private Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE orderType;\n    private double volume;\n    private Double price;\n    private Long slippage;\n    private Double stopLoss;\n    private Double takeProfit;\n    private String comment;\n    private Long expertId;\n\n    public OrderBuilder(MT5Account account) {\n        this.account = account;\n    }\n\n    public OrderBuilder symbol(String symbol) {\n        this.symbol = symbol;\n        return this;\n    }\n\n    public OrderBuilder buy(double lots) {\n        this.orderType = Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY;\n        this.volume = lots;\n        return this;\n    }\n\n    public OrderBuilder sell(double lots) {\n        this.orderType = Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_SELL;\n        this.volume = lots;\n        return this;\n    }\n\n    public OrderBuilder buyLimit(double lots, double price) {\n        this.orderType = Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY_LIMIT;\n        this.volume = lots;\n        this.price = price;\n        return this;\n    }\n\n    public OrderBuilder sellLimit(double lots, double price) {\n        this.orderType = Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_SELL_LIMIT;\n        this.volume = lots;\n        this.price = price;\n        return this;\n    }\n\n    public OrderBuilder stopLoss(double price) {\n        this.stopLoss = price;\n        return this;\n    }\n\n    public OrderBuilder takeProfit(double price) {\n        this.takeProfit = price;\n        return this;\n    }\n\n    public OrderBuilder slippage(int points) {\n        this.slippage = (long) points;\n        return this;\n    }\n\n    public OrderBuilder comment(String comment) {\n        this.comment = comment;\n        return this;\n    }\n\n    public OrderBuilder magic(long magic) {\n        this.expertId = magic;\n        return this;\n    }\n\n    /**\n     * Execute the order\n     */\n    public long execute() throws ApiExceptionMT5 {\n        var builder = Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n            .setSymbol(symbol)\n            .setOperation(orderType)\n            .setVolume(volume);\n\n        if (price != null) builder.setPrice(price);\n        if (slippage != null) builder.setSlippage(slippage);\n        if (stopLoss != null) builder.setStopLoss(stopLoss);\n        if (takeProfit != null) builder.setTakeProfit(takeProfit);\n        if (comment != null) builder.setComment(comment);\n        if (expertId != null) builder.setExpertId(expertId);\n\n        var reply = account.orderSend(builder.build());\n        var data = reply.getData();\n\n        if (data.getReturnedCode() == 10009 || data.getReturnedCode() == 10008) {\n            return data.getOrder();\n        } else {\n            throw new ApiExceptionMT5(String.format(\n                \"Order failed: %s (code: %d)\",\n                data.getComment(), data.getReturnedCode()\n            ));\n        }\n    }\n}\n\n// Usage - fluent API\nlong ticket = new OrderBuilder(account)\n    .symbol(\"EURUSD\")\n    .buy(0.1)\n    .stopLoss(1.09500)\n    .takeProfit(1.10500)\n    .slippage(10)\n    .magic(123456)\n    .comment(\"Fluent order\")\n    .execute();\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiTradingHelper.OrderSendRequest request =\n    Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n        .setSymbol(\"EURUSD\")\n        .setOperation(Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY)\n        .setVolume(0.1)\n        .setStopLoss(1.09500)\n        .setTakeProfit(1.10500)\n        .setSlippage(10)\n        .setComment(\"Test order\")\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Send order\nMt5TermApiTradingHelper.OrderSendReply reply = tradingHelperClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .orderSend(request);\n\n// Check result\nif (reply.hasError()) {\n    throw new ApiExceptionMT5(reply.getError());\n}\n\nvar data = reply.getData();\nif (data.getReturnedCode() == 10009) {\n    System.out.printf(\"Success! Ticket: %d%n\", data.getOrder());\n}\n</code></pre>"},{"location":"MT5Account/5.%20Trading/OrderSend/#order-types-guide","title":"\ud83d\udcca Order Types Guide","text":""},{"location":"MT5Account/5.%20Trading/OrderSend/#market-orders-instant-execution","title":"Market Orders (Instant Execution):","text":"<ul> <li>BUY - Buy at current Ask price</li> <li>SELL - Sell at current Bid price</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#pending-orders-activated-at-price","title":"Pending Orders (Activated at Price):","text":"<ul> <li>BUY LIMIT - Buy when price drops to limit (below current)</li> <li>SELL LIMIT - Sell when price rises to limit (above current)</li> <li>BUY STOP - Buy when price breaks above stop (above current)</li> <li>SELL STOP - Sell when price breaks below stop (below current)</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#slippage","title":"Slippage:","text":"<ul> <li>Measured in points (not pips)</li> <li>For EURUSD: 10 points = 1 pip</li> <li>0 = no slippage allowed (may cause rejections)</li> <li>10-50 typical for market orders</li> </ul>"},{"location":"MT5Account/5.%20Trading/OrderSend/#return-codes","title":"Return Codes:","text":"<ul> <li><code>10009</code> - DONE - Order executed</li> <li><code>10008</code> - PLACED - Pending order placed</li> <li><code>10004</code> - REJECT - Request rejected</li> <li><code>10006</code> - REQUOTE - Price changed, retry</li> <li><code>10019</code> - NO_MONEY - Insufficient funds</li> </ul>"},{"location":"MT5Account/5.%20Trading/Trading.Overview/","title":"MT5Account \u00b7 Trading - Overview","text":"<p>Order execution, position management, margin calculations, and trade validation. Use this page to choose the right API for trading operations and pre-trade calculations.</p>"},{"location":"MT5Account/5.%20Trading/Trading.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>OrderSend - place orders (market or pending) to open positions.</li> <li>OrderModify - modify existing positions or pending orders (SL/TP/price/expiration).</li> <li>OrderClose - close positions or delete pending orders (full or partial).</li> <li>OrderCalcMargin - calculate margin required for a trade (pre-trade check).</li> <li>OrderCalcProfit - calculate profit/loss for a trade scenario (risk/reward analysis).</li> <li>OrderCheck - validate trade request before sending (check funds, margin, parameters).</li> </ul>"},{"location":"MT5Account/5.%20Trading/Trading.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>OrderSend \u2192 execute trades (market BUY/SELL or pending orders).</li> <li>OrderModify \u2192 change SL/TP or order parameters after placement.</li> <li>OrderClose \u2192 exit positions or cancel pending orders.</li> <li>OrderCalcMargin \u2192 \"How much margin do I need?\" before placing order.</li> <li>OrderCalcProfit \u2192 \"How much will I make/lose?\" for profit targets and stop losses.</li> <li>OrderCheck \u2192 \"Can I afford this trade?\" validation before execution.</li> </ul> <p>Rule of thumb: Calculate first (CalcMargin, CalcProfit, OrderCheck) \u2192 then execute (OrderSend) \u2192 then manage (OrderModify, OrderClose).</p>"},{"location":"MT5Account/5.%20Trading/Trading.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Key inputs Open position or place pending order <code>OrderSend</code> Order/deal ticket Symbol, operation, volume, price, SL/TP Modify SL/TP or order parameters <code>OrderModify</code> Success/failure Ticket, new SL/TP/price/expiration Close position or cancel pending order <code>OrderClose</code> Success/failure Ticket, volume, slippage Calculate margin required for trade <code>OrderCalcMargin</code> Margin amount Symbol, order type, volume, price Calculate profit/loss for trade scenario <code>OrderCalcProfit</code> P/L amount Symbol, order type, volume, open/close price Validate trade before execution <code>OrderCheck</code> Validation result + estimates Trade request object"},{"location":"MT5Account/5.%20Trading/Trading.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Return code 10009 = success; other codes = failure (check comment).</li> <li>Slippage in points, not pips (EURUSD: 10 points = 1 pip for 5-digit).</li> <li>Market orders: price optional (use 0 or current ask/bid).</li> <li>Pending orders: price required, must be away from current price.</li> <li>SL/TP distance: must meet symbol's Stops Level (see SymbolInfoInteger).</li> <li>Partial close: specify volume &lt; position volume.</li> <li>Margin calculation: returns margin in account currency.</li> <li>Profit calculation: excludes commission, swap, spread.</li> <li>OrderCheck: validates parameters and funds, but doesn't execute.</li> <li>Magic numbers: use to identify your orders (Expert Advisor ID).</li> </ul>"},{"location":"MT5Account/5.%20Trading/Trading.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Open market BUY position\nvar request = Mt5TermApiTradingHelper.OrderSendRequest.newBuilder()\n    .setSymbol(\"EURUSD\")\n    .setOperation(Mt5TermApiTradingHelper.TMT5_ENUM_ORDER_TYPE.TMT5_ORDER_TYPE_BUY)\n    .setVolume(0.1)\n    .setSlippage(10)\n    .setStopLoss(1.08000)\n    .setTakeProfit(1.12000)\n    .build();\n\nvar reply = account.orderSend(request);\nif (reply.getData().getReturnedCode() == 10009) {\n    System.out.printf(\"\u2705 Position opened: #%d%n\", reply.getData().getOrder());\n}\n</code></pre> <pre><code>// Modify SL/TP of existing position\nvar request = Mt5TermApiTradingHelper.OrderModifyRequest.newBuilder()\n    .setTicket(123456789)\n    .setStopLoss(1.09000)\n    .setTakeProfit(1.11000)\n    .build();\n\nvar reply = account.orderModify(request);\nif (reply.getData().getReturnedCode() == 10009) {\n    System.out.println(\"\u2705 SL/TP modified\");\n}\n</code></pre> <pre><code>// Close position (full close: volume = 0)\nvar reply = account.orderClose(123456789, 0.0, 10);\nif (reply.getData().getReturnedCode() == 10009) {\n    System.out.println(\"\u2705 Position closed\");\n}\n</code></pre> <pre><code>// Calculate margin before trading\nvar reply = account.orderCalcMargin(\n    \"GBPUSD\",\n    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n    1.0,  // 1 lot\n    0.0   // current price\n);\ndouble margin = reply.getData().getMargin();\nSystem.out.printf(\"Required margin: $%.2f%n\", margin);\n</code></pre> <pre><code>// Calculate profit for trade scenario\nvar reply = account.orderCalcProfit(\n    \"EURUSD\",\n    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n    1.0,      // 1 lot\n    1.10000,  // entry\n    1.10500   // exit\n);\ndouble profit = reply.getData().getProfit();\nSystem.out.printf(\"Potential profit: $%.2f%n\", profit);\n</code></pre> <pre><code>// Validate trade before execution\nvar tradeRequest = Mt5TermApiTradeFunctions.MrpcMqlTradeRequest.newBuilder()\n    .setAction(Mt5TermApiTradeFunctions.MRPC_ENUM_TRADE_REQUEST_ACTIONS.TRADE_ACTION_DEAL)\n    .setSymbol(\"XAUUSD\")\n    .setVolume(0.1)\n    .setOrderType(Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY)\n    .build();\n\nvar reply = account.orderCheck(tradeRequest);\nvar result = reply.getData().getMqlTradeCheckResult();\n\nif (result.getReturnedCode() == 10009) {\n    System.out.printf(\"\u2705 Trade valid | Margin: $%.2f | Free margin after: $%.2f%n\",\n        result.getMargin(), result.getFreeMargin());\n} else {\n    System.out.printf(\"\u274c Trade invalid: %s%n\", result.getComment());\n}\n</code></pre> <pre><code>// Risk/reward calculation\ndouble entry = 1.10000;\ndouble stopLoss = 1.09500;\ndouble takeProfit = 1.11000;\n\n// Calculate loss at SL\nvar lossReply = account.orderCalcProfit(\"EURUSD\",\n    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n    1.0, entry, stopLoss);\ndouble loss = Math.abs(lossReply.getData().getProfit());\n\n// Calculate profit at TP\nvar profitReply = account.orderCalcProfit(\"EURUSD\",\n    Mt5TermApiTradeFunctions.ENUM_ORDER_TYPE_TF.ORDER_TYPE_TF_BUY,\n    1.0, entry, takeProfit);\ndouble profit = profitReply.getData().getProfit();\n\ndouble riskReward = profit / loss;\nSystem.out.printf(\"Risk/Reward: 1:%.2f%n\", riskReward);\n</code></pre>"},{"location":"MT5Account/5.%20Trading/Trading.Overview/#see-also","title":"See also","text":"<ul> <li>Subscriptions: <code>OnTrade</code> - real-time trade execution events</li> <li>Subscriptions: <code>OnTradeTransaction</code> - detailed transaction log</li> <li>Positions: <code>OpenedOrders</code> - view current positions</li> <li>Account: <code>AccountSummary</code> - check available margin</li> <li>Symbol info: <code>SymbolInfoDouble</code> - get stops level, min volume</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/","title":"\ud83d\udcb0 Subscribe to Position Profit Updates (P/L Monitoring Stream)","text":"<p>Request: subscribe to periodic updates of position profit/loss values. Receives profit changes at regular intervals for all open positions as market prices fluctuate.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.onPositionProfit(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnPositionProfit</code> (defined in <code>mt5-term-api-subscriptions.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnPositionProfit(OnPositionProfitRequest) \u2192 stream OnPositionProfitReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceGrpc.SubscriptionServiceStub.onPositionProfit(request, observer)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Subscribes to periodic updates of position profit/loss values.\n     * Receives profit updates at regular intervals for all open positions.\n     * Use this to monitor unrealized P&amp;L in real-time and implement profit-based exit strategies.\n     *\n     * @param timerPeriodMilliseconds Update interval in milliseconds\n     * @param ignoreEmptyData If true, skips updates when profit values haven't changed\n     * @param responseObserver Observer to receive streaming position profit updates\n     * @throws ApiExceptionMT5 if the subscription fails or connection is lost\n     */\n    public void onPositionProfit(\n        int timerPeriodMilliseconds,\n        boolean ignoreEmptyData,\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; responseObserver\n    ) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#input-onpositionprofitrequest","title":"\ud83d\udd3d Input - <code>OnPositionProfitRequest</code>","text":"Parameter Type Required Description <code>timer_period_milliseconds</code> <code>int32</code> \u2705 Update interval in milliseconds (e.g., 1000 = 1 sec) <code>ignore_empty_data</code> <code>bool</code> \u2705 Skip updates if no profit changes (recommended: false)"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#output-onpositionprofitdata-stream","title":"\u2b06\ufe0f Output - <code>OnPositionProfitData</code> (stream)","text":"<p>Each update contains:</p> Field Type Description <code>new_positions</code> <code>OnPositionProfitPositionInfo[]</code> Newly opened positions since last update <code>updated_positions</code> <code>OnPositionProfitPositionInfo[]</code> Positions with profit changes <code>deleted_positions</code> <code>OnPositionProfitPositionInfo[]</code> Positions closed since last update <code>account_info</code> <code>OnEventAccountInfo</code> Current account balance, equity, margin <p>Access using <code>reply.getData().&lt;field&gt;</code>.</p>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#position-info-fields-onpositionprofitpositioninfo","title":"Position Info Fields (<code>OnPositionProfitPositionInfo</code>)","text":"Field Type Description <code>index</code> <code>int32</code> Position index <code>ticket</code> <code>int64</code> Position ticket number <code>profit</code> <code>double</code> Current profit/loss in account currency <code>position_symbol</code> <code>String</code> Trading symbol"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#account-info-fields-oneventaccountinfo","title":"Account Info Fields (<code>OnEventAccountInfo</code>)","text":"Field Type Description <code>balance</code> <code>double</code> Account balance <code>credit</code> <code>double</code> Credit amount <code>equity</code> <code>double</code> Current equity (balance + profit) <code>margin</code> <code>double</code> Used margin <code>free_margin</code> <code>double</code> Free margin available <code>profit</code> <code>double</code> Total profit across all positions <code>margin_level</code> <code>double</code> Margin level (equity/margin * 100) <code>login</code> <code>int64</code> Account login number"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Periodic updates of position P/L values.</li> <li>Why you need it. Track profit changes, implement stop strategies.</li> <li>Returns. Position profits + account equity at regular intervals.</li> <li>Set interval. You control update frequency (milliseconds).</li> <li>Filter option. Skip updates if nothing changed (<code>ignore_empty_data</code>).</li> <li>Risk management. Essential for monitoring drawdown and profit targets.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Monitor unrealized profit/loss in real-time.</li> <li>Implement trailing stop strategies based on profit.</li> <li>Track total account equity changes.</li> <li>Detect when profit reaches targets.</li> <li>Calculate real-time drawdown.</li> <li>Build profit-based alert systems.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#1-basic-profit-monitoring","title":"1) Basic profit monitoring","text":"<pre><code>import io.grpc.stub.StreamObserver;\nimport io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiSubscriptions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; observer =\n                new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt;() {\n\n                @Override\n                public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n                    if (reply.hasData()) {\n                        var data = reply.getData();\n                        var accountInfo = data.getAccountInfo();\n\n                        System.out.printf(\"\\n\ud83d\udcb0 PROFIT UPDATE:%n\");\n                        System.out.printf(\"  Balance: $%.2f%n\", accountInfo.getBalance());\n                        System.out.printf(\"  Equity: $%.2f%n\", accountInfo.getEquity());\n                        System.out.printf(\"  Total Profit: $%.2f%n\", accountInfo.getProfit());\n                        System.out.printf(\"  Margin Level: %.2f%%%n\", accountInfo.getMarginLevel());\n\n                        // Show individual positions\n                        for (int i = 0; i &lt; data.getUpdatedPositionsCount(); i++) {\n                            var pos = data.getUpdatedPositions(i);\n                            System.out.printf(\"    #%d %s: $%.2f%n\",\n                                pos.getTicket(),\n                                pos.getPositionSymbol(),\n                                pos.getProfit());\n                        }\n                    }\n                }\n\n                @Override\n                public void onError(Throwable t) {\n                    System.err.println(\"Profit stream error: \" + t.getMessage());\n                }\n\n                @Override\n                public void onCompleted() {\n                    System.out.println(\"Profit stream completed\");\n                }\n            };\n\n            // Update every 1000ms (1 second), don't skip empty updates\n            account.onPositionProfit(1000, false, observer);\n\n            // Keep alive\n            Thread.sleep(60000); // 1 minute\n\n        } catch (Exception e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#2-profit-target-monitor-with-auto-close","title":"2) Profit target monitor with auto-close","text":"<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class ProfitTargetMonitor {\n    /**\n     * Monitor positions and close when profit target reached\n     */\n    public static void monitorProfitTargets(\n            MT5Account account,\n            double profitTargetPerPosition) throws Exception {\n\n        Map&lt;Long, Double&gt; positionTargets = new HashMap&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n\n                    // Track new positions\n                    for (int i = 0; i &lt; data.getNewPositionsCount(); i++) {\n                        var pos = data.getNewPositions(i);\n                        positionTargets.put(pos.getTicket(), profitTargetPerPosition);\n                        System.out.printf(\"\ud83d\udccd Tracking #%d %s (target: $%.2f)%n\",\n                            pos.getTicket(),\n                            pos.getPositionSymbol(),\n                            profitTargetPerPosition);\n                    }\n\n                    // Check updated positions for profit target\n                    for (int i = 0; i &lt; data.getUpdatedPositionsCount(); i++) {\n                        var pos = data.getUpdatedPositions(i);\n                        long ticket = pos.getTicket();\n\n                        if (positionTargets.containsKey(ticket)) {\n                            double target = positionTargets.get(ticket);\n                            double profit = pos.getProfit();\n\n                            System.out.printf(\"  #%d %s: $%.2f / $%.2f%n\",\n                                ticket,\n                                pos.getPositionSymbol(),\n                                profit,\n                                target);\n\n                            // Check if target reached\n                            if (profit &gt;= target) {\n                                System.out.printf(\"\\n\ud83c\udfaf PROFIT TARGET REACHED - Closing #%d%n\", ticket);\n                                System.out.printf(\"   Profit: $%.2f (target was $%.2f)%n\",\n                                    profit, target);\n\n                                try {\n                                    // Close position\n                                    var reply = account.orderClose(ticket, 0.0, 10);\n\n                                    if (reply.getData().getReturnedCode() == 10009) {\n                                        System.out.println(\"   \u2705 Position closed successfully\");\n                                        positionTargets.remove(ticket);\n                                    } else {\n                                        System.out.println(\"   \u274c Failed to close: \" +\n                                            reply.getData().getComment());\n                                    }\n                                } catch (Exception e) {\n                                    System.err.println(\"   Error closing: \" + e.getMessage());\n                                }\n                            }\n                        }\n                    }\n\n                    // Remove deleted positions from tracking\n                    for (int i = 0; i &lt; data.getDeletedPositionsCount(); i++) {\n                        var pos = data.getDeletedPositions(i);\n                        positionTargets.remove(pos.getTicket());\n                        System.out.printf(\"\u274c Position #%d closed (final P/L: $%.2f)%n\",\n                            pos.getTicket(), pos.getProfit());\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Target monitor error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Target monitoring completed\");\n            }\n        };\n\n        System.out.printf(\"Monitoring profit targets ($%.2f per position)%n\",\n            profitTargetPerPosition);\n\n        account.onPositionProfit(1000, false, observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage - close positions when they reach $100 profit\nProfitTargetMonitor.monitorProfitTargets(account, 100.0);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#3-drawdown-monitor-with-alerts","title":"3) Drawdown monitor with alerts","text":"<pre><code>import java.util.concurrent.atomic.AtomicReference;\n\npublic class DrawdownMonitor {\n    /**\n     * Monitor account drawdown and send alerts\n     */\n    public static void monitorDrawdown(\n            MT5Account account,\n            double maxDrawdownPercent) throws Exception {\n\n        AtomicReference&lt;Double&gt; startingBalance = new AtomicReference&lt;&gt;(null);\n        AtomicReference&lt;Double&gt; peakEquity = new AtomicReference&lt;&gt;(null);\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n                if (reply.hasData()) {\n                    var accountInfo = reply.getData().getAccountInfo();\n                    double balance = accountInfo.getBalance();\n                    double equity = accountInfo.getEquity();\n                    double profit = accountInfo.getProfit();\n\n                    // Initialize on first update\n                    if (startingBalance.get() == null) {\n                        startingBalance.set(balance);\n                        peakEquity.set(equity);\n                        System.out.printf(\"\ud83d\udcca Drawdown monitoring started%n\");\n                        System.out.printf(\"   Starting balance: $%.2f%n\", balance);\n                        System.out.printf(\"   Max drawdown threshold: %.1f%%%n\", maxDrawdownPercent);\n                        return;\n                    }\n\n                    // Update peak equity\n                    if (equity &gt; peakEquity.get()) {\n                        peakEquity.set(equity);\n                    }\n\n                    // Calculate drawdown from peak\n                    double drawdownAmount = peakEquity.get() - equity;\n                    double drawdownPercent = (drawdownAmount / peakEquity.get()) * 100;\n\n                    // Calculate drawdown from starting balance\n                    double totalDrawdown = startingBalance.get() - equity;\n                    double totalDrawdownPercent = (totalDrawdown / startingBalance.get()) * 100;\n\n                    System.out.printf(\"\\n\ud83d\udcb9 Equity: $%.2f | Profit: $%.2f%n\", equity, profit);\n                    System.out.printf(\"   Peak: $%.2f | Current DD: %.2f%% ($%.2f)%n\",\n                        peakEquity.get(), drawdownPercent, drawdownAmount);\n                    System.out.printf(\"   From start: %.2f%% ($%.2f)%n\",\n                        totalDrawdownPercent, totalDrawdown);\n\n                    // Alert on high drawdown\n                    if (drawdownPercent &gt;= maxDrawdownPercent) {\n                        System.out.printf(\"\\n\u26a0\ufe0f  HIGH DRAWDOWN ALERT! \u26a0\ufe0f%n\");\n                        System.out.printf(\"   Current: %.2f%% (threshold: %.1f%%)%n\",\n                            drawdownPercent, maxDrawdownPercent);\n                        System.out.printf(\"   Consider reducing risk or closing positions%n\");\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Drawdown monitor error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Drawdown monitoring completed\");\n            }\n        };\n\n        account.onPositionProfit(2000, false, observer); // Update every 2 seconds\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage - alert on 10% drawdown\nDrawdownMonitor.monitorDrawdown(account, 10.0);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#4-position-performance-tracker","title":"4) Position performance tracker","text":"<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class PositionPerformanceTracker {\n    static class PositionStats {\n        double maxProfit = 0;\n        double maxLoss = 0;\n        int updateCount = 0;\n    }\n\n    /**\n     * Track performance metrics for each position\n     */\n    public static void trackPerformance(MT5Account account) throws Exception {\n\n        Map&lt;Long, PositionStats&gt; positionStats = new HashMap&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n\n                    // Initialize new positions\n                    for (int i = 0; i &lt; data.getNewPositionsCount(); i++) {\n                        var pos = data.getNewPositions(i);\n                        positionStats.put(pos.getTicket(), new PositionStats());\n                        System.out.printf(\"\ud83d\udcc8 Tracking #%d %s%n\",\n                            pos.getTicket(), pos.getPositionSymbol());\n                    }\n\n                    // Update statistics\n                    for (int i = 0; i &lt; data.getUpdatedPositionsCount(); i++) {\n                        var pos = data.getUpdatedPositions(i);\n                        long ticket = pos.getTicket();\n                        double profit = pos.getProfit();\n\n                        PositionStats stats = positionStats.computeIfAbsent(\n                            ticket, k -&gt; new PositionStats()\n                        );\n\n                        stats.updateCount++;\n\n                        if (profit &gt; stats.maxProfit) {\n                            stats.maxProfit = profit;\n                            System.out.printf(\"\ud83d\udfe2 #%d %s - New peak: $%.2f%n\",\n                                ticket, pos.getPositionSymbol(), profit);\n                        }\n\n                        if (profit &lt; stats.maxLoss) {\n                            stats.maxLoss = profit;\n                            System.out.printf(\"\ud83d\udd34 #%d %s - New low: $%.2f%n\",\n                                ticket, pos.getPositionSymbol(), profit);\n                        }\n                    }\n\n                    // Report closed positions\n                    for (int i = 0; i &lt; data.getDeletedPositionsCount(); i++) {\n                        var pos = data.getDeletedPositions(i);\n                        long ticket = pos.getTicket();\n\n                        if (positionStats.containsKey(ticket)) {\n                            PositionStats stats = positionStats.get(ticket);\n\n                            System.out.printf(\"\\n\ud83d\udcca POSITION #%d %s CLOSED:%n\",\n                                ticket, pos.getPositionSymbol());\n                            System.out.printf(\"   Final P/L: $%.2f%n\", pos.getProfit());\n                            System.out.printf(\"   Max Profit: $%.2f%n\", stats.maxProfit);\n                            System.out.printf(\"   Max Loss: $%.2f%n\", stats.maxLoss);\n                            System.out.printf(\"   Updates: %d%n\", stats.updateCount);\n\n                            double unrealizedGain = stats.maxProfit - pos.getProfit();\n                            if (unrealizedGain &gt; 0) {\n                                System.out.printf(\"   Gave back: $%.2f%n\", unrealizedGain);\n                            }\n\n                            positionStats.remove(ticket);\n                        }\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Performance tracker error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Performance tracking completed\");\n            }\n        };\n\n        System.out.println(\"Tracking position performance...\");\n        account.onPositionProfit(1000, false, observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nPositionPerformanceTracker.trackPerformance(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#5-equity-curve-logger","title":"5) Equity curve logger","text":"<pre><code>import java.io.FileWriter;\nimport java.io.PrintWriter;\nimport java.time.Instant;\n\npublic class EquityCurveLogger {\n    /**\n     * Log equity curve to CSV for analysis\n     */\n    public static void logEquityCurve(MT5Account account, String filename)\n            throws Exception {\n\n        PrintWriter writer = new PrintWriter(new FileWriter(filename));\n        writer.println(\"Timestamp,Balance,Equity,Profit,Margin,FreeMargin,MarginLevel\");\n        writer.flush();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n                if (reply.hasData()) {\n                    var accountInfo = reply.getData().getAccountInfo();\n\n                    String timestamp = Instant.now().toString();\n\n                    // Write to CSV\n                    writer.printf(\"%s,%.2f,%.2f,%.2f,%.2f,%.2f,%.2f%n\",\n                        timestamp,\n                        accountInfo.getBalance(),\n                        accountInfo.getEquity(),\n                        accountInfo.getProfit(),\n                        accountInfo.getMargin(),\n                        accountInfo.getFreeMargin(),\n                        accountInfo.getMarginLevel());\n\n                    writer.flush();\n\n                    System.out.printf(\"\ud83d\udcca %s | Equity: $%.2f | Profit: $%.2f%n\",\n                        timestamp,\n                        accountInfo.getEquity(),\n                        accountInfo.getProfit());\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Equity logger error: \" + t.getMessage());\n                writer.close();\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Equity logging completed\");\n                writer.close();\n            }\n        };\n\n        System.out.printf(\"Logging equity curve to %s%n\", filename);\n        account.onPositionProfit(5000, false, observer); // Every 5 seconds\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nEquityCurveLogger.logEquityCurve(account, \"equity_curve.csv\");\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport io.grpc.stub.StreamObserver;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiSubscriptions.OnPositionProfitRequest request =\n    Mt5TermApiSubscriptions.OnPositionProfitRequest.newBuilder()\n        .setTimerPeriodMilliseconds(1000)  // 1 second\n        .setIgnoreEmptyData(false)         // Don't skip empty updates\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Create observer\nStreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; observer =\n    new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n            if (reply.hasData()) {\n                var data = reply.getData();\n                // Process profit updates\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            // Handle error\n        }\n\n        @Override\n        public void onCompleted() {\n            // Handle completion\n        }\n    };\n\n// Subscribe\nsubscriptionClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .onPositionProfit(request, observer);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionProfit/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Update Frequency: - You control update interval (milliseconds) - Lower interval = more updates = more CPU/network - Recommended: 1000-5000ms for real-time monitoring - Too frequent = unnecessary load - Too slow = delayed reactions</p> <p>Ignore Empty Data: - <code>false</code> = always receive updates (recommended) - <code>true</code> = skip if no profit changes - Use <code>false</code> for equity curve logging - Use <code>true</code> to reduce bandwidth if only tracking changes</p> <p>Position Types: - New positions - opened since last update - Updated positions - profit changed - Deleted positions - closed since last update</p> <p>Account Info: - Included in every update - Shows total account state - Use for margin level monitoring - Critical for risk management</p> <p>Thread Safety: - Updates arrive on gRPC thread - Use thread-safe collections - Synchronize access to shared state - Consider concurrent data structures</p> <p>Best Practices: - Choose appropriate update interval - Log equity curve for analysis - Monitor margin level continuously - Implement drawdown alerts - Track peak equity for drawdown calculation - Use for trailing stop implementation</p> <p>Common Use Cases: - Real-time profit monitoring - Trailing stop strategies - Drawdown alerts - Profit target automation - Equity curve generation - Risk management systems</p> <p>Performance: - Updates fire at regular intervals - Processing should be fast - Offload heavy work to separate thread - Consider batching operations - Monitor memory for long-running streams</p> <p>Error Handling: - Connection loss triggers <code>onError()</code> - Reconnect automatically - May miss updates during disconnect - Query current state after reconnect</p>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/","title":"\ud83c\udfab Subscribe to Position &amp; Order Tickets (State Tracking Stream)","text":"<p>Request: subscribe to periodic updates of position and pending order ticket numbers. Receives lists of currently open position tickets and pending order tickets at regular intervals without full position details.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.onPositionsAndPendingOrdersTickets(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnPositionsAndPendingOrdersTickets</code> (defined in <code>mt5-term-api-subscriptions.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnPositionsAndPendingOrdersTickets(OnPositionsAndPendingOrdersTicketsRequest) \u2192 stream OnPositionsAndPendingOrdersTicketsReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceGrpc.SubscriptionServiceStub.onPositionsAndPendingOrdersTickets(request, observer)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Subscribes to periodic updates of position and pending order ticket numbers.\n     * Receives lists of currently open position tickets and pending order tickets at regular intervals.\n     * Use this to efficiently track which positions/orders exist without retrieving full details.\n     *\n     * @param timerPeriodMilliseconds Update interval in milliseconds\n     * @param responseObserver Observer to receive streaming ticket lists\n     * @throws ApiExceptionMT5 if the subscription fails or connection is lost\n     */\n    public void onPositionsAndPendingOrdersTickets(\n        int timerPeriodMilliseconds,\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; responseObserver\n    ) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#input-onpositionsandpendingordersticketsrequest","title":"\ud83d\udd3d Input - <code>OnPositionsAndPendingOrdersTicketsRequest</code>","text":"Parameter Type Required Description <code>timer_period_milliseconds</code> <code>int32</code> \u2705 Update interval in milliseconds (e.g., 1000 = 1 sec)"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#output-onpositionsandpendingordersticketsdata-stream","title":"\u2b06\ufe0f Output - <code>OnPositionsAndPendingOrdersTicketsData</code> (stream)","text":"<p>Each update contains:</p> Field Type Description <code>position_tickets</code> <code>uint64[]</code> Array of currently open position ticket numbers <code>pending_order_tickets</code> <code>uint64[]</code> Array of pending order ticket numbers <code>server_time</code> <code>Timestamp</code> Current server time <p>Access using <code>reply.getData().&lt;field&gt;</code>.</p> <p>Important: - Returns only ticket numbers, not full position/order details - Lightweight alternative to full position queries - Use to detect opens/closes by comparing arrays - Query full details separately when needed</p>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Periodic list of position &amp; order ticket numbers.</li> <li>Why you need it. Lightweight tracking of which positions/orders exist.</li> <li>Returns. Arrays of ticket numbers at regular intervals.</li> <li>No full details. Just ticket numbers - efficient for state tracking.</li> <li>Detect changes. Compare arrays to find opens/closes.</li> <li>Query details. Fetch full position data separately when needed.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Track which positions/orders are currently open.</li> <li>Detect when positions are opened or closed.</li> <li>Monitor pending order placements/cancellations.</li> <li>Efficiently poll account state without heavy queries.</li> <li>Build lightweight position tracking systems.</li> <li>Synchronize external systems with MT5 state.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#1-basic-ticket-monitoring","title":"1) Basic ticket monitoring","text":"<pre><code>import io.grpc.stub.StreamObserver;\nimport io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiSubscriptions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; observer =\n                new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt;() {\n\n                @Override\n                public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n                    if (reply.hasData()) {\n                        var data = reply.getData();\n\n                        int positionCount = data.getPositionTicketsCount();\n                        int orderCount = data.getPendingOrderTicketsCount();\n\n                        System.out.printf(\"\\n\ud83c\udfab TICKETS UPDATE:%n\");\n                        System.out.printf(\"  Open Positions: %d%n\", positionCount);\n                        System.out.printf(\"  Pending Orders: %d%n\", orderCount);\n\n                        if (positionCount &gt; 0) {\n                            System.out.print(\"  Position tickets: \");\n                            for (int i = 0; i &lt; positionCount; i++) {\n                                System.out.printf(\"#%d \", data.getPositionTickets(i));\n                            }\n                            System.out.println();\n                        }\n\n                        if (orderCount &gt; 0) {\n                            System.out.print(\"  Order tickets: \");\n                            for (int i = 0; i &lt; orderCount; i++) {\n                                System.out.printf(\"#%d \", data.getPendingOrderTickets(i));\n                            }\n                            System.out.println();\n                        }\n                    }\n                }\n\n                @Override\n                public void onError(Throwable t) {\n                    System.err.println(\"Tickets stream error: \" + t.getMessage());\n                }\n\n                @Override\n                public void onCompleted() {\n                    System.out.println(\"Tickets stream completed\");\n                }\n            };\n\n            // Update every 2000ms (2 seconds)\n            account.onPositionsAndPendingOrdersTickets(2000, observer);\n\n            // Keep alive\n            Thread.sleep(60000); // 1 minute\n\n        } catch (Exception e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#2-detect-position-opens-and-closes","title":"2) Detect position opens and closes","text":"<pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class PositionChangeDetector {\n    /**\n     * Detect when positions are opened or closed\n     */\n    public static void detectChanges(MT5Account account) throws Exception {\n\n        Set&lt;Long&gt; previousPositions = new HashSet&lt;&gt;();\n        Set&lt;Long&gt; previousOrders = new HashSet&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n\n                    // Current position tickets\n                    Set&lt;Long&gt; currentPositions = new HashSet&lt;&gt;();\n                    for (int i = 0; i &lt; data.getPositionTicketsCount(); i++) {\n                        currentPositions.add(data.getPositionTickets(i));\n                    }\n\n                    // Current order tickets\n                    Set&lt;Long&gt; currentOrders = new HashSet&lt;&gt;();\n                    for (int i = 0; i &lt; data.getPendingOrderTicketsCount(); i++) {\n                        currentOrders.add(data.getPendingOrderTickets(i));\n                    }\n\n                    // Detect new positions\n                    Set&lt;Long&gt; newPositions = new HashSet&lt;&gt;(currentPositions);\n                    newPositions.removeAll(previousPositions);\n                    for (Long ticket : newPositions) {\n                        System.out.printf(\"\u2705 NEW POSITION OPENED: #%d%n\", ticket);\n                    }\n\n                    // Detect closed positions\n                    Set&lt;Long&gt; closedPositions = new HashSet&lt;&gt;(previousPositions);\n                    closedPositions.removeAll(currentPositions);\n                    for (Long ticket : closedPositions) {\n                        System.out.printf(\"\u274c POSITION CLOSED: #%d%n\", ticket);\n                    }\n\n                    // Detect new orders\n                    Set&lt;Long&gt; newOrders = new HashSet&lt;&gt;(currentOrders);\n                    newOrders.removeAll(previousOrders);\n                    for (Long ticket : newOrders) {\n                        System.out.printf(\"\ud83d\udcdd PENDING ORDER PLACED: #%d%n\", ticket);\n                    }\n\n                    // Detect canceled/executed orders\n                    Set&lt;Long&gt; removedOrders = new HashSet&lt;&gt;(previousOrders);\n                    removedOrders.removeAll(currentOrders);\n                    for (Long ticket : removedOrders) {\n                        System.out.printf(\"\ud83d\uddd1\ufe0f  PENDING ORDER REMOVED: #%d%n\", ticket);\n                    }\n\n                    // Update previous state\n                    previousPositions = currentPositions;\n                    previousOrders = currentOrders;\n\n                    // Status summary\n                    if (newPositions.isEmpty() &amp;&amp; closedPositions.isEmpty() &amp;&amp;\n                        newOrders.isEmpty() &amp;&amp; removedOrders.isEmpty()) {\n                        System.out.printf(\"\u23f8\ufe0f  No changes | Positions: %d | Orders: %d%n\",\n                            currentPositions.size(), currentOrders.size());\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Change detector error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Change detection completed\");\n            }\n        };\n\n        System.out.println(\"Detecting position/order changes...\");\n        account.onPositionsAndPendingOrdersTickets(1000, observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nPositionChangeDetector.detectChanges(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#3-position-limit-enforcer","title":"3) Position limit enforcer","text":"<pre><code>public class PositionLimitEnforcer {\n    /**\n     * Enforce maximum number of open positions\n     */\n    public static void enforceLimit(MT5Account account, int maxPositions) throws Exception {\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n                    int positionCount = data.getPositionTicketsCount();\n\n                    System.out.printf(\"\ud83d\udcca Positions: %d/%d%n\", positionCount, maxPositions);\n\n                    if (positionCount &gt; maxPositions) {\n                        System.out.printf(\"\\n\u26a0\ufe0f  LIMIT EXCEEDED! \u26a0\ufe0f%n\");\n                        System.out.printf(\"   Current: %d positions%n\", positionCount);\n                        System.out.printf(\"   Maximum: %d positions%n\", maxPositions);\n                        System.out.printf(\"   Excess: %d positions%n\", positionCount - maxPositions);\n\n                        // Close excess positions (oldest first)\n                        int toClose = positionCount - maxPositions;\n                        System.out.printf(\"   Closing %d oldest positions...%n\", toClose);\n\n                        for (int i = 0; i &lt; toClose &amp;&amp; i &lt; data.getPositionTicketsCount(); i++) {\n                            long ticket = data.getPositionTickets(i);\n\n                            try {\n                                System.out.printf(\"   Closing #%d...%n\", ticket);\n                                var closeReply = account.orderClose(ticket, 0.0, 10);\n\n                                if (closeReply.getData().getReturnedCode() == 10009) {\n                                    System.out.printf(\"   \u2705 Closed #%d%n\", ticket);\n                                } else {\n                                    System.out.printf(\"   \u274c Failed to close #%d: %s%n\",\n                                        ticket, closeReply.getData().getComment());\n                                }\n                            } catch (Exception e) {\n                                System.err.printf(\"   Error closing #%d: %s%n\",\n                                    ticket, e.getMessage());\n                            }\n                        }\n                    } else if (positionCount == maxPositions) {\n                        System.out.println(\"\u26a0\ufe0f  At maximum capacity\");\n                    } else {\n                        System.out.printf(\"\u2705 Within limit (%d available)%n\",\n                            maxPositions - positionCount);\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Limit enforcer error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Limit enforcement completed\");\n            }\n        };\n\n        System.out.printf(\"Enforcing position limit: %d%n\", maxPositions);\n        account.onPositionsAndPendingOrdersTickets(2000, observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage - max 5 positions\nPositionLimitEnforcer.enforceLimit(account, 5);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#4-synchronize-external-database","title":"4) Synchronize external database","text":"<pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class DatabaseSynchronizer {\n    /**\n     * Keep external database in sync with MT5 positions\n     */\n    public static void synchronize(MT5Account account) throws Exception {\n\n        // Simulated external database (replace with real DB)\n        Set&lt;Long&gt; databasePositions = new HashSet&lt;&gt;();\n        Set&lt;Long&gt; databaseOrders = new HashSet&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n\n                    // Current MT5 state\n                    Set&lt;Long&gt; mt5Positions = new HashSet&lt;&gt;();\n                    for (int i = 0; i &lt; data.getPositionTicketsCount(); i++) {\n                        mt5Positions.add(data.getPositionTickets(i));\n                    }\n\n                    Set&lt;Long&gt; mt5Orders = new HashSet&lt;&gt;();\n                    for (int i = 0; i &lt; data.getPendingOrderTicketsCount(); i++) {\n                        mt5Orders.add(data.getPendingOrderTickets(i));\n                    }\n\n                    // Sync positions: Add new\n                    Set&lt;Long&gt; toAddPositions = new HashSet&lt;&gt;(mt5Positions);\n                    toAddPositions.removeAll(databasePositions);\n                    for (Long ticket : toAddPositions) {\n                        System.out.printf(\"\ud83d\udcbe DB: Adding position #%d%n\", ticket);\n                        databasePositions.add(ticket);\n                        // INSERT INTO positions (ticket, ...) VALUES (ticket, ...)\n                    }\n\n                    // Sync positions: Remove closed\n                    Set&lt;Long&gt; toRemovePositions = new HashSet&lt;&gt;(databasePositions);\n                    toRemovePositions.removeAll(mt5Positions);\n                    for (Long ticket : toRemovePositions) {\n                        System.out.printf(\"\ud83d\uddd1\ufe0f  DB: Removing position #%d%n\", ticket);\n                        databasePositions.remove(ticket);\n                        // UPDATE positions SET closed_at = NOW() WHERE ticket = ticket\n                    }\n\n                    // Sync orders: Add new\n                    Set&lt;Long&gt; toAddOrders = new HashSet&lt;&gt;(mt5Orders);\n                    toAddOrders.removeAll(databaseOrders);\n                    for (Long ticket : toAddOrders) {\n                        System.out.printf(\"\ud83d\udcbe DB: Adding order #%d%n\", ticket);\n                        databaseOrders.add(ticket);\n                        // INSERT INTO orders (ticket, ...) VALUES (ticket, ...)\n                    }\n\n                    // Sync orders: Remove\n                    Set&lt;Long&gt; toRemoveOrders = new HashSet&lt;&gt;(databaseOrders);\n                    toRemoveOrders.removeAll(mt5Orders);\n                    for (Long ticket : toRemoveOrders) {\n                        System.out.printf(\"\ud83d\uddd1\ufe0f  DB: Removing order #%d%n\", ticket);\n                        databaseOrders.remove(ticket);\n                        // UPDATE orders SET status = 'REMOVED' WHERE ticket = ticket\n                    }\n\n                    // Status\n                    if (toAddPositions.isEmpty() &amp;&amp; toRemovePositions.isEmpty() &amp;&amp;\n                        toAddOrders.isEmpty() &amp;&amp; toRemoveOrders.isEmpty()) {\n                        System.out.printf(\"\u2705 DB synchronized | Positions: %d | Orders: %d%n\",\n                            databasePositions.size(), databaseOrders.size());\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"DB sync error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"DB synchronization completed\");\n            }\n        };\n\n        System.out.println(\"Synchronizing external database...\");\n        account.onPositionsAndPendingOrdersTickets(3000, observer); // Every 3 seconds\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nDatabaseSynchronizer.synchronize(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#5-alert-on-firstlast-position","title":"5) Alert on first/last position","text":"<pre><code>public class FirstLastPositionAlert {\n    /**\n     * Alert when first position is opened or last position is closed\n     */\n    public static void monitorFirstLast(MT5Account account) throws Exception {\n\n        final int[] previousCount = {-1}; // -1 = not initialized\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n                    int currentCount = data.getPositionTicketsCount();\n\n                    // Initialize on first update\n                    if (previousCount[0] == -1) {\n                        previousCount[0] = currentCount;\n                        System.out.printf(\"\ud83d\udcca Initial state: %d positions%n\", currentCount);\n                        return;\n                    }\n\n                    // Check for transitions\n                    if (previousCount[0] == 0 &amp;&amp; currentCount == 1) {\n                        System.out.printf(\"\\n\ud83d\udfe2 FIRST POSITION OPENED!%n\");\n                        System.out.printf(\"   Ticket: #%d%n\", data.getPositionTickets(0));\n                        System.out.printf(\"   Account is now ACTIVE%n\");\n\n                    } else if (previousCount[0] == 1 &amp;&amp; currentCount == 0) {\n                        System.out.printf(\"\\n\ud83d\udd34 LAST POSITION CLOSED!%n\");\n                        System.out.printf(\"   Account is now FLAT (no positions)%n\");\n\n                    } else if (previousCount[0] &lt; currentCount) {\n                        System.out.printf(\"\ud83d\udfe2 Position opened (%d \u2192 %d)%n\",\n                            previousCount[0], currentCount);\n\n                    } else if (previousCount[0] &gt; currentCount) {\n                        System.out.printf(\"\ud83d\udd34 Position closed (%d \u2192 %d)%n\",\n                            previousCount[0], currentCount);\n                    }\n\n                    previousCount[0] = currentCount;\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Alert monitor error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Alert monitoring completed\");\n            }\n        };\n\n        System.out.println(\"Monitoring first/last positions...\");\n        account.onPositionsAndPendingOrdersTickets(1000, observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nFirstLastPositionAlert.monitorFirstLast(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport io.grpc.stub.StreamObserver;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsRequest request =\n    Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsRequest.newBuilder()\n        .setTimerPeriodMilliseconds(2000)  // 2 seconds\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Create observer\nStreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; observer =\n    new StreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n            if (reply.hasData()) {\n                var data = reply.getData();\n                // Process ticket lists\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            // Handle error\n        }\n\n        @Override\n        public void onCompleted() {\n            // Handle completion\n        }\n    };\n\n// Subscribe\nsubscriptionClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .onPositionsAndPendingOrdersTickets(request, observer);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnPositionsAndPendingOrdersTickets/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>What You Get: - Arrays of ticket numbers only - No position details (symbol, volume, profit, etc.) - Lightweight and efficient - Good for state tracking</p> <p>What You Don't Get: - Position symbols, volumes, or prices - Order types or parameters - Profit/loss values - Account balance/equity</p> <p>Update Frequency: - You control interval (milliseconds) - Recommended: 1000-5000ms - Lower = more current, higher CPU/network - Higher = less load, potentially stale</p> <p>Detecting Changes: - Compare current tickets with previous - New tickets = positions/orders opened - Missing tickets = positions/orders closed - Use Sets for efficient comparison</p> <p>Query Full Details: - Use this to detect changes - Query full position data separately when needed - Example: ticket appears \u2192 call <code>openedOrders()</code> for details</p> <p>Thread Safety: - Updates arrive on gRPC thread - Use thread-safe collections (ConcurrentHashMap, CopyOnWriteArraySet) - Synchronize shared state access</p> <p>Best Practices: - Store previous state to detect changes - Use Set for efficient comparison - Query full details only when needed - Log ticket changes for debugging - Handle reconnection properly</p> <p>Common Use Cases: - Lightweight position state tracking - Detect opens/closes without full queries - Synchronize external systems - Enforce position limits - Monitor account activity - Build audit logs</p> <p>Performance: - Much lighter than full position queries - Good for frequent polling - Minimal network bandwidth - Fast comparison operations</p> <p>Comparison with OnTrade: - <code>OnTrade</code> = event-driven (immediate) - <code>OnPositionsAndPendingOrdersTickets</code> = polling (periodic) - <code>OnTrade</code> includes full details - This method includes only tickets - Use both for complete coverage</p> <p>Error Handling: - Connection loss triggers <code>onError()</code> - Reconnect automatically - Compare with query after reconnect - Validate ticket sequences</p>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/","title":"\ud83d\udcca Subscribe to Real-Time Tick Data (Price Stream)","text":"<p>Request: subscribe to real-time tick updates for one or more symbols. Receives continuous stream of price changes (bid, ask, last, volume) as they occur in the market.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.onSymbolTick(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnSymbolTick</code> (defined in <code>mt5-term-api-subscriptions.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnSymbolTick(OnSymbolTickRequest) \u2192 stream OnSymbolTickReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceGrpc.SubscriptionServiceStub.onSymbolTick(request, observer)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Subscribes to real-time tick updates for one or more symbols.\n     * Receives a continuous stream of price updates (bid, ask, last, volume) whenever prices change.\n     * Use this for real-time price monitoring, tick-based trading strategies, or market data feeds.\n     *\n     * @param symbolNames Array of symbol names to monitor (e.g., [\"EURUSD\", \"GBPUSD\"])\n     * @param responseObserver Observer to receive streaming tick updates\n     * @throws ApiExceptionMT5 if the subscription fails or connection is lost\n     */\n    public void onSymbolTick(\n        String[] symbolNames,\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; responseObserver\n    ) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#input-onsymboltickrequest","title":"\ud83d\udd3d Input - <code>OnSymbolTickRequest</code>","text":"Parameter Type Required Description <code>symbol_names</code> <code>String[]</code> \u2705 Array of symbol names to monitor (e.g., [\"EURUSD\"])"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#output-mrpcsubscriptionmqltick-stream","title":"\u2b06\ufe0f Output - <code>MrpcSubscriptionMqlTick</code> (stream)","text":"<p>Each tick event contains:</p> Field Type Description <code>symbol</code> <code>String</code> Symbol name <code>time</code> <code>Timestamp</code> Time of the last price update <code>bid</code> <code>double</code> Current Bid price <code>ask</code> <code>double</code> Current Ask price <code>last</code> <code>double</code> Price of the last deal (Last) <code>volume</code> <code>uint64</code> Volume for the current Last price <code>volume_real</code> <code>double</code> Volume with greater accuracy <code>time_msc</code> <code>int64</code> Time of price update in milliseconds <code>flags</code> <code>uint32</code> Tick flags (bid/ask changed indicators) <p>Access using <code>reply.getData().getSymbolTick().&lt;field&gt;</code>.</p> <p>Important: - This is a streaming RPC - events arrive continuously - You must use <code>StreamObserver</code> pattern for asynchronous handling - Stream remains open until explicitly closed or error occurs - Multiple symbols can be monitored with a single subscription</p>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Real-time price feed for multiple symbols.</li> <li>Why you need it. Essential for any price-based trading strategy.</li> <li>Returns. Continuous stream of bid/ask/volume updates.</li> <li>Asynchronous. Uses StreamObserver pattern - events arrive on separate thread.</li> <li>Multiple symbols. Monitor many symbols with one subscription.</li> <li>Market hours only. Ticks only arrive during active trading hours.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Monitor real-time price changes for trading strategies.</li> <li>Build tick-based trading algorithms.</li> <li>Track spread changes across multiple symbols.</li> <li>Create live price feeds for UI/dashboards.</li> <li>Detect price breakouts or pattern formations.</li> <li>Calculate real-time indicators based on tick data.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#1-basic-tick-subscription","title":"1) Basic tick subscription","text":"<pre><code>import io.grpc.stub.StreamObserver;\nimport io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiSubscriptions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            // Create observer to handle tick events\n            StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; observer =\n                new StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt;() {\n\n                @Override\n                public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n                    // Called every time a new tick arrives\n                    if (reply.hasData()) {\n                        var tick = reply.getData().getSymbolTick();\n\n                        System.out.printf(\"%s: Bid=%.5f, Ask=%.5f, Spread=%.5f%n\",\n                            tick.getSymbol(),\n                            tick.getBid(),\n                            tick.getAsk(),\n                            tick.getAsk() - tick.getBid());\n                    }\n                }\n\n                @Override\n                public void onError(Throwable t) {\n                    // Called if stream encounters an error\n                    System.err.println(\"Tick stream error: \" + t.getMessage());\n                }\n\n                @Override\n                public void onCompleted() {\n                    // Called when stream is closed by server\n                    System.out.println(\"Tick stream completed\");\n                }\n            };\n\n            // Subscribe to EURUSD ticks\n            account.onSymbolTick(new String[]{\"EURUSD\"}, observer);\n\n            // Keep main thread alive to receive events\n            Thread.sleep(60000); // Run for 1 minute\n\n        } catch (Exception e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#2-monitor-multiple-symbols-simultaneously","title":"2) Monitor multiple symbols simultaneously","text":"<pre><code>import java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class MultiSymbolMonitor {\n    /**\n     * Monitor multiple symbols and count ticks\n     */\n    public static void monitorSymbols(MT5Account account, String[] symbols, int maxTicks)\n            throws ApiExceptionMT5, InterruptedException {\n\n        CountDownLatch latch = new CountDownLatch(1);\n        AtomicInteger tickCount = new AtomicInteger(0);\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n                if (reply.hasData()) {\n                    var tick = reply.getData().getSymbolTick();\n                    int count = tickCount.incrementAndGet();\n\n                    System.out.printf(\"[%d] %s | Bid: %.5f | Ask: %.5f | Volume: %d%n\",\n                        count,\n                        tick.getSymbol(),\n                        tick.getBid(),\n                        tick.getAsk(),\n                        tick.getVolume());\n\n                    if (count &gt;= maxTicks) {\n                        latch.countDown(); // Stop after max ticks\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Stream error: \" + t.getMessage());\n                latch.countDown();\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Stream completed\");\n                latch.countDown();\n            }\n        };\n\n        System.out.printf(\"Subscribing to: %s%n\", String.join(\", \", symbols));\n        account.onSymbolTick(symbols, observer);\n\n        // Wait for max ticks or 30 seconds\n        boolean completed = latch.await(30, TimeUnit.SECONDS);\n\n        if (!completed) {\n            System.out.printf(\"Timeout - received %d ticks%n\", tickCount.get());\n        }\n    }\n}\n\n// Usage\nMultiSymbolMonitor.monitorSymbols(\n    account,\n    new String[]{\"EURUSD\", \"GBPUSD\", \"USDJPY\"},\n    100  // Stop after 100 ticks\n);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#3-spread-monitoring-and-alerts","title":"3) Spread monitoring and alerts","text":"<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class SpreadMonitor {\n    /**\n     * Monitor spreads and alert when they exceed threshold\n     */\n    public static void monitorSpreads(\n            MT5Account account,\n            String[] symbols,\n            double maxSpreadPips) throws ApiExceptionMT5 {\n\n        Map&lt;String, Double&gt; lastBid = new HashMap&lt;&gt;();\n        Map&lt;String, Double&gt; lastAsk = new HashMap&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n                if (reply.hasData()) {\n                    var tick = reply.getData().getSymbolTick();\n                    String symbol = tick.getSymbol();\n                    double bid = tick.getBid();\n                    double ask = tick.getAsk();\n\n                    lastBid.put(symbol, bid);\n                    lastAsk.put(symbol, ask);\n\n                    // Calculate spread in pips\n                    double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n                    double spreadPips = (ask - bid) / pipSize;\n\n                    // Alert if spread too wide\n                    if (spreadPips &gt; maxSpreadPips) {\n                        System.out.printf(\"\u26a0\ufe0f  WIDE SPREAD: %s = %.1f pips \" +\n                            \"(Bid: %.5f, Ask: %.5f)%n\",\n                            symbol, spreadPips, bid, ask);\n                    } else {\n                        System.out.printf(\"\u2705 %s: %.1f pips%n\", symbol, spreadPips);\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Spread monitor error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"\\nSpread monitoring completed\");\n                System.out.println(\"Last quotes:\");\n                lastBid.forEach((symbol, bid) -&gt; {\n                    double ask = lastAsk.get(symbol);\n                    System.out.printf(\"  %s: %.5f / %.5f%n\", symbol, bid, ask);\n                });\n            }\n        };\n\n        System.out.printf(\"Monitoring spreads (max: %.1f pips)%n\", maxSpreadPips);\n        account.onSymbolTick(symbols, observer);\n\n        // Keep alive\n        Thread.sleep(60000);\n    }\n}\n\n// Usage - alert if spread &gt; 3 pips\nSpreadMonitor.monitorSpreads(\n    account,\n    new String[]{\"EURUSD\", \"GBPUSD\", \"AUDUSD\"},\n    3.0\n);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#4-price-change-detector","title":"4) Price change detector","text":"<pre><code>import java.time.Instant;\nimport java.time.ZoneId;\nimport java.time.format.DateTimeFormatter;\n\npublic class PriceChangeDetector {\n    private static final DateTimeFormatter TIME_FORMAT =\n        DateTimeFormatter.ofPattern(\"HH:mm:ss\").withZone(ZoneId.systemDefault());\n\n    /**\n     * Detect significant price movements\n     */\n    public static void detectPriceChanges(\n            MT5Account account,\n            String symbol,\n            double thresholdPips) throws ApiExceptionMT5, InterruptedException {\n\n        final double[] previousBid = {0.0};\n        final double[] previousAsk = {0.0};\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n                if (reply.hasData()) {\n                    var tick = reply.getData().getSymbolTick();\n\n                    double bid = tick.getBid();\n                    double ask = tick.getAsk();\n\n                    // Initialize on first tick\n                    if (previousBid[0] == 0.0) {\n                        previousBid[0] = bid;\n                        previousAsk[0] = ask;\n                        System.out.printf(\"Initial price: Bid=%.5f, Ask=%.5f%n\", bid, ask);\n                        return;\n                    }\n\n                    // Calculate pip size\n                    double pipSize = symbol.contains(\"JPY\") ? 0.01 : 0.0001;\n\n                    // Calculate change in pips\n                    double bidChangePips = (bid - previousBid[0]) / pipSize;\n                    double askChangePips = (ask - previousAsk[0]) / pipSize;\n\n                    // Check if significant move\n                    if (Math.abs(bidChangePips) &gt;= thresholdPips ||\n                        Math.abs(askChangePips) &gt;= thresholdPips) {\n\n                        Instant time = Instant.ofEpochSecond(\n                            tick.getTime().getSeconds()\n                        );\n\n                        System.out.printf(\"\\n\ud83d\udd14 PRICE MOVE @ %s:%n\",\n                            TIME_FORMAT.format(time));\n                        System.out.printf(\"  Bid: %.5f \u2192 %.5f (%+.1f pips)%n\",\n                            previousBid[0], bid, bidChangePips);\n                        System.out.printf(\"  Ask: %.5f \u2192 %.5f (%+.1f pips)%n\",\n                            previousAsk[0], ask, askChangePips);\n\n                        previousBid[0] = bid;\n                        previousAsk[0] = ask;\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Price detector error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Price monitoring completed\");\n            }\n        };\n\n        System.out.printf(\"Monitoring %s for moves &gt;= %.1f pips%n\",\n            symbol, thresholdPips);\n\n        account.onSymbolTick(new String[]{symbol}, observer);\n\n        Thread.sleep(300000); // Run for 5 minutes\n    }\n}\n\n// Usage - detect 5+ pip moves\nPriceChangeDetector.detectPriceChanges(account, \"EURUSD\", 5.0);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#5-tick-data-recorder","title":"5) Tick data recorder","text":"<pre><code>import java.io.FileWriter;\nimport java.io.PrintWriter;\nimport java.time.Instant;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class TickRecorder {\n    /**\n     * Record tick data to CSV file\n     */\n    public static void recordTicks(\n            MT5Account account,\n            String symbol,\n            int maxTicks,\n            String filename) throws Exception {\n\n        AtomicInteger tickCount = new AtomicInteger(0);\n        PrintWriter writer = new PrintWriter(new FileWriter(filename));\n\n        // Write CSV header\n        writer.println(\"Timestamp,Symbol,Bid,Ask,Last,Volume,Spread\");\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n                if (reply.hasData()) {\n                    var tick = reply.getData().getSymbolTick();\n                    int count = tickCount.incrementAndGet();\n\n                    // Convert timestamp\n                    Instant time = Instant.ofEpochSecond(\n                        tick.getTime().getSeconds()\n                    );\n\n                    // Calculate spread\n                    double spread = tick.getAsk() - tick.getBid();\n\n                    // Write to CSV\n                    writer.printf(\"%s,%s,%.5f,%.5f,%.5f,%d,%.5f%n\",\n                        time.toString(),\n                        tick.getSymbol(),\n                        tick.getBid(),\n                        tick.getAsk(),\n                        tick.getLast(),\n                        tick.getVolume(),\n                        spread);\n\n                    if (count % 100 == 0) {\n                        System.out.printf(\"Recorded %d ticks...%n\", count);\n                        writer.flush(); // Flush periodically\n                    }\n\n                    if (count &gt;= maxTicks) {\n                        System.out.printf(\"Reached %d ticks, stopping%n\", maxTicks);\n                        writer.close();\n                        System.exit(0);\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Recording error: \" + t.getMessage());\n                writer.close();\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.printf(\"Recording completed: %d ticks saved to %s%n\",\n                    tickCount.get(), filename);\n                writer.close();\n            }\n        };\n\n        System.out.printf(\"Recording %s ticks to %s (max %d ticks)%n\",\n            symbol, filename, maxTicks);\n\n        account.onSymbolTick(new String[]{symbol}, observer);\n\n        // Keep alive\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage - record 1000 ticks to file\nTickRecorder.recordTicks(account, \"EURUSD\", 1000, \"eurusd_ticks.csv\");\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport io.grpc.stub.StreamObserver;\nimport mt5_term_api.*;\n\n// Build request\nMt5TermApiSubscriptions.OnSymbolTickRequest request =\n    Mt5TermApiSubscriptions.OnSymbolTickRequest.newBuilder()\n        .addSymbolNames(\"EURUSD\")\n        .addSymbolNames(\"GBPUSD\")\n        .build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Create observer\nStreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; observer =\n    new StreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n            if (reply.hasData()) {\n                var tick = reply.getData().getSymbolTick();\n                // Process tick data\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            // Handle error\n        }\n\n        @Override\n        public void onCompleted() {\n            // Handle completion\n        }\n    };\n\n// Subscribe (async stub for streaming)\nsubscriptionClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .onSymbolTick(request, observer);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnSymbolTick/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Stream Behavior: - Continuous stream - events arrive as prices change - Runs on separate gRPC thread pool - Must keep main thread alive to receive events - Stream stays open until error or explicit close</p> <p>Tick Frequency: - During active market: many ticks per second - During quiet periods: fewer ticks - Outside market hours: no ticks - High volatility = more tick events</p> <p>Multiple Symbols: - Single subscription can monitor many symbols - All ticks arrive through same observer - Use <code>tick.getSymbol()</code> to identify source - More symbols = more events per second</p> <p>Thread Safety: - <code>onNext()</code> called on gRPC thread, not main thread - Implement proper synchronization for shared data - Use thread-safe collections (e.g., ConcurrentHashMap) - Consider using CountDownLatch for coordination</p> <p>Resource Management: - Stream consumes network bandwidth continuously - Unsubscribe when not needed - Don't create too many subscriptions - One subscription per symbol set is sufficient</p> <p>Best Practices: - Always implement all three StreamObserver methods - Use CountDownLatch or similar for synchronization - Handle <code>onError()</code> gracefully - reconnect if needed - Log tick timestamps for accurate replay/analysis - Buffer tick data if processing is slow - Monitor for missed ticks (compare timestamps)</p> <p>Common Use Cases: - Real-time price monitoring - Tick-based scalping strategies - Spread analysis and arbitrage - Market microstructure research - High-frequency trading systems - Live price feeds for UI</p> <p>Performance Considerations: - Each tick triggers <code>onNext()</code> callback - Keep callback processing fast - Offload heavy work to separate thread - Consider batching tick processing - Monitor memory if storing ticks</p> <p>Error Handling: - Connection loss triggers <code>onError()</code> - Implement reconnection logic - Use SDK's automatic reconnection - Check for gaps in tick sequence - Validate tick data (bid &lt; ask)</p>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/","title":"\ud83d\udccb Subscribe to Trade Events (Trading Activity Stream)","text":"<p>Request: subscribe to trade event notifications. Receives stream of events when positions are opened/closed, pending orders are placed/modified/deleted, or deals are executed.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.onTrade(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnTrade</code> (defined in <code>mt5-term-api-subscriptions.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnTrade(OnTradeRequest) \u2192 stream OnTradeReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceGrpc.SubscriptionServiceStub.onTrade(request, observer)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Subscribes to trade events whenever a trading operation occurs.\n     * Receives notifications when orders are opened, closed, modified, or deleted.\n     * Use this to track all trading activity in real-time and react to order execution events.\n     *\n     * @param responseObserver Observer to receive streaming trade event notifications\n     * @throws ApiExceptionMT5 if the subscription fails or connection is lost\n     */\n    public void onTrade(\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; responseObserver\n    ) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#input-ontraderequest","title":"\ud83d\udd3d Input - <code>OnTradeRequest</code>","text":"Parameter Type Required Description (empty) - - No parameters required for subscription"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#output-ontadeeventdata-stream","title":"\u2b06\ufe0f Output - <code>OnTadeEventData</code> (stream)","text":"<p>Each trade event contains:</p> Field Type Description <code>new_positions</code> <code>OnTradePositionInfo[]</code> Newly opened positions <code>disappeared_positions</code> <code>OnTradePositionInfo[]</code> Closed positions <code>updated_positions</code> <code>OnTradePositionUpdate[]</code> Modified positions (SL/TP changes) <code>new_orders</code> <code>OnTradeOrderInfo[]</code> New pending orders placed <code>disappeared_orders</code> <code>OnTradeOrderInfo[]</code> Canceled or executed pending orders <code>state_changed_orders</code> <code>OnTradeOrderStateChange[]</code> Orders with state changes <code>new_history_deals</code> <code>OnTradeHistoryDealInfo[]</code> New deals executed <code>disappeared_history_deals</code> <code>OnTradeHistoryDealInfo[]</code> Deleted deals <code>updated_history_deals</code> <code>OnTradeHistoryDealUpdate[]</code> Modified deals <code>new_history_orders</code> <code>OnTradeHistoryOrderInfo[]</code> Orders moved to history <code>disappeared_history_orders</code> <code>OnTradeHistoryOrderInfo[]</code> Deleted history orders <code>updated_history_orders</code> <code>OnTradeHistoryOrderUpdate[]</code> Modified history orders <p>Access using <code>reply.getData().getEventData().&lt;field&gt;</code>.</p>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#position-info-fields-ontradepositioninfo","title":"Position Info Fields (<code>OnTradePositionInfo</code>)","text":"Field Type Description <code>ticket</code> <code>int64</code> Position ticket number <code>symbol</code> <code>String</code> Trading symbol <code>type</code> Enum BUY or SELL <code>volume</code> <code>double</code> Position volume in lots <code>price_open</code> <code>double</code> Opening price <code>price_current</code> <code>double</code> Current price <code>profit</code> <code>double</code> Current profit/loss <code>sl</code> <code>double</code> Stop Loss level <code>tp</code> <code>double</code> Take Profit level <code>swap</code> <code>double</code> Swap charges <code>magic</code> <code>int64</code> Expert Advisor magic number <code>comment</code> <code>String</code> Position comment"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#order-info-fields-ontradeorderinfo","title":"Order Info Fields (<code>OnTradeOrderInfo</code>)","text":"Field Type Description <code>ticket</code> <code>int64</code> Order ticket number <code>symbol</code> <code>String</code> Trading symbol <code>order_type</code> Enum Order type (BUY_LIMIT, SELL_STOP, etc.) <code>state</code> Enum Order state (PLACED, FILLED, CANCELED, etc.) <code>volume_initial</code> <code>double</code> Initial volume <code>volume_current</code> <code>double</code> Current volume (remaining) <code>price_open</code> <code>double</code> Order price <code>stop_loss</code> <code>double</code> Stop Loss level <code>take_profit</code> <code>double</code> Take Profit level <code>stop_limit</code> <code>double</code> Stop Limit price <code>time_expiration</code> <code>Timestamp</code> Expiration time <code>magic</code> <code>int64</code> Expert Advisor magic number <code>comment</code> <code>String</code> Order comment"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#deal-info-fields-ontradehistorydealinfo","title":"Deal Info Fields (<code>OnTradeHistoryDealInfo</code>)","text":"Field Type Description <code>ticket</code> <code>uint64</code> Deal ticket number <code>order_ticket</code> <code>int64</code> Order that created this deal <code>symbol</code> <code>String</code> Trading symbol <code>type</code> Enum Deal type (BUY, SELL, BALANCE, etc.) <code>entry</code> Enum IN (open), OUT (close), INOUT (reverse) <code>volume</code> <code>double</code> Deal volume <code>price</code> <code>double</code> Deal price <code>profit</code> <code>double</code> Deal profit <code>commission</code> <code>double</code> Commission charged <code>swap</code> <code>double</code> Swap charged <code>fee</code> <code>double</code> Additional fee <code>magic</code> <code>int64</code> Expert Advisor magic number <code>comment</code> <code>String</code> Deal comment"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Real-time notifications of all trading activity.</li> <li>Why you need it. Track order execution, position changes, deals.</li> <li>Returns. Stream of trading events as they occur.</li> <li>No parameters. Automatically monitors all trading activity.</li> <li>Comprehensive. Includes positions, orders, deals, and history.</li> <li>React instantly. Build automated responses to trading events.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Monitor all trading activity in real-time.</li> <li>React to order executions automatically.</li> <li>Track position opens/closes for logging.</li> <li>Detect when pending orders are filled.</li> <li>Build notification systems for trades.</li> <li>Synchronize trading state across systems.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#1-basic-trade-event-monitoring","title":"1) Basic trade event monitoring","text":"<pre><code>import io.grpc.stub.StreamObserver;\nimport io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiSubscriptions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; observer =\n                new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt;() {\n\n                @Override\n                public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n                    if (reply.hasData()) {\n                        var eventData = reply.getData().getEventData();\n\n                        // Count new positions\n                        int newPositions = eventData.getNewPositionsCount();\n                        int closedPositions = eventData.getDisappearedPositionsCount();\n                        int newOrders = eventData.getNewOrdersCount();\n                        int newDeals = eventData.getNewHistoryDealsCount();\n\n                        if (newPositions &gt; 0 || closedPositions &gt; 0 ||\n                            newOrders &gt; 0 || newDeals &gt; 0) {\n\n                            System.out.printf(\"\\n\ud83d\udcca TRADE EVENT:%n\");\n                            System.out.printf(\"  New positions: %d%n\", newPositions);\n                            System.out.printf(\"  Closed positions: %d%n\", closedPositions);\n                            System.out.printf(\"  New orders: %d%n\", newOrders);\n                            System.out.printf(\"  New deals: %d%n\", newDeals);\n                        }\n                    }\n                }\n\n                @Override\n                public void onError(Throwable t) {\n                    System.err.println(\"Trade stream error: \" + t.getMessage());\n                }\n\n                @Override\n                public void onCompleted() {\n                    System.out.println(\"Trade stream completed\");\n                }\n            };\n\n            // Subscribe to trade events\n            account.onTrade(observer);\n\n            // Keep alive\n            Thread.sleep(300000); // 5 minutes\n\n        } catch (Exception e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#2-position-openedclosed-notifications","title":"2) Position opened/closed notifications","text":"<pre><code>import java.time.Instant;\nimport java.time.ZoneId;\nimport java.time.format.DateTimeFormatter;\n\npublic class PositionNotifier {\n    private static final DateTimeFormatter TIME_FORMAT =\n        DateTimeFormatter.ofPattern(\"HH:mm:ss\").withZone(ZoneId.systemDefault());\n\n    /**\n     * Send notifications when positions are opened or closed\n     */\n    public static void monitorPositions(MT5Account account)\n            throws ApiExceptionMT5, InterruptedException {\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n                if (reply.hasData()) {\n                    var eventData = reply.getData().getEventData();\n\n                    // New positions opened\n                    for (int i = 0; i &lt; eventData.getNewPositionsCount(); i++) {\n                        var position = eventData.getNewPositions(i);\n\n                        System.out.printf(\"\\n\u2705 POSITION OPENED @ %s:%n\",\n                            TIME_FORMAT.format(Instant.now()));\n                        System.out.printf(\"  Ticket: #%d%n\", position.getTicket());\n                        System.out.printf(\"  Symbol: %s%n\", position.getSymbol());\n                        System.out.printf(\"  Type: %s%n\", position.getType());\n                        System.out.printf(\"  Volume: %.2f lots%n\", position.getVolume());\n                        System.out.printf(\"  Price: %.5f%n\", position.getPriceOpen());\n                        System.out.printf(\"  SL: %.5f | TP: %.5f%n\",\n                            position.getSl(), position.getTp());\n\n                        if (!position.getComment().isEmpty()) {\n                            System.out.printf(\"  Comment: %s%n\", position.getComment());\n                        }\n                    }\n\n                    // Positions closed\n                    for (int i = 0; i &lt; eventData.getDisappearedPositionsCount(); i++) {\n                        var position = eventData.getDisappearedPositions(i);\n\n                        System.out.printf(\"\\n\u274c POSITION CLOSED @ %s:%n\",\n                            TIME_FORMAT.format(Instant.now()));\n                        System.out.printf(\"  Ticket: #%d%n\", position.getTicket());\n                        System.out.printf(\"  Symbol: %s%n\", position.getSymbol());\n                        System.out.printf(\"  Type: %s%n\", position.getType());\n                        System.out.printf(\"  Volume: %.2f lots%n\", position.getVolume());\n                        System.out.printf(\"  Profit: $%.2f%n\", position.getProfit());\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Position monitor error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Position monitoring completed\");\n            }\n        };\n\n        System.out.println(\"Monitoring position changes...\");\n        account.onTrade(observer);\n\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nPositionNotifier.monitorPositions(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#3-pending-order-execution-detector","title":"3) Pending order execution detector","text":"<pre><code>public class OrderExecutionDetector {\n    /**\n     * Detect when pending orders are executed\n     */\n    public static void detectExecutions(MT5Account account)\n            throws ApiExceptionMT5, InterruptedException {\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n                if (reply.hasData()) {\n                    var eventData = reply.getData().getEventData();\n\n                    // New pending orders\n                    for (int i = 0; i &lt; eventData.getNewOrdersCount(); i++) {\n                        var order = eventData.getNewOrders(i);\n\n                        System.out.printf(\"\\n\ud83d\udcdd PENDING ORDER PLACED:%n\");\n                        System.out.printf(\"  Ticket: #%d%n\", order.getTicket());\n                        System.out.printf(\"  Symbol: %s%n\", order.getSymbol());\n                        System.out.printf(\"  Type: %s%n\", order.getOrderType());\n                        System.out.printf(\"  Volume: %.2f lots%n\", order.getVolumeInitial());\n                        System.out.printf(\"  Price: %.5f%n\", order.getPriceOpen());\n                        System.out.printf(\"  State: %s%n\", order.getState());\n                    }\n\n                    // Orders that disappeared (executed or canceled)\n                    for (int i = 0; i &lt; eventData.getDisappearedOrdersCount(); i++) {\n                        var order = eventData.getDisappearedOrders(i);\n\n                        String status = order.getState().toString().contains(\"FILLED\")\n                            ? \"\u2705 EXECUTED\"\n                            : \"\u274c CANCELED\";\n\n                        System.out.printf(\"\\n%s - Order #%d:%n\", status, order.getTicket());\n                        System.out.printf(\"  Symbol: %s%n\", order.getSymbol());\n                        System.out.printf(\"  Type: %s%n\", order.getOrderType());\n                        System.out.printf(\"  Volume: %.2f lots%n\", order.getVolumeInitial());\n                        System.out.printf(\"  Final State: %s%n\", order.getState());\n                    }\n\n                    // Order state changes\n                    for (int i = 0; i &lt; eventData.getStateChangedOrdersCount(); i++) {\n                        var change = eventData.getStateChangedOrders(i);\n                        var prev = change.getPreviousOrder();\n                        var curr = change.getCurrentOrder();\n\n                        System.out.printf(\"\\n\ud83d\udd04 ORDER STATE CHANGED - #%d:%n\", curr.getTicket());\n                        System.out.printf(\"  %s \u2192 %s%n\",\n                            prev.getState(), curr.getState());\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Execution detector error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Execution detection completed\");\n            }\n        };\n\n        System.out.println(\"Monitoring order executions...\");\n        account.onTrade(observer);\n\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nOrderExecutionDetector.detectExecutions(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#4-deal-history-logger","title":"4) Deal history logger","text":"<pre><code>import java.io.FileWriter;\nimport java.io.PrintWriter;\nimport java.time.Instant;\n\npublic class DealLogger {\n    /**\n     * Log all executed deals to file\n     */\n    public static void logDeals(MT5Account account, String filename)\n            throws Exception {\n\n        PrintWriter writer = new PrintWriter(new FileWriter(filename, true));\n\n        // Write header if file is new\n        writer.println(\"Timestamp,Ticket,Symbol,Type,Entry,Volume,Price,Profit,Commission,Swap\");\n        writer.flush();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n                if (reply.hasData()) {\n                    var eventData = reply.getData().getEventData();\n\n                    // Log new deals\n                    for (int i = 0; i &lt; eventData.getNewHistoryDealsCount(); i++) {\n                        var deal = eventData.getNewHistoryDeals(i);\n\n                        Instant dealTime = Instant.ofEpochSecond(\n                            deal.getDealTime().getSeconds()\n                        );\n\n                        // Write to CSV\n                        writer.printf(\"%s,%d,%s,%s,%s,%.2f,%.5f,%.2f,%.2f,%.2f%n\",\n                            dealTime.toString(),\n                            deal.getTicket(),\n                            deal.getSymbol(),\n                            deal.getType(),\n                            deal.getEntry(),\n                            deal.getVolume(),\n                            deal.getPrice(),\n                            deal.getProfit(),\n                            deal.getCommission(),\n                            deal.getSwap());\n\n                        writer.flush();\n\n                        // Console notification\n                        System.out.printf(\"\ud83d\udcc4 Logged deal #%d: %s %s %.2f @ %.5f = $%.2f%n\",\n                            deal.getTicket(),\n                            deal.getEntry(),\n                            deal.getSymbol(),\n                            deal.getVolume(),\n                            deal.getPrice(),\n                            deal.getProfit());\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Deal logger error: \" + t.getMessage());\n                writer.close();\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Deal logging completed\");\n                writer.close();\n            }\n        };\n\n        System.out.printf(\"Logging deals to %s%n\", filename);\n        account.onTrade(observer);\n\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nDealLogger.logDeals(account, \"deals.csv\");\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#5-trading-statistics-tracker","title":"5) Trading statistics tracker","text":"<pre><code>import java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicReference;\n\npublic class TradingStatsTracker {\n    /**\n     * Track real-time trading statistics\n     */\n    public static void trackStats(MT5Account account)\n            throws ApiExceptionMT5, InterruptedException {\n\n        AtomicInteger totalPositionsOpened = new AtomicInteger(0);\n        AtomicInteger totalPositionsClosed = new AtomicInteger(0);\n        AtomicInteger totalOrdersPlaced = new AtomicInteger(0);\n        AtomicInteger totalDeals = new AtomicInteger(0);\n        AtomicReference&lt;Double&gt; totalProfit = new AtomicReference&lt;&gt;(0.0);\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n                if (reply.hasData()) {\n                    var eventData = reply.getData().getEventData();\n\n                    // Update counters\n                    int newPos = eventData.getNewPositionsCount();\n                    int closedPos = eventData.getDisappearedPositionsCount();\n                    int newOrders = eventData.getNewOrdersCount();\n                    int newDeals = eventData.getNewHistoryDealsCount();\n\n                    if (newPos &gt; 0) totalPositionsOpened.addAndGet(newPos);\n                    if (closedPos &gt; 0) totalPositionsClosed.addAndGet(closedPos);\n                    if (newOrders &gt; 0) totalOrdersPlaced.addAndGet(newOrders);\n                    if (newDeals &gt; 0) totalDeals.addAndGet(newDeals);\n\n                    // Calculate profit from closed positions\n                    for (int i = 0; i &lt; closedPos; i++) {\n                        var position = eventData.getDisappearedPositions(i);\n                        totalProfit.updateAndGet(v -&gt; v + position.getProfit());\n                    }\n\n                    // Print stats if any activity\n                    if (newPos &gt; 0 || closedPos &gt; 0 || newOrders &gt; 0 || newDeals &gt; 0) {\n                        System.out.printf(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550%n\");\n                        System.out.printf(\"\ud83d\udcca TRADING STATISTICS%n\");\n                        System.out.printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550%n\");\n                        System.out.printf(\"Positions Opened:  %d%n\", totalPositionsOpened.get());\n                        System.out.printf(\"Positions Closed:  %d%n\", totalPositionsClosed.get());\n                        System.out.printf(\"Orders Placed:     %d%n\", totalOrdersPlaced.get());\n                        System.out.printf(\"Deals Executed:    %d%n\", totalDeals.get());\n                        System.out.printf(\"Total Profit/Loss: $%.2f%n\", totalProfit.get());\n                        System.out.printf(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550%n\");\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Stats tracker error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"\\nFinal Statistics:\");\n                System.out.printf(\"  Positions: %d opened, %d closed%n\",\n                    totalPositionsOpened.get(), totalPositionsClosed.get());\n                System.out.printf(\"  Total P/L: $%.2f%n\", totalProfit.get());\n            }\n        };\n\n        System.out.println(\"Tracking trading statistics...\");\n        account.onTrade(observer);\n\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nTradingStatsTracker.trackStats(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport io.grpc.stub.StreamObserver;\nimport mt5_term_api.*;\n\n// Build request (empty)\nMt5TermApiSubscriptions.OnTradeRequest request =\n    Mt5TermApiSubscriptions.OnTradeRequest.newBuilder().build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Create observer\nStreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; observer =\n    new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n            if (reply.hasData()) {\n                var eventData = reply.getData().getEventData();\n                // Process trade events\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            // Handle error\n        }\n\n        @Override\n        public void onCompleted() {\n            // Handle completion\n        }\n    };\n\n// Subscribe\nsubscriptionClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .onTrade(request, observer);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTrade/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Event Types: - New positions - positions just opened - Disappeared positions - positions just closed - Updated positions - SL/TP or other changes - New orders - pending orders just placed - Disappeared orders - orders executed or canceled - State changed orders - order state transitions - New deals - deals just executed - History updates - changes to historical data</p> <p>When Events Fire: - Position opened \u2192 <code>new_positions</code> - Position closed \u2192 <code>disappeared_positions</code> - SL/TP modified \u2192 <code>updated_positions</code> - Pending order placed \u2192 <code>new_orders</code> - Pending order filled \u2192 <code>disappeared_orders</code> + <code>new_positions</code> - Pending order canceled \u2192 <code>disappeared_orders</code> - Market order executed \u2192 <code>new_deals</code> + <code>new_positions</code></p> <p>Event Frequency: - Only fires when trading activity occurs - No events during idle periods - Multiple events can arrive in single message - Check all arrays - may have multiple changes</p> <p>Thread Safety: - Events arrive on gRPC thread - Use thread-safe collections for shared state - Synchronize access to mutable data - Consider using concurrent queues</p> <p>Best Practices: - Check all event arrays - don't assume only one type - Log ticket numbers for debugging - Handle rapid succession of events - Implement idempotency for event processing - Store position/order tickets for tracking - Use magic numbers to identify your trades</p> <p>Common Use Cases: - Trade execution notifications - Position tracking systems - Order management systems - Trading journals and logs - Performance analytics - Risk management triggers</p> <p>Error Handling: - Connection loss triggers <code>onError()</code> - Implement reconnection logic - May miss events during disconnection - Query current state after reconnect - Validate event data integrity</p>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/","title":"\ud83d\udcdd Subscribe to Trade Transactions (Detailed Trading Events Stream)","text":"<p>Request: subscribe to trade transaction events. Receives most detailed stream of all trading actions including order placement, modification, execution, position changes, and deal execution. The most comprehensive trading event stream available.</p> <p>API Information:</p> <ul> <li>SDK wrapper: <code>MT5Account.onTradeTransaction(...)</code> (from package <code>io.metarpc.mt5</code>)</li> <li>gRPC service: <code>mt5_term_api.SubscriptionService</code></li> <li>Proto definition: <code>OnTradeTransaction</code> (defined in <code>mt5-term-api-subscriptions.proto</code>)</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#rpc","title":"RPC","text":"<ul> <li>Service: <code>mt5_term_api.SubscriptionService</code></li> <li>Method: <code>OnTradeTransaction(OnTradeTransactionRequest) \u2192 stream OnTradeTransactionReply</code></li> <li>Low\u2011level client (generated): <code>SubscriptionServiceGrpc.SubscriptionServiceStub.onTradeTransaction(request, observer)</code></li> <li>SDK wrapper (high-level):</li> </ul> <pre><code>package io.metarpc.mt5;\n\npublic class MT5Account {\n    /**\n     * Subscribes to trade transaction events - the most detailed trading event stream.\n     * Receives notifications for all trading actions: order placement, modification,\n     * execution, position changes, and deal execution with complete details.\n     * Use this for complete trading system integration and detailed audit trails.\n     *\n     * @param responseObserver Observer to receive streaming trade transaction events\n     * @throws ApiExceptionMT5 if the subscription fails or connection is lost\n     */\n    public void onTradeTransaction(\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; responseObserver\n    ) throws ApiExceptionMT5;\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#input-ontradetransactionrequest","title":"\ud83d\udd3d Input - <code>OnTradeTransactionRequest</code>","text":"Parameter Type Required Description (empty) - - No parameters required for subscription"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#output-ontradetransactiondata-stream","title":"\u2b06\ufe0f Output - <code>OnTradeTransactionData</code> (stream)","text":"<p>Each transaction event contains:</p> Field Type Description <code>trade_transaction</code> <code>MqlTradeTransaction</code> Transaction details <code>trade_request</code> <code>MqlTradeRequest</code> Original trade request (if applicable) <code>trade_result</code> <code>MqlTradeResult</code> Trade execution result (if applicable) <code>account_info</code> <code>OnEventAccountInfo</code> Account state after transaction <p>Access using <code>reply.getData().&lt;field&gt;</code>.</p>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#transaction-fields-mqltradetransaction","title":"Transaction Fields (<code>MqlTradeTransaction</code>)","text":"Field Type Description <code>type</code> Enum Transaction type (ORDER_ADD, DEAL_ADD, POSITION, etc.) <code>order_ticket</code> <code>uint64</code> Order ticket number <code>deal_ticket</code> <code>uint64</code> Deal ticket number (if deal transaction) <code>symbol</code> <code>String</code> Trading symbol <code>order_type</code> Enum Order type (BUY, SELL, BUY_LIMIT, etc.) <code>order_state</code> Enum Order state (PLACED, FILLED, CANCELED, etc.) <code>deal_type</code> Enum Deal type (BUY, SELL, BALANCE, etc.) <code>order_time_type</code> Enum Time-in-force (GTC, DAY, etc.) <code>order_expiration_time</code> <code>Timestamp</code> Order expiration time <code>price</code> <code>double</code> Price <code>price_trigger_stop_limit</code> <code>double</code> Stop limit activation price <code>price_stop_loss</code> <code>double</code> Stop Loss level <code>price_take_profit</code> <code>double</code> Take Profit level <code>volume</code> <code>double</code> Volume in lots <code>position_ticket</code> <code>uint64</code> Position ticket <code>position_by_opposite_position</code> <code>uint64</code> Opposite position ticket (for close-by)"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#transaction-types-sub_enum_trade_transaction_type","title":"Transaction Types (<code>SUB_ENUM_TRADE_TRANSACTION_TYPE</code>)","text":"Value Number Description <code>SUB_TRADE_TRANSACTION_ORDER_ADD</code> 0 New order added <code>SUB_TRADE_TRANSACTION_ORDER_UPDATE</code> 1 Order updated (state change) <code>SUB_TRADE_TRANSACTION_ORDER_DELETE</code> 2 Order deleted from open orders <code>SUB_TRADE_TRANSACTION_DEAL_ADD</code> 3 New deal executed <code>SUB_TRADE_TRANSACTION_DEAL_UPDATE</code> 4 Deal updated in history <code>SUB_TRADE_TRANSACTION_DEAL_DELETE</code> 5 Deal deleted from history <code>SUB_TRADE_TRANSACTION_HISTORY_ADD</code> 6 Order moved to history (filled/canceled) <code>SUB_TRADE_TRANSACTION_HISTORY_UPDATE</code> 7 History order updated <code>SUB_TRADE_TRANSACTION_HISTORY_DELETE</code> 8 History order deleted <code>SUB_TRADE_TRANSACTION_POSITION</code> 9 Position changed (not by deal) <code>SUB_TRADE_TRANSACTION_REQUEST</code> 10 Trade request processed"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#request-fields-mqltraderequest","title":"Request Fields (<code>MqlTradeRequest</code>)","text":"Field Type Description <code>trade_operation_type</code> Enum Operation (DEAL, PENDING, SLTP, MODIFY, REMOVE) <code>magic</code> <code>uint64</code> Expert Advisor magic number <code>order_ticket</code> <code>uint64</code> Order ticket <code>symbol</code> <code>String</code> Trading symbol <code>requested_deal_volume_lots</code> <code>double</code> Requested volume <code>price</code> <code>double</code> Price <code>stop_loss</code> <code>double</code> Stop Loss <code>take_profit</code> <code>double</code> Take Profit <code>deviation</code> <code>uint64</code> Maximum slippage <code>order_type</code> Enum Order type <code>order_type_filling</code> Enum Fill type (FOK, IOC, RETURN) <code>type_time</code> Enum Time-in-force <code>order_expiration_time</code> <code>Timestamp</code> Expiration time <code>order_comment</code> <code>String</code> Comment"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#result-fields-mqltraderesult","title":"Result Fields (<code>MqlTradeResult</code>)","text":"Field Type Description <code>trade_return_int_code</code> <code>uint32</code> Return code (10009 = success) <code>deal_ticket</code> <code>uint64</code> Deal ticket (if executed) <code>order_ticket</code> <code>uint64</code> Order ticket <code>deal_volume</code> <code>double</code> Executed volume <code>deal_price</code> <code>double</code> Execution price <code>current_bid</code> <code>double</code> Current Bid <code>current_ask</code> <code>double</code> Current Ask <code>broker_comment_to_operation</code> <code>String</code> Broker comment"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Most detailed stream of all trading actions.</li> <li>Why you need it. Complete audit trail, detailed event tracking.</li> <li>Returns. Every trading action with full context.</li> <li>Transaction types. 11 different types of trading events.</li> <li>Includes context. Request, result, and account state.</li> <li>Most comprehensive. More detail than OnTrade stream.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Build complete trading audit logs.</li> <li>Track every trading action in detail.</li> <li>Implement sophisticated order management systems.</li> <li>Debug trading logic and execution.</li> <li>Create detailed trading analytics.</li> <li>Integrate with external trading systems.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#1-basic-transaction-monitoring","title":"1) Basic transaction monitoring","text":"<pre><code>import io.grpc.stub.StreamObserver;\nimport io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.exceptions.ApiExceptionMT5;\nimport mt5_term_api.Mt5TermApiSubscriptions;\n\npublic class Example {\n    public static void main(String[] args) {\n        MT5Account account = new MT5Account(12345678, \"password\");\n\n        try {\n            account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n            StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; observer =\n                new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt;() {\n\n                @Override\n                public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n                    if (reply.hasData()) {\n                        var transaction = reply.getData().getTradeTransaction();\n\n                        System.out.printf(\"\\n\ud83d\udcdd TRANSACTION: %s%n\", transaction.getType());\n                        System.out.printf(\"  Symbol: %s%n\", transaction.getSymbol());\n                        System.out.printf(\"  Order: #%d%n\", transaction.getOrderTicket());\n\n                        if (transaction.getDealTicket() &gt; 0) {\n                            System.out.printf(\"  Deal: #%d%n\", transaction.getDealTicket());\n                        }\n\n                        if (transaction.getVolume() &gt; 0) {\n                            System.out.printf(\"  Volume: %.2f lots%n\", transaction.getVolume());\n                        }\n\n                        if (transaction.getPrice() &gt; 0) {\n                            System.out.printf(\"  Price: %.5f%n\", transaction.getPrice());\n                        }\n                    }\n                }\n\n                @Override\n                public void onError(Throwable t) {\n                    System.err.println(\"Transaction stream error: \" + t.getMessage());\n                }\n\n                @Override\n                public void onCompleted() {\n                    System.out.println(\"Transaction stream completed\");\n                }\n            };\n\n            // Subscribe to trade transactions\n            account.onTradeTransaction(observer);\n\n            // Keep alive\n            Thread.sleep(300000); // 5 minutes\n\n        } catch (Exception e) {\n            System.err.println(\"Error: \" + e.getMessage());\n        } finally {\n            account.close();\n        }\n    }\n}\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#2-transaction-type-classifier","title":"2) Transaction type classifier","text":"<pre><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class TransactionClassifier {\n    /**\n     * Classify and count transaction types\n     */\n    public static void classifyTransactions(MT5Account account) throws Exception {\n\n        Map&lt;String, AtomicInteger&gt; transactionCounts = new HashMap&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n                if (reply.hasData()) {\n                    var transaction = reply.getData().getTradeTransaction();\n                    String type = transaction.getType().toString();\n\n                    // Count transaction type\n                    transactionCounts\n                        .computeIfAbsent(type, k -&gt; new AtomicInteger(0))\n                        .incrementAndGet();\n\n                    System.out.printf(\"\\n\ud83d\udcca %s (total: %d)%n\",\n                        type, transactionCounts.get(type).get());\n\n                    // Detailed info based on type\n                    switch (transaction.getType()) {\n                        case SUB_TRADE_TRANSACTION_ORDER_ADD:\n                            System.out.printf(\"  \u2705 Order added: #%d %s%n\",\n                                transaction.getOrderTicket(),\n                                transaction.getOrderType());\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_ORDER_UPDATE:\n                            System.out.printf(\"  \ud83d\udd04 Order updated: #%d \u2192 %s%n\",\n                                transaction.getOrderTicket(),\n                                transaction.getOrderState());\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_ORDER_DELETE:\n                            System.out.printf(\"  \u274c Order deleted: #%d%n\",\n                                transaction.getOrderTicket());\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_DEAL_ADD:\n                            System.out.printf(\"  \ud83d\udcb0 Deal executed: #%d %s %.2f @ %.5f%n\",\n                                transaction.getDealTicket(),\n                                transaction.getDealType(),\n                                transaction.getVolume(),\n                                transaction.getPrice());\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_POSITION:\n                            System.out.printf(\"  \ud83d\udccd Position changed: #%d%n\",\n                                transaction.getPositionTicket());\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_HISTORY_ADD:\n                            System.out.printf(\"  \ud83d\udcda Moved to history: #%d%n\",\n                                transaction.getOrderTicket());\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_REQUEST:\n                            System.out.println(\"  \ud83d\udce4 Trade request processed\");\n                            break;\n                    }\n\n                    // Print summary every 10 transactions\n                    int total = transactionCounts.values().stream()\n                        .mapToInt(AtomicInteger::get)\n                        .sum();\n\n                    if (total % 10 == 0) {\n                        System.out.println(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\");\n                        System.out.println(\"TRANSACTION SUMMARY:\");\n                        transactionCounts.forEach((t, c) -&gt;\n                            System.out.printf(\"  %s: %d%n\", t, c.get())\n                        );\n                        System.out.println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\");\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Classifier error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"\\nFinal Transaction Summary:\");\n                transactionCounts.forEach((type, count) -&gt;\n                    System.out.printf(\"  %s: %d%n\", type, count.get())\n                );\n            }\n        };\n\n        System.out.println(\"Classifying transactions...\");\n        account.onTradeTransaction(observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nTransactionClassifier.classifyTransactions(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#3-complete-audit-logger","title":"3) Complete audit logger","text":"<pre><code>import java.io.FileWriter;\nimport java.io.PrintWriter;\nimport java.time.Instant;\n\npublic class AuditLogger {\n    /**\n     * Log all transactions to audit file\n     */\n    public static void logAudit(MT5Account account, String filename) throws Exception {\n\n        PrintWriter writer = new PrintWriter(new FileWriter(filename, true));\n\n        // CSV header\n        writer.println(\"Timestamp,Type,OrderTicket,DealTicket,Symbol,OrderType,\" +\n            \"Volume,Price,SL,TP,State,Comment\");\n        writer.flush();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n                    var transaction = data.getTradeTransaction();\n\n                    String timestamp = Instant.now().toString();\n\n                    // Build comment from result if available\n                    String comment = \"\";\n                    if (data.hasTradeResult()) {\n                        comment = data.getTradeResult().getBrokerCommentToOperation();\n                    }\n\n                    // Write to CSV\n                    writer.printf(\"%s,%s,%d,%d,%s,%s,%.2f,%.5f,%.5f,%.5f,%s,\\\"%s\\\"%n\",\n                        timestamp,\n                        transaction.getType(),\n                        transaction.getOrderTicket(),\n                        transaction.getDealTicket(),\n                        transaction.getSymbol(),\n                        transaction.getOrderType(),\n                        transaction.getVolume(),\n                        transaction.getPrice(),\n                        transaction.getPriceStopLoss(),\n                        transaction.getPriceTakeProfit(),\n                        transaction.getOrderState(),\n                        comment.replace(\"\\\"\", \"\\\"\\\"\") // Escape quotes\n                    );\n\n                    writer.flush();\n\n                    System.out.printf(\"\ud83d\udcdd Logged: %s | Order #%d%n\",\n                        transaction.getType(), transaction.getOrderTicket());\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Audit logger error: \" + t.getMessage());\n                writer.close();\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Audit logging completed\");\n                writer.close();\n            }\n        };\n\n        System.out.printf(\"Logging audit trail to %s%n\", filename);\n        account.onTradeTransaction(observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nAuditLogger.logAudit(account, \"audit_trail.csv\");\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#4-order-lifecycle-tracker","title":"4) Order lifecycle tracker","text":"<pre><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.time.Instant;\n\npublic class OrderLifecycleTracker {\n    static class OrderLifecycle {\n        Instant created;\n        String symbol;\n        String orderType;\n        double volume;\n        String lastState;\n        int updateCount;\n\n        OrderLifecycle(String symbol, String orderType, double volume) {\n            this.created = Instant.now();\n            this.symbol = symbol;\n            this.orderType = orderType;\n            this.volume = volume;\n            this.updateCount = 0;\n        }\n    }\n\n    /**\n     * Track complete lifecycle of each order\n     */\n    public static void trackLifecycles(MT5Account account) throws Exception {\n\n        Map&lt;Long, OrderLifecycle&gt; orderLifecycles = new HashMap&lt;&gt;();\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n                if (reply.hasData()) {\n                    var transaction = reply.getData().getTradeTransaction();\n                    long orderTicket = transaction.getOrderTicket();\n\n                    switch (transaction.getType()) {\n                        case SUB_TRADE_TRANSACTION_ORDER_ADD:\n                            // New order lifecycle starts\n                            OrderLifecycle lifecycle = new OrderLifecycle(\n                                transaction.getSymbol(),\n                                transaction.getOrderType().toString(),\n                                transaction.getVolume()\n                            );\n                            orderLifecycles.put(orderTicket, lifecycle);\n\n                            System.out.printf(\"\\n\ud83c\udd95 ORDER #%d CREATED%n\", orderTicket);\n                            System.out.printf(\"   Symbol: %s | Type: %s | Volume: %.2f%n\",\n                                lifecycle.symbol, lifecycle.orderType, lifecycle.volume);\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_ORDER_UPDATE:\n                            // Order state changed\n                            if (orderLifecycles.containsKey(orderTicket)) {\n                                OrderLifecycle lc = orderLifecycles.get(orderTicket);\n                                lc.updateCount++;\n                                lc.lastState = transaction.getOrderState().toString();\n\n                                System.out.printf(\"\\n\ud83d\udd04 ORDER #%d UPDATE #%d%n\",\n                                    orderTicket, lc.updateCount);\n                                System.out.printf(\"   State: %s%n\", lc.lastState);\n                            }\n                            break;\n\n                        case SUB_TRADE_TRANSACTION_ORDER_DELETE:\n                        case SUB_TRADE_TRANSACTION_HISTORY_ADD:\n                            // Order lifecycle ends\n                            if (orderLifecycles.containsKey(orderTicket)) {\n                                OrderLifecycle lc = orderLifecycles.get(orderTicket);\n                                long durationMs = Instant.now().toEpochMilli() -\n                                    lc.created.toEpochMilli();\n\n                                System.out.printf(\"\\n\u2705 ORDER #%d COMPLETED%n\", orderTicket);\n                                System.out.printf(\"   Symbol: %s%n\", lc.symbol);\n                                System.out.printf(\"   Duration: %.2f seconds%n\", durationMs / 1000.0);\n                                System.out.printf(\"   Updates: %d%n\", lc.updateCount);\n                                System.out.printf(\"   Final State: %s%n\", lc.lastState);\n\n                                orderLifecycles.remove(orderTicket);\n                            }\n                            break;\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Lifecycle tracker error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"\\nActive order lifecycles:\");\n                orderLifecycles.forEach((ticket, lifecycle) -&gt;\n                    System.out.printf(\"  #%d: %s %.2f lots (updates: %d)%n\",\n                        ticket, lifecycle.symbol, lifecycle.volume, lifecycle.updateCount)\n                );\n            }\n        };\n\n        System.out.println(\"Tracking order lifecycles...\");\n        account.onTradeTransaction(observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nOrderLifecycleTracker.trackLifecycles(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#5-real-time-trade-request-monitor","title":"5) Real-time trade request monitor","text":"<pre><code>public class TradeRequestMonitor {\n    /**\n     * Monitor trade requests and their results\n     */\n    public static void monitorRequests(MT5Account account) throws Exception {\n\n        StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; observer =\n            new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt;() {\n\n            @Override\n            public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n                if (reply.hasData()) {\n                    var data = reply.getData();\n                    var transaction = data.getTradeTransaction();\n\n                    // Only process REQUEST transactions\n                    if (transaction.getType() ==\n                        Mt5TermApiSubscriptions.SUB_ENUM_TRADE_TRANSACTION_TYPE.SUB_TRADE_TRANSACTION_REQUEST) {\n\n                        System.out.println(\"\\n\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\");\n                        System.out.println(\"\ud83d\udce4 TRADE REQUEST PROCESSED\");\n                        System.out.println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\");\n\n                        // Request details\n                        if (data.hasTradeRequest()) {\n                            var request = data.getTradeRequest();\n\n                            System.out.printf(\"REQUEST:%n\");\n                            System.out.printf(\"  Operation: %s%n\", request.getTradeOperationType());\n                            System.out.printf(\"  Symbol: %s%n\", request.getSymbol());\n                            System.out.printf(\"  Volume: %.2f lots%n\", request.getRequestedDealVolumeLots());\n                            System.out.printf(\"  Price: %.5f%n\", request.getPrice());\n                            System.out.printf(\"  SL: %.5f | TP: %.5f%n\",\n                                request.getStopLoss(), request.getTakeProfit());\n\n                            if (!request.getOrderComment().isEmpty()) {\n                                System.out.printf(\"  Comment: %s%n\", request.getOrderComment());\n                            }\n                        }\n\n                        // Result details\n                        if (data.hasTradeResult()) {\n                            var result = data.getTradeResult();\n\n                            System.out.printf(\"\\nRESULT:%n\");\n                            System.out.printf(\"  Return Code: %d (%s)%n\",\n                                result.getTradeReturnIntCode(),\n                                result.getTradeReturnCode());\n\n                            if (result.getOrderTicket() &gt; 0) {\n                                System.out.printf(\"  Order Ticket: #%d%n\", result.getOrderTicket());\n                            }\n\n                            if (result.getDealTicket() &gt; 0) {\n                                System.out.printf(\"  Deal Ticket: #%d%n\", result.getDealTicket());\n                                System.out.printf(\"  Executed: %.2f lots @ %.5f%n\",\n                                    result.getDealVolume(), result.getDealPrice());\n                            }\n\n                            if (!result.getBrokerCommentToOperation().isEmpty()) {\n                                System.out.printf(\"  Broker: %s%n\",\n                                    result.getBrokerCommentToOperation());\n                            }\n\n                            // Success/failure indicator\n                            if (result.getTradeReturnIntCode() == 10009) {\n                                System.out.println(\"  Status: \u2705 SUCCESS\");\n                            } else {\n                                System.out.println(\"  Status: \u274c FAILED\");\n                            }\n                        }\n\n                        // Account state after request\n                        if (data.hasAccountInfo()) {\n                            var accountInfo = data.getAccountInfo();\n                            System.out.printf(\"\\nACCOUNT:%n\");\n                            System.out.printf(\"  Balance: $%.2f%n\", accountInfo.getBalance());\n                            System.out.printf(\"  Equity: $%.2f%n\", accountInfo.getEquity());\n                            System.out.printf(\"  Margin Level: %.2f%%%n\", accountInfo.getMarginLevel());\n                        }\n\n                        System.out.println(\"\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\");\n                    }\n                }\n            }\n\n            @Override\n            public void onError(Throwable t) {\n                System.err.println(\"Request monitor error: \" + t.getMessage());\n            }\n\n            @Override\n            public void onCompleted() {\n                System.out.println(\"Request monitoring completed\");\n            }\n        };\n\n        System.out.println(\"Monitoring trade requests...\");\n        account.onTradeTransaction(observer);\n        Thread.sleep(Integer.MAX_VALUE);\n    }\n}\n\n// Usage\nTradeRequestMonitor.monitorRequests(account);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#low-level-grpc-call-for-reference","title":"\ud83d\udd04 Low-level gRPC call (for reference)","text":"<pre><code>import io.grpc.*;\nimport io.grpc.stub.StreamObserver;\nimport mt5_term_api.*;\n\n// Build request (empty)\nMt5TermApiSubscriptions.OnTradeTransactionRequest request =\n    Mt5TermApiSubscriptions.OnTradeTransactionRequest.newBuilder().build();\n\n// Add metadata\nMetadata headers = new Metadata();\nMetadata.Key&lt;String&gt; idKey = Metadata.Key.of(\"id\", Metadata.ASCII_STRING_MARSHALLER);\nheaders.put(idKey, instanceId.toString());\n\n// Create observer\nStreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; observer =\n    new StreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n            if (reply.hasData()) {\n                var data = reply.getData();\n                // Process transaction\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            // Handle error\n        }\n\n        @Override\n        public void onCompleted() {\n            // Handle completion\n        }\n    };\n\n// Subscribe\nsubscriptionClient\n    .withInterceptors(MetadataUtils.newAttachHeadersInterceptor(headers))\n    .onTradeTransaction(request, observer);\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/OnTradeTransaction/#important-notes","title":"\ud83d\udccc Important Notes","text":"<p>Transaction Types (11 types): 1. ORDER_ADD - New order placed 2. ORDER_UPDATE - Order state changed 3. ORDER_DELETE - Order removed from active 4. DEAL_ADD - New deal executed 5. DEAL_UPDATE - Deal modified in history 6. DEAL_DELETE - Deal deleted from history 7. HISTORY_ADD - Order moved to history 8. HISTORY_UPDATE - History order modified 9. HISTORY_DELETE - History order deleted 10. POSITION - Position changed (not by deal) 11. REQUEST - Trade request processed</p> <p>Event Frequency: - Most frequent of all trading streams - Multiple events per single trade action - Example: Market order \u2192 REQUEST + ORDER_ADD + DEAL_ADD + HISTORY_ADD - High-volume stream during active trading</p> <p>Data Completeness: - Most detailed information available - Includes request, result, and account state - Transaction object has all order/deal parameters - Best for audit trails and debugging</p> <p>Comparison with OnTrade: - <code>OnTrade</code> = simplified, aggregated events - <code>OnTradeTransaction</code> = detailed, individual events - <code>OnTrade</code> = easier to use for basic needs - <code>OnTradeTransaction</code> = complete for advanced needs</p> <p>Thread Safety: - Events arrive on gRPC thread - High frequency = careful synchronization needed - Use concurrent collections - Consider event queues for processing</p> <p>Best Practices: - Filter by transaction type for specific needs - Log all events for debugging - Use for complete audit trails - Combine with OnTrade for comprehensive coverage - Handle high event volume efficiently</p> <p>Common Use Cases: - Complete trading audit logs - Debugging trading execution - Regulatory compliance logging - Order execution analysis - Trading system integration - Performance monitoring</p> <p>Performance: - Highest event volume of all streams - Keep processing fast - Consider batching or queuing - Monitor memory usage - Offload heavy work to separate thread</p> <p>Error Handling: - Connection loss triggers <code>onError()</code> - Implement reconnection - May miss events during disconnect - Query state after reconnect - Validate event sequences</p>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/","title":"MT5Account \u00b7 Subscriptions (Streaming) - Overview","text":"<p>Real-time event streams for prices, trades, positions, and transactions. Use this page to choose the right API for receiving live updates via gRPC streaming.</p>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>OnSymbolTick - real-time price updates (bid, ask, volume) as they occur.</li> <li>OnTrade - trading events (positions opened/closed, orders placed/modified/deleted).</li> <li>OnPositionProfit - periodic profit/loss updates for all open positions.</li> <li>OnPositionsAndPendingOrdersTickets - periodic ticket lists (lightweight position/order tracking).</li> <li>OnTradeTransaction - detailed transaction log (most comprehensive trading event stream).</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>OnSymbolTick \u2192 price changes in real-time (tick-by-tick data stream).</li> <li>OnTrade \u2192 trading activity notifications (positions, orders, deals).</li> <li>OnPositionProfit \u2192 profit tracking at regular intervals (equity monitoring).</li> <li>OnPositionsAndPendingOrdersTickets \u2192 lightweight state tracking (just ticket numbers).</li> <li>OnTradeTransaction \u2192 complete audit trail (every trading action with full details).</li> </ul> <p>Rule of thumb: need prices \u2192 <code>OnSymbolTick</code>; need trade events \u2192 <code>OnTrade</code>; need profit tracking \u2192 <code>OnPositionProfit</code>; need complete log \u2192 <code>OnTradeTransaction</code>.</p>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Event type Key inputs Real-time price updates (tick stream) <code>OnSymbolTick</code> Continuous Symbols to monitor Notifications when positions/orders change <code>OnTrade</code> Event-driven (none - monitors all) Periodic profit/loss updates <code>OnPositionProfit</code> Periodic (timer) Update interval (milliseconds) Periodic ticket lists (lightweight) <code>OnPositionsAndPendingOrdersTickets</code> Periodic (timer) Update interval (milliseconds) Detailed transaction log (complete audit) <code>OnTradeTransaction</code> Event-driven (none - monitors all)"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>StreamObserver pattern: All subscriptions use gRPC async streaming.</li> <li>Three callback methods: <code>onNext()</code>, <code>onError()</code>, <code>onCompleted()</code>.</li> <li>Background thread: Events arrive on gRPC thread pool, not main thread.</li> <li>Thread safety: Use concurrent collections for shared state.</li> <li>Keep alive: Main thread must stay alive to receive events.</li> <li>OnSymbolTick: Only during market hours; multiple symbols supported.</li> <li>OnTrade: Event-driven; only fires when trading activity occurs.</li> <li>OnPositionProfit: Periodic; you control update frequency.</li> <li>OnPositionsAndPendingOrdersTickets: Lightweight; just ticket numbers, no details.</li> <li>OnTradeTransaction: Highest frequency; most detailed; for audit trails.</li> <li>Unsubscribe: Close connection or let stream complete to clean up.</li> </ul>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>import io.grpc.stub.StreamObserver;\n\n// Subscribe to real-time ticks\nStreamObserver&lt;Mt5TermApiSubscriptions.OnSymbolTickReply&gt; tickObserver =\n    new StreamObserver&lt;&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnSymbolTickReply reply) {\n            if (reply.hasData()) {\n                var tick = reply.getData().getSymbolTick();\n                System.out.printf(\"%s: Bid=%.5f, Ask=%.5f%n\",\n                    tick.getSymbol(), tick.getBid(), tick.getAsk());\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            System.err.println(\"Tick stream error: \" + t.getMessage());\n        }\n\n        @Override\n        public void onCompleted() {\n            System.out.println(\"Tick stream completed\");\n        }\n    };\n\naccount.onSymbolTick(new String[]{\"EURUSD\", \"GBPUSD\"}, tickObserver);\n</code></pre> <pre><code>// Subscribe to trade events\nStreamObserver&lt;Mt5TermApiSubscriptions.OnTradeReply&gt; tradeObserver =\n    new StreamObserver&lt;&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnTradeReply reply) {\n            if (reply.hasData()) {\n                var eventData = reply.getData().getEventData();\n                int newPos = eventData.getNewPositionsCount();\n                int closedPos = eventData.getDisappearedPositionsCount();\n\n                if (newPos &gt; 0) {\n                    System.out.printf(\"\u2705 %d position(s) opened%n\", newPos);\n                }\n                if (closedPos &gt; 0) {\n                    System.out.printf(\"\u274c %d position(s) closed%n\", closedPos);\n                }\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            System.err.println(\"Trade stream error: \" + t.getMessage());\n        }\n\n        @Override\n        public void onCompleted() {\n            System.out.println(\"Trade stream completed\");\n        }\n    };\n\naccount.onTrade(tradeObserver);\n</code></pre> <pre><code>// Subscribe to position profit updates (every 1 second)\nStreamObserver&lt;Mt5TermApiSubscriptions.OnPositionProfitReply&gt; profitObserver =\n    new StreamObserver&lt;&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnPositionProfitReply reply) {\n            if (reply.hasData()) {\n                var accountInfo = reply.getData().getAccountInfo();\n                System.out.printf(\"Equity: $%.2f | Profit: $%.2f | Margin Level: %.2f%%%n\",\n                    accountInfo.getEquity(),\n                    accountInfo.getProfit(),\n                    accountInfo.getMarginLevel());\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            System.err.println(\"Profit stream error: \" + t.getMessage());\n        }\n\n        @Override\n        public void onCompleted() {\n            System.out.println(\"Profit stream completed\");\n        }\n    };\n\naccount.onPositionProfit(1000, false, profitObserver); // 1000ms interval\n</code></pre> <pre><code>// Subscribe to ticket updates (lightweight, every 2 seconds)\nStreamObserver&lt;Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply&gt; ticketObserver =\n    new StreamObserver&lt;&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnPositionsAndPendingOrdersTicketsReply reply) {\n            if (reply.hasData()) {\n                var data = reply.getData();\n                System.out.printf(\"Positions: %d | Orders: %d%n\",\n                    data.getPositionTicketsCount(),\n                    data.getPendingOrderTicketsCount());\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            System.err.println(\"Ticket stream error: \" + t.getMessage());\n        }\n\n        @Override\n        public void onCompleted() {\n            System.out.println(\"Ticket stream completed\");\n        }\n    };\n\naccount.onPositionsAndPendingOrdersTickets(2000, ticketObserver); // 2000ms interval\n</code></pre> <pre><code>// Subscribe to detailed transactions (audit trail)\nStreamObserver&lt;Mt5TermApiSubscriptions.OnTradeTransactionReply&gt; transactionObserver =\n    new StreamObserver&lt;&gt;() {\n        @Override\n        public void onNext(Mt5TermApiSubscriptions.OnTradeTransactionReply reply) {\n            if (reply.hasData()) {\n                var transaction = reply.getData().getTradeTransaction();\n                System.out.printf(\"Transaction: %s | Order #%d | Symbol: %s%n\",\n                    transaction.getType(),\n                    transaction.getOrderTicket(),\n                    transaction.getSymbol());\n            }\n        }\n\n        @Override\n        public void onError(Throwable t) {\n            System.err.println(\"Transaction stream error: \" + t.getMessage());\n        }\n\n        @Override\n        public void onCompleted() {\n            System.out.println(\"Transaction stream completed\");\n        }\n    };\n\naccount.onTradeTransaction(transactionObserver);\n</code></pre> <pre><code>// Keep main thread alive to receive events\nThread.sleep(60000); // Run for 1 minute\n</code></pre>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#stream-comparison","title":"Stream Comparison","text":"Stream Frequency Detail Level Use Case <code>OnSymbolTick</code> Continuous Price only Real-time charting, scalping <code>OnTrade</code> Event-driven Medium Trade notifications, basic logging <code>OnPositionProfit</code> Periodic Profit focus Risk monitoring, equity tracking <code>OnPositionsAndPendingOrdersTickets</code> Periodic Minimal Lightweight state sync <code>OnTradeTransaction</code> Event-driven Complete Audit logs, debugging, compliance"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#best-practices","title":"Best Practices","text":"<ul> <li>Always implement all three methods: <code>onNext()</code>, <code>onError()</code>, <code>onCompleted()</code>.</li> <li>Use CountDownLatch for synchronization between main thread and stream thread.</li> <li>Handle errors gracefully: Implement reconnection logic in <code>onError()</code>.</li> <li>Keep callbacks fast: Offload heavy processing to separate threads.</li> <li>Use concurrent collections: Thread-safe data structures for shared state.</li> <li>Monitor resource usage: Streams consume network bandwidth and memory.</li> <li>Unsubscribe when done: Close connections to free resources.</li> <li>Proper cleanup sequence: Always call <code>disconnect()</code> then <code>close()</code> in finally block.</li> </ul> <p>\u26a0\ufe0f Critical: Streams don't stop automatically! See gRPC Channel and Stream Management Guide for proper cleanup patterns and troubleshooting hanging programs.</p>"},{"location":"MT5Account/6.%20Subscriptions/Subscriptions.Overview/#see-also","title":"See also","text":"<ul> <li>Positions: <code>OpenedOrders</code> - query current state</li> <li>Trading: <code>OrderSend</code>, <code>OrderClose</code> - execute trades</li> <li>Symbol info: <code>SymbolInfoTick</code> - pull single quote</li> <li>Account: <code>AccountSummary</code> - query account state</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/","title":"MT5Sugar \u00b7 Convenience Layer - Complete Overview","text":"<p>High-level convenience methods for common trading operations. Simplified API with auto-normalization, risk management, and batch operations. ~50 methods organized in 11 functional groups.</p>"},{"location":"MT5Sugar/MT5Sugar.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":""},{"location":"MT5Sugar/MT5Sugar.Overview/#1-symbol-helpers-12-methods","title":"1. Symbol Helpers (12 methods)","text":"<p>Essential symbol information and normalization utilities.</p> <ul> <li>ensureSymbolSelected - enable symbol in Market Watch</li> <li>getPoint - point size (e.g., 0.00001)</li> <li>getDigits - decimal places (e.g., 5)</li> <li>getSpread - spread in points</li> <li>normalizePrice - round price to symbol digits</li> <li>normalizeVolume - normalize to min/max/step</li> <li>pointsToPrice - convert points \u2192 price</li> <li>getBid - current Bid</li> <li>getAsk - current Ask</li> <li>getSpreadPrice - spread in price units</li> <li>pointsToPips - points \u2192 pips conversion</li> <li>priceFromOffsetPoints - price + offset</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#2-market-orders-2-methods","title":"2. Market Orders (2 methods)","text":"<p>Instant execution at market price.</p> <ul> <li>buyMarket - BUY at Ask (instant)</li> <li>sellMarket - SELL at Bid (instant)</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#3-pending-orders-4-methods","title":"3. Pending Orders (4 methods)","text":"<p>Entry orders with exact price.</p> <ul> <li>buyLimit - BUY LIMIT (below price)</li> <li>sellLimit - SELL LIMIT (above price)</li> <li>buyStop - BUY STOP (breakout up)</li> <li>sellStop - SELL STOP (breakdown)</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#4-pending-orders-with-points-4-methods","title":"4. Pending Orders with Points (4 methods)","text":"<p>Simplified pending orders via offset.</p> <ul> <li>buyLimitPoints - BUY LIMIT via offset</li> <li>sellLimitPoints - SELL LIMIT via offset</li> <li>buyStopPoints - BUY STOP via offset</li> <li>sellStopPoints - SELL STOP via offset</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#5-position-management-5-methods","title":"5. Position Management (5 methods)","text":"<p>Modify and close positions.</p> <ul> <li>modifyPosition - change SL/TP</li> <li>closePosition - close (full/partial)</li> <li>closeAll - close with filters</li> <li>closeAllBuy - close all BUY</li> <li>closeAllSell - close all SELL</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#6-advanced-batch-operations-3-methods","title":"6. Advanced Batch Operations (3 methods)","text":"<p>Separate positions vs orders control.</p> <ul> <li>closeAllPositions - close only positions</li> <li>closeAllPending - cancel only orders</li> <li>cancelAll - alias for closeAllPending</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#7-risk-management-3-methods","title":"7. Risk Management (3 methods)","text":"<p>Position sizing from $ risk.</p> <ul> <li>calculateVolume - lot size from $risk + SL</li> <li>buyByRisk - BUY with auto volume</li> <li>sellByRisk - SELL with auto volume</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#8-advanced-helpers-4-methods","title":"8. Advanced Helpers (4 methods)","text":"<p>Additional utilities.</p> <ul> <li>getVolumeLimits - [min, max, step]</li> <li>pointsToPips - broker-aware conversion</li> <li>priceFromOffsetPoints - price + offset</li> <li>getTickValueAndSize - [value, size]</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#9-account-position-helpers-10-methods","title":"9. Account &amp; Position Helpers (10 methods)","text":"<p>Quick account state access.</p> <ul> <li>getBalance - account balance</li> <li>getEquity - account equity</li> <li>getMargin - used margin</li> <li>getFreeMargin - free margin</li> <li>getProfit - floating P/L</li> <li>hasOpenPositions - bool check</li> <li>getPositionCount - count</li> <li>normalizePriceDigits - alias</li> <li>normalizeLots - alias</li> <li>createTimestamp - 3 variants</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#10-snapshot-helpers-2-methods-2-classes","title":"10. Snapshot Helpers (2 methods + 2 classes)","text":"<p>Complete state snapshots.</p> <ul> <li>getAccountSnapshot - full account state</li> <li>getSymbolSnapshot - full symbol info</li> <li>Classes: <code>AccountSnapshot</code>, <code>SymbolSnapshot</code></li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#11-history-helpers-2-methods","title":"11. History Helpers (2 methods)","text":"<p>Historical data retrieval.</p> <ul> <li>getOrdersHistoryLastDays - orders history</li> <li>getPositionsHistoryPaged - paginated history</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<p>What is MT5Sugar?</p> <p>Convenience layer on top of MT5Service/MT5Account with:</p> <ul> <li>Auto-normalization (volumes, prices)</li> <li>Auto symbol selection</li> <li>Simplified APIs</li> <li>Built-in risk management</li> <li>Batch operations</li> </ul> <p>When to use:</p> <ul> <li>\u2705 Production trading bots</li> <li>\u2705 Quick prototypes</li> <li>\u2705 Risk-managed trading</li> <li>\u2705 Beginners</li> </ul> <p>When NOT to use:</p> <ul> <li>\u274c Need exact control over parameters</li> <li>\u274c Custom normalization logic</li> <li>\u274c Advanced order types (STOP_LIMIT)</li> </ul> <p>Rule of thumb: Start with MT5Sugar \u2192 drop down only when needed.</p>"},{"location":"MT5Sugar/MT5Sugar.Overview/#quick-choose","title":"Quick choose","text":""},{"location":"MT5Sugar/MT5Sugar.Overview/#trading","title":"Trading","text":"Need Use Inputs Open BUY at market <code>buyMarket</code> symbol, vol, SL, TP Open SELL at market <code>sellMarket</code> symbol, vol, SL, TP BUY at price (below) <code>buyLimit</code> symbol, vol, price, SL, TP SELL at price (above) <code>sellLimit</code> symbol, vol, price, SL, TP BUY on breakout (above) <code>buyStop</code> symbol, vol, price, SL, TP SELL on breakdown (below) <code>sellStop</code> symbol, vol, price, SL, TP BUY with points offset <code>buyLimitPoints</code> symbol, vol, offset, SL pts, TP pts BUY with auto volume ($risk) <code>buyByRisk</code> symbol, SL pts, $risk, TP pts"},{"location":"MT5Sugar/MT5Sugar.Overview/#position-management","title":"Position Management","text":"Need Use Inputs Change SL/TP <code>modifyPosition</code> ticket, SL, TP Close position <code>closePosition</code> ticket (+ vol) Close all for symbol <code>closeAll</code> symbol, isBuy filter Close all BUY <code>closeAllBuy</code> symbol Close all SELL <code>closeAllSell</code> symbol Close only positions <code>closeAllPositions</code> symbol, isBuy Cancel only pending orders <code>closeAllPending</code> symbol, isBuy"},{"location":"MT5Sugar/MT5Sugar.Overview/#symbol-account-info","title":"Symbol &amp; Account Info","text":"Need Use Returns Current Bid/Ask <code>getBid</code> / <code>getAsk</code> double Point size <code>getPoint</code> double Spread <code>getSpread</code> int (points) Normalize price/volume <code>normalizePrice/Volume</code> double Full symbol snapshot <code>getSymbolSnapshot</code> SymbolSnapshot Account balance/equity <code>getBalance/Equity</code> double Full account snapshot <code>getAccountSnapshot</code> AccountSnapshot"},{"location":"MT5Sugar/MT5Sugar.Overview/#risk-management","title":"Risk Management","text":"Need Use Inputs Calculate lot size from $risk <code>calculateVolume</code> symbol, SL pts, $risk Open BUY with auto volume <code>buyByRisk</code> symbol, SL pts, $risk, TP Open SELL with auto volume <code>sellByRisk</code> symbol, SL pts, $risk, TP"},{"location":"MT5Sugar/MT5Sugar.Overview/#cross-refs-gotchas","title":"\u274c Cross-refs &amp; gotchas","text":""},{"location":"MT5Sugar/MT5Sugar.Overview/#auto-normalization","title":"Auto-normalization","text":"<ul> <li>Volumes/prices normalized automatically</li> <li>Symbols added to Market Watch automatically</li> <li>May change input values slightly</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#sltp-rules","title":"SL/TP rules","text":"<p>BUY: SL below entry, TP above entry SELL: SL above entry, TP below entry</p> <p>Pending: * BUY LIMIT: below Ask, triggers on drop * SELL LIMIT: above Bid, triggers on rise * BUY STOP: above Ask, triggers on rise (breakout) * SELL STOP: below Bid, triggers on drop (breakdown)</p>"},{"location":"MT5Sugar/MT5Sugar.Overview/#execution-prices","title":"Execution prices","text":"<ul> <li>BUY executes at Ask (higher)</li> <li>SELL executes at Bid (lower)</li> <li>Spread = Ask - Bid (cost on entry)</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#risk-management_1","title":"Risk management","text":"<ul> <li>Uses points, not pips</li> <li>Check broker min/max volume limits</li> <li>2% rule: max 2% risk per trade</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#batch-operations","title":"Batch operations","text":"<ul> <li>Continue on failures</li> <li>Return count of successful ops</li> <li>Failed ops logged to System.err</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#points-vs-pips","title":"Points vs Pips","text":"<ul> <li>5-digit: 1 pip = 10 points</li> <li>3-digit: 1 pip = 1 point</li> <li>All methods use points</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#null-vs-0","title":"null vs 0","text":"<ul> <li><code>null</code> = keep current / no SL-TP</li> <li><code>0</code> / <code>0.0</code> = no SL-TP / remove</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#errors","title":"Errors","text":"<ul> <li>Throw <code>ApiExceptionMT5</code> on failure</li> <li>Code 10009 = success</li> <li>Common: invalid stops, market closed</li> </ul>"},{"location":"MT5Sugar/MT5Sugar.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Market orders\nlong ticket = sugar.buyMarket(\"EURUSD\", 0.1, 1.08000, 1.09000);\nlong ticket = sugar.sellMarket(\"GBPUSD\", 0.1, 1.27000, 1.26000);\n\n// Pending with price\ndouble entry = sugar.getAsk(\"EURUSD\") - (50 * sugar.getPoint(\"EURUSD\"));\nlong ticket = sugar.buyLimit(\"EURUSD\", 0.1, entry, null, null);\n\n// Pending with points offset\nlong ticket = sugar.buyLimitPoints(\"EURUSD\", 0.1, -50, 40, 120);\n\n// Risk-based\ndouble risk = sugar.getBalance() * 0.02;\nlong ticket = sugar.buyByRisk(\"EURUSD\", 50, risk, 100);\n\n// Close positions\nsugar.closePosition(123456789);\nint closed = sugar.closeAll(\"EURUSD\");\nint closed = sugar.closeAllBuy(null);\n\n// Modify\nsugar.modifyPosition(123456789, newSL, newTP);\n\n// Info\ndouble balance = sugar.getBalance();\ndouble bid = sugar.getBid(\"EURUSD\");\nvar snapshot = sugar.getAccountSnapshot();\nvar symSnap = sugar.getSymbolSnapshot(\"EURUSD\");\n\n// Calculate volume\ndouble vol = sugar.calculateVolume(\"EURUSD\", 50, 100.0);\n\n// History\nvar history = sugar.getOrdersHistoryLastDays(7, null);\nvar posHistory = sugar.getPositionsHistoryPaged(0, 50);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/","title":"MT5Sugar \u00b7 Symbol Helpers - Overview","text":"<p>Convenience methods for working with symbol properties, prices, and calculations. Simplifies common symbol operations that would otherwise require multiple low-level calls.</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#what-lives-here","title":"\ud83d\udcc1 What lives here","text":"<ul> <li>ensureSymbolSelected - ensure symbol is available for trading (auto-select if needed).</li> <li>getPoint - get point size (smallest price increment).</li> <li>getDigits - get decimal places for symbol.</li> <li>getSpread - get current spread in points.</li> <li>getSpreadPrice - get current spread in price units (Ask - Bid).</li> <li>normalizePrice - round price to symbol's decimal precision.</li> <li>normalizeVolume - adjust volume to symbol's min/max/step constraints.</li> <li>getBid - get current Bid (SELL) price in one call.</li> <li>getAsk - get current Ask (BUY) price in one call.</li> <li>pointsToPrice - convert points offset to price (direction-aware).</li> <li>priceFromOffsetPoints - calculate price from current with offset (simple addition).</li> <li>pointsToPips - convert points to pips (handles 5-digit vs 3-digit brokers).</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#plain-english","title":"\ud83e\udded Plain English","text":"<ul> <li>Symbol selection: <code>ensureSymbolSelected()</code> \u2192 make sure symbol is available.</li> <li>Price info: <code>getBid()</code>, <code>getAsk()</code>, <code>getSpread()</code>, <code>getSpreadPrice()</code> \u2192 current market data.</li> <li>Symbol properties: <code>getPoint()</code>, <code>getDigits()</code> \u2192 symbol specifications.</li> <li>Normalization: <code>normalizePrice()</code>, <code>normalizeVolume()</code> \u2192 fix values to broker rules.</li> <li>Point calculations: <code>pointsToPrice()</code>, <code>priceFromOffsetPoints()</code>, <code>pointsToPips()</code> \u2192 convert between formats.</li> </ul> <p>Rule of thumb: need current price \u2192 <code>getBid()/getAsk()</code>; need symbol specs \u2192 <code>getPoint()/getDigits()</code>; need SL/TP calculation \u2192 <code>pointsToPrice()</code>.</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#quick-choose","title":"Quick choose","text":"If you need\u2026 Use Returns Underlying MT5Account method Make sure symbol is available <code>ensureSymbolSelected</code> void <code>symbolSelect</code> Current BUY price <code>getAsk</code> double (price) <code>symbolInfoTick</code> Current SELL price <code>getBid</code> double (price) <code>symbolInfoTick</code> Spread in points <code>getSpread</code> int (points) <code>symbolInfoInteger</code> Spread in price units <code>getSpreadPrice</code> double (Ask - Bid) <code>symbolInfoTick</code> Smallest price increment <code>getPoint</code> double (e.g., 0.00001) <code>symbolInfoDouble</code> Decimal places <code>getDigits</code> int (e.g., 5) <code>symbolInfoInteger</code> Fix price to correct precision <code>normalizePrice</code> double (rounded) <code>symbolInfoInteger</code> (digits) Fix volume to broker limits <code>normalizeVolume</code> double (clamped/rounded) <code>symbolInfoDouble</code> (vol limits) Calculate SL/TP from points (direction-aware) <code>pointsToPrice</code> double (price) <code>symbolInfoTick</code> + <code>getPoint</code> Calculate price at offset (simple) <code>priceFromOffsetPoints</code> double (price) <code>symbolInfoTick</code> + <code>getPoint</code> Convert points to pips (for reporting) <code>pointsToPips</code> double (pips) <code>getDigits</code>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#crossrefs-gotchas","title":"\u274c Cross\u2011refs &amp; gotchas","text":"<ul> <li>Bid vs Ask:</li> <li>Bid = price you SELL at (lower)</li> <li>Ask = price you BUY at (higher)</li> <li> <p>Spread = Ask - Bid (your cost)</p> </li> <li> <p>Points vs Pips:</p> </li> <li>Point = broker's smallest increment (e.g., 0.00001 for 5-digit EURUSD)</li> <li>Pip = industry standard (0.0001 for FX)</li> <li>5-digit brokers: 10 points = 1 pip</li> <li>3-digit brokers (JPY): 1 point = 1 pip</li> <li> <p>Use <code>pointsToPips()</code> for conversion</p> </li> <li> <p>Normalization:</p> </li> <li><code>normalizePrice()</code> \u2192 rounds to symbol's decimal places (e.g., 5 digits)</li> <li><code>normalizeVolume()</code> \u2192 clamps to [min, max] and rounds to step</li> <li> <p>All trading methods auto-normalize, manual use rarely needed</p> </li> <li> <p>pointsToPrice vs priceFromOffsetPoints:</p> </li> <li><code>pointsToPrice(symbol, 50, true)</code> \u2192 Ask + 50p (BUY), Bid - 50p (SELL) \u2190 direction logic</li> <li><code>priceFromOffsetPoints(symbol, true, 50)</code> \u2192 Ask + 50p (always adds)</li> <li> <p>Use <code>pointsToPrice()</code> for SL/TP, <code>priceFromOffsetPoints()</code> for simple offsets</p> </li> <li> <p>Symbol selection:</p> </li> <li>Most methods don't require <code>ensureSymbolSelected()</code> first</li> <li>Only needed if symbol might not be in Market Watch</li> <li> <p>All trading methods call this internally</p> </li> <li> <p>Real-time data:</p> </li> <li><code>getBid()</code>, <code>getAsk()</code>, <code>getSpread()</code> return current market data</li> <li>Values change tick-by-tick during market hours</li> <li>Cache if you need consistent values across calculations</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#minimal-snippets","title":"\ud83d\udfe2 Minimal snippets","text":"<pre><code>// Get current prices\ndouble bid = sugar.getBid(\"EURUSD\");\ndouble ask = sugar.getAsk(\"EURUSD\");\ndouble spread = sugar.getSpreadPrice(\"EURUSD\"); // In price units\nint spreadPoints = sugar.getSpread(\"EURUSD\");   // In points\n\nSystem.out.printf(\"EURUSD: Bid=%.5f, Ask=%.5f, Spread=%.5f (%d points)%n\",\n    bid, ask, spread, spreadPoints);\n// Output: EURUSD: Bid=1.12340, Ask=1.12350, Spread=0.00010 (10 points)\n</code></pre> <pre><code>// Get symbol specifications\ndouble point = sugar.getPoint(\"EURUSD\");  // 0.00001\nint digits = sugar.getDigits(\"EURUSD\");   // 5\n\nSystem.out.printf(\"EURUSD: Point=%.5f, Digits=%d%n\", point, digits);\n// Output: EURUSD: Point=0.00001, Digits=5\n</code></pre> <pre><code>// Calculate SL/TP from points\nString symbol = \"EURUSD\";\n\n// BUY: SL 50 points below, TP 100 points above\ndouble slBuy = sugar.pointsToPrice(symbol, 50, true);   // Ask - 50p\ndouble tpBuy = sugar.getAsk(symbol) + (100 * sugar.getPoint(symbol)); // Ask + 100p\n\n// SELL: SL 50 points above, TP 100 points below\ndouble slSell = sugar.pointsToPrice(symbol, 50, false);  // Bid + 50p\ndouble tpSell = sugar.getBid(symbol) - (100 * sugar.getPoint(symbol)); // Bid - 100p\n\nSystem.out.printf(\"BUY: SL=%.5f, TP=%.5f%n\", slBuy, tpBuy);\nSystem.out.printf(\"SELL: SL=%.5f, TP=%.5f%n\", slSell, tpSell);\n</code></pre> <pre><code>// Normalize values before trading\nString symbol = \"EURUSD\";\ndouble calculatedPrice = 1.123456789;  // Too many decimals\ndouble calculatedVolume = 0.157;       // Might not match broker step\n\ndouble price = sugar.normalizePrice(symbol, calculatedPrice);   // 1.12346\ndouble volume = sugar.normalizeVolume(symbol, calculatedVolume); // 0.16\n\nSystem.out.printf(\"Normalized: Price=%.5f, Volume=%.2f%n\", price, volume);\n// Note: Trading methods auto-normalize, manual use rarely needed\n</code></pre> <pre><code>// Convert points to pips (for reporting)\nString symbol = \"EURUSD\";\ndouble profitPoints = 50;\ndouble profitPips = sugar.pointsToPips(symbol, profitPoints);\n\nSystem.out.printf(\"Profit: %.0f points (%.1f pips)%n\", profitPoints, profitPips);\n// Output: Profit: 50 points (5.0 pips)\n</code></pre> <pre><code>// Calculate price at offset from current\nString symbol = \"GBPUSD\";\n\n// BUY STOP 20 points above current Ask\ndouble buyStopPrice = sugar.priceFromOffsetPoints(symbol, true, 20);\n\n// SELL LIMIT 30 points above current Bid\ndouble sellLimitPrice = sugar.priceFromOffsetPoints(symbol, false, 30);\n\nSystem.out.printf(\"BUY STOP: %.5f (+20p from Ask)%n\", buyStopPrice);\nSystem.out.printf(\"SELL LIMIT: %.5f (+30p from Bid)%n\", sellLimitPrice);\n</code></pre> <pre><code>// Ensure symbol is available (rarely needed)\nsugar.ensureSymbolSelected(\"XAUUSD\");\n// Symbol is now in Market Watch if it wasn't already\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#common-patterns","title":"Common Patterns","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#pattern-1-get-current-market-state","title":"Pattern 1: Get current market state","text":"<pre><code>String symbol = \"EURUSD\";\n\n// All in a few lines\ndouble bid = sugar.getBid(symbol);\ndouble ask = sugar.getAsk(symbol);\ndouble spread = sugar.getSpreadPrice(symbol);\ndouble point = sugar.getPoint(symbol);\nint digits = sugar.getDigits(symbol);\n\nSystem.out.printf(\"%s Market State:%n\", symbol);\nSystem.out.printf(\"  Bid: %.\" + digits + \"f%n\", bid);\nSystem.out.printf(\"  Ask: %.\" + digits + \"f%n\", ask);\nSystem.out.printf(\"  Spread: %.\" + digits + \"f (%d points)%n\",\n    spread, (int)(spread / point));\nSystem.out.printf(\"  Point: %.\" + digits + \"f%n\", point);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#pattern-2-calculate-sltp-for-market-order","title":"Pattern 2: Calculate SL/TP for market order","text":"<pre><code>String symbol = \"EURUSD\";\nint slPoints = 50;\nint tpPoints = 100;\n\n// For BUY\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble slBuy = ask - (slPoints * point);\ndouble tpBuy = ask + (tpPoints * point);\n\nlong ticket = sugar.buyMarket(symbol, 0.1, slBuy, tpBuy);\n\n// For SELL\ndouble bid = sugar.getBid(symbol);\ndouble slSell = bid + (slPoints * point);\ndouble tpSell = bid - (tpPoints * point);\n\nlong ticket2 = sugar.sellMarket(symbol, 0.1, slSell, tpSell);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#pattern-3-monitor-spread-conditions","title":"Pattern 3: Monitor spread conditions","text":"<pre><code>String symbol = \"EURUSD\";\ndouble maxSpreadPrice = 0.00020; // Max 20 points\n\nwhile (true) {\n    double currentSpread = sugar.getSpreadPrice(symbol);\n\n    if (currentSpread &lt;= maxSpreadPrice) {\n        System.out.println(\"\u2705 Good spread, placing trade\");\n        sugar.buyMarket(symbol, 0.1, null, null);\n        break;\n    }\n\n    System.out.printf(\"\u26a0\ufe0f Spread too high: %.5f (max: %.5f)%n\",\n        currentSpread, maxSpreadPrice);\n    Thread.sleep(1000);\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#pattern-4-compare-symbols","title":"Pattern 4: Compare symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\n\nSystem.out.println(\"Symbol   | Bid      | Ask      | Spread   | Point    | Digits\");\nSystem.out.println(\"---------|----------|----------|----------|----------|-------\");\n\nfor (String symbol : symbols) {\n    double bid = sugar.getBid(symbol);\n    double ask = sugar.getAsk(symbol);\n    double spread = sugar.getSpreadPrice(symbol);\n    double point = sugar.getPoint(symbol);\n    int digits = sugar.getDigits(symbol);\n\n    System.out.printf(\"%8s | %8.\"+digits+\"f | %8.\"+digits+\"f | %8.\"+digits+\"f | %8.\"+digits+\"f | %6d%n\",\n        symbol, bid, ask, spread, point, digits);\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#best-practices","title":"Best Practices","text":"<ul> <li> <p>Cache symbol properties: Point, digits don't change - cache them if used repeatedly.   <pre><code>// \u274c BAD: Repeated calls\nfor (int i = 0; i &lt; 1000; i++) {\n    double price = ask + (i * sugar.getPoint(symbol)); // Calls getPoint 1000x\n}\n\n// \u2705 GOOD: Cache once\ndouble point = sugar.getPoint(symbol);\nfor (int i = 0; i &lt; 1000; i++) {\n    double price = ask + (i * point);\n}\n</code></pre></p> </li> <li> <p>Consistent base price: Use same Bid/Ask for related calculations.   <pre><code>// \u274c BAD: Different prices\ndouble sl = sugar.getAsk(symbol) - (50 * point);  // Ask at time T1\ndouble tp = sugar.getAsk(symbol) + (100 * point); // Ask at time T2 (may differ!)\n\n// \u2705 GOOD: Single snapshot\ndouble ask = sugar.getAsk(symbol);\ndouble sl = ask - (50 * point);\ndouble tp = ask + (100 * point);\n</code></pre></p> </li> <li> <p>Auto-normalization: Trading methods normalize automatically.   <pre><code>// \u274c UNNECESSARY: Already normalized inside\ndouble volume = sugar.normalizeVolume(symbol, 0.1);\nsugar.buyMarket(symbol, volume, null, null);\n\n// \u2705 GOOD: Direct call\nsugar.buyMarket(symbol, 0.1, null, null); // Auto-normalizes\n</code></pre></p> </li> <li> <p>Direction-aware calculations: Use <code>pointsToPrice()</code> for SL/TP.   <pre><code>// \u2705 GOOD: Direction-aware\ndouble sl = sugar.pointsToPrice(symbol, 50, true); // BUY: Ask - 50p\n\n// \u274c CONFUSING: Manual with priceFromOffsetPoints\ndouble sl2 = sugar.priceFromOffsetPoints(symbol, true, -50); // Same but less clear\n</code></pre></p> </li> <li> <p>Display in pips: Convert to pips for user-facing reports.   <pre><code>double profitPoints = 50;\ndouble profitPips = sugar.pointsToPips(symbol, profitPoints);\n\nSystem.out.printf(\"Profit: %.0f points (%.1f pips)%n\", profitPoints, profitPips);\n// More user-friendly than just \"50 points\"\n</code></pre></p> </li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/Symbol_Helpers.Overview/#see-also","title":"See also","text":"<ul> <li>MT5Account Symbol Methods: <code>SymbolInfoTick</code>, <code>SymbolInfoDouble</code>, <code>SymbolInfoInteger</code></li> <li>Trading Methods: Market Orders, Pending Orders</li> <li>Position Management: Position Helpers</li> <li>Account Info: Account Helpers</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/","title":"\u2705 Ensure Symbol Selected (Market Watch)","text":"<p>Convenience method: automatically enables symbol in Market Watch if not already selected. Simplifies symbol preparation before trading.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.ensureSymbolSelected(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolSelect()</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>void</code> (throws exception on failure)</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Ensures symbol is visible/active in Market Watch.</li> <li>Why you need it. Many operations require symbol to be selected first.</li> <li>Auto-called. All trading methods in MT5Sugar call this automatically.</li> <li>No return. Just enables the symbol, no return value needed.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Prepare symbol before manual quote retrieval.</li> <li>Enable symbol before charting or analysis.</li> <li>Ensure symbol availability before batch operations.</li> </ul> <p>Note: All <code>buyMarket()</code>, <code>sellMarket()</code>, and pending order methods call this automatically, so you rarely need to call it manually.</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>import io.metarpc.mt5.MT5Account;\nimport io.metarpc.mt5.MT5Service;\nimport io.metarpc.mt5.MT5Sugar;\n\npublic class Example {\n    public static void main(String[] args) throws Exception {\n        MT5Account account = new MT5Account(12345678, \"password\");\n        MT5Service service = new MT5Service(account);\n        MT5Sugar sugar = new MT5Sugar(service);\n\n        account.connect(\"demo.mt5server.com\", 443, \"EURUSD\");\n\n        // Manually ensure symbol is selected\n        sugar.ensureSymbolSelected(\"GBPUSD\");\n\n        System.out.println(\"GBPUSD is now available in Market Watch\");\n\n        // Now you can get quotes, place orders, etc.\n        double bid = sugar.getBid(\"GBPUSD\");\n        System.out.printf(\"GBPUSD Bid: %.5f%n\", bid);\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Idempotent: Safe to call multiple times - won't fail if already selected.</li> <li>Auto-called: All trading methods call this internally.</li> <li>Market Watch: Makes symbol visible in MT5 terminal's Market Watch window.</li> <li>Required first: Some symbols must be selected before quotes are available.</li> <li>No performance cost: If already selected, operation is very fast.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/ensureSymbolSelected/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolSelect</code> - underlying implementation</li> <li>Related: <code>getAsk()</code>, <code>getBid()</code> - get current prices</li> <li>Trading: <code>buyMarket()</code> - auto-calls this method</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/","title":"\ud83d\udcc8 Get Ask Price","text":"<p>Convenience method: retrieves the current Ask price for a symbol in one simple call. Essential for BUY order calculations and spread analysis.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getAsk(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolInfoTick()</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Current Ask price</p> <p>What is Ask: - Price at which you can BUY - Higher than Bid price (Ask - Bid = Spread) - Used for closing SELL positions - Used for opening BUY positions</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Current buying price for a symbol.</li> <li>Why you need it. Calculate BUY entry/exit points.</li> <li>Ask vs Bid. Ask = BUY price, Bid = SELL price.</li> <li>Spread. Ask - Bid = trading cost.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Get current price for BUY order entry.</li> <li>Calculate profit for open SELL positions.</li> <li>Monitor price for trading decisions.</li> <li>Calculate spread (Ask - Bid).</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#1-get-current-ask-price","title":"1) Get current Ask price","text":"<pre><code>double ask = sugar.getAsk(\"EURUSD\");\nSystem.out.printf(\"EURUSD Ask: %.5f%n\", ask);\n// Output: EURUSD Ask: 1.12350\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#2-calculate-buy-stop-loss-from-points","title":"2) Calculate BUY stop loss from points","text":"<pre><code>String symbol = \"EURUSD\";\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// SL 50 points below entry (for BUY)\ndouble stopLoss = ask - (50 * point);\n\n// TP 100 points above entry (for BUY)\ndouble takeProfit = ask + (100 * point);\n\nSystem.out.printf(\"BUY at Ask: %.5f%n\", ask);\nSystem.out.printf(\"Stop Loss (-50p): %.5f%n\", stopLoss);\nSystem.out.printf(\"Take Profit (+100p): %.5f%n\", takeProfit);\n\n// Place BUY order\nlong ticket = sugar.buyMarket(symbol, 0.1, stopLoss, takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#3-monitor-for-price-breakout","title":"3) Monitor for price breakout","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble resistanceLevel = 1.27000;\n\nSystem.out.printf(\"Monitoring %s for breakout above %.5f%n\",\n    symbol, resistanceLevel);\n\nwhile (true) {\n    double currentAsk = sugar.getAsk(symbol);\n\n    if (currentAsk &gt;= resistanceLevel) {\n        System.out.printf(\"\u2705 Breakout! Ask: %.5f%n\", currentAsk);\n        sugar.buyMarket(symbol, 0.1, null, null);\n        break;\n    }\n\n    System.out.printf(\"Waiting... Ask: %.5f (resistance: %.5f)%n\",\n        currentAsk, resistanceLevel);\n    Thread.sleep(1000);\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#4-calculate-spread-and-trading-cost","title":"4) Calculate spread and trading cost","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble bid = sugar.getBid(symbol);\ndouble ask = sugar.getAsk(symbol);\ndouble spreadPrice = ask - bid;\nint spreadPoints = sugar.getSpread(symbol);\ndouble point = sugar.getPoint(symbol);\n\nSystem.out.printf(\"%s spread analysis:%n\", symbol);\nSystem.out.printf(\"  Bid: %.2f%n\", bid);\nSystem.out.printf(\"  Ask: %.2f%n\", ask);\nSystem.out.printf(\"  Spread (price): %.2f%n\", spreadPrice);\nSystem.out.printf(\"  Spread (points): %d%n\", spreadPoints);\nSystem.out.printf(\"  Point size: %.2f%n\", point);\n\n// Verify spread calculation\ndouble calculatedSpread = spreadPrice / point;\nSystem.out.printf(\"  Calculated spread: %.0f points%n\", calculatedSpread);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#5-wait-for-favorable-ask-price","title":"5) Wait for favorable Ask price","text":"<pre><code>String symbol = \"EURUSD\";\ndouble maxAcceptableAsk = 1.12500;\n\nwhile (true) {\n    double currentAsk = sugar.getAsk(symbol);\n    double bid = sugar.getBid(symbol);\n    double spread = currentAsk - bid;\n\n    if (currentAsk &lt;= maxAcceptableAsk) {\n        System.out.printf(\"\u2705 Good entry! Ask: %.5f (max: %.5f)%n\",\n            currentAsk, maxAcceptableAsk);\n\n        // Place BUY order\n        sugar.buyMarket(symbol, 0.1, null, null);\n        break;\n    }\n\n    System.out.printf(\"Ask too high: %.5f (waiting for &lt;= %.5f), Spread: %.5f%n\",\n        currentAsk, maxAcceptableAsk, spread);\n\n    Thread.sleep(5000); // Check every 5 seconds\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Ask vs Bid:</li> <li>Ask = Price you BUY at (higher)</li> <li>Bid = Price you SELL at (lower)</li> <li> <p>Spread = Ask - Bid (your cost)</p> </li> <li> <p>When to use Ask:</p> </li> <li>Opening BUY positions \u2192 Entry price</li> <li>Closing SELL positions \u2192 Exit price</li> <li>Calculating BUY Stop Loss (below Ask)</li> <li> <p>Calculating BUY Take Profit (above Ask)</p> </li> <li> <p>Market orders:</p> </li> <li>BUY market orders execute at current Ask</li> <li> <p>SELL market orders execute at current Bid</p> </li> <li> <p>Real-time: Price changes every tick during market hours.</p> </li> <li> <p>Precision: Always format with symbol's digits:   <pre><code>int digits = sugar.getDigits(symbol);\nString formatted = String.format(\"%.\" + digits + \"f\", ask);\n</code></pre></p> </li> </ul> <p>Ask/Bid relationship: <pre><code>Ask (higher) \u2190 You BUY here\n    \u2195 Spread (your cost)\nBid (lower)  \u2190 You SELL here\n</code></pre></p> <p>Trading costs: <pre><code>BUY at Ask:  1.12350\nSELL at Bid: 1.12340\nLoss: 0.00010 (the spread you pay)\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getAsk/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoTick</code> - underlying implementation</li> <li>Related: <code>getBid()</code> - get Bid (SELL) price</li> <li>Related: <code>getSpreadPrice()</code> - get spread (Ask - Bid)</li> <li>Trading: <code>buyMarket()</code> - uses Ask for entry</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/","title":"\ud83d\udcc9 Get Bid Price","text":"<p>Convenience method: retrieves the current Bid price for a symbol in one simple call. Essential for SELL order calculations and spread analysis.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getBid(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolInfoTick()</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Current Bid price</p> <p>What is Bid: - Price at which you can SELL - Lower than Ask price (Ask - Bid = Spread) - Used for closing BUY positions - Used for opening SELL positions</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Current selling price for a symbol.</li> <li>Why you need it. Calculate SELL entry/exit points.</li> <li>Bid vs Ask. Bid = SELL price, Ask = BUY price.</li> <li>Spread. Ask - Bid = trading cost.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Get current price for SELL order entry.</li> <li>Calculate profit for open BUY positions.</li> <li>Monitor price for trading decisions.</li> <li>Calculate spread (Ask - Bid).</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#1-get-current-bid-price","title":"1) Get current Bid price","text":"<pre><code>double bid = sugar.getBid(\"EURUSD\");\nSystem.out.printf(\"EURUSD Bid: %.5f%n\", bid);\n// Output: EURUSD Bid: 1.12340\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#2-calculate-spread","title":"2) Calculate spread","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble bid = sugar.getBid(symbol);\ndouble ask = sugar.getAsk(symbol);\ndouble spread = ask - bid;\n\nSystem.out.printf(\"%s prices:%n\", symbol);\nSystem.out.printf(\"  Bid: %.5f%n\", bid);\nSystem.out.printf(\"  Ask: %.5f%n\", ask);\nSystem.out.printf(\"  Spread: %.5f%n\", spread);\n\n// Output:\n// GBPUSD prices:\n//   Bid: 1.26340\n//   Ask: 1.26355\n//   Spread: 0.00015\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#3-calculate-sell-stop-loss-from-points","title":"3) Calculate SELL stop loss from points","text":"<pre><code>String symbol = \"EURUSD\";\ndouble bid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// SL 50 points above entry (for SELL)\ndouble stopLoss = bid + (50 * point);\n\n// TP 100 points below entry (for SELL)\ndouble takeProfit = bid - (100 * point);\n\nSystem.out.printf(\"SELL at Bid: %.5f%n\", bid);\nSystem.out.printf(\"Stop Loss (+50p): %.5f%n\", stopLoss);\nSystem.out.printf(\"Take Profit (-100p): %.5f%n\", takeProfit);\n\n// Place SELL order\nlong ticket = sugar.sellMarket(symbol, 0.1, stopLoss, takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#4-monitor-price-levels","title":"4) Monitor price levels","text":"<pre><code>String symbol = \"USDJPY\";\ndouble targetBid = 110.500;\n\nwhile (true) {\n    double currentBid = sugar.getBid(symbol);\n\n    if (currentBid &lt;= targetBid) {\n        System.out.printf(\"\u2705 Target reached! Bid: %.3f%n\", currentBid);\n        // Execute trading logic\n        sugar.sellMarket(symbol, 0.1, null, null);\n        break;\n    }\n\n    System.out.printf(\"Waiting... Current Bid: %.3f (target: %.3f)%n\",\n        currentBid, targetBid);\n    Thread.sleep(1000);\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#5-compare-bid-across-symbols","title":"5) Compare Bid across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\n\nSystem.out.println(\"Current Bid prices:\");\nfor (String symbol : symbols) {\n    double bid = sugar.getBid(symbol);\n    int digits = sugar.getDigits(symbol);\n\n    System.out.printf(\"  %s: %.\" + digits + \"f%n\", symbol, bid);\n}\n\n// Output:\n// Current Bid prices:\n//   EURUSD: 1.12340\n//   GBPUSD: 1.26340\n//   USDJPY: 110.123\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Bid vs Ask:</li> <li>Bid = Price you SELL at (lower)</li> <li>Ask = Price you BUY at (higher)</li> <li> <p>Spread = Ask - Bid (your cost)</p> </li> <li> <p>When to use Bid:</p> </li> <li>Opening SELL positions \u2192 Entry price</li> <li>Closing BUY positions \u2192 Exit price</li> <li>Calculating SELL Stop Loss (above Bid)</li> <li> <p>Calculating SELL Take Profit (below Bid)</p> </li> <li> <p>Market orders:</p> </li> <li>SELL market orders execute at current Bid</li> <li> <p>BUY market orders execute at current Ask</p> </li> <li> <p>Real-time: Price changes every tick during market hours.</p> </li> <li> <p>Precision: Always format with symbol's digits:   <pre><code>int digits = sugar.getDigits(symbol);\nString formatted = String.format(\"%.\" + digits + \"f\", bid);\n</code></pre></p> </li> </ul> <p>Bid/Ask relationship: <pre><code>Ask (higher) \u2190 You BUY here\n    \u2195 Spread (your cost)\nBid (lower)  \u2190 You SELL here\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getBid/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoTick</code> - underlying implementation</li> <li>Related: <code>getAsk()</code> - get Ask (BUY) price</li> <li>Related: <code>getSpreadPrice()</code> - get spread (Ask - Bid)</li> <li>Trading: <code>sellMarket()</code> - uses Bid for entry</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/","title":"\ud83d\udd22 Get Digits (Decimal Places)","text":"<p>Convenience method: retrieves the number of decimal places for a symbol's price. Used for price formatting and normalization.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getDigits(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolInfoInteger()</code> with <code>SYMBOL_DIGITS</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of digits after decimal point</p> <p>Examples: - EURUSD: <code>5</code> (price: 1.12345) - USDJPY: <code>3</code> (price: 110.123) - XAUUSD: <code>2</code> (price: 1850.12)</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Number of decimal places in price.</li> <li>Why you need it. Format prices correctly, normalize values.</li> <li>Price precision. Determines how many decimals to display/store.</li> <li>Broker-dependent. 5-digit brokers vs 3-digit brokers.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Format prices for display.</li> <li>Round prices to symbol's precision.</li> <li>Validate price input.</li> <li>Understand broker's price precision.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#1-get-digits-for-symbol","title":"1) Get digits for symbol","text":"<pre><code>int digits = sugar.getDigits(\"EURUSD\");\nSystem.out.printf(\"EURUSD has %d decimal places%n\", digits);\n// Output: EURUSD has 5 decimal places\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#2-format-price-with-correct-precision","title":"2) Format price with correct precision","text":"<pre><code>String symbol = \"GBPUSD\";\nint digits = sugar.getDigits(symbol);\ndouble price = sugar.getAsk(symbol);\n\n// Format price with correct decimal places\nString formatted = String.format(\"%.\" + digits + \"f\", price);\nSystem.out.printf(\"%s price: %s%n\", symbol, formatted);\n// Output: GBPUSD price: 1.26543\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#3-compare-digits-across-symbols","title":"3) Compare digits across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"USDJPY\", \"XAUUSD\", \"BTCUSD\"};\n\nSystem.out.println(\"Symbol precision:\");\nfor (String symbol : symbols) {\n    int digits = sugar.getDigits(symbol);\n    double point = sugar.getPoint(symbol);\n\n    System.out.printf(\"  %s: %d digits (point: %.5f)%n\",\n        symbol, digits, point);\n}\n\n// Output:\n// Symbol precision:\n//   EURUSD: 5 digits (point: 0.00001)\n//   USDJPY: 3 digits (point: 0.001)\n//   XAUUSD: 2 digits (point: 0.01)\n//   BTCUSD: 2 digits (point: 0.01)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#4-normalize-price-to-symbols-digits","title":"4) Normalize price to symbol's digits","text":"<pre><code>String symbol = \"EURUSD\";\nint digits = sugar.getDigits(symbol);\ndouble rawPrice = 1.123456789;\n\n// Round to symbol's precision\ndouble multiplier = Math.pow(10, digits);\ndouble normalized = Math.round(rawPrice * multiplier) / multiplier;\n\nSystem.out.printf(\"Raw: %.9f%n\", rawPrice);\nSystem.out.printf(\"Normalized: %.\" + digits + \"f%n\", normalized);\n// Output:\n// Raw: 1.123456789\n// Normalized: 1.12346\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#5-dynamic-price-display","title":"5) Dynamic price display","text":"<pre><code>public void displayPrice(String symbol, double price) throws Exception {\n    int digits = sugar.getDigits(symbol);\n    String format = \"%.\" + digits + \"f\";\n\n    System.out.printf(\"%s: \" + format + \"%n\", symbol, price);\n}\n\n// Usage\ndisplayPrice(\"EURUSD\", 1.12345);  // EURUSD: 1.12345\ndisplayPrice(\"USDJPY\", 110.123);  // USDJPY: 110.123\ndisplayPrice(\"XAUUSD\", 1850.12);  // XAUUSD: 1850.12\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Broker-dependent: 5-digit vs 3-digit brokers have different precision.</li> <li>Always use for formatting: Don't hardcode decimal places.</li> <li>Price normalization: Use <code>normalizePrice()</code> instead of manual rounding.</li> <li>Point relationship: Point = 10^(-digits)</li> <li>Display vs calculation: Use full precision for calculations, round only for display.</li> </ul> <p>Common digit counts: - Major FX pairs: 5 digits (EURUSD, GBPUSD, etc.) - JPY pairs: 3 digits (USDJPY, EURJPY, etc.) - Metals: 2 digits (XAUUSD, XAGUSD) - Crypto: 2-8 digits (varies by broker)</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getDigits/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoInteger</code> - underlying implementation</li> <li>Related: <code>getPoint()</code> - get point size (10^-digits)</li> <li>Related: <code>normalizePrice()</code> - auto-normalize to symbol's precision</li> <li>Related: <code>getSpread()</code> - spread uses same precision</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/","title":"\ud83d\udccf Get Point Size","text":"<p>Convenience method: retrieves the point size for a symbol (smallest price change). Essential for calculating prices with point offsets.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getPoint(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolInfoDouble()</code> with <code>SYMBOL_POINT</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Point size</p> <p>Examples: - EURUSD (5 digits): <code>0.00001</code> - USDJPY (3 digits): <code>0.001</code> - XAUUSD (2 digits): <code>0.01</code></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Smallest price change for a symbol.</li> <li>Why you need it. Calculate SL/TP with point offsets.</li> <li>Point vs Pip. For 5-digit EURUSD: 1 pip = 10 points.</li> <li>Used internally. Many sugar methods use this for calculations.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate Stop Loss / Take Profit from points offset.</li> <li>Convert points to price units.</li> <li>Understand price precision for a symbol.</li> <li>Calculate spread in price units.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#1-get-point-size","title":"1) Get point size","text":"<pre><code>double point = sugar.getPoint(\"EURUSD\");\nSystem.out.printf(\"EURUSD point: %.5f%n\", point);\n// Output: EURUSD point: 0.00001\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#2-calculate-sltp-from-points","title":"2) Calculate SL/TP from points","text":"<pre><code>String symbol = \"EURUSD\";\ndouble point = sugar.getPoint(symbol);\ndouble ask = sugar.getAsk(symbol);\n\n// SL 50 points below entry\ndouble stopLoss = ask - (50 * point);\n\n// TP 100 points above entry\ndouble takeProfit = ask + (100 * point);\n\nSystem.out.printf(\"Entry: %.5f%n\", ask);\nSystem.out.printf(\"SL (-50 points): %.5f%n\", stopLoss);\nSystem.out.printf(\"TP (+100 points): %.5f%n\", takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#3-compare-point-sizes-across-symbols","title":"3) Compare point sizes across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"USDJPY\", \"XAUUSD\", \"GBPUSD\"};\n\nfor (String symbol : symbols) {\n    double point = sugar.getPoint(symbol);\n    System.out.printf(\"%s point size: %.5f%n\", symbol, point);\n}\n\n// Output:\n// EURUSD point size: 0.00001\n// USDJPY point size: 0.001\n// XAUUSD point size: 0.01\n// GBPUSD point size: 0.00001\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Point vs Pip:</li> <li>5-digit broker (EURUSD): 1 pip = 10 points</li> <li>3-digit broker (USDJPY): 1 pip = 1 point</li> <li>Precision: Point defines minimum price movement.</li> <li>Calculations: Always multiply points by point size to get price offset.</li> <li>Symbol-specific: Each symbol has different point size.</li> <li>Use with digits: Combine with <code>getDigits()</code> for price formatting.</li> </ul> <p>Formula: <pre><code>Price offset = Points \u00d7 Point size\nExample: 50 points on EURUSD = 50 \u00d7 0.00001 = 0.0005\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getPoint/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoDouble</code> - underlying implementation</li> <li>Related: <code>getDigits()</code> - decimal places for formatting</li> <li>Related: <code>pointsToPips()</code> - convert points to pips</li> <li>Related: <code>normalizePrice()</code> - normalize price to symbol's precision</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/","title":"\ud83d\udcca Get Spread (in Points)","text":"<p>Convenience method: retrieves the current spread for a symbol in points. Essential for understanding trading costs and slippage.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getSpread(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolInfoInteger()</code> with <code>SYMBOL_SPREAD</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Current spread in points</p> <p>Examples: - EURUSD: <code>10</code> points = 1 pip (on 5-digit broker) - USDJPY: <code>1</code> point = 1 pip (on 3-digit broker) - XAUUSD: <code>30</code> points = 0.30 (variable spread)</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Difference between Ask and Bid in points.</li> <li>Why you need it. Understand trading cost before placing orders.</li> <li>Variable. Changes with market conditions (volatility, liquidity).</li> <li>Trading cost. You pay spread on every market order entry.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Check current trading costs before entering position.</li> <li>Monitor spread for optimal entry timing.</li> <li>Filter symbols with acceptable spreads.</li> <li>Calculate total trade cost (spread + commission).</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#1-get-current-spread","title":"1) Get current spread","text":"<pre><code>int spread = sugar.getSpread(\"EURUSD\");\nSystem.out.printf(\"EURUSD spread: %d points%n\", spread);\n// Output: EURUSD spread: 10 points\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#2-convert-spread-to-pips","title":"2) Convert spread to pips","text":"<pre><code>String symbol = \"EURUSD\";\nint spreadPoints = sugar.getSpread(symbol);\ndouble spreadPips = sugar.pointsToPips(symbol, spreadPoints);\n\nSystem.out.printf(\"%s spread: %d points = %.1f pips%n\",\n    symbol, spreadPoints, spreadPips);\n// Output: EURUSD spread: 10 points = 1.0 pips\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#3-check-if-spread-is-acceptable","title":"3) Check if spread is acceptable","text":"<pre><code>String symbol = \"GBPUSD\";\nint spread = sugar.getSpread(symbol);\nint maxAcceptableSpread = 20; // points\n\nif (spread &lt;= maxAcceptableSpread) {\n    System.out.printf(\"\u2705 Spread OK: %d points%n\", spread);\n    // Safe to trade\n    long ticket = sugar.buyMarket(symbol, 0.1, null, null);\n} else {\n    System.out.printf(\"\u26a0\ufe0f Spread too high: %d points (max: %d)%n\",\n        spread, maxAcceptableSpread);\n    // Wait for better conditions\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#4-monitor-spreads-across-symbols","title":"4) Monitor spreads across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"};\n\nSystem.out.println(\"Current spreads:\");\nfor (String symbol : symbols) {\n    int spread = sugar.getSpread(symbol);\n    double spreadPips = sugar.pointsToPips(symbol, spread);\n\n    System.out.printf(\"  %s: %d points (%.1f pips)%n\",\n        symbol, spread, spreadPips);\n}\n\n// Output:\n// Current spreads:\n//   EURUSD: 10 points (1.0 pips)\n//   GBPUSD: 15 points (1.5 pips)\n//   USDJPY: 1 points (1.0 pips)\n//   XAUUSD: 30 points (30.0 pips)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#5-calculate-total-trading-cost","title":"5) Calculate total trading cost","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 1.0; // 1 lot\n\n// Get spread cost\nint spread = sugar.getSpread(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble[] tickData = sugar.getTickValueAndSize(symbol);\ndouble tickValue = tickData[0];\n\n// Calculate spread cost in account currency\ndouble spreadCost = spread * point * tickValue;\n\nSystem.out.printf(\"Trading cost for %s %.2f lot:%n\", symbol, volume);\nSystem.out.printf(\"  Spread: %d points%n\", spread);\nSystem.out.printf(\"  Cost: $%.2f per lot%n\", spreadCost);\n\n// Output:\n// Trading cost for EURUSD 1.00 lot:\n//   Spread: 10 points\n//   Cost: $10.00 per lot\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Variable spread: Changes constantly based on:</li> <li>Market volatility</li> <li>Liquidity (spreads widen during news)</li> <li>Time of day (wider during Asian session)</li> <li> <p>Broker type (fixed vs variable spread)</p> </li> <li> <p>Points vs Pips:</p> </li> <li>5-digit EURUSD: 10 points = 1 pip</li> <li>3-digit USDJPY: 1 point = 1 pip</li> <li> <p>Always check broker's precision</p> </li> <li> <p>Trading impact:</p> </li> <li>Market orders: Pay spread immediately</li> <li>Limit orders: May avoid spread if price moves favorably</li> <li> <p>Wide spreads: Increase required profit for breakeven</p> </li> <li> <p>Best practices:</p> </li> <li>Check spread before trading</li> <li>Avoid trading during high-spread periods (news events)</li> <li>Set maximum acceptable spread threshold</li> <li>Monitor spread patterns for your symbols</li> </ul> <p>Typical spreads: - Major pairs (EURUSD, GBPUSD): 1-2 pips - Minor pairs (EURGBP): 2-3 pips - Exotic pairs (USDTRY): 10+ pips - Gold (XAUUSD): 0.20-0.50</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpread/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoInteger</code> - underlying implementation</li> <li>Related: <code>getSpreadPrice()</code> - spread in price units (Ask - Bid)</li> <li>Related: <code>pointsToPips()</code> - convert points to pips</li> <li>Related: <code>getBid()</code>, <code>getAsk()</code> - get current prices</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/","title":"\ud83d\udcca Get Spread in Price Units","text":"<p>Convenience method: retrieves the current spread as a price difference (Ask - Bid). Returns actual currency value, not points.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getSpreadPrice(String symbol)</code></li> <li>Underlying method: <code>MT5Account.symbolInfoTick()</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Spread in price units (Ask - Bid)</p> <p>Calculation: <pre><code>spreadPrice = Ask - Bid\n</code></pre></p> <p>Example: - EURUSD: Ask=1.12350, Bid=1.12340 \u2192 Spread = 0.00010 - XAUUSD: Ask=1850.50, Bid=1850.20 \u2192 Spread = 0.30</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Spread expressed as price difference.</li> <li>Why you need it. Understand trading costs in currency units.</li> <li>vs getSpread(). <code>getSpread()</code> returns points, this returns price.</li> <li>Trading cost. This is your cost to open + immediately close position.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate trading costs in currency units.</li> <li>Monitor spread conditions before placing trades.</li> <li>Compare spreads across different symbols in same units.</li> <li>Calculate break-even price including spread.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#1-get-current-spread-in-price","title":"1) Get current spread in price","text":"<pre><code>double spread = sugar.getSpreadPrice(\"EURUSD\");\nSystem.out.printf(\"EURUSD spread: %.5f%n\", spread);\n// Output: EURUSD spread: 0.00010\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#2-compare-spread-representations","title":"2) Compare spread representations","text":"<pre><code>String symbol = \"GBPUSD\";\n\n// Get spread in different formats\nint spreadPoints = sugar.getSpread(symbol);           // In points\ndouble spreadPrice = sugar.getSpreadPrice(symbol);    // In price units\ndouble point = sugar.getPoint(symbol);\n\n// Verify calculation\ndouble calculatedSpread = spreadPoints * point;\n\nSystem.out.printf(\"%s spread analysis:%n\", symbol);\nSystem.out.printf(\"  Points: %d%n\", spreadPoints);\nSystem.out.printf(\"  Price: %.5f%n\", spreadPrice);\nSystem.out.printf(\"  Point size: %.5f%n\", point);\nSystem.out.printf(\"  Calculated: %.5f%n\", calculatedSpread);\nSystem.out.printf(\"  Match: %s%n\",\n    Math.abs(spreadPrice - calculatedSpread) &lt; 0.000001 ? \"\u2705\" : \"\u274c\");\n\n// Output:\n// GBPUSD spread analysis:\n//   Points: 15\n//   Price: 0.00015\n//   Point size: 0.00001\n//   Calculated: 0.00015\n//   Match: \u2705\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#3-check-spread-conditions-before-trading","title":"3) Check spread conditions before trading","text":"<pre><code>String symbol = \"EURUSD\";\ndouble maxAcceptableSpread = 0.00020; // 20 points in price\n\nwhile (true) {\n    double currentSpread = sugar.getSpreadPrice(symbol);\n\n    if (currentSpread &lt;= maxAcceptableSpread) {\n        System.out.printf(\"\u2705 Good spread: %.5f (max: %.5f)%n\",\n            currentSpread, maxAcceptableSpread);\n\n        // Place trade\n        sugar.buyMarket(symbol, 0.1, null, null);\n        break;\n    }\n\n    System.out.printf(\"\u26a0\ufe0f Spread too high: %.5f (waiting for &lt;= %.5f)%n\",\n        currentSpread, maxAcceptableSpread);\n\n    Thread.sleep(1000); // Check every second\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#4-calculate-break-even-including-spread","title":"4) Calculate break-even including spread","text":"<pre><code>String symbol = \"EURUSD\";\ndouble entryBid = sugar.getBid(symbol);\ndouble spreadPrice = sugar.getSpreadPrice(symbol);\n\n// For SELL order\nSystem.out.printf(\"%s SELL break-even:%n\", symbol);\nSystem.out.printf(\"  Entry (Bid): %.5f%n\", entryBid);\nSystem.out.printf(\"  Spread cost: %.5f%n\", spreadPrice);\nSystem.out.printf(\"  Break-even price: %.5f%n\", entryBid - spreadPrice);\nSystem.out.printf(\"  (Price must move DOWN by %.5f to break even)%n\", spreadPrice);\n\n// For BUY order\ndouble entryAsk = sugar.getAsk(symbol);\nSystem.out.printf(\"%n%s BUY break-even:%n\", symbol);\nSystem.out.printf(\"  Entry (Ask): %.5f%n\", entryAsk);\nSystem.out.printf(\"  Spread cost: %.5f%n\", spreadPrice);\nSystem.out.printf(\"  Break-even price: %.5f%n\", entryAsk);\nSystem.out.printf(\"  (Already at Ask, must move UP to profit)%n\");\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#5-monitor-spread-across-multiple-symbols","title":"5) Monitor spread across multiple symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"};\n\nSystem.out.println(\"Current spreads (price units):\");\nSystem.out.println(\"Symbol   | Bid      | Ask      | Spread   | Points\");\nSystem.out.println(\"---------|----------|----------|----------|-------\");\n\nfor (String symbol : symbols) {\n    double bid = sugar.getBid(symbol);\n    double ask = sugar.getAsk(symbol);\n    double spreadPrice = sugar.getSpreadPrice(symbol);\n    int spreadPoints = sugar.getSpread(symbol);\n    int digits = sugar.getDigits(symbol);\n\n    System.out.printf(\"%8s | %8.\"+digits+\"f | %8.\"+digits+\"f | %8.\"+digits+\"f | %6d%n\",\n        symbol, bid, ask, spreadPrice, spreadPoints);\n}\n\n// Output:\n// Symbol   | Bid      | Ask      | Spread   | Points\n// ---------|----------|----------|----------|-------\n//   EURUSD | 1.12340  | 1.12350  | 0.00010  |     10\n//   GBPUSD | 1.26340  | 1.26355  | 0.00015  |     15\n//   USDJPY | 110.123  | 110.133  | 0.010    |     10\n//   XAUUSD | 1850.20  | 1850.50  | 0.30     |     30\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#6-calculate-trading-cost-for-position-size","title":"6) Calculate trading cost for position size","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 1.0; // 1 lot\ndouble spreadPrice = sugar.getSpreadPrice(symbol);\n\n// Get contract size (usually 100,000 for forex)\ndouble contractSize = sugar.getContractSize(symbol);\n\n// Calculate spread cost in account currency\ndouble spreadCost = spreadPrice * volume * contractSize;\n\nSystem.out.printf(\"%s spread cost analysis:%n\", symbol);\nSystem.out.printf(\"  Volume: %.2f lots%n\", volume);\nSystem.out.printf(\"  Spread: %.5f%n\", spreadPrice);\nSystem.out.printf(\"  Contract size: %.0f%n\", contractSize);\nSystem.out.printf(\"  Spread cost: $%.2f%n\", spreadCost);\nSystem.out.printf(\"  (Cost to open + immediately close position)%n\");\n\n// Output:\n// EURUSD spread cost analysis:\n//   Volume: 1.00 lots\n//   Spread: 0.00010\n//   Contract size: 100000\n//   Spread cost: $10.00\n//   (Cost to open + immediately close position)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li> <p>Always positive: Spread is always \u2265 0 (Ask \u2265 Bid).</p> </li> <li> <p>vs getSpread():</p> </li> <li><code>getSpread()</code> \u2192 integer points (e.g., 10)</li> <li><code>getSpreadPrice()</code> \u2192 price units (e.g., 0.00010)</li> <li> <p>Relationship: <code>spreadPrice = spreadPoints * point</code></p> </li> <li> <p>Conversion: <pre><code>int spreadPoints = sugar.getSpread(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble spreadPrice = spreadPoints * point;\n\n// Or directly:\ndouble spreadPrice = sugar.getSpreadPrice(symbol);\n</code></pre></p> </li> <li> <p>Trading cost: <pre><code>When you BUY at Ask and immediately SELL at Bid,\nyou lose the spread amount.\n</code></pre></p> </li> <li> <p>Variable spread:</p> </li> <li>Spread widens during news, low liquidity, market close</li> <li>Check before placing trades</li> <li> <p>Consider max acceptable spread threshold</p> </li> <li> <p>Break-even calculation:</p> </li> <li>BUY: Already at Ask, need price to rise to profit</li> <li>SELL: Entered at Bid, need price to fall by spread to break even</li> </ul> <p>Spread relationship: <pre><code>Ask (1.12350) \u2190 You BUY here\n    \u2195 Spread = 0.00010 (trading cost)\nBid (1.12340) \u2190 You SELL here\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/getSpreadPrice/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoTick</code> - gets Bid/Ask</li> <li>Related: <code>getSpread()</code> - get spread in points</li> <li>Related: <code>getPoint()</code> - get point size</li> <li>Related: <code>getBid()</code> / <code>getAsk()</code> - get current prices</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/","title":"\ud83c\udfaf Normalize Price to Symbol Precision","text":"<p>Convenience method: rounds a price to the symbol's correct number of decimal places. Prevents \"invalid price\" errors when placing orders.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.normalizePrice(String symbol, double price)</code></li> <li>Underlying methods:</li> <li><code>MT5Account.symbolInfoInteger()</code> with <code>SYMBOL_DIGITS</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>price</code> <code>double</code> \u2705 Price to normalize"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Normalized price rounded to symbol's digits</p> <p>Examples: - Input: <code>1.123456789</code>, Symbol: EURUSD (5 digits) \u2192 Output: <code>1.12346</code> - Input: <code>110.12345</code>, Symbol: USDJPY (3 digits) \u2192 Output: <code>110.123</code></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Rounds price to broker's accepted precision.</li> <li>Why you need it. Broker rejects prices with wrong decimal places.</li> <li>Auto-used. All pending order methods call this internally.</li> <li>Prevents errors. \"Invalid price\" errors from too many/few decimals.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate custom entry/exit prices before placing orders.</li> <li>Round indicator-calculated prices to valid precision.</li> <li>Prepare prices from external sources (APIs, calculations).</li> <li>Ensure SL/TP prices are broker-compliant.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#1-normalize-calculated-price","title":"1) Normalize calculated price","text":"<pre><code>String symbol = \"EURUSD\";\ndouble calculatedPrice = 1.123456789; // Too many decimals\n\ndouble normalized = sugar.normalizePrice(symbol, calculatedPrice);\n\nSystem.out.printf(\"Raw price: %.9f%n\", calculatedPrice);\nSystem.out.printf(\"Normalized: %.5f%n\", normalized);\n// Output:\n// Raw price: 1.123456789\n// Normalized: 1.12346\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#2-prepare-sltp-for-pending-order","title":"2) Prepare SL/TP for pending order","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble entryPrice = 1.26500;\n\n// Calculate SL/TP with some algorithm\ndouble rawStopLoss = entryPrice - 0.001234567;\ndouble rawTakeProfit = entryPrice + 0.002345678;\n\n// Normalize before placing order\ndouble stopLoss = sugar.normalizePrice(symbol, rawStopLoss);\ndouble takeProfit = sugar.normalizePrice(symbol, rawTakeProfit);\n\nSystem.out.printf(\"Entry: %.5f%n\", entryPrice);\nSystem.out.printf(\"SL: %.5f (normalized from %.9f)%n\", stopLoss, rawStopLoss);\nSystem.out.printf(\"TP: %.5f (normalized from %.9f)%n\", takeProfit, rawTakeProfit);\n\n// Now safe to use in order\nlong ticket = sugar.buyLimit(symbol, 0.1, entryPrice, stopLoss, takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#3-normalize-prices-from-indicator","title":"3) Normalize prices from indicator","text":"<pre><code>// Example: Moving Average returns high precision\ndouble ma200 = calculateMovingAverage(200); // Returns 1.12345678\n\nString symbol = \"EURUSD\";\ndouble normalizedMA = sugar.normalizePrice(symbol, ma200);\n\nSystem.out.printf(\"MA(200) raw: %.8f%n\", ma200);\nSystem.out.printf(\"MA(200) normalized: %.5f%n\", normalizedMA);\n\n// Use as entry price for limit order\ndouble currentPrice = sugar.getAsk(symbol);\nif (currentPrice &gt; normalizedMA) {\n    long ticket = sugar.buyLimit(symbol, 0.1, normalizedMA, null, null);\n    System.out.printf(\"Buy Limit placed at %.5f%n\", normalizedMA);\n}\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#4-normalize-prices-across-different-symbols","title":"4) Normalize prices across different symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"USDJPY\", \"XAUUSD\"};\ndouble[] rawPrices = {1.123456789, 110.123456, 1850.123456};\n\nSystem.out.println(\"Price normalization:\");\nfor (int i = 0; i &lt; symbols.length; i++) {\n    double normalized = sugar.normalizePrice(symbols[i], rawPrices[i]);\n    int digits = sugar.getDigits(symbols[i]);\n\n    System.out.printf(\"  %s (%d digits): %.9f \u2192 %.\" + digits + \"f%n\",\n        symbols[i], digits, rawPrices[i], normalized);\n}\n\n// Output:\n// Price normalization:\n//   EURUSD (5 digits): 1.123456789 \u2192 1.12346\n//   USDJPY (3 digits): 110.123456 \u2192 110.123\n//   XAUUSD (2 digits): 1850.123456 \u2192 1850.12\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#5-avoid-invalid-price-error","title":"5) Avoid \"Invalid Price\" error","text":"<pre><code>String symbol = \"EURUSD\";\n\n// \u274c BAD: Price has wrong precision\ndouble badPrice = 1.1234; // Only 4 digits, broker expects 5\n// sugar.buyLimit(symbol, 0.1, badPrice, null, null); // May fail!\n\n// \u2705 GOOD: Normalize first\ndouble goodPrice = sugar.normalizePrice(symbol, badPrice);\nlong ticket = sugar.buyLimit(symbol, 0.1, goodPrice, null, null);\n\nSystem.out.printf(\"Order placed at normalized price: %.5f%n\", goodPrice);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Rounding: Uses banker's rounding (round half to even).</li> <li>Auto-called: All pending order methods (<code>buyLimit</code>, <code>sellStop</code>, etc.) call this internally.</li> <li>Market orders: Don't need normalization (broker uses current market price).</li> <li>Precision matters: Must match broker's expected decimal places.</li> </ul> <p>Algorithm: <pre><code>int digits = getDigits(symbol);\ndouble multiplier = Math.pow(10, digits);\nreturn Math.round(price * multiplier) / multiplier;\n</code></pre></p> <p>When to use:</p> <ul> <li>\u2705 Prices from calculations, indicators, algorithms</li> <li>\u2705 SL/TP from custom formulas</li> <li>\u2705 Entry prices for pending orders</li> <li>\u274c Not needed for market orders (use 0 or current quote)</li> </ul> <p>Common precision by symbol type:</p> <ul> <li>Major FX: 5 digits (0.00001)</li> <li>JPY pairs: 3 digits (0.001)</li> <li>Gold/Silver: 2 digits (0.01)</li> <li>Indices: 1-2 digits</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizePrice/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoInteger</code> - gets digits</li> <li>Related: <code>getDigits()</code> - get decimal places</li> <li>Related: <code>normalizeVolume()</code> - normalize lot size</li> <li>Auto-uses this: <code>buyLimit()</code> and all pending order methods</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/","title":"\u2696\ufe0f Normalize Volume to Symbol Rules","text":"<p>Convenience method: adjusts volume (lot size) to meet symbol's min/max/step requirements. Prevents \"invalid volume\" errors when placing orders.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.normalizeVolume(String symbol, double volume)</code></li> <li>Underlying methods:</li> <li><code>MT5Account.symbolInfoDouble()</code> with <code>VOLUME_MIN</code>, <code>VOLUME_MAX</code>, <code>VOLUME_STEP</code></li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots to normalize"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Normalized volume meeting symbol's constraints</p> <p>Normalization rules: 1. Clamp to <code>[volumeMin, volumeMax]</code> 2. Round to nearest <code>volumeStep</code></p> <p>Examples: - Input: <code>0.05</code>, Symbol: EURUSD (min=0.01, step=0.01) \u2192 Output: <code>0.05</code> - Input: <code>0.03</code>, Symbol: XAUUSD (min=0.01, step=0.10) \u2192 Output: <code>0.10</code> - Input: <code>100.0</code>, Symbol: EURUSD (max=50.0) \u2192 Output: <code>50.0</code></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Adjusts lot size to broker's allowed values.</li> <li>Why you need it. Broker rejects invalid volume values.</li> <li>Auto-used. All trading methods call this internally.</li> <li>Prevents errors. \"Invalid volume\" rejections from wrong step.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate volume from risk amount or percentage.</li> <li>Ensure calculated volume meets broker requirements.</li> <li>Prepare volume before manual order placement.</li> <li>Round fractional lot sizes to valid increments.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#1-normalize-calculated-volume","title":"1) Normalize calculated volume","text":"<pre><code>String symbol = \"EURUSD\";\ndouble calculatedVolume = 0.157; // From risk calculation\n\ndouble normalized = sugar.normalizeVolume(symbol, calculatedVolume);\n\nSystem.out.printf(\"Calculated volume: %.3f%n\", calculatedVolume);\nSystem.out.printf(\"Normalized volume: %.2f%n\", normalized);\n// Output:\n// Calculated volume: 0.157\n// Normalized volume: 0.16  (rounded to 0.01 step)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#2-volume-from-risk-percentage","title":"2) Volume from risk percentage","text":"<pre><code>String symbol = \"EURUSD\";\ndouble balance = sugar.getBalance();\ndouble riskPercent = 2.0; // 2% of balance\n\n// Calculate risk amount\ndouble riskAmount = balance * (riskPercent / 100.0);\n\n// Calculate volume for 50 point SL\ndouble rawVolume = sugar.calculateVolume(symbol, 50, riskAmount);\n\n// Normalize to broker's requirements\ndouble volume = sugar.normalizeVolume(symbol, rawVolume);\n\nSystem.out.printf(\"Balance: $%.2f%n\", balance);\nSystem.out.printf(\"Risk (%.1f%%): $%.2f%n\", riskPercent, riskAmount);\nSystem.out.printf(\"Raw volume: %.3f%n\", rawVolume);\nSystem.out.printf(\"Normalized: %.2f lots%n\", volume);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#3-check-volume-limits","title":"3) Check volume limits","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble[] limits = sugar.getVolumeLimits(symbol);\ndouble minVol = limits[0];\ndouble maxVol = limits[1];\ndouble stepVol = limits[2];\n\nSystem.out.printf(\"%s volume constraints:%n\", symbol);\nSystem.out.printf(\"  Min: %.2f%n\", minVol);\nSystem.out.printf(\"  Max: %.2f%n\", maxVol);\nSystem.out.printf(\"  Step: %.2f%n\", stepVol);\n\n// Test normalization\ndouble[] testVolumes = {0.05, 0.03, 0.15, 100.0};\nfor (double vol : testVolumes) {\n    double normalized = sugar.normalizeVolume(symbol, vol);\n    System.out.printf(\"  %.2f \u2192 %.2f%n\", vol, normalized);\n}\n\n// Output:\n// XAUUSD volume constraints:\n//   Min: 0.01\n//   Max: 50.00\n//   Step: 0.01\n//   0.05 \u2192 0.05\n//   0.03 \u2192 0.03\n//   0.15 \u2192 0.15\n//   100.00 \u2192 50.00\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#4-handle-different-step-sizes","title":"4) Handle different step sizes","text":"<pre><code>String[] symbols = {\"EURUSD\", \"XAUUSD\", \"BTCUSD\"};\ndouble targetVolume = 0.05;\n\nSystem.out.printf(\"Normalizing %.2f lots across symbols:%n\", targetVolume);\nfor (String symbol : symbols) {\n    double[] limits = sugar.getVolumeLimits(symbol);\n    double normalized = sugar.normalizeVolume(symbol, targetVolume);\n\n    System.out.printf(\"  %s (step: %.2f) \u2192 %.2f%n\",\n        symbol, limits[2], normalized);\n}\n\n// Output:\n// Normalizing 0.05 lots across symbols:\n//   EURUSD (step: 0.01) \u2192 0.05\n//   XAUUSD (step: 0.01) \u2192 0.05\n//   BTCUSD (step: 0.10) \u2192 0.10  (rounded up to step)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#5-safe-volume-calculation","title":"5) Safe volume calculation","text":"<pre><code>String symbol = \"GBPUSD\";\n\n// Calculate volume from some algorithm\ndouble algorithmVolume = calculateOptimalVolume(); // Returns 0.237\n\n// \u274c BAD: Use raw volume (may be rejected)\n// long ticket = sugar.buyMarket(symbol, algorithmVolume, null, null);\n\n// \u2705 GOOD: Normalize first (though buyMarket does this automatically)\ndouble safeVolume = sugar.normalizeVolume(symbol, algorithmVolume);\nlong ticket = sugar.buyMarket(symbol, safeVolume, null, null);\n\nSystem.out.printf(\"Algorithm suggested: %.3f lots%n\", algorithmVolume);\nSystem.out.printf(\"Normalized to: %.2f lots%n\", safeVolume);\nSystem.out.printf(\"Order placed: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Normalization algorithm:</li> <li>Clamp to [min, max]: <code>volume = Math.max(min, Math.min(max, volume))</code></li> <li> <p>Round to step: <code>steps = round(volume / step); return steps * step</code></p> </li> <li> <p>Auto-called: All trading methods (<code>buyMarket</code>, <code>sellMarket</code>, <code>buyLimit</code>, etc.) call this internally.</p> </li> <li> <p>Common volume constraints:</p> </li> <li>Standard FX: min=0.01, max=100, step=0.01</li> <li>Micro lots: min=0.001, step=0.001</li> <li>Gold: min=0.01, max=50, step=0.01</li> <li> <p>Crypto: varies widely by broker</p> </li> <li> <p>Edge cases:</p> </li> <li>Volume &lt; min \u2192 Returns min volume</li> <li>Volume &gt; max \u2192 Returns max volume</li> <li> <p>Between steps \u2192 Rounds to nearest step</p> </li> <li> <p>When to use manually:</p> </li> <li>Risk-based volume calculations</li> <li>Position sizing algorithms</li> <li>Portfolio rebalancing</li> <li>Generally: Let trading methods handle it automatically</li> </ul> <p>Typical volume rules: <pre><code>EURUSD: [0.01 - 100.0] step 0.01\nXAUUSD: [0.01 - 50.0] step 0.01\nBTCUSD: [0.01 - 10.0] step 0.01\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/normalizeVolume/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoDouble</code> - gets volume limits</li> <li>Related: <code>getVolumeLimits()</code> - get [min, max, step] array</li> <li>Related: <code>calculateVolume()</code> - calculate volume from risk</li> <li>Auto-uses this: All trading methods normalize volume automatically</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/","title":"\ud83c\udfaf Convert Points to Pips","text":"<p>Convenience method: converts points to pips, automatically handling the difference between 5-digit brokers (1 pip = 10 points) and 3-digit brokers (1 pip = 1 point).</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.pointsToPips(String symbol, double points)</code></li> <li>Underlying method: <code>getDigits()</code> (which calls <code>MT5Account.symbolInfoInteger()</code>)</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>points</code> <code>double</code> \u2705 Points value to convert"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Pips value</p> <p>Conversion rules: - 5-digit brokers (EURUSD, GBPUSD, etc.): 1 pip = 10 points - 3-digit brokers (USDJPY): 1 pip = 1 point - 2-digit brokers (Gold, indices): 1 pip = 1 point</p> <p>Examples: - EURUSD (5 digits): 50 points \u2192 5.0 pips - USDJPY (3 digits): 50 points \u2192 50.0 pips - XAUUSD (2 digits): 50 points \u2192 50.0 pips</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Convert broker's points to standard pips.</li> <li>Why you need it. Pips are industry-standard, points are broker-specific.</li> <li>Auto-detects. Handles 5-digit vs 3-digit brokers automatically.</li> <li>For display. Use pips when showing results to users.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Display point values in industry-standard pips.</li> <li>Compare trading results across different brokers.</li> <li>Report strategy performance in pips (standard measure).</li> <li>Convert internal calculations (points) to user-friendly format (pips).</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#1-convert-points-to-pips","title":"1) Convert points to pips","text":"<pre><code>String symbol = \"EURUSD\";\ndouble points = 50;\n\ndouble pips = sugar.pointsToPips(symbol, points);\n\nSystem.out.printf(\"%s: %.0f points = %.1f pips%n\",\n    symbol, points, pips);\n// Output: EURUSD: 50 points = 5.0 pips\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#2-handle-different-broker-types","title":"2) Handle different broker types","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\", \"XAUUSD\"};\ndouble points = 100;\n\nSystem.out.printf(\"Converting %.0f points to pips:%n\", points);\nfor (String symbol : symbols) {\n    int digits = sugar.getDigits(symbol);\n    double pips = sugar.pointsToPips(symbol, points);\n\n    System.out.printf(\"  %s (%d digits): %.1f pips%n\",\n        symbol, digits, pips);\n}\n\n// Output:\n// Converting 100 points to pips:\n//   EURUSD (5 digits): 10.0 pips\n//   GBPUSD (5 digits): 10.0 pips\n//   USDJPY (3 digits): 100.0 pips\n//   XAUUSD (2 digits): 100.0 pips\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#3-display-trade-profit-in-pips","title":"3) Display trade profit in pips","text":"<pre><code>String symbol = \"EURUSD\";\ndouble entryPrice = 1.12340;\ndouble exitPrice = 1.12390;\ndouble point = sugar.getPoint(symbol);\n\n// Calculate profit in points\ndouble profitPoints = (exitPrice - entryPrice) / point;\n\n// Convert to pips for display\ndouble profitPips = sugar.pointsToPips(symbol, profitPoints);\n\nSystem.out.printf(\"Trade closed:%n\");\nSystem.out.printf(\"  Entry: %.5f%n\", entryPrice);\nSystem.out.printf(\"  Exit: %.5f%n\", exitPrice);\nSystem.out.printf(\"  Profit: %.0f points (%.1f pips)%n\",\n    profitPoints, profitPips);\n\n// Output:\n// Trade closed:\n//   Entry: 1.12340\n//   Exit: 1.12390\n//   Profit: 50 points (5.0 pips)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#4-calculate-strategy-statistics-in-pips","title":"4) Calculate strategy statistics in pips","text":"<pre><code>String symbol = \"GBPUSD\";\n\n// Example: Strategy generates average 35 points per trade\ndouble avgPointsPerTrade = 35;\ndouble avgPipsPerTrade = sugar.pointsToPips(symbol, avgPointsPerTrade);\n\n// Example: Max drawdown was 150 points\ndouble maxDrawdownPoints = 150;\ndouble maxDrawdownPips = sugar.pointsToPips(symbol, maxDrawdownPoints);\n\nSystem.out.printf(\"Strategy statistics (%s):%n\", symbol);\nSystem.out.printf(\"  Avg profit: %.0f points (%.1f pips)%n\",\n    avgPointsPerTrade, avgPipsPerTrade);\nSystem.out.printf(\"  Max drawdown: %.0f points (%.1f pips)%n\",\n    maxDrawdownPoints, maxDrawdownPips);\n\n// Output:\n// Strategy statistics (GBPUSD):\n//   Avg profit: 35 points (3.5 pips)\n//   Max drawdown: 150 points (15.0 pips)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#5-compare-stop-loss-across-symbols","title":"5) Compare stop loss across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"USDJPY\", \"XAUUSD\"};\ndouble slPoints = 50; // Same SL in points for all\n\nSystem.out.printf(\"Stop Loss comparison (%.0f points):%n\", slPoints);\nSystem.out.println(\"Symbol   | Digits | Points | Pips   | Price Units\");\nSystem.out.println(\"---------|--------|--------|--------|------------\");\n\nfor (String symbol : symbols) {\n    int digits = sugar.getDigits(symbol);\n    double pips = sugar.pointsToPips(symbol, slPoints);\n    double point = sugar.getPoint(symbol);\n    double priceUnits = slPoints * point;\n\n    System.out.printf(\"%8s | %6d | %6.0f | %6.1f | %.\" + digits + \"f%n\",\n        symbol, digits, slPoints, pips, priceUnits);\n}\n\n// Output:\n// Stop Loss comparison (50 points):\n// Symbol   | Digits | Points | Pips   | Price Units\n// ---------|--------|--------|--------|------------\n//   EURUSD |      5 |     50 |    5.0 | 0.00050\n//   USDJPY |      3 |     50 |   50.0 | 0.050\n//   XAUUSD |      2 |     50 |   50.0 | 0.50\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#6-real-time-spread-monitoring-in-pips","title":"6) Real-time spread monitoring in pips","text":"<pre><code>String symbol = \"EURUSD\";\n\nSystem.out.printf(\"Monitoring %s spread:%n\", symbol);\n\nfor (int i = 0; i &lt; 5; i++) {\n    int spreadPoints = sugar.getSpread(symbol);\n    double spreadPips = sugar.pointsToPips(symbol, spreadPoints);\n\n    System.out.printf(\"  Spread: %2d points (%.1f pips)%n\",\n        spreadPoints, spreadPips);\n\n    Thread.sleep(1000);\n}\n\n// Output:\n// Monitoring EURUSD spread:\n//   Spread: 10 points (1.0 pips)\n//   Spread: 12 points (1.2 pips)\n//   Spread: 11 points (1.1 pips)\n//   Spread: 10 points (1.0 pips)\n//   Spread: 13 points (1.3 pips)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Pip vs Point:</li> <li>Point = smallest price increment broker offers (broker-specific)</li> <li> <p>Pip = standard industry unit (0.0001 for FX, 0.01 for JPY)</p> </li> <li> <p>Conversion rules: <pre><code>if (digits &lt;= 3) {\n    pips = points;        // 1 pip = 1 point\n} else {\n    pips = points / 10.0; // 1 pip = 10 points\n}\n</code></pre></p> </li> <li> <p>Common digit configurations:</p> </li> <li>5 digits (0.00001): EURUSD, GBPUSD, AUDUSD \u2192 10 points = 1 pip</li> <li>3 digits (0.001): USDJPY, EURJPY \u2192 1 point = 1 pip</li> <li> <p>2 digits (0.01): XAUUSD, indices \u2192 1 point = 1 pip</p> </li> <li> <p>When to use:</p> </li> <li>\u2705 Displaying results to users</li> <li>\u2705 Comparing across brokers</li> <li>\u2705 Strategy performance reports</li> <li>\u2705 Industry-standard communication</li> <li> <p>\u274c Internal calculations (use points)</p> </li> <li> <p>Reverse conversion: <pre><code>// To convert pips back to points:\nint digits = sugar.getDigits(symbol);\ndouble points = (digits &gt; 3) ? pips * 10 : pips;\n</code></pre></p> </li> </ul> <p>Digit examples: <pre><code>EURUSD (5 digits):\n  Price: 1.12345\n  Point: 0.00001\n  Pip:   0.0001 (4th decimal)\n  50 points = 5 pips\n\nUSDJPY (3 digits):\n  Price: 110.123\n  Point: 0.001\n  Pip:   0.01 (2nd decimal)\n  50 points = 50 pips\n\nXAUUSD (2 digits):\n  Price: 1850.50\n  Point: 0.01\n  Pip:   0.01 (same as point)\n  50 points = 50 pips\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPips/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoInteger</code> - gets digits</li> <li>Related: <code>getDigits()</code> - get decimal places</li> <li>Related: <code>getPoint()</code> - get point size</li> <li>Related: <code>getSpread()</code> - get spread in points</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/","title":"\ud83d\udccd Calculate Price from Points Offset","text":"<p>Convenience method: calculates target price from current market price with points offset. Automatically uses Ask for BUY and Bid for SELL direction.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.pointsToPrice(String symbol, double points, boolean isBuy)</code></li> <li>Underlying methods:</li> <li><code>MT5Account.symbolInfoTick()</code> - gets current prices</li> <li><code>getPoint()</code> - gets point size</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>points</code> <code>double</code> \u2705 Points offset (positive or negative) <code>isBuy</code> <code>boolean</code> \u2705 true = use Ask + offset, false = use Bid - offset"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Calculated price</p> <p>Calculation: <pre><code>For BUY (isBuy = true):\n  basePrice = Ask\n  result = Ask + (points * point)\n\nFor SELL (isBuy = false):\n  basePrice = Bid\n  result = Bid - (points * point)\n</code></pre></p> <p>Example: - Symbol: EURUSD, Ask: 1.12340, Bid: 1.12330, Point: 0.00001 - BUY +50 points \u2192 1.12340 + 0.00050 = 1.12390 - SELL +50 points \u2192 1.12330 - 0.00050 = 1.12280</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Convert points offset to actual price.</li> <li>Why you need it. Calculate SL/TP prices from points distance.</li> <li>Direction matters. BUY adds points, SELL subtracts points.</li> <li>Auto base price. Uses Ask for BUY, Bid for SELL.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate Stop Loss price from points distance.</li> <li>Calculate Take Profit price from points distance.</li> <li>Set pending order price with offset from current market.</li> <li>Convert indicator signals in points to actual prices.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#1-calculate-buy-stop-loss-50-points-below","title":"1) Calculate BUY Stop Loss 50 points below","text":"<pre><code>String symbol = \"EURUSD\";\n\n// Calculate SL 50 points below Ask\ndouble stopLoss = sugar.pointsToPrice(symbol, 50, true);\n\nSystem.out.printf(\"Current Ask: %.5f%n\", sugar.getAsk(symbol));\nSystem.out.printf(\"Stop Loss (-50p): %.5f%n\", stopLoss);\n\n// Place BUY order with SL\nlong ticket = sugar.buyMarket(symbol, 0.1, stopLoss, null);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#2-calculate-sell-take-profit-100-points-below","title":"2) Calculate SELL Take Profit 100 points below","text":"<pre><code>String symbol = \"GBPUSD\";\n\n// Calculate TP 100 points below Bid (for SELL)\ndouble takeProfit = sugar.pointsToPrice(symbol, 100, false);\n\nSystem.out.printf(\"Current Bid: %.5f%n\", sugar.getBid(symbol));\nSystem.out.printf(\"Take Profit (-100p): %.5f%n\", takeProfit);\n\n// Place SELL order with TP\nlong ticket = sugar.sellMarket(symbol, 0.1, null, takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#3-calculate-both-sl-and-tp-for-buy","title":"3) Calculate both SL and TP for BUY","text":"<pre><code>String symbol = \"USDJPY\";\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Method 1: Using pointsToPrice\ndouble stopLoss = sugar.pointsToPrice(symbol, 50, true);   // SL -50 points\ndouble takeProfit = ask + (100 * point);                   // TP +100 points manually\n\n// Method 2: Using pointsToPrice for both\ndouble sl2 = ask - (50 * point);                           // Manual\ndouble tp2 = sugar.pointsToPrice(symbol, -100, true);      // Negative offset = below\n\nSystem.out.printf(\"Ask: %.3f%n\", ask);\nSystem.out.printf(\"SL (-50p): %.3f%n\", stopLoss);\nSystem.out.printf(\"TP (+100p): %.3f%n\", takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#4-place-pending-order-with-offset","title":"4) Place pending order with offset","text":"<pre><code>String symbol = \"EURUSD\";\n\n// Place BUY LIMIT 30 points below current Ask\ndouble limitPrice = sugar.pointsToPrice(symbol, 30, true);\n\n// SL 20 points below limit price\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble stopLoss = limitPrice - (20 * point);\n\n// TP 50 points above limit price\ndouble takeProfit = limitPrice + (50 * point);\n\nlong ticket = sugar.buyLimit(symbol, 0.1, limitPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"Buy Limit placed at %.5f%n\", limitPrice);\nSystem.out.printf(\"  SL: %.5f (-20p from entry)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (+50p from entry)%n\", takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#5-calculate-risk-reward-levels","title":"5) Calculate risk-reward levels","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble bid = sugar.getBid(symbol);\n\n// Risk: 100 points SL\ndouble stopLoss = sugar.pointsToPrice(symbol, 100, false);\n\n// Reward: 300 points TP (1:3 risk-reward)\ndouble takeProfit = bid - (300 * sugar.getPoint(symbol));\n\ndouble riskPoints = 100;\ndouble rewardPoints = 300;\ndouble riskRewardRatio = rewardPoints / riskPoints;\n\nSystem.out.printf(\"%s SELL setup (1:%.0f R:R):%n\", symbol, riskRewardRatio);\nSystem.out.printf(\"  Entry (Bid): %.2f%n\", bid);\nSystem.out.printf(\"  Stop Loss (+100p): %.2f%n\", stopLoss);\nSystem.out.printf(\"  Take Profit (-300p): %.2f%n\", takeProfit);\nSystem.out.printf(\"  Risk: %.2f points%n\", riskPoints);\nSystem.out.printf(\"  Reward: %.2f points%n\", rewardPoints);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Direction logic:</li> <li>BUY (isBuy=true): Base = Ask, Offset = +points (SL below, TP above)</li> <li> <p>SELL (isBuy=false): Base = Bid, Offset = -points (SL above, TP below)</p> </li> <li> <p>Points direction:</p> </li> <li>Positive points with BUY \u2192 above Ask</li> <li>Positive points with SELL \u2192 below Bid (subtracted)</li> <li> <p>Negative points reverse the direction</p> </li> <li> <p>Common pattern: <pre><code>// For BUY orders:\ndouble sl = ask - (slPoints * point);  // SL below\ndouble tp = ask + (tpPoints * point);  // TP above\n\n// For SELL orders:\ndouble sl = bid + (slPoints * point);  // SL above\ndouble tp = bid - (tpPoints * point);  // TP below\n</code></pre></p> </li> <li> <p>When to use:</p> </li> <li>\u2705 Converting strategy signals (e.g., \"SL = 50 points\")</li> <li>\u2705 Calculating SL/TP from point-based rules</li> <li>\u2705 Placing pending orders with point offsets</li> <li> <p>\u274c Not needed if you already have absolute prices</p> </li> <li> <p>Alternative: <code>priceFromOffsetPoints()</code> - similar but different offset logic</p> </li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/pointsToPrice/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoTick</code> - gets current prices</li> <li>Related: <code>getPoint()</code> - get point size</li> <li>Related: <code>priceFromOffsetPoints()</code> - alternative offset calculation</li> <li>Related: <code>getBid()</code> / <code>getAsk()</code> - get current prices</li> <li>Trading: <code>buyMarket()</code>, <code>sellMarket()</code></li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/","title":"\ud83c\udfb2 Calculate Price from Current with Offset","text":"<p>Convenience method: calculates target price by adding points offset to current market price. Simpler alternative to <code>pointsToPrice()</code> with unified offset direction.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.priceFromOffsetPoints(String symbol, boolean isBuy, double pointsOffset)</code></li> <li>Underlying methods:</li> <li><code>MT5Account.symbolInfoTick()</code> - gets current prices</li> <li><code>getPoint()</code> - gets point size</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>isBuy</code> <code>boolean</code> \u2705 true = use Ask, false = use Bid <code>pointsOffset</code> <code>double</code> \u2705 Points offset (positive = up, negative = down)"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Calculated price</p> <p>Calculation: <pre><code>basePrice = isBuy ? Ask : Bid\nresult = basePrice + (pointsOffset * point)\n</code></pre></p> <p>Key difference from <code>pointsToPrice()</code>: - This method: Offset is always added (positive=up, negative=down) - pointsToPrice(): BUY adds, SELL subtracts (different logic)</p> <p>Example: - Symbol: EURUSD, Ask: 1.12340, Bid: 1.12330, Point: 0.00001 - BUY +50 points \u2192 1.12340 + 0.00050 = 1.12390 - BUY -50 points \u2192 1.12340 - 0.00050 = 1.12290 - SELL +50 points \u2192 1.12330 + 0.00050 = 1.12380 - SELL -50 points \u2192 1.12330 - 0.00050 = 1.12280</p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Add/subtract points from current price.</li> <li>Why you need it. Simple offset calculation for any direction.</li> <li>vs pointsToPrice(). This uses simple addition, pointsToPrice has direction logic.</li> <li>Positive = up. Negative = down. Simple.</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Calculate price at fixed offset from current market.</li> <li>Set pending orders above/below current price.</li> <li>Calculate trailing stop prices.</li> <li>Any scenario where you think \"current price \u00b1 X points\".</li> </ul>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#1-calculate-price-50-points-above-ask","title":"1) Calculate price 50 points above Ask","text":"<pre><code>String symbol = \"EURUSD\";\ndouble currentAsk = sugar.getAsk(symbol);\n\n// 50 points above current Ask\ndouble targetPrice = sugar.priceFromOffsetPoints(symbol, true, 50);\n\nSystem.out.printf(\"Current Ask: %.5f%n\", currentAsk);\nSystem.out.printf(\"Target (+50p): %.5f%n\", targetPrice);\n\n// Output:\n// Current Ask: 1.12340\n// Target (+50p): 1.12390\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#2-calculate-price-30-points-below-bid","title":"2) Calculate price 30 points below Bid","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble currentBid = sugar.getBid(symbol);\n\n// 30 points below current Bid (negative offset)\ndouble targetPrice = sugar.priceFromOffsetPoints(symbol, false, -30);\n\nSystem.out.printf(\"Current Bid: %.5f%n\", currentBid);\nSystem.out.printf(\"Target (-30p): %.5f%n\", targetPrice);\n\n// Output:\n// Current Bid: 1.26340\n// Target (-30p): 1.26310\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#3-place-buy-stop-order-above-current-price","title":"3) Place BUY STOP order above current price","text":"<pre><code>String symbol = \"EURUSD\";\n\n// Place BUY STOP 20 points above Ask\ndouble stopPrice = sugar.priceFromOffsetPoints(symbol, true, 20);\n\n// SL 40 points below entry\ndouble stopLoss = stopPrice - (40 * sugar.getPoint(symbol));\n\n// TP 80 points above entry\ndouble takeProfit = stopPrice + (80 * sugar.getPoint(symbol));\n\nlong ticket = sugar.buyStop(symbol, 0.1, stopPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY STOP placed at %.5f (+20p from Ask)%n\", stopPrice);\nSystem.out.printf(\"  SL: %.5f%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f%n\", takeProfit);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#4-trailing-stop-calculation","title":"4) Trailing stop calculation","text":"<pre><code>String symbol = \"USDJPY\";\ndouble trailingPoints = 50; // Trail by 50 points\n\n// For open BUY position, trail stop below current Bid\ndouble currentBid = sugar.getBid(symbol);\ndouble newStopLoss = sugar.priceFromOffsetPoints(symbol, false, -trailingPoints);\n\nSystem.out.printf(\"Trailing stop for BUY:%n\");\nSystem.out.printf(\"  Current Bid: %.3f%n\", currentBid);\nSystem.out.printf(\"  New SL: %.3f (50p trail)%n\", newStopLoss);\n\n// For open SELL position, trail stop above current Ask\ndouble currentAsk = sugar.getAsk(symbol);\ndouble newStopLossSell = sugar.priceFromOffsetPoints(symbol, true, trailingPoints);\n\nSystem.out.printf(\"Trailing stop for SELL:%n\");\nSystem.out.printf(\"  Current Ask: %.3f%n\", currentAsk);\nSystem.out.printf(\"  New SL: %.3f (50p trail)%n\", newStopLossSell);\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#5-grid-trading-levels","title":"5) Grid trading levels","text":"<pre><code>String symbol = \"EURUSD\";\nint gridStep = 20; // 20 points between levels\nint levels = 5;\n\ndouble currentAsk = sugar.getAsk(symbol);\ndouble currentBid = sugar.getBid(symbol);\n\nSystem.out.printf(\"%s Grid Trading Setup:%n\", symbol);\nSystem.out.printf(\"Current Ask: %.5f | Bid: %.5f%n%n\", currentAsk, currentBid);\n\n// BUY grid above current price\nSystem.out.println(\"BUY levels (above Ask):\");\nfor (int i = 1; i &lt;= levels; i++) {\n    double price = sugar.priceFromOffsetPoints(symbol, true, gridStep * i);\n    System.out.printf(\"  Level %d: %.5f (+%dp)%n\", i, price, gridStep * i);\n}\n\n// SELL grid below current price\nSystem.out.println(\"\\nSELL levels (below Bid):\");\nfor (int i = 1; i &lt;= levels; i++) {\n    double price = sugar.priceFromOffsetPoints(symbol, false, -gridStep * i);\n    System.out.printf(\"  Level %d: %.5f (-%dp)%n\", i, price, gridStep * i);\n}\n\n// Output:\n// EURUSD Grid Trading Setup:\n// Current Ask: 1.12340 | Bid: 1.12330\n//\n// BUY levels (above Ask):\n//   Level 1: 1.12360 (+20p)\n//   Level 2: 1.12380 (+40p)\n//   Level 3: 1.12400 (+60p)\n//   Level 4: 1.12420 (+80p)\n//   Level 5: 1.12440 (+100p)\n//\n// SELL levels (below Bid):\n//   Level 1: 1.12310 (-20p)\n//   Level 2: 1.12290 (-40p)\n//   Level 3: 1.12270 (-60p)\n//   Level 4: 1.12250 (-80p)\n//   Level 5: 1.12230 (-100p)\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#6-compare-with-pointstoprice","title":"6) Compare with pointsToPrice()","text":"<pre><code>String symbol = \"EURUSD\";\ndouble ask = sugar.getAsk(symbol);\ndouble bid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\n\nSystem.out.printf(\"%s: Ask=%.5f, Bid=%.5f%n%n\", symbol, ask, bid);\n\n// Compare BUY scenarios (both add points)\ndouble buyPoints = 50;\ndouble price1 = sugar.priceFromOffsetPoints(symbol, true, buyPoints);\ndouble price2 = sugar.pointsToPrice(symbol, buyPoints, true);\n\nSystem.out.printf(\"BUY +50 points:%n\");\nSystem.out.printf(\"  priceFromOffsetPoints: %.5f%n\", price1);\nSystem.out.printf(\"  pointsToPrice: %.5f%n\", price2);\nSystem.out.printf(\"  Manual: %.5f%n\", ask + (buyPoints * point));\nSystem.out.printf(\"  Match: %s%n%n\", price1 == price2 ? \"\u2705\" : \"\u274c\");\n\n// Compare SELL scenarios (DIFFERENT logic!)\ndouble sellPoints = 50;\ndouble price3 = sugar.priceFromOffsetPoints(symbol, false, sellPoints);\ndouble price4 = sugar.pointsToPrice(symbol, sellPoints, false);\n\nSystem.out.printf(\"SELL with 50 points offset:%n\");\nSystem.out.printf(\"  priceFromOffsetPoints: %.5f (Bid + 50p = UP)%n\", price3);\nSystem.out.printf(\"  pointsToPrice: %.5f (Bid - 50p = DOWN)%n\", price4);\nSystem.out.printf(\"  Difference: pointsToPrice subtracts for SELL%n\");\n\n// Output:\n// EURUSD: Ask=1.12340, Bid=1.12330\n//\n// BUY +50 points:\n//   priceFromOffsetPoints: 1.12390\n//   pointsToPrice: 1.12390\n//   Manual: 1.12390\n//   Match: \u2705\n//\n// SELL with 50 points offset:\n//   priceFromOffsetPoints: 1.12380 (Bid + 50p = UP)\n//   pointsToPrice: 1.12280 (Bid - 50p = DOWN)\n//   Difference: pointsToPrice subtracts for SELL\n</code></pre>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Direction logic:</li> <li>Positive offset \u2192 price UP (for both BUY and SELL)</li> <li>Negative offset \u2192 price DOWN (for both BUY and SELL)</li> <li> <p>Simple: <code>result = basePrice + offset</code></p> </li> <li> <p>vs pointsToPrice():</p> </li> </ul> Method BUY Logic SELL Logic <code>priceFromOffsetPoints()</code> Ask + offset Bid + offset <code>pointsToPrice()</code> Ask + offset Bid - offset <p><code>pointsToPrice()</code> has special SELL logic (subtracts), this method doesn't.</p> <ul> <li>Which to use:</li> <li>priceFromOffsetPoints: When you think \"current price \u00b1 X points\"</li> <li>pointsToPrice: When calculating SL/TP (has direction awareness)</li> </ul> <p>Example:   <pre><code>// SL for BUY: 50 points below entry\n// pointsToPrice is more intuitive:\ndouble sl1 = sugar.pointsToPrice(symbol, 50, true); // Ask - 50p\n\n// priceFromOffsetPoints requires negative:\ndouble sl2 = sugar.priceFromOffsetPoints(symbol, true, -50); // Ask - 50p\n</code></pre></p> <ul> <li>Common use cases:</li> <li>\u2705 Pending orders at fixed distance</li> <li>\u2705 Grid trading levels</li> <li>\u2705 Trailing stops</li> <li>\u2705 Price alerts/notifications</li> <li> <p>\u274c SL/TP calculation (prefer <code>pointsToPrice</code>)</p> </li> <li> <p>Base price selection:</p> </li> <li><code>isBuy = true</code> \u2192 uses Ask (for BUY orders)</li> <li><code>isBuy = false</code> \u2192 uses Bid (for SELL orders)</li> </ul> <p>Calculation examples: <pre><code>Ask = 1.12340, Bid = 1.12330, Point = 0.00001\n\npriceFromOffsetPoints(symbol, true, 50):\n  \u2192 1.12340 + (50 * 0.00001) = 1.12390\n\npriceFromOffsetPoints(symbol, true, -50):\n  \u2192 1.12340 + (-50 * 0.00001) = 1.12290\n\npriceFromOffsetPoints(symbol, false, 50):\n  \u2192 1.12330 + (50 * 0.00001) = 1.12380\n\npriceFromOffsetPoints(symbol, false, -50):\n  \u2192 1.12330 + (-50 * 0.00001) = 1.12280\n</code></pre></p>"},{"location":"MT5Sugar/1.%20Symbol_helpers/priceFromOffsetPoints/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>SymbolInfoTick</code> - gets current prices</li> <li>Related: <code>pointsToPrice()</code> - alternative with direction-aware logic</li> <li>Related: <code>getPoint()</code> - get point size</li> <li>Related: <code>getBid()</code> / <code>getAsk()</code> - get current prices</li> <li>Trading: Pending order methods (<code>buyLimit</code>, <code>sellStop</code>, etc.)</li> </ul>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/","title":"\ud83d\udcf8 Get Account Snapshot","text":"<p>Snapshot method: retrieves complete account state in one call. Returns AccountSnapshot object with all key metrics.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getAccountSnapshot()</code></li> <li>Returns: <code>AccountSnapshot</code> - Object containing all account metrics</li> <li>Underlying: <code>accountSummary()</code>, <code>accountInfoDouble()</code> calls</li> </ul>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>AccountSnapshot</code> object with fields:</p> <ul> <li><code>long login</code> - Account number</li> <li><code>double balance</code> - Account balance</li> <li><code>double equity</code> - Account equity</li> <li><code>double margin</code> - Used margin</li> <li><code>double freeMargin</code> - Free margin</li> <li><code>double marginLevel</code> - Margin level %</li> <li><code>double profit</code> - Current profit/loss</li> <li><code>long leverage</code> - Account leverage</li> <li><code>String currency</code> - Account currency</li> <li><code>String company</code> - Broker name</li> </ul> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#1-simple-snapshot","title":"1) Simple snapshot","text":"<pre><code>var snapshot = sugar.getAccountSnapshot();\n\nSystem.out.printf(\"Account: %d%n\", snapshot.login);\nSystem.out.printf(\"Balance: $%.2f%n\", snapshot.balance);\nSystem.out.printf(\"Equity: $%.2f%n\", snapshot.equity);\nSystem.out.printf(\"Profit: $%.2f%n\", snapshot.profit);\nSystem.out.printf(\"Margin level: %.2f%%%n\", snapshot.marginLevel);\n</code></pre>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#2-using-tostring","title":"2) Using toString()","text":"<pre><code>var snapshot = sugar.getAccountSnapshot();\nSystem.out.println(snapshot.toString());\n\n// Output:\n// Account[login=12345678, balance=10000.00, equity=10150.00, margin=500.00,\n//         free=9650.00, level=2030.00%, profit=150.00, leverage=100, currency=USD]\n</code></pre>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#3-risk-check","title":"3) Risk check","text":"<pre><code>var snapshot = sugar.getAccountSnapshot();\n\nif (snapshot.marginLevel &lt; 200.0) {\n    System.out.printf(\"\u26a0\ufe0f Low margin level: %.2f%%%n\", snapshot.marginLevel);\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>One call: Fetches all account data in single operation</li> <li>Immutable: Snapshot is point-in-time data</li> <li>toString(): Built-in formatted string representation</li> </ul>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getAccountSnapshot/#see-also","title":"See also","text":"<ul> <li>Symbol snapshot: <code>getSymbolSnapshot()</code></li> <li>Individual getters: <code>getBalance()</code>, <code>getEquity()</code></li> </ul>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/","title":"\ud83d\udcf8 Get Symbol Snapshot","text":"<p>Snapshot method: retrieves complete symbol information in one call. Returns SymbolSnapshot object with all key metrics.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getSymbolSnapshot(String symbol)</code></li> <li>Returns: <code>SymbolSnapshot</code> - Object containing all symbol metrics</li> <li>Underlying: Multiple <code>symbolInfo*()</code> calls</li> </ul>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>SymbolSnapshot</code> object with fields:</p> <ul> <li><code>String name</code> - Symbol name</li> <li><code>double bid</code> - Current Bid price</li> <li><code>double ask</code> - Current Ask price</li> <li><code>double point</code> - Point size</li> <li><code>int digits</code> - Decimal digits</li> <li><code>int spread</code> - Spread in points</li> <li><code>double volumeMin</code> - Minimum volume</li> <li><code>double volumeMax</code> - Maximum volume</li> <li><code>double volumeStep</code> - Volume step</li> <li><code>double tickValue</code> - Tick value</li> <li><code>double tickSize</code> - Tick size</li> </ul> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#1-simple-snapshot","title":"1) Simple snapshot","text":"<pre><code>var snapshot = sugar.getSymbolSnapshot(\"EURUSD\");\n\nSystem.out.printf(\"Symbol: %s%n\", snapshot.name);\nSystem.out.printf(\"Bid: %.5f | Ask: %.5f%n\", snapshot.bid, snapshot.ask);\nSystem.out.printf(\"Spread: %d points%n\", snapshot.spread);\nSystem.out.printf(\"Volume: [%.2f - %.2f] step %.2f%n\",\n    snapshot.volumeMin, snapshot.volumeMax, snapshot.volumeStep);\n</code></pre>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#2-using-tostring","title":"2) Using toString()","text":"<pre><code>var snapshot = sugar.getSymbolSnapshot(\"GBPUSD\");\nSystem.out.println(snapshot.toString());\n\n// Output:\n// Symbol[GBPUSD, bid=1.26340, ask=1.26350, spread=10, point=0.00001,\n//        digits=5, vol=[0.01-100.00 step 0.01]]\n</code></pre>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#3-compare-symbols","title":"3) Compare symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\n\nfor (String symbol : symbols) {\n    var snap = sugar.getSymbolSnapshot(symbol);\n    System.out.printf(\"%s: spread=%dp, point=%.5f%n\",\n        snap.name, snap.spread, snap.point);\n}\n</code></pre>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>One call: Fetches all symbol data efficiently</li> <li>Immutable: Snapshot is point-in-time data</li> <li>toString(): Built-in formatted string representation</li> </ul>"},{"location":"MT5Sugar/10.%20Snapshot_helpers/getSymbolSnapshot/#see-also","title":"See also","text":"<ul> <li>Account snapshot: <code>getAccountSnapshot()</code></li> <li>Individual getters: <code>getBid()</code>, <code>getSpread()</code></li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/","title":"\ud83d\udcdc Get Orders History (Last N Days)","text":"<p>History method: retrieves orders history for the last N days. Simplified alternative to manual timestamp calculation.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getOrdersHistoryLastDays(int days, String symbol)</code></li> <li>Returns: <code>OrdersHistoryData</code> - Proto message with historical orders</li> <li>Underlying: <code>MT5Service.orderHistory()</code> with auto-calculated timestamps</li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>days</code> <code>int</code> \u2705 Number of days back to retrieve <code>symbol</code> <code>String</code> \u26aa Symbol filter (null = all symbols)"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>Mt5TermApiAccountHelper.OrdersHistoryData</code> - Historical orders data</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p> <p>Execution: - Automatically calculates time range: (now - days) to now - Sorts by close time descending (newest first) - No pagination (offset=0, limit=0 = all results)</p>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Get order history for last N days without manual timestamps.</li> <li>Why you need it. Simpler than calculating Unix timestamps manually.</li> <li>Use case. Daily reports, performance analysis, trade review.</li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#1-last-7-days-history","title":"1) Last 7 days history","text":"<pre><code>var history = sugar.getOrdersHistoryLastDays(7, null);\n\nSystem.out.printf(\"Orders from last 7 days: %d%n\",\n    history.getOpenedOrderHistoriesCount());\n\nfor (var order : history.getOpenedOrderHistoriesList()) {\n    System.out.printf(\"  #%d %s %.2f lots @ %.5f%n\",\n        order.getTicket(),\n        order.getSymbol(),\n        order.getVolume(),\n        order.getClosePrice());\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#2-todays-orders-for-symbol","title":"2) Today's orders for symbol","text":"<pre><code>String symbol = \"EURUSD\";\nvar history = sugar.getOrdersHistoryLastDays(1, symbol);\n\nSystem.out.printf(\"Today's %s orders: %d%n\",\n    symbol, history.getOpenedOrderHistoriesCount());\n</code></pre>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#3-last-30-days-performance","title":"3) Last 30 days performance","text":"<pre><code>var history = sugar.getOrdersHistoryLastDays(30, null);\n\ndouble totalProfit = 0.0;\nint wins = 0;\nint losses = 0;\n\nfor (var order : history.getOpenedOrderHistoriesList()) {\n    double profit = order.getProfit();\n    totalProfit += profit;\n\n    if (profit &gt; 0) wins++;\n    else if (profit &lt; 0) losses++;\n}\n\nSystem.out.printf(\"Last 30 days:%n\");\nSystem.out.printf(\"  Total P/L: $%.2f%n\", totalProfit);\nSystem.out.printf(\"  Wins: %d | Losses: %d%n\", wins, losses);\nSystem.out.printf(\"  Win rate: %.1f%%%n\", (wins * 100.0) / (wins + losses));\n</code></pre>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Time range: From (now - days) to now</li> <li>Symbol filter: Pass null for all symbols</li> <li>Sort order: Newest first (close time descending)</li> <li>All results: No pagination applied</li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getOrdersHistoryLastDays/#see-also","title":"See also","text":"<ul> <li>Positions history: <code>getPositionsHistoryPaged()</code></li> <li>Low-level: <code>orderHistory()</code></li> <li>Timestamp helpers: <code>createTimestamp()</code></li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/","title":"\ud83d\udcdc Get Positions History (Paginated)","text":"<p>History method: retrieves positions history with pagination support. Useful for large datasets.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getPositionsHistoryPaged(int page, int itemsPerPage)</code></li> <li>Returns: <code>PositionsHistoryData</code> - Proto message with historical positions</li> <li>Underlying: <code>MT5Service.positionsHistory()</code> with pagination</li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>page</code> <code>int</code> \u2705 Page number (0-based) <code>itemsPerPage</code> <code>int</code> \u2705 Number of items per page"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>Mt5TermApiAccountHelper.PositionsHistoryData</code> - Historical positions page</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p> <p>Execution: - Sorts by open time descending (newest first) - Returns one page of results - No time filtering (all history)</p>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Paginated positions history retrieval.</li> <li>Why you need it. Handle large history without loading everything.</li> <li>Use case. Performance analysis, reports, trade logs.</li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#1-first-page-latest-50-positions","title":"1) First page (latest 50 positions)","text":"<pre><code>int page = 0;\nint itemsPerPage = 50;\n\nvar history = sugar.getPositionsHistoryPaged(page, itemsPerPage);\n\nSystem.out.printf(\"Page 1: %d positions%n\",\n    history.getPositionsCount());\n\nfor (var pos : history.getPositionsList()) {\n    System.out.printf(\"  #%d %s: $%.2f profit%n\",\n        pos.getTicket(),\n        pos.getSymbol(),\n        pos.getProfit());\n}\n</code></pre>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#2-iterate-through-all-pages","title":"2) Iterate through all pages","text":"<pre><code>int itemsPerPage = 100;\nint page = 0;\n\nwhile (true) {\n    var history = sugar.getPositionsHistoryPaged(page, itemsPerPage);\n\n    if (history.getPositionsCount() == 0) {\n        break; // No more data\n    }\n\n    System.out.printf(\"Page %d: %d positions%n\",\n        page + 1, history.getPositionsCount());\n\n    // Process positions...\n\n    page++;\n}\n\nSystem.out.printf(\"\u2705 Processed %d pages%n\", page);\n</code></pre>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#3-calculate-total-history-profit","title":"3) Calculate total history profit","text":"<pre><code>int itemsPerPage = 100;\nint page = 0;\ndouble totalProfit = 0.0;\nint totalTrades = 0;\n\nwhile (true) {\n    var history = sugar.getPositionsHistoryPaged(page, itemsPerPage);\n\n    if (history.getPositionsCount() == 0) break;\n\n    for (var pos : history.getPositionsList()) {\n        totalProfit += pos.getProfit();\n        totalTrades++;\n    }\n\n    page++;\n}\n\nSystem.out.printf(\"Total history:%n\");\nSystem.out.printf(\"  Trades: %d%n\", totalTrades);\nSystem.out.printf(\"  Profit: $%.2f%n\", totalProfit);\n</code></pre>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Pages: 0-based (first page = 0)</li> <li>Sort order: Newest first (open time descending)</li> <li>No time filter: Returns all history</li> <li>Empty page: Indicates end of data</li> </ul>"},{"location":"MT5Sugar/11.%20History_helpers/getPositionsHistoryPaged/#see-also","title":"See also","text":"<ul> <li>Orders history: <code>getOrdersHistoryLastDays()</code></li> <li>Low-level: <code>positionsHistory()</code> (if exists)</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/","title":"\ud83d\udfe2 Open BUY Market Order","text":"<p>Convenience method: opens a BUY position at current Ask price with optional Stop Loss and Take Profit. Simplified alternative to low-level OrderSend.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.buyMarket(String symbol, double volume, Double stopLoss, Double takeProfit)</code></li> <li>Sugar method (with comment): <code>MT5Sugar.buyMarket(String symbol, double volume, Double stopLoss, Double takeProfit, String comment)</code></li> <li>Underlying methods:</li> <li><code>MT5Service.orderSend()</code> - low-level order placement</li> <li><code>ensureSymbolSelected()</code> - auto symbol selection</li> <li><code>normalizeVolume()</code> - auto volume normalization</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>stopLoss</code> <code>Double</code> \u2705 Stop Loss price (null or 0 = no SL) <code>takeProfit</code> <code>Double</code> \u2705 Take Profit price (null or 0 = no TP) <code>comment</code> <code>String</code> \u26aa Order comment (optional, default = \"\")"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (position ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Order executes at current Ask price - Position opens immediately (market execution) - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Buy at current market price instantly.</li> <li>Why you need it. Simplest way to open BUY position.</li> <li>Auto-handled. Symbol selection, volume normalization, error checking.</li> <li>SL/TP. Optional - pass null or 0 to skip.</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Open BUY position at current market price.</li> <li>Execute buy-side market orders with SL/TP.</li> <li>Enter long position immediately (no pending order).</li> <li>Simplify trading logic (vs manual OrderSend construction).</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#1-simple-buy-without-sltp","title":"1) Simple BUY without SL/TP","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1; // 0.1 lot\n\n// Buy at market, no SL/TP\nlong ticket = sugar.buyMarket(symbol, volume, null, null);\n\nSystem.out.printf(\"BUY position opened: #%d%n\", ticket);\nSystem.out.printf(\"Entry price (Ask): %.5f%n\", sugar.getAsk(symbol));\n\n// Output:\n// BUY position opened: #123456789\n// Entry price (Ask): 1.12350\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#2-buy-with-stop-loss-and-take-profit","title":"2) BUY with Stop Loss and Take Profit","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// SL 50 points below entry\ndouble stopLoss = ask - (50 * point);\n\n// TP 100 points above entry\ndouble takeProfit = ask + (100 * point);\n\nlong ticket = sugar.buyMarket(symbol, volume, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\nSystem.out.printf(\"  Entry: %.5f%n\", ask);\nSystem.out.printf(\"  SL: %.5f (-50p)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (+100p)%n\", takeProfit);\n\n// Output:\n// BUY GBPUSD: 0.50 lots\n//   Ticket: #987654321\n//   Entry: 1.26355\n//   SL: 1.26305 (-50p)\n//   TP: 1.26455 (+100p)\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#3-buy-with-risk-management","title":"3) BUY with risk management","text":"<pre><code>String symbol = \"EURUSD\";\ndouble balance = sugar.getBalance();\ndouble riskPercent = 2.0; // Risk 2% of balance\nint slPoints = 50;\n\n// Calculate risk amount\ndouble riskAmount = balance * (riskPercent / 100.0);\n\n// Calculate volume based on risk\ndouble volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\n\n// Calculate SL price\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble stopLoss = ask - (slPoints * point);\n\n// Place order\nlong ticket = sugar.buyMarket(symbol, volume, stopLoss, null);\n\nSystem.out.printf(\"Risk-managed BUY:%n\");\nSystem.out.printf(\"  Balance: $%.2f%n\", balance);\nSystem.out.printf(\"  Risk: %.1f%% ($%.2f)%n\", riskPercent, riskAmount);\nSystem.out.printf(\"  Volume: %.2f lots%n\", volume);\nSystem.out.printf(\"  SL: %.5f (%d points)%n\", stopLoss, slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#4-buy-with-comment-and-error-handling","title":"4) BUY with comment and error handling","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\nString comment = \"Strategy-A Entry #1\";\n\ntry {\n    long ticket = sugar.buyMarket(symbol, volume, null, null, comment);\n\n    System.out.printf(\"\u2705 BUY order placed successfully%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Comment: %s%n\", comment);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n\n    // Handle error (e.g., retry, log, alert)\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#5-multiple-buy-positions-with-different-parameters","title":"5) Multiple BUY positions with different parameters","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble baseVolume = 0.01;\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Position 1: No SL/TP (manual management)\nlong ticket1 = sugar.buyMarket(symbol, baseVolume, null, null);\n\n// Position 2: Tight SL, close TP (scalping)\ndouble sl2 = ask - (20 * point);\ndouble tp2 = ask + (30 * point);\nlong ticket2 = sugar.buyMarket(symbol, baseVolume, sl2, tp2);\n\n// Position 3: Wide SL, far TP (swing)\ndouble sl3 = ask - (100 * point);\ndouble tp3 = ask + (300 * point);\nlong ticket3 = sugar.buyMarket(symbol, baseVolume, sl3, tp3);\n\nSystem.out.printf(\"Opened 3 BUY positions on %s:%n\", symbol);\nSystem.out.printf(\"  #%d: No SL/TP%n\", ticket1);\nSystem.out.printf(\"  #%d: Scalp (20p SL, 30p TP)%n\", ticket2);\nSystem.out.printf(\"  #%d: Swing (100p SL, 300p TP)%n\", ticket3);\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#6-conditional-market-entry","title":"6) Conditional market entry","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble targetAsk = 1.12500;\n\nSystem.out.printf(\"Waiting for %s Ask &lt;= %.5f...%n\", symbol, targetAsk);\n\nwhile (true) {\n    double currentAsk = sugar.getAsk(symbol);\n\n    if (currentAsk &lt;= targetAsk) {\n        // Price reached target, enter BUY\n        double sl = currentAsk - (50 * sugar.getPoint(symbol));\n        double tp = currentAsk + (100 * sugar.getPoint(symbol));\n\n        long ticket = sugar.buyMarket(symbol, volume, sl, tp);\n\n        System.out.printf(\"\u2705 Entered BUY at Ask: %.5f%n\", currentAsk);\n        System.out.printf(\"   Ticket: #%d%n\", ticket);\n        break;\n    }\n\n    System.out.printf(\"Current Ask: %.5f (waiting...)%n\", currentAsk);\n    Thread.sleep(1000); // Check every second\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Execution price:</li> <li>BUY executes at Ask (higher price)</li> <li>Price may differ slightly due to slippage</li> <li> <p>Market orders execute immediately</p> </li> <li> <p>Stop Loss placement:</p> </li> <li>Must be below Ask for BUY</li> <li>Typical: <code>SL = Ask - (points * point)</code></li> <li> <p>Use <code>pointsToPrice()</code> for convenience</p> </li> <li> <p>Take Profit placement:</p> </li> <li>Must be above Ask for BUY</li> <li> <p>Typical: <code>TP = Ask + (points * point)</code></p> </li> <li> <p>Auto-normalization:</p> </li> <li>Volume is automatically normalized to symbol's min/max/step</li> <li> <p>No need to call <code>normalizeVolume()</code> manually</p> </li> <li> <p>Auto symbol selection:</p> </li> <li>Method calls <code>ensureSymbolSelected()</code> internally</li> <li> <p>Symbol added to Market Watch if missing</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> if order fails</li> <li>Error contains return code and description</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0 for SL/TP:</p> </li> <li>Both <code>null</code> and <code>0</code> mean \"no SL/TP\"</li> <li>Internally converted to 0.0</li> </ul> <p>BUY order structure: <pre><code>Entry: Ask (1.12350)\n   \u2191\n   | TP: above entry (1.12450)\n   |\nEntry\n   |\n   | SL: below entry (1.12300)\n   \u2193\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: No SL/TP\nsugar.buyMarket(symbol, volume, null, null);\n\n// Pattern 2: Only SL\nsugar.buyMarket(symbol, volume, stopLoss, null);\n\n// Pattern 3: Only TP\nsugar.buyMarket(symbol, volume, null, takeProfit);\n\n// Pattern 4: Both SL and TP\nsugar.buyMarket(symbol, volume, stopLoss, takeProfit);\n\n// Pattern 5: With comment\nsugar.buyMarket(symbol, volume, stopLoss, takeProfit, \"Strategy A\");\n</code></pre></p>"},{"location":"MT5Sugar/2.%20Market_orders/buyMarket/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderSend</code> - underlying implementation</li> <li>Related: <code>sellMarket()</code> - open SELL position</li> <li>Pending orders: <code>buyLimit()</code>, <code>buyStop()</code></li> <li>Position management: <code>closePosition()</code></li> <li>Price helpers: <code>getAsk()</code>, <code>pointsToPrice()</code></li> <li>Risk management: <code>calculateVolume()</code></li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/","title":"\ud83d\udd34 Open SELL Market Order","text":"<p>Convenience method: opens a SELL position at current Bid price with optional Stop Loss and Take Profit. Simplified alternative to low-level OrderSend.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.sellMarket(String symbol, double volume, Double stopLoss, Double takeProfit)</code></li> <li>Sugar method (with comment): <code>MT5Sugar.sellMarket(String symbol, double volume, Double stopLoss, Double takeProfit, String comment)</code></li> <li>Underlying methods:</li> <li><code>MT5Service.orderSend()</code> - low-level order placement</li> <li><code>ensureSymbolSelected()</code> - auto symbol selection</li> <li><code>normalizeVolume()</code> - auto volume normalization</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>stopLoss</code> <code>Double</code> \u2705 Stop Loss price (null or 0 = no SL) <code>takeProfit</code> <code>Double</code> \u2705 Take Profit price (null or 0 = no TP) <code>comment</code> <code>String</code> \u26aa Order comment (optional, default = \"\")"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (position ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Order executes at current Bid price - Position opens immediately (market execution) - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Sell at current market price instantly.</li> <li>Why you need it. Simplest way to open SELL position.</li> <li>Auto-handled. Symbol selection, volume normalization, error checking.</li> <li>SL/TP. Optional - pass null or 0 to skip.</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Open SELL position at current market price.</li> <li>Execute sell-side market orders with SL/TP.</li> <li>Enter short position immediately (no pending order).</li> <li>Simplify trading logic (vs manual OrderSend construction).</li> </ul>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#1-simple-sell-without-sltp","title":"1) Simple SELL without SL/TP","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1; // 0.1 lot\n\n// Sell at market, no SL/TP\nlong ticket = sugar.sellMarket(symbol, volume, null, null);\n\nSystem.out.printf(\"SELL position opened: #%d%n\", ticket);\nSystem.out.printf(\"Entry price (Bid): %.5f%n\", sugar.getBid(symbol));\n\n// Output:\n// SELL position opened: #123456789\n// Entry price (Bid): 1.12340\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#2-sell-with-stop-loss-and-take-profit","title":"2) SELL with Stop Loss and Take Profit","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\ndouble bid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// SL 50 points above entry\ndouble stopLoss = bid + (50 * point);\n\n// TP 100 points below entry\ndouble takeProfit = bid - (100 * point);\n\nlong ticket = sugar.sellMarket(symbol, volume, stopLoss, takeProfit);\n\nSystem.out.printf(\"SELL %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\nSystem.out.printf(\"  Entry: %.5f%n\", bid);\nSystem.out.printf(\"  SL: %.5f (+50p)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (-100p)%n\", takeProfit);\n\n// Output:\n// SELL GBPUSD: 0.50 lots\n//   Ticket: #987654321\n//   Entry: 1.26340\n//   SL: 1.26390 (+50p)\n//   TP: 1.26240 (-100p)\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#3-sell-with-risk-management","title":"3) SELL with risk management","text":"<pre><code>String symbol = \"EURUSD\";\ndouble balance = sugar.getBalance();\ndouble riskPercent = 2.0; // Risk 2% of balance\nint slPoints = 50;\n\n// Calculate risk amount\ndouble riskAmount = balance * (riskPercent / 100.0);\n\n// Calculate volume based on risk\ndouble volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\n\n// Calculate SL price\ndouble bid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble stopLoss = bid + (slPoints * point);\n\n// Place order\nlong ticket = sugar.sellMarket(symbol, volume, stopLoss, null);\n\nSystem.out.printf(\"Risk-managed SELL:%n\");\nSystem.out.printf(\"  Balance: $%.2f%n\", balance);\nSystem.out.printf(\"  Risk: %.1f%% ($%.2f)%n\", riskPercent, riskAmount);\nSystem.out.printf(\"  Volume: %.2f lots%n\", volume);\nSystem.out.printf(\"  SL: %.5f (%d points)%n\", stopLoss, slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#4-sell-with-comment-and-error-handling","title":"4) SELL with comment and error handling","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\nString comment = \"Strategy-B Short Entry\";\n\ntry {\n    long ticket = sugar.sellMarket(symbol, volume, null, null, comment);\n\n    System.out.printf(\"\u2705 SELL order placed successfully%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Comment: %s%n\", comment);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n\n    // Handle error (e.g., retry, log, alert)\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#5-sell-on-resistance-breakout","title":"5) SELL on resistance breakout","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble resistanceLevel = 1.12500;\n\nSystem.out.printf(\"Monitoring %s for resistance break...%n\", symbol);\n\nwhile (true) {\n    double currentBid = sugar.getBid(symbol);\n\n    if (currentBid &gt;= resistanceLevel) {\n        // Price broke above resistance, enter SELL (expecting reversal)\n        double sl = currentBid + (50 * sugar.getPoint(symbol));\n        double tp = currentBid - (100 * sugar.getPoint(symbol));\n\n        long ticket = sugar.sellMarket(symbol, volume, sl, tp);\n\n        System.out.printf(\"\u2705 Resistance broken! Entered SELL%n\");\n        System.out.printf(\"   Bid: %.5f%n\", currentBid);\n        System.out.printf(\"   Ticket: #%d%n\", ticket);\n        break;\n    }\n\n    System.out.printf(\"Bid: %.5f (waiting for &gt;= %.5f)%n\",\n        currentBid, resistanceLevel);\n    Thread.sleep(1000);\n}\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#6-hedging-with-buy-and-sell","title":"6) Hedging with BUY and SELL","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\n\n// Open BUY position\nlong buyTicket = sugar.buyMarket(symbol, volume, null, null);\ndouble buyEntry = sugar.getAsk(symbol);\n\n// Immediately hedge with SELL\nlong sellTicket = sugar.sellMarket(symbol, volume, null, null);\ndouble sellEntry = sugar.getBid(symbol);\n\n// Locked position (profit = spread cost)\ndouble spread = buyEntry - sellEntry;\n\nSystem.out.printf(\"Hedged position on %s:%n\", symbol);\nSystem.out.printf(\"  BUY #%d at %.2f%n\", buyTicket, buyEntry);\nSystem.out.printf(\"  SELL #%d at %.2f%n\", sellTicket, sellEntry);\nSystem.out.printf(\"  Lock cost: %.2f%n\", spread);\n</code></pre>"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Execution price:</li> <li>SELL executes at Bid (lower price)</li> <li>Price may differ slightly due to slippage</li> <li> <p>Market orders execute immediately</p> </li> <li> <p>Stop Loss placement:</p> </li> <li>Must be above Bid for SELL</li> <li>Typical: <code>SL = Bid + (points * point)</code></li> <li> <p>Use <code>pointsToPrice()</code> for convenience</p> </li> <li> <p>Take Profit placement:</p> </li> <li>Must be below Bid for SELL</li> <li> <p>Typical: <code>TP = Bid - (points * point)</code></p> </li> <li> <p>Auto-normalization:</p> </li> <li>Volume is automatically normalized to symbol's min/max/step</li> <li> <p>No need to call <code>normalizeVolume()</code> manually</p> </li> <li> <p>Auto symbol selection:</p> </li> <li>Method calls <code>ensureSymbolSelected()</code> internally</li> <li> <p>Symbol added to Market Watch if missing</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> if order fails</li> <li>Error contains return code and description</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0 for SL/TP:</p> </li> <li>Both <code>null</code> and <code>0</code> mean \"no SL/TP\"</li> <li>Internally converted to 0.0</li> </ul> <p>SELL order structure: <pre><code>   \u2191\n   | SL: above entry (1.12390)\n   |\nEntry: Bid (1.12340)\n   |\n   | TP: below entry (1.12240)\n   \u2193\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: No SL/TP\nsugar.sellMarket(symbol, volume, null, null);\n\n// Pattern 2: Only SL\nsugar.sellMarket(symbol, volume, stopLoss, null);\n\n// Pattern 3: Only TP\nsugar.sellMarket(symbol, volume, null, takeProfit);\n\n// Pattern 4: Both SL and TP\nsugar.sellMarket(symbol, volume, stopLoss, takeProfit);\n\n// Pattern 5: With comment\nsugar.sellMarket(symbol, volume, stopLoss, takeProfit, \"Strategy B\");\n</code></pre></p> <p>BUY vs SELL:</p> Aspect BUY SELL Entry price Ask (higher) Bid (lower) Stop Loss Below entry Above entry Take Profit Above entry Below entry Profit when Price goes UP Price goes DOWN SL calculation Entry - (points \u00d7 p) Entry + (points \u00d7 p) TP calculation Entry + (points \u00d7 p) Entry - (points \u00d7 p)"},{"location":"MT5Sugar/2.%20Market_orders/sellMarket/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderSend</code> - underlying implementation</li> <li>Related: <code>buyMarket()</code> - open BUY position</li> <li>Pending orders: <code>sellLimit()</code>, <code>sellStop()</code></li> <li>Position management: <code>closePosition()</code></li> <li>Price helpers: <code>getBid()</code>, <code>pointsToPrice()</code></li> <li>Risk management: <code>calculateVolume()</code></li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/","title":"\ud83d\udfe2 Place BUY LIMIT Pending Order","text":"<p>Convenience method: places a BUY LIMIT pending order below current price. Executes when price drops to the specified level. Simplified alternative to low-level OrderSend.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.buyLimit(String symbol, double volume, double price, Double stopLoss, Double takeProfit)</code></li> <li> <p>Underlying methods:</p> </li> <li> <p><code>MT5Service.orderSend()</code> - low-level order placement</p> </li> <li><code>ensureSymbolSelected()</code> - auto symbol selection</li> <li><code>normalizeVolume()</code> - auto volume normalization</li> <li><code>normalizePrice()</code> - auto price normalization</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>price</code> <code>double</code> \u2705 Entry price (must be below current Ask) <code>stopLoss</code> <code>Double</code> \u2705 Stop Loss price (null or 0 = no SL) <code>takeProfit</code> <code>Double</code> \u2705 Take Profit price (null or 0 = no TP)"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Order placed as pending (not executed immediately) - Triggers when Ask price drops to specified price level - Converts to market position upon activation - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Buy when price drops to specified level (buy at lower price).</li> <li>Why you need it. Enter BUY position at better price (below current market).</li> <li>Auto-handled. Symbol selection, volume/price normalization, error checking.</li> <li>SL/TP. Optional - pass null or 0 to skip.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place BUY order below current price (buy at discount).</li> <li>Wait for price to drop before entering long position.</li> <li>Set entry price in advance (not immediate execution).</li> <li>Buy at support level or after pullback.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#1-simple-buy-limit-without-sltp","title":"1) Simple BUY LIMIT without SL/TP","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1; // 0.1 lot\ndouble currentAsk = sugar.getAsk(symbol);\ndouble entryPrice = currentAsk - 0.00050; // 50 points below Ask\n\n// Place BUY LIMIT order\nlong ticket = sugar.buyLimit(symbol, volume, entryPrice, null, null);\n\nSystem.out.printf(\"BUY LIMIT order placed: #%d%n\", ticket);\nSystem.out.printf(\"Current Ask: %.5f%n\", currentAsk);\nSystem.out.printf(\"Entry price: %.5f (pending)%n\", entryPrice);\n\n// Output:\n// BUY LIMIT order placed: #123456789\n// Current Ask: 1.12340\n// Entry price: 1.12290 (pending)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#2-buy-limit-with-stop-loss-and-take-profit","title":"2) BUY LIMIT with Stop Loss and Take Profit","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\ndouble currentAsk = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Entry 100 points below current price\ndouble entryPrice = currentAsk - (100 * point);\n\n// SL 50 points below entry\ndouble stopLoss = entryPrice - (50 * point);\n\n// TP 100 points above entry\ndouble takeProfit = entryPrice + (100 * point);\n\nlong ticket = sugar.buyLimit(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY LIMIT %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\nSystem.out.printf(\"  Current Ask: %.5f%n\", currentAsk);\nSystem.out.printf(\"  Entry: %.5f (-100p)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (-50p from entry)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (+100p from entry)%n\", takeProfit);\n\n// Output:\n// BUY LIMIT GBPUSD: 0.50 lots\n//   Ticket: #987654321\n//   Current Ask: 1.26340\n//   Entry: 1.26240 (-100p)\n//   SL: 1.26190 (-50p from entry)\n//   TP: 1.26340 (+100p from entry)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#3-buy-limit-at-support-level","title":"3) BUY LIMIT at support level","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble supportLevel = 1.12000; // Support level\ndouble point = sugar.getPoint(symbol);\n\n// Place order at support\ndouble entryPrice = supportLevel;\ndouble stopLoss = supportLevel - (50 * point); // SL below support\ndouble takeProfit = supportLevel + (150 * point); // TP 150 points above\n\nlong ticket = sugar.buyLimit(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY LIMIT at support:%n\");\nSystem.out.printf(\"  Entry: %.5f (support level)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (50p below support)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (150p above entry)%n\", takeProfit);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#4-buy-limit-with-error-handling","title":"4) BUY LIMIT with error handling","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\ndouble entryPrice = 148.500; // Desired entry price\n\ntry {\n    long ticket = sugar.buyLimit(symbol, volume, entryPrice, null, null);\n\n    System.out.printf(\"\u2705 BUY LIMIT order placed successfully%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Entry price: %.3f%n\", entryPrice);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n\n    // Handle error (e.g., price too close to market, invalid price level)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#5-multiple-buy-limit-orders-grid-trading","title":"5) Multiple BUY LIMIT orders (grid trading)","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.01;\ndouble currentAsk = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\nint gridStep = 50; // 50 points between orders\nint gridLevels = 5;\n\nSystem.out.printf(\"Placing BUY LIMIT grid below %.5f:%n\", currentAsk);\n\nfor (int i = 1; i &lt;= gridLevels; i++) {\n    double entryPrice = currentAsk - (gridStep * i * point);\n    double stopLoss = entryPrice - (50 * point);\n    double takeProfit = entryPrice + (100 * point);\n\n    long ticket = sugar.buyLimit(symbol, volume, entryPrice, stopLoss, takeProfit);\n\n    System.out.printf(\"  Level %d: #%d at %.5f (%d points below)%n\",\n        i, ticket, entryPrice, gridStep * i);\n}\n\n// Output:\n// Placing BUY LIMIT grid below 1.12340:\n//   Level 1: #111 at 1.12290 (50 points below)\n//   Level 2: #222 at 1.12240 (100 points below)\n//   Level 3: #333 at 1.12190 (150 points below)\n//   Level 4: #444 at 1.12140 (200 points below)\n//   Level 5: #555 at 1.12090 (250 points below)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#6-buy-limit-with-price-validation","title":"6) BUY LIMIT with price validation","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble desiredEntry = 2500.00;\ndouble currentAsk = sugar.getAsk(symbol);\n\n// Validate that entry price is below current Ask\nif (desiredEntry &gt;= currentAsk) {\n    System.err.printf(\"\u274c Invalid price: BUY LIMIT must be below Ask (%.2f)%n\", currentAsk);\n} else {\n    double stopLoss = desiredEntry - 50.0;\n    double takeProfit = desiredEntry + 100.0;\n\n    long ticket = sugar.buyLimit(symbol, volume, desiredEntry, stopLoss, takeProfit);\n\n    System.out.printf(\"\u2705 BUY LIMIT placed:%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Entry: %.2f (%.2f below Ask)%n\", desiredEntry, currentAsk - desiredEntry);\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Price placement:</li> <li>Entry price must be below current Ask</li> <li>Order triggers when Ask drops to entry price</li> <li> <p>Invalid if entry price &gt;= current Ask</p> </li> <li> <p>Order activation:</p> </li> <li>Remains pending until price reaches entry level</li> <li>Converts to market position when triggered</li> <li> <p>May not trigger if price doesn't reach level</p> </li> <li> <p>Stop Loss placement:</p> </li> <li>Must be below entry price for BUY</li> <li> <p>Typical: <code>SL = entry - (points * point)</code></p> </li> <li> <p>Take Profit placement:</p> </li> <li>Must be above entry price for BUY</li> <li> <p>Typical: <code>TP = entry + (points * point)</code></p> </li> <li> <p>Auto-normalization:</p> </li> <li>Volume normalized to symbol's min/max/step</li> <li>Price normalized to symbol's digits</li> <li> <p>No manual normalization needed</p> </li> <li> <p>Auto symbol selection:</p> </li> <li>Method calls <code>ensureSymbolSelected()</code> internally</li> <li> <p>Symbol added to Market Watch if missing</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> if order fails</li> <li>Common errors: invalid price level, invalid stops</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0 for SL/TP:</p> </li> <li>Both <code>null</code> and <code>0</code> mean \"no SL/TP\"</li> <li>Internally converted to 0.0</li> </ul> <p>BUY LIMIT order structure: <pre><code>   \u2191\n   | TP: above entry (1.12390)\n   |\nEntry: (1.12290) - pending, waits for price to drop here\n   |\n   | SL: below entry (1.12240)\n   \u2193\nCurrent Ask: (1.12340)\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: No SL/TP\nsugar.buyLimit(symbol, volume, price, null, null);\n\n// Pattern 2: Only SL\nsugar.buyLimit(symbol, volume, price, stopLoss, null);\n\n// Pattern 3: Only TP\nsugar.buyLimit(symbol, volume, price, null, takeProfit);\n\n// Pattern 4: Both SL and TP\nsugar.buyLimit(symbol, volume, price, stopLoss, takeProfit);\n</code></pre></p> <p>BUY LIMIT vs BUY STOP:</p> Aspect BUY LIMIT BUY STOP Entry price Below current Ask Above current Ask Triggers when Price drops Price rises Use case Buy at discount Breakout trading Psychology Buy at support Buy momentum"},{"location":"MT5Sugar/3.%20Pending_orders/buyLimit/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderSend</code> - underlying implementation</li> <li>Related: <code>buyMarket()</code> - immediate BUY execution</li> <li>Other pending: <code>sellLimit()</code>, <code>buyStop()</code>, <code>sellStop()</code></li> <li>Points-based: <code>buyLimitPoints()</code> - easier offset syntax</li> <li>Position management: <code>closePosition()</code></li> <li>Price helpers: <code>getAsk()</code>, <code>normalizePrice()</code></li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/","title":"\ud83d\udfe2 Place BUY STOP Pending Order","text":"<p>Convenience method: places a BUY STOP pending order above current price. Executes when price rises to the specified level (breakout trading). Simplified alternative to low-level OrderSend.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.buyStop(String symbol, double volume, double price, Double stopLoss, Double takeProfit)</code></li> <li> <p>Underlying methods:</p> </li> <li> <p><code>MT5Service.orderSend()</code> - low-level order placement</p> </li> <li><code>ensureSymbolSelected()</code> - auto symbol selection</li> <li><code>normalizeVolume()</code> - auto volume normalization</li> <li><code>normalizePrice()</code> - auto price normalization</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>price</code> <code>double</code> \u2705 Entry price (must be above current Ask) <code>stopLoss</code> <code>Double</code> \u2705 Stop Loss price (null or 0 = no SL) <code>takeProfit</code> <code>Double</code> \u2705 Take Profit price (null or 0 = no TP)"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Order placed as pending (not executed immediately) - Triggers when Ask price rises to specified price level - Converts to market position upon activation - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Buy when price breaks above specified level (breakout entry).</li> <li>Why you need it. Enter BUY position on upward momentum/breakout.</li> <li>Auto-handled. Symbol selection, volume/price normalization, error checking.</li> <li>SL/TP. Optional - pass null or 0 to skip.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place BUY order above current price (buy on breakout).</li> <li>Wait for price to rise before entering long position.</li> <li>Trade upward momentum and resistance breakouts.</li> <li>Enter BUY when price confirms bullish direction.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#1-simple-buy-stop-without-sltp","title":"1) Simple BUY STOP without SL/TP","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1; // 0.1 lot\ndouble currentAsk = sugar.getAsk(symbol);\ndouble entryPrice = currentAsk + 0.00050; // 50 points above Ask\n\n// Place BUY STOP order\nlong ticket = sugar.buyStop(symbol, volume, entryPrice, null, null);\n\nSystem.out.printf(\"BUY STOP order placed: #%d%n\", ticket);\nSystem.out.printf(\"Current Ask: %.5f%n\", currentAsk);\nSystem.out.printf(\"Entry price: %.5f (pending)%n\", entryPrice);\n\n// Output:\n// BUY STOP order placed: #123456789\n// Current Ask: 1.12340\n// Entry price: 1.12390 (pending)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#2-buy-stop-with-stop-loss-and-take-profit","title":"2) BUY STOP with Stop Loss and Take Profit","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\ndouble currentAsk = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Entry 100 points above current price (breakout level)\ndouble entryPrice = currentAsk + (100 * point);\n\n// SL 50 points below entry\ndouble stopLoss = entryPrice - (50 * point);\n\n// TP 150 points above entry\ndouble takeProfit = entryPrice + (150 * point);\n\nlong ticket = sugar.buyStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY STOP %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\nSystem.out.printf(\"  Current Ask: %.5f%n\", currentAsk);\nSystem.out.printf(\"  Entry: %.5f (+100p breakout)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (-50p from entry)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (+150p from entry)%n\", takeProfit);\n\n// Output:\n// BUY STOP GBPUSD: 0.50 lots\n//   Ticket: #987654321\n//   Current Ask: 1.26340\n//   Entry: 1.26440 (+100p breakout)\n//   SL: 1.26390 (-50p from entry)\n//   TP: 1.26590 (+150p from entry)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#3-buy-stop-at-resistance-breakout","title":"3) BUY STOP at resistance breakout","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble resistanceLevel = 1.12500; // Resistance to break\ndouble point = sugar.getPoint(symbol);\n\n// Place order slightly above resistance\ndouble entryPrice = resistanceLevel + (10 * point); // 10p buffer\ndouble stopLoss = resistanceLevel - (40 * point); // SL below resistance\ndouble takeProfit = entryPrice + (200 * point); // TP 200 points above\n\nlong ticket = sugar.buyStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY STOP on resistance breakout:%n\");\nSystem.out.printf(\"  Resistance: %.5f%n\", resistanceLevel);\nSystem.out.printf(\"  Entry: %.5f (10p above resistance)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (below resistance)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (200p above entry)%n\", takeProfit);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#4-buy-stop-with-error-handling","title":"4) BUY STOP with error handling","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\ndouble entryPrice = 149.500; // Desired breakout level\n\ntry {\n    long ticket = sugar.buyStop(symbol, volume, entryPrice, null, null);\n\n    System.out.printf(\"\u2705 BUY STOP order placed successfully%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Breakout level: %.3f%n\", entryPrice);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n\n    // Handle error (e.g., price too close to market, invalid price level)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#5-buy-stop-breakout-with-trailing-stop","title":"5) BUY STOP breakout with trailing stop","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble currentAsk = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Entry on breakout\ndouble breakoutLevel = 1.12500;\ndouble entryPrice = breakoutLevel + (5 * point); // Small buffer\n\n// Initial SL at recent swing low\ndouble stopLoss = 1.12450;\n\n// TP at next resistance\ndouble takeProfit = 1.12700;\n\nlong ticket = sugar.buyStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"BUY STOP breakout setup:%n\");\nSystem.out.printf(\"  Entry: %.5f (breakout confirmation)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (swing low protection)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (next resistance)%n\", takeProfit);\nSystem.out.printf(\"  Risk/Reward: 1:%.1f%n\",\n    (takeProfit - entryPrice) / (entryPrice - stopLoss));\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#6-multiple-buy-stop-orders-breakout-cascade","title":"6) Multiple BUY STOP orders (breakout cascade)","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble currentAsk = sugar.getAsk(symbol);\ndouble[] breakoutLevels = {2550.0, 2560.0, 2570.0};\n\nSystem.out.printf(\"Placing BUY STOP cascade:%n\");\n\nfor (int i = 0; i &lt; breakoutLevels.length; i++) {\n    double entryPrice = breakoutLevels[i];\n    double stopLoss = entryPrice - 30.0;\n    double takeProfit = entryPrice + 100.0;\n\n    long ticket = sugar.buyStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\n    System.out.printf(\"  Level %d: #%d at %.2f%n\", i + 1, ticket, entryPrice);\n}\n\n// Output:\n// Placing BUY STOP cascade:\n//   Level 1: #111 at 2550.00\n//   Level 2: #222 at 2560.00\n//   Level 3: #333 at 2570.00\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Price placement:</li> <li>Entry price must be above current Ask</li> <li>Order triggers when Ask rises to entry price</li> <li> <p>Invalid if entry price &lt;= current Ask</p> </li> <li> <p>Order activation:</p> </li> <li>Remains pending until price reaches entry level</li> <li>Converts to market position when triggered</li> <li> <p>Used for breakout and momentum trading</p> </li> <li> <p>Stop Loss placement:</p> </li> <li>Must be below entry price for BUY</li> <li>Often placed below resistance level or swing low</li> <li> <p>Typical: <code>SL = entry - (points * point)</code></p> </li> <li> <p>Take Profit placement:</p> </li> <li>Must be above entry price for BUY</li> <li>Often at next resistance or projection level</li> <li> <p>Typical: <code>TP = entry + (points * point)</code></p> </li> <li> <p>Auto-normalization:</p> </li> <li>Volume normalized to symbol's min/max/step</li> <li>Price normalized to symbol's digits</li> <li> <p>No manual normalization needed</p> </li> <li> <p>Auto symbol selection:</p> </li> <li>Method calls <code>ensureSymbolSelected()</code> internally</li> <li> <p>Symbol added to Market Watch if missing</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> if order fails</li> <li>Common errors: invalid price level, invalid stops</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0 for SL/TP:</p> </li> <li>Both <code>null</code> and <code>0</code> mean \"no SL/TP\"</li> <li>Internally converted to 0.0</li> </ul> <p>BUY STOP order structure: <pre><code>   \u2191\n   | TP: above entry (1.12590)\n   |\nEntry: (1.12390) - pending, waits for price to rise here\n   |\n   | SL: below entry (1.12340)\n   \u2193\nCurrent Ask: (1.12290)\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: No SL/TP\nsugar.buyStop(symbol, volume, price, null, null);\n\n// Pattern 2: Only SL\nsugar.buyStop(symbol, volume, price, stopLoss, null);\n\n// Pattern 3: Only TP\nsugar.buyStop(symbol, volume, price, null, takeProfit);\n\n// Pattern 4: Both SL and TP\nsugar.buyStop(symbol, volume, price, stopLoss, takeProfit);\n</code></pre></p> <p>BUY STOP vs BUY LIMIT:</p> Aspect BUY STOP BUY LIMIT Entry price Above current Ask Below current Ask Triggers when Price rises Price drops Use case Breakout trading Buy at discount Psychology Buy momentum up Buy at support Risk profile Higher entry price Lower entry price"},{"location":"MT5Sugar/3.%20Pending_orders/buyStop/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderSend</code> - underlying implementation</li> <li>Related: <code>buyMarket()</code> - immediate BUY execution</li> <li>Other pending: <code>buyLimit()</code>, <code>sellLimit()</code>, <code>sellStop()</code></li> <li>Points-based: <code>buyStopPoints()</code> - easier offset syntax</li> <li>Position management: <code>closePosition()</code></li> <li>Price helpers: <code>getAsk()</code>, <code>normalizePrice()</code></li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/","title":"\ud83d\udd34 Place SELL LIMIT Pending Order","text":"<p>Convenience method: places a SELL LIMIT pending order above current price. Executes when price rises to the specified level. Simplified alternative to low-level OrderSend.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.sellLimit(String symbol, double volume, double price, Double stopLoss, Double takeProfit)</code></li> <li> <p>Underlying methods:</p> </li> <li> <p><code>MT5Service.orderSend()</code> - low-level order placement</p> </li> <li><code>ensureSymbolSelected()</code> - auto symbol selection</li> <li><code>normalizeVolume()</code> - auto volume normalization</li> <li><code>normalizePrice()</code> - auto price normalization</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>price</code> <code>double</code> \u2705 Entry price (must be above current Bid) <code>stopLoss</code> <code>Double</code> \u2705 Stop Loss price (null or 0 = no SL) <code>takeProfit</code> <code>Double</code> \u2705 Take Profit price (null or 0 = no TP)"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Order placed as pending (not executed immediately) - Triggers when Bid price rises to specified price level - Converts to market position upon activation - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Sell when price rises to specified level (sell at higher price).</li> <li>Why you need it. Enter SELL position at better price (above current market).</li> <li>Auto-handled. Symbol selection, volume/price normalization, error checking.</li> <li>SL/TP. Optional - pass null or 0 to skip.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place SELL order above current price (sell at premium).</li> <li>Wait for price to rise before entering short position.</li> <li>Set entry price in advance (not immediate execution).</li> <li>Sell at resistance level or after rally.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#1-simple-sell-limit-without-sltp","title":"1) Simple SELL LIMIT without SL/TP","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1; // 0.1 lot\ndouble currentBid = sugar.getBid(symbol);\ndouble entryPrice = currentBid + 0.00050; // 50 points above Bid\n\n// Place SELL LIMIT order\nlong ticket = sugar.sellLimit(symbol, volume, entryPrice, null, null);\n\nSystem.out.printf(\"SELL LIMIT order placed: #%d%n\", ticket);\nSystem.out.printf(\"Current Bid: %.5f%n\", currentBid);\nSystem.out.printf(\"Entry price: %.5f (pending)%n\", entryPrice);\n\n// Output:\n// SELL LIMIT order placed: #123456789\n// Current Bid: 1.12340\n// Entry price: 1.12390 (pending)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#2-sell-limit-with-stop-loss-and-take-profit","title":"2) SELL LIMIT with Stop Loss and Take Profit","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\ndouble currentBid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Entry 100 points above current price\ndouble entryPrice = currentBid + (100 * point);\n\n// SL 50 points above entry\ndouble stopLoss = entryPrice + (50 * point);\n\n// TP 100 points below entry\ndouble takeProfit = entryPrice - (100 * point);\n\nlong ticket = sugar.sellLimit(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"SELL LIMIT %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\nSystem.out.printf(\"  Current Bid: %.5f%n\", currentBid);\nSystem.out.printf(\"  Entry: %.5f (+100p)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (+50p from entry)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (-100p from entry)%n\", takeProfit);\n\n// Output:\n// SELL LIMIT GBPUSD: 0.50 lots\n//   Ticket: #987654321\n//   Current Bid: 1.26340\n//   Entry: 1.26440 (+100p)\n//   SL: 1.26490 (+50p from entry)\n//   TP: 1.26340 (-100p from entry)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#3-sell-limit-at-resistance-level","title":"3) SELL LIMIT at resistance level","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble resistanceLevel = 1.12500; // Resistance level\ndouble point = sugar.getPoint(symbol);\n\n// Place order at resistance\ndouble entryPrice = resistanceLevel;\ndouble stopLoss = resistanceLevel + (50 * point); // SL above resistance\ndouble takeProfit = resistanceLevel - (150 * point); // TP 150 points below\n\nlong ticket = sugar.sellLimit(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"SELL LIMIT at resistance:%n\");\nSystem.out.printf(\"  Entry: %.5f (resistance level)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (50p above resistance)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (150p below entry)%n\", takeProfit);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#4-sell-limit-with-error-handling","title":"4) SELL LIMIT with error handling","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\ndouble entryPrice = 149.500; // Desired entry price\n\ntry {\n    long ticket = sugar.sellLimit(symbol, volume, entryPrice, null, null);\n\n    System.out.printf(\"\u2705 SELL LIMIT order placed successfully%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Entry price: %.3f%n\", entryPrice);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n\n    // Handle error (e.g., price too close to market, invalid price level)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#5-multiple-sell-limit-orders-grid-trading","title":"5) Multiple SELL LIMIT orders (grid trading)","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.01;\ndouble currentBid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\nint gridStep = 50; // 50 points between orders\nint gridLevels = 5;\n\nSystem.out.printf(\"Placing SELL LIMIT grid above %.5f:%n\", currentBid);\n\nfor (int i = 1; i &lt;= gridLevels; i++) {\n    double entryPrice = currentBid + (gridStep * i * point);\n    double stopLoss = entryPrice + (50 * point);\n    double takeProfit = entryPrice - (100 * point);\n\n    long ticket = sugar.sellLimit(symbol, volume, entryPrice, stopLoss, takeProfit);\n\n    System.out.printf(\"  Level %d: #%d at %.5f (%d points above)%n\",\n        i, ticket, entryPrice, gridStep * i);\n}\n\n// Output:\n// Placing SELL LIMIT grid above 1.12340:\n//   Level 1: #111 at 1.12390 (50 points above)\n//   Level 2: #222 at 1.12440 (100 points above)\n//   Level 3: #333 at 1.12490 (150 points above)\n//   Level 4: #444 at 1.12540 (200 points above)\n//   Level 5: #555 at 1.12590 (250 points above)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#6-sell-limit-with-price-validation","title":"6) SELL LIMIT with price validation","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble desiredEntry = 2600.00;\ndouble currentBid = sugar.getBid(symbol);\n\n// Validate that entry price is above current Bid\nif (desiredEntry &lt;= currentBid) {\n    System.err.printf(\"\u274c Invalid price: SELL LIMIT must be above Bid (%.2f)%n\", currentBid);\n} else {\n    double stopLoss = desiredEntry + 50.0;\n    double takeProfit = desiredEntry - 100.0;\n\n    long ticket = sugar.sellLimit(symbol, volume, desiredEntry, stopLoss, takeProfit);\n\n    System.out.printf(\"\u2705 SELL LIMIT placed:%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Entry: %.2f (%.2f above Bid)%n\", desiredEntry, desiredEntry - currentBid);\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Price placement:</li> <li>Entry price must be above current Bid</li> <li>Order triggers when Bid rises to entry price</li> <li> <p>Invalid if entry price &lt;= current Bid</p> </li> <li> <p>Order activation:</p> </li> <li>Remains pending until price reaches entry level</li> <li>Converts to market position when triggered</li> <li> <p>May not trigger if price doesn't reach level</p> </li> <li> <p>Stop Loss placement:</p> </li> <li>Must be above entry price for SELL</li> <li> <p>Typical: <code>SL = entry + (points * point)</code></p> </li> <li> <p>Take Profit placement:</p> </li> <li>Must be below entry price for SELL</li> <li> <p>Typical: <code>TP = entry - (points * point)</code></p> </li> <li> <p>Auto-normalization:</p> </li> <li>Volume normalized to symbol's min/max/step</li> <li>Price normalized to symbol's digits</li> <li> <p>No manual normalization needed</p> </li> <li> <p>Auto symbol selection:</p> </li> <li>Method calls <code>ensureSymbolSelected()</code> internally</li> <li> <p>Symbol added to Market Watch if missing</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> if order fails</li> <li>Common errors: invalid price level, invalid stops</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0 for SL/TP:</p> </li> <li>Both <code>null</code> and <code>0</code> mean \"no SL/TP\"</li> <li>Internally converted to 0.0</li> </ul> <p>SELL LIMIT order structure: <pre><code>Current Bid: (1.12340)\n   \u2191\n   | TP: below entry (1.12240)\n   |\nEntry: (1.12390) - pending, waits for price to rise here\n   |\n   | SL: above entry (1.12440)\n   \u2193\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: No SL/TP\nsugar.sellLimit(symbol, volume, price, null, null);\n\n// Pattern 2: Only SL\nsugar.sellLimit(symbol, volume, price, stopLoss, null);\n\n// Pattern 3: Only TP\nsugar.sellLimit(symbol, volume, price, null, takeProfit);\n\n// Pattern 4: Both SL and TP\nsugar.sellLimit(symbol, volume, price, stopLoss, takeProfit);\n</code></pre></p> <p>SELL LIMIT vs SELL STOP:</p> Aspect SELL LIMIT SELL STOP Entry price Above current Bid Below current Bid Triggers when Price rises Price drops Use case Sell at premium Breakout trading Psychology Sell at resistance Sell momentum down"},{"location":"MT5Sugar/3.%20Pending_orders/sellLimit/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderSend</code> - underlying implementation</li> <li>Related: <code>sellMarket()</code> - immediate SELL execution</li> <li>Other pending: <code>buyLimit()</code>, <code>buyStop()</code>, <code>sellStop()</code></li> <li>Points-based: <code>sellLimitPoints()</code> - easier offset syntax</li> <li>Position management: <code>closePosition()</code></li> <li>Price helpers: <code>getBid()</code>, <code>normalizePrice()</code></li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/","title":"\ud83d\udd34 Place SELL STOP Pending Order","text":"<p>Convenience method: places a SELL STOP pending order below current price. Executes when price drops to the specified level (breakdown trading). Simplified alternative to low-level OrderSend.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.sellStop(String symbol, double volume, double price, Double stopLoss, Double takeProfit)</code></li> <li> <p>Underlying methods:</p> </li> <li> <p><code>MT5Service.orderSend()</code> - low-level order placement</p> </li> <li><code>ensureSymbolSelected()</code> - auto symbol selection</li> <li><code>normalizeVolume()</code> - auto volume normalization</li> <li><code>normalizePrice()</code> - auto price normalization</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>price</code> <code>double</code> \u2705 Entry price (must be below current Bid) <code>stopLoss</code> <code>Double</code> \u2705 Stop Loss price (null or 0 = no SL) <code>takeProfit</code> <code>Double</code> \u2705 Take Profit price (null or 0 = no TP)"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Order placed as pending (not executed immediately) - Triggers when Bid price drops to specified price level - Converts to market position upon activation - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Sell when price breaks below specified level (breakdown entry).</li> <li>Why you need it. Enter SELL position on downward momentum/breakdown.</li> <li>Auto-handled. Symbol selection, volume/price normalization, error checking.</li> <li>SL/TP. Optional - pass null or 0 to skip.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place SELL order below current price (sell on breakdown).</li> <li>Wait for price to drop before entering short position.</li> <li>Trade downward momentum and support breakdowns.</li> <li>Enter SELL when price confirms bearish direction.</li> </ul>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#1-simple-sell-stop-without-sltp","title":"1) Simple SELL STOP without SL/TP","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1; // 0.1 lot\ndouble currentBid = sugar.getBid(symbol);\ndouble entryPrice = currentBid - 0.00050; // 50 points below Bid\n\n// Place SELL STOP order\nlong ticket = sugar.sellStop(symbol, volume, entryPrice, null, null);\n\nSystem.out.printf(\"SELL STOP order placed: #%d%n\", ticket);\nSystem.out.printf(\"Current Bid: %.5f%n\", currentBid);\nSystem.out.printf(\"Entry price: %.5f (pending)%n\", entryPrice);\n\n// Output:\n// SELL STOP order placed: #123456789\n// Current Bid: 1.12340\n// Entry price: 1.12290 (pending)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#2-sell-stop-with-stop-loss-and-take-profit","title":"2) SELL STOP with Stop Loss and Take Profit","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\ndouble currentBid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Entry 100 points below current price (breakdown level)\ndouble entryPrice = currentBid - (100 * point);\n\n// SL 50 points above entry\ndouble stopLoss = entryPrice + (50 * point);\n\n// TP 150 points below entry\ndouble takeProfit = entryPrice - (150 * point);\n\nlong ticket = sugar.sellStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"SELL STOP %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\nSystem.out.printf(\"  Current Bid: %.5f%n\", currentBid);\nSystem.out.printf(\"  Entry: %.5f (-100p breakdown)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (+50p from entry)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (-150p from entry)%n\", takeProfit);\n\n// Output:\n// SELL STOP GBPUSD: 0.50 lots\n//   Ticket: #987654321\n//   Current Bid: 1.26340\n//   Entry: 1.26240 (-100p breakdown)\n//   SL: 1.26290 (+50p from entry)\n//   TP: 1.26090 (-150p from entry)\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#3-sell-stop-at-support-breakdown","title":"3) SELL STOP at support breakdown","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble supportLevel = 1.12000; // Support to break\ndouble point = sugar.getPoint(symbol);\n\n// Place order slightly below support\ndouble entryPrice = supportLevel - (10 * point); // 10p buffer\ndouble stopLoss = supportLevel + (40 * point); // SL above support\ndouble takeProfit = entryPrice - (200 * point); // TP 200 points below\n\nlong ticket = sugar.sellStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"SELL STOP on support breakdown:%n\");\nSystem.out.printf(\"  Support: %.5f%n\", supportLevel);\nSystem.out.printf(\"  Entry: %.5f (10p below support)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (above support)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (200p below entry)%n\", takeProfit);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#4-sell-stop-with-error-handling","title":"4) SELL STOP with error handling","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\ndouble entryPrice = 148.000; // Desired breakdown level\n\ntry {\n    long ticket = sugar.sellStop(symbol, volume, entryPrice, null, null);\n\n    System.out.printf(\"\u2705 SELL STOP order placed successfully%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Breakdown level: %.3f%n\", entryPrice);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n\n    // Handle error (e.g., price too close to market, invalid price level)\n}\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#5-sell-stop-breakdown-with-tight-sl","title":"5) SELL STOP breakdown with tight SL","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\ndouble currentBid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// Entry on breakdown\ndouble breakdownLevel = 1.12000;\ndouble entryPrice = breakdownLevel - (5 * point); // Small buffer\n\n// Initial SL at recent swing high\ndouble stopLoss = 1.12050;\n\n// TP at next support\ndouble takeProfit = 1.11800;\n\nlong ticket = sugar.sellStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\nSystem.out.printf(\"SELL STOP breakdown setup:%n\");\nSystem.out.printf(\"  Entry: %.5f (breakdown confirmation)%n\", entryPrice);\nSystem.out.printf(\"  SL: %.5f (swing high protection)%n\", stopLoss);\nSystem.out.printf(\"  TP: %.5f (next support)%n\", takeProfit);\nSystem.out.printf(\"  Risk/Reward: 1:%.1f%n\",\n    (entryPrice - takeProfit) / (stopLoss - entryPrice));\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#6-multiple-sell-stop-orders-breakdown-cascade","title":"6) Multiple SELL STOP orders (breakdown cascade)","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble currentBid = sugar.getBid(symbol);\ndouble[] breakdownLevels = {2500.0, 2490.0, 2480.0};\n\nSystem.out.printf(\"Placing SELL STOP cascade:%n\");\n\nfor (int i = 0; i &lt; breakdownLevels.length; i++) {\n    double entryPrice = breakdownLevels[i];\n    double stopLoss = entryPrice + 30.0;\n    double takeProfit = entryPrice - 100.0;\n\n    long ticket = sugar.sellStop(symbol, volume, entryPrice, stopLoss, takeProfit);\n\n    System.out.printf(\"  Level %d: #%d at %.2f%n\", i + 1, ticket, entryPrice);\n}\n\n// Output:\n// Placing SELL STOP cascade:\n//   Level 1: #111 at 2500.00\n//   Level 2: #222 at 2490.00\n//   Level 3: #333 at 2480.00\n</code></pre>"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Price placement:</li> <li>Entry price must be below current Bid</li> <li>Order triggers when Bid drops to entry price</li> <li> <p>Invalid if entry price &gt;= current Bid</p> </li> <li> <p>Order activation:</p> </li> <li>Remains pending until price reaches entry level</li> <li>Converts to market position when triggered</li> <li> <p>Used for breakdown and momentum trading</p> </li> <li> <p>Stop Loss placement:</p> </li> <li>Must be above entry price for SELL</li> <li>Often placed above support level or swing high</li> <li> <p>Typical: <code>SL = entry + (points * point)</code></p> </li> <li> <p>Take Profit placement:</p> </li> <li>Must be below entry price for SELL</li> <li>Often at next support or projection level</li> <li> <p>Typical: <code>TP = entry - (points * point)</code></p> </li> <li> <p>Auto-normalization:</p> </li> <li>Volume normalized to symbol's min/max/step</li> <li>Price normalized to symbol's digits</li> <li> <p>No manual normalization needed</p> </li> <li> <p>Auto symbol selection:</p> </li> <li>Method calls <code>ensureSymbolSelected()</code> internally</li> <li> <p>Symbol added to Market Watch if missing</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> if order fails</li> <li>Common errors: invalid price level, invalid stops</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0 for SL/TP:</p> </li> <li>Both <code>null</code> and <code>0</code> mean \"no SL/TP\"</li> <li>Internally converted to 0.0</li> </ul> <p>SELL STOP order structure: <pre><code>Current Bid: (1.12390)\n   \u2191\n   | SL: above entry (1.12340)\n   |\nEntry: (1.12290) - pending, waits for price to drop here\n   |\n   | TP: below entry (1.12090)\n   \u2193\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: No SL/TP\nsugar.sellStop(symbol, volume, price, null, null);\n\n// Pattern 2: Only SL\nsugar.sellStop(symbol, volume, price, stopLoss, null);\n\n// Pattern 3: Only TP\nsugar.sellStop(symbol, volume, price, null, takeProfit);\n\n// Pattern 4: Both SL and TP\nsugar.sellStop(symbol, volume, price, stopLoss, takeProfit);\n</code></pre></p> <p>SELL STOP vs SELL LIMIT:</p> Aspect SELL STOP SELL LIMIT Entry price Below current Bid Above current Bid Triggers when Price drops Price rises Use case Breakdown trading Sell at premium Psychology Sell momentum down Sell at resistance Risk profile Lower entry price Higher entry price"},{"location":"MT5Sugar/3.%20Pending_orders/sellStop/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderSend</code> - underlying implementation</li> <li>Related: <code>sellMarket()</code> - immediate SELL execution</li> <li>Other pending: <code>buyLimit()</code>, <code>sellLimit()</code>, <code>buyStop()</code></li> <li>Points-based: <code>sellStopPoints()</code> - easier offset syntax</li> <li>Position management: <code>closePosition()</code></li> <li>Price helpers: <code>getBid()</code>, <code>normalizePrice()</code></li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/","title":"\ud83d\udfe2 Place BUY LIMIT using Points Offset","text":"<p>Convenience method: places a BUY LIMIT order using points offset from current Ask price. Automatically calculates entry price and SL/TP levels. Easier than manual price calculation.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.buyLimitPoints(String symbol, double volume, double pointsOffset, double stopLossPoints, double takeProfitPoints)</code></li> <li>Underlying methods:</li> <li><code>buyLimit()</code> - underlying pending order method</li> <li><code>MT5Service.symbolInfoTick()</code> - get current prices</li> <li><code>getPoint()</code> - get point size</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>pointsOffset</code> <code>double</code> \u2705 Points offset from Ask (negative = below price) <code>stopLossPoints</code> <code>double</code> \u2705 SL distance in points (0 = no SL) <code>takeProfitPoints</code> <code>double</code> \u2705 TP distance in points (0 = no TP)"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Automatically calculates entry price: <code>Ask + (pointsOffset * point)</code> - Automatically calculates SL: <code>entry - (stopLossPoints * point)</code> - Automatically calculates TP: <code>entry + (takeProfitPoints * point)</code> - Places BUY LIMIT order with calculated prices</p>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. BUY LIMIT with automatic price calculation from points.</li> <li>Why you need it. Simpler than manual price math - just specify points.</li> <li>Auto-handled. All price calculations, symbol selection, normalization.</li> <li>Use case. Quick entry orders without price calculator.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place BUY LIMIT without calculating exact prices.</li> <li>Use relative points instead of absolute prices.</li> <li>Simplify code - no manual <code>getAsk()</code> and <code>getPoint()</code> calls.</li> <li>Standardize risk in points across different symbols.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#1-simple-buy-limit-50-points-below","title":"1) Simple BUY LIMIT 50 points below","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\n\n// Buy 50 points below current Ask, SL=50p, TP=100p\nlong ticket = sugar.buyLimitPoints(symbol, volume, -50, 50, 100);\n\nSystem.out.printf(\"BUY LIMIT order placed: #%d%n\", ticket);\nSystem.out.printf(\"Entry: 50 points below Ask%n\");\nSystem.out.printf(\"SL: 50 points below entry%n\");\nSystem.out.printf(\"TP: 100 points above entry%n\");\n\n// Output:\n// BUY LIMIT order placed: #123456789\n// Entry: 50 points below Ask\n// SL: 50 points below entry\n// TP: 100 points above entry\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#2-buy-limit-with-riskreward-12","title":"2) BUY LIMIT with risk/reward 1:2","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\nint entryOffset = -100; // 100 points below Ask\nint slPoints = 50;      // 50 points SL\nint tpPoints = 100;     // 100 points TP (1:2 R/R)\n\nlong ticket = sugar.buyLimitPoints(symbol, volume, entryOffset, slPoints, tpPoints);\n\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble entry = ask + (entryOffset * point);\n\nSystem.out.printf(\"BUY LIMIT %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Current Ask: %.5f%n\", ask);\nSystem.out.printf(\"  Entry: %.5f (%d points below)%n\", entry, Math.abs(entryOffset));\nSystem.out.printf(\"  Risk/Reward: 1:%.1f%n\", (double) tpPoints / slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#3-multiple-buy-limit-grid-with-points","title":"3) Multiple BUY LIMIT grid with points","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.01;\nint slPoints = 50;\nint tpPoints = 150;\n\nSystem.out.printf(\"Placing BUY LIMIT grid:%n\");\n\n// Place orders at -50, -100, -150, -200, -250 points\nfor (int i = 1; i &lt;= 5; i++) {\n    int offset = -50 * i;\n    long ticket = sugar.buyLimitPoints(symbol, volume, offset, slPoints, tpPoints);\n\n    System.out.printf(\"  Level %d: #%d at %d points below Ask%n\", i, ticket, Math.abs(offset));\n}\n\n// Output:\n// Placing BUY LIMIT grid:\n//   Level 1: #111 at 50 points below Ask\n//   Level 2: #222 at 100 points below Ask\n//   Level 3: #333 at 150 points below Ask\n//   Level 4: #444 at 200 points below Ask\n//   Level 5: #555 at 250 points below Ask\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#4-buy-limit-without-sltp","title":"4) BUY LIMIT without SL/TP","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\nint entryOffset = -30; // 30 points below\n\n// No SL/TP (pass 0)\nlong ticket = sugar.buyLimitPoints(symbol, volume, entryOffset, 0, 0);\n\nSystem.out.printf(\"\u2705 BUY LIMIT placed: #%d%n\", ticket);\nSystem.out.printf(\"   Entry: %d points below Ask%n\", Math.abs(entryOffset));\nSystem.out.printf(\"   No SL/TP%n\");\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#5-buy-limit-with-error-handling","title":"5) BUY LIMIT with error handling","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\nint entryOffset = -100; // 100 points below\nint slPoints = 50;\nint tpPoints = 200;\n\ntry {\n    long ticket = sugar.buyLimitPoints(symbol, volume, entryOffset, slPoints, tpPoints);\n\n    double ask = sugar.getAsk(symbol);\n    double point = sugar.getPoint(symbol);\n    double entryPrice = ask + (entryOffset * point);\n\n    System.out.printf(\"\u2705 BUY LIMIT placed:%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   Entry: %.2f (%d points below Ask)%n\", entryPrice, Math.abs(entryOffset));\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Order failed: %s%n\", e.getError().getErrorMessage());\n}\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#6-standardized-risk-across-symbols","title":"6) Standardized risk across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\ndouble volume = 0.1;\nint entryOffset = -50;  // Same for all\nint slPoints = 30;      // Same risk\nint tpPoints = 90;      // Same reward\n\nfor (String symbol : symbols) {\n    long ticket = sugar.buyLimitPoints(symbol, volume, entryOffset, slPoints, tpPoints);\n\n    double ask = sugar.getAsk(symbol);\n    double point = sugar.getPoint(symbol);\n    int digits = sugar.getDigits(symbol);\n\n    System.out.printf(\"%s: #%d | Ask: %.*f | Entry: %d points below%n\",\n        symbol, ticket, digits, ask, Math.abs(entryOffset));\n}\n\n// Output:\n// EURUSD: #111 | Ask: 1.12340 | Entry: 50 points below\n// GBPUSD: #222 | Ask: 1.26450 | Entry: 50 points below\n// USDJPY: #333 | Ask: 149.123 | Entry: 50 points below\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Points offset:</li> <li>Negative offset = below current Ask (typical for BUY LIMIT)</li> <li>Positive offset would place order above Ask (unusual)</li> <li> <p>Entry price = <code>Ask + (pointsOffset * point)</code></p> </li> <li> <p>Stop Loss calculation:</p> </li> <li>SL distance is below entry for BUY</li> <li><code>SL = entry - (stopLossPoints * point)</code></li> <li> <p>Pass <code>0</code> for no stop loss</p> </li> <li> <p>Take Profit calculation:</p> </li> <li>TP distance is above entry for BUY</li> <li><code>TP = entry + (takeProfitPoints * point)</code></li> <li> <p>Pass <code>0</code> for no take profit</p> </li> <li> <p>Automatic price fetching:</p> </li> <li>Method fetches current Ask automatically</li> <li>No need to call <code>getAsk()</code> manually</li> <li> <p>Prices calculated at order placement time</p> </li> <li> <p>vs buyLimit():</p> </li> <li><code>buyLimit()</code> - requires absolute prices</li> <li><code>buyLimitPoints()</code> - requires only point offsets</li> <li> <p>This method is simpler for relative positioning</p> </li> <li> <p>Risk management:</p> </li> <li>Easy to standardize risk across symbols</li> <li>Same point values work for all symbols</li> <li>Point value varies by symbol (use calculateVolume for $ risk)</li> </ul> <p>Calculation flow: <pre><code>// What happens internally:\nAsk = 1.12340\npoint = 0.00001\npointsOffset = -50\n\nentry = Ask + (pointsOffset \u00d7 point)\n      = 1.12340 + (-50 \u00d7 0.00001)\n      = 1.12340 - 0.00050\n      = 1.12290\n\nSL = entry - (stopLossPoints \u00d7 point)\n   = 1.12290 - (50 \u00d7 0.00001)\n   = 1.12290 - 0.00050\n   = 1.12240\n\nTP = entry + (takeProfitPoints \u00d7 point)\n   = 1.12290 + (100 \u00d7 0.00001)\n   = 1.12290 + 0.00100\n   = 1.12390\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: Standard setup (entry, SL, TP)\nsugar.buyLimitPoints(symbol, volume, -50, 30, 90);\n\n// Pattern 2: No SL/TP\nsugar.buyLimitPoints(symbol, volume, -50, 0, 0);\n\n// Pattern 3: Only SL\nsugar.buyLimitPoints(symbol, volume, -50, 30, 0);\n\n// Pattern 4: Only TP\nsugar.buyLimitPoints(symbol, volume, -50, 0, 90);\n</code></pre></p>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyLimitPoints/#see-also","title":"See also","text":"<ul> <li>Absolute price version: <code>buyLimit()</code> - use exact prices</li> <li>Related points methods: <code>sellLimitPoints()</code>, <code>buyStopPoints()</code>, <code>sellStopPoints()</code></li> <li>Market order: <code>buyMarket()</code></li> <li>Price helpers: <code>getPoint()</code>, <code>getAsk()</code></li> <li>Risk management: <code>calculateVolume()</code></li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/","title":"\ud83d\udfe2 Place BUY STOP using Points Offset","text":"<p>Convenience method: places a BUY STOP order using points offset from current Ask price. Automatically calculates entry price and SL/TP levels for breakout trading. Easier than manual price calculation.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.buyStopPoints(String symbol, double volume, double pointsOffset, double stopLossPoints, double takeProfitPoints)</code></li> <li>Underlying methods:</li> <li><code>buyStop()</code> - underlying pending order method</li> <li><code>MT5Service.symbolInfoTick()</code> - get current prices</li> <li><code>getPoint()</code> - get point size</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>pointsOffset</code> <code>double</code> \u2705 Points offset from Ask (positive = above price) <code>stopLossPoints</code> <code>double</code> \u2705 SL distance in points (0 = no SL) <code>takeProfitPoints</code> <code>double</code> \u2705 TP distance in points (0 = no TP)"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Automatically calculates entry price: <code>Ask + (pointsOffset * point)</code> - Automatically calculates SL: <code>entry - (stopLossPoints * point)</code> - Automatically calculates TP: <code>entry + (takeProfitPoints * point)</code> - Places BUY STOP order with calculated prices</p>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. BUY STOP with automatic price calculation from points (breakout entry).</li> <li>Why you need it. Simpler breakout orders - just specify points above current price.</li> <li>Auto-handled. All price calculations, symbol selection, normalization.</li> <li>Use case. Resistance breakouts, momentum trading, upward breakouts.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place BUY STOP without calculating exact prices.</li> <li>Set breakout orders using point offsets.</li> <li>Simplify momentum trading setup.</li> <li>Standardize breakout distance across symbols.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#1-simple-buy-stop-50-points-above","title":"1) Simple BUY STOP 50 points above","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\n\n// Buy on breakout 50 points above Ask, SL=50p, TP=150p\nlong ticket = sugar.buyStopPoints(symbol, volume, 50, 50, 150);\n\nSystem.out.printf(\"BUY STOP order placed: #%d%n\", ticket);\nSystem.out.printf(\"Entry: 50 points above Ask (breakout)%n\");\nSystem.out.printf(\"SL: 50 points below entry%n\");\nSystem.out.printf(\"TP: 150 points above entry%n\");\n\n// Output:\n// BUY STOP order placed: #123456789\n// Entry: 50 points above Ask (breakout)\n// SL: 50 points below entry\n// TP: 150 points above entry\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#2-buy-stop-breakout-with-12-riskreward","title":"2) BUY STOP breakout with 1:2 risk/reward","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\nint breakoutOffset = 100; // 100 points above Ask\nint slPoints = 60;        // 60 points SL\nint tpPoints = 120;       // 120 points TP (1:2 R/R)\n\nlong ticket = sugar.buyStopPoints(symbol, volume, breakoutOffset, slPoints, tpPoints);\n\ndouble ask = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble entry = ask + (breakoutOffset * point);\n\nSystem.out.printf(\"BUY STOP breakout %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Current Ask: %.5f%n\", ask);\nSystem.out.printf(\"  Breakout entry: %.5f (%d points above)%n\", entry, breakoutOffset);\nSystem.out.printf(\"  Risk/Reward: 1:%.1f%n\", (double) tpPoints / slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#3-multiple-buy-stop-orders-breakout-cascade","title":"3) Multiple BUY STOP orders (breakout cascade)","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.01;\nint slPoints = 40;\nint tpPoints = 120;\n\nSystem.out.printf(\"Placing BUY STOP cascade:%n\");\n\n// Place orders at +50, +100, +150 points (different breakout levels)\nfor (int i = 1; i &lt;= 3; i++) {\n    int offset = 50 * i;\n    long ticket = sugar.buyStopPoints(symbol, volume, offset, slPoints, tpPoints);\n\n    System.out.printf(\"  Level %d: #%d at %d points above Ask%n\", i, ticket, offset);\n}\n\n// Output:\n// Placing BUY STOP cascade:\n//   Level 1: #111 at 50 points above Ask\n//   Level 2: #222 at 100 points above Ask\n//   Level 3: #333 at 150 points above Ask\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#4-buy-stop-without-sltp","title":"4) BUY STOP without SL/TP","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\nint breakoutOffset = 30; // 30 points above\n\n// No SL/TP (pass 0)\nlong ticket = sugar.buyStopPoints(symbol, volume, breakoutOffset, 0, 0);\n\nSystem.out.printf(\"\u2705 BUY STOP placed: #%d%n\", ticket);\nSystem.out.printf(\"   Breakout: %d points above Ask%n\", breakoutOffset);\nSystem.out.printf(\"   No SL/TP (manual management)%n\");\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#5-buy-stop-on-resistance-breakout","title":"5) BUY STOP on resistance breakout","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble ask = sugar.getAsk(symbol);\ndouble resistanceLevel = 2550.0;\ndouble point = sugar.getPoint(symbol);\n\n// Calculate offset to resistance + buffer\nint pointsToResistance = (int) ((resistanceLevel - ask) / point);\nint breakoutBuffer = 10; // 10 points above resistance\nint totalOffset = pointsToResistance + breakoutBuffer;\n\n// Place order with SL below resistance\nlong ticket = sugar.buyStopPoints(symbol, volume, totalOffset, 60, 200);\n\nSystem.out.printf(\"\u2705 BUY STOP on resistance breakout:%n\");\nSystem.out.printf(\"   Current Ask: %.2f%n\", ask);\nSystem.out.printf(\"   Resistance: %.2f%n\", resistanceLevel);\nSystem.out.printf(\"   Entry offset: %d points (resistance + %d buffer)%n\",\n    totalOffset, breakoutBuffer);\nSystem.out.printf(\"   Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#6-buy-stop-with-tight-sl-for-scalping","title":"6) BUY STOP with tight SL for scalping","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.2;\nint breakoutOffset = 20; // Small breakout\nint slPoints = 15;       // Tight SL\nint tpPoints = 30;       // Quick TP\n\nlong ticket = sugar.buyStopPoints(symbol, volume, breakoutOffset, slPoints, tpPoints);\n\nSystem.out.printf(\"Scalping BUY STOP:%n\");\nSystem.out.printf(\"  Entry: %d points above Ask%n\", breakoutOffset);\nSystem.out.printf(\"  SL: %d points (tight)%n\", slPoints);\nSystem.out.printf(\"  TP: %d points (quick)%n\", tpPoints);\nSystem.out.printf(\"  R/R: 1:%.1f%n\", (double) tpPoints / slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Points offset:</li> <li>Positive offset = above current Ask (typical for BUY STOP)</li> <li>Negative offset would place order below Ask (invalid for BUY STOP)</li> <li> <p>Entry price = <code>Ask + (pointsOffset * point)</code></p> </li> <li> <p>Stop Loss calculation:</p> </li> <li>SL distance is below entry for BUY</li> <li><code>SL = entry - (stopLossPoints * point)</code></li> <li>Often placed below resistance level</li> <li> <p>Pass <code>0</code> for no stop loss</p> </li> <li> <p>Take Profit calculation:</p> </li> <li>TP distance is above entry for BUY</li> <li><code>TP = entry + (takeProfitPoints * point)</code></li> <li> <p>Pass <code>0</code> for no take profit</p> </li> <li> <p>Breakout trading:</p> </li> <li>Used for upward momentum and resistance breakouts</li> <li>Entry confirms bullish direction</li> <li> <p>Typically with tight SL below resistance</p> </li> <li> <p>Automatic price fetching:</p> </li> <li>Method fetches current Ask automatically</li> <li>No need to call <code>getAsk()</code> manually</li> <li> <p>Prices calculated at order placement time</p> </li> <li> <p>vs buyStop():</p> </li> <li><code>buyStop()</code> - requires absolute prices</li> <li><code>buyStopPoints()</code> - requires only point offsets</li> <li>This method is simpler for breakout setups</li> </ul> <p>Calculation flow: <pre><code>// What happens internally:\nAsk = 1.12340\npoint = 0.00001\npointsOffset = 50 (breakout level)\n\nentry = Ask + (pointsOffset \u00d7 point)\n      = 1.12340 + (50 \u00d7 0.00001)\n      = 1.12340 + 0.00050\n      = 1.12390 (breakout entry)\n\nSL = entry - (stopLossPoints \u00d7 point)\n   = 1.12390 - (40 \u00d7 0.00001)\n   = 1.12390 - 0.00040\n   = 1.12350 (below resistance)\n\nTP = entry + (takeProfitPoints \u00d7 point)\n   = 1.12390 + (120 \u00d7 0.00001)\n   = 1.12390 + 0.00120\n   = 1.12510 (profit target)\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: Breakout with SL/TP\nsugar.buyStopPoints(symbol, volume, 50, 40, 120);\n\n// Pattern 2: Breakout without SL/TP\nsugar.buyStopPoints(symbol, volume, 50, 0, 0);\n\n// Pattern 3: Tight scalping\nsugar.buyStopPoints(symbol, volume, 20, 15, 30);\n\n// Pattern 4: Wide swing trading\nsugar.buyStopPoints(symbol, volume, 100, 80, 200);\n</code></pre></p> <p>BUY STOP vs BUY LIMIT:</p> Aspect BUY STOP BUY LIMIT Offset direction Positive (above) Negative (below) Use case Breakout trading Buy at discount Entry timing Price rises Price drops Psychology Buy momentum Buy dips"},{"location":"MT5Sugar/4.%20Pending_orders_points/buyStopPoints/#see-also","title":"See also","text":"<ul> <li>Absolute price version: <code>buyStop()</code> - use exact prices</li> <li>Related points methods: <code>buyLimitPoints()</code>, <code>sellLimitPoints()</code>, <code>sellStopPoints()</code></li> <li>Market order: <code>buyMarket()</code></li> <li>Price helpers: <code>getPoint()</code>, <code>getAsk()</code></li> <li>Risk management: <code>calculateVolume()</code></li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/","title":"\ud83d\udd34 Place SELL LIMIT using Points Offset","text":"<p>Convenience method: places a SELL LIMIT order using points offset from current Bid price. Automatically calculates entry price and SL/TP levels. Easier than manual price calculation.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.sellLimitPoints(String symbol, double volume, double pointsOffset, double stopLossPoints, double takeProfitPoints)</code></li> <li>Underlying methods:</li> <li><code>sellLimit()</code> - underlying pending order method</li> <li><code>MT5Service.symbolInfoTick()</code> - get current prices</li> <li><code>getPoint()</code> - get point size</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>pointsOffset</code> <code>double</code> \u2705 Points offset from Bid (positive = above price) <code>stopLossPoints</code> <code>double</code> \u2705 SL distance in points (0 = no SL) <code>takeProfitPoints</code> <code>double</code> \u2705 TP distance in points (0 = no TP)"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Automatically calculates entry price: <code>Bid + (pointsOffset * point)</code> - Automatically calculates SL: <code>entry + (stopLossPoints * point)</code> - Automatically calculates TP: <code>entry - (takeProfitPoints * point)</code> - Places SELL LIMIT order with calculated prices</p>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. SELL LIMIT with automatic price calculation from points.</li> <li>Why you need it. Simpler than manual price math - just specify points.</li> <li>Auto-handled. All price calculations, symbol selection, normalization.</li> <li>Use case. Quick entry orders without price calculator.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place SELL LIMIT without calculating exact prices.</li> <li>Use relative points instead of absolute prices.</li> <li>Simplify code - no manual <code>getBid()</code> and <code>getPoint()</code> calls.</li> <li>Standardize risk in points across different symbols.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#1-simple-sell-limit-50-points-above","title":"1) Simple SELL LIMIT 50 points above","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\n\n// Sell 50 points above current Bid, SL=50p, TP=100p\nlong ticket = sugar.sellLimitPoints(symbol, volume, 50, 50, 100);\n\nSystem.out.printf(\"SELL LIMIT order placed: #%d%n\", ticket);\nSystem.out.printf(\"Entry: 50 points above Bid%n\");\nSystem.out.printf(\"SL: 50 points above entry%n\");\nSystem.out.printf(\"TP: 100 points below entry%n\");\n\n// Output:\n// SELL LIMIT order placed: #123456789\n// Entry: 50 points above Bid\n// SL: 50 points above entry\n// TP: 100 points below entry\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#2-sell-limit-with-riskreward-13","title":"2) SELL LIMIT with risk/reward 1:3","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\nint entryOffset = 100; // 100 points above Bid\nint slPoints = 50;     // 50 points SL\nint tpPoints = 150;    // 150 points TP (1:3 R/R)\n\nlong ticket = sugar.sellLimitPoints(symbol, volume, entryOffset, slPoints, tpPoints);\n\ndouble bid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble entry = bid + (entryOffset * point);\n\nSystem.out.printf(\"SELL LIMIT %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Current Bid: %.5f%n\", bid);\nSystem.out.printf(\"  Entry: %.5f (%d points above)%n\", entry, entryOffset);\nSystem.out.printf(\"  Risk/Reward: 1:%.1f%n\", (double) tpPoints / slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#3-multiple-sell-limit-grid-with-points","title":"3) Multiple SELL LIMIT grid with points","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.01;\nint slPoints = 50;\nint tpPoints = 150;\n\nSystem.out.printf(\"Placing SELL LIMIT grid:%n\");\n\n// Place orders at +50, +100, +150, +200, +250 points\nfor (int i = 1; i &lt;= 5; i++) {\n    int offset = 50 * i;\n    long ticket = sugar.sellLimitPoints(symbol, volume, offset, slPoints, tpPoints);\n\n    System.out.printf(\"  Level %d: #%d at %d points above Bid%n\", i, ticket, offset);\n}\n\n// Output:\n// Placing SELL LIMIT grid:\n//   Level 1: #111 at 50 points above Bid\n//   Level 2: #222 at 100 points above Bid\n//   Level 3: #333 at 150 points above Bid\n//   Level 4: #444 at 200 points above Bid\n//   Level 5: #555 at 250 points above Bid\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#4-sell-limit-without-sltp","title":"4) SELL LIMIT without SL/TP","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\nint entryOffset = 30; // 30 points above\n\n// No SL/TP (pass 0)\nlong ticket = sugar.sellLimitPoints(symbol, volume, entryOffset, 0, 0);\n\nSystem.out.printf(\"\u2705 SELL LIMIT placed: #%d%n\", ticket);\nSystem.out.printf(\"   Entry: %d points above Bid%n\", entryOffset);\nSystem.out.printf(\"   No SL/TP%n\");\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#5-sell-limit-at-resistance-with-points","title":"5) SELL LIMIT at resistance with points","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble bid = sugar.getBid(symbol);\ndouble resistanceLevel = 2550.0;\ndouble point = sugar.getPoint(symbol);\n\n// Calculate offset to resistance\nint pointsToResistance = (int) ((resistanceLevel - bid) / point);\n\n// Place order at resistance\nlong ticket = sugar.sellLimitPoints(symbol, volume, pointsToResistance, 50, 200);\n\nSystem.out.printf(\"\u2705 SELL LIMIT at resistance:%n\");\nSystem.out.printf(\"   Current Bid: %.2f%n\", bid);\nSystem.out.printf(\"   Resistance: %.2f%n\", resistanceLevel);\nSystem.out.printf(\"   Offset: %d points%n\", pointsToResistance);\nSystem.out.printf(\"   Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#6-standardized-risk-across-symbols","title":"6) Standardized risk across symbols","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\ndouble volume = 0.1;\nint entryOffset = 50;   // Same for all\nint slPoints = 30;      // Same risk\nint tpPoints = 90;      // Same reward\n\nfor (String symbol : symbols) {\n    long ticket = sugar.sellLimitPoints(symbol, volume, entryOffset, slPoints, tpPoints);\n\n    double bid = sugar.getBid(symbol);\n    int digits = sugar.getDigits(symbol);\n\n    System.out.printf(\"%s: #%d | Bid: %.*f | Entry: %d points above%n\",\n        symbol, ticket, digits, bid, entryOffset);\n}\n\n// Output:\n// EURUSD: #111 | Bid: 1.12340 | Entry: 50 points above\n// GBPUSD: #222 | Bid: 1.26450 | Entry: 50 points above\n// USDJPY: #333 | Bid: 149.123 | Entry: 50 points above\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Points offset:</li> <li>Positive offset = above current Bid (typical for SELL LIMIT)</li> <li>Negative offset would place order below Bid (unusual)</li> <li> <p>Entry price = <code>Bid + (pointsOffset * point)</code></p> </li> <li> <p>Stop Loss calculation:</p> </li> <li>SL distance is above entry for SELL</li> <li><code>SL = entry + (stopLossPoints * point)</code></li> <li> <p>Pass <code>0</code> for no stop loss</p> </li> <li> <p>Take Profit calculation:</p> </li> <li>TP distance is below entry for SELL</li> <li><code>TP = entry - (takeProfitPoints * point)</code></li> <li> <p>Pass <code>0</code> for no take profit</p> </li> <li> <p>Automatic price fetching:</p> </li> <li>Method fetches current Bid automatically</li> <li>No need to call <code>getBid()</code> manually</li> <li> <p>Prices calculated at order placement time</p> </li> <li> <p>vs sellLimit():</p> </li> <li><code>sellLimit()</code> - requires absolute prices</li> <li><code>sellLimitPoints()</code> - requires only point offsets</li> <li> <p>This method is simpler for relative positioning</p> </li> <li> <p>Risk management:</p> </li> <li>Easy to standardize risk across symbols</li> <li>Same point values work for all symbols</li> <li>Point value varies by symbol (use calculateVolume for $ risk)</li> </ul> <p>Calculation flow: <pre><code>// What happens internally:\nBid = 1.12340\npoint = 0.00001\npointsOffset = 50\n\nentry = Bid + (pointsOffset \u00d7 point)\n      = 1.12340 + (50 \u00d7 0.00001)\n      = 1.12340 + 0.00050\n      = 1.12390\n\nSL = entry + (stopLossPoints \u00d7 point)\n   = 1.12390 + (50 \u00d7 0.00001)\n   = 1.12390 + 0.00050\n   = 1.12440\n\nTP = entry - (takeProfitPoints \u00d7 point)\n   = 1.12390 - (100 \u00d7 0.00001)\n   = 1.12390 - 0.00100\n   = 1.12290\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: Standard setup (entry, SL, TP)\nsugar.sellLimitPoints(symbol, volume, 50, 30, 90);\n\n// Pattern 2: No SL/TP\nsugar.sellLimitPoints(symbol, volume, 50, 0, 0);\n\n// Pattern 3: Only SL\nsugar.sellLimitPoints(symbol, volume, 50, 30, 0);\n\n// Pattern 4: Only TP\nsugar.sellLimitPoints(symbol, volume, 50, 0, 90);\n</code></pre></p>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellLimitPoints/#see-also","title":"See also","text":"<ul> <li>Absolute price version: <code>sellLimit()</code> - use exact prices</li> <li>Related points methods: <code>buyLimitPoints()</code>, <code>buyStopPoints()</code>, <code>sellStopPoints()</code></li> <li>Market order: <code>sellMarket()</code></li> <li>Price helpers: <code>getPoint()</code>, <code>getBid()</code></li> <li>Risk management: <code>calculateVolume()</code></li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/","title":"\ud83d\udd34 Place SELL STOP using Points Offset","text":"<p>Convenience method: places a SELL STOP order using points offset from current Bid price. Automatically calculates entry price and SL/TP levels for breakdown trading. Easier than manual price calculation.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.sellStopPoints(String symbol, double volume, double pointsOffset, double stopLossPoints, double takeProfitPoints)</code></li> <li>Underlying methods:</li> <li><code>sellStop()</code> - underlying pending order method</li> <li><code>MT5Service.symbolInfoTick()</code> - get current prices</li> <li><code>getPoint()</code> - get point size</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>volume</code> <code>double</code> \u2705 Volume in lots (e.g., 0.1) <code>pointsOffset</code> <code>double</code> \u2705 Points offset from Bid (negative = below price) <code>stopLossPoints</code> <code>double</code> \u2705 SL distance in points (0 = no SL) <code>takeProfitPoints</code> <code>double</code> \u2705 TP distance in points (0 = no TP)"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number (pending order ticket)</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails (contains error code and description)</p> <p>Execution: - Automatically calculates entry price: <code>Bid + (pointsOffset * point)</code> - Automatically calculates SL: <code>entry + (stopLossPoints * point)</code> - Automatically calculates TP: <code>entry - (takeProfitPoints * point)</code> - Places SELL STOP order with calculated prices</p>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. SELL STOP with automatic price calculation from points (breakdown entry).</li> <li>Why you need it. Simpler breakdown orders - just specify points below current price.</li> <li>Auto-handled. All price calculations, symbol selection, normalization.</li> <li>Use case. Support breakdowns, momentum trading, downward breakouts.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Place SELL STOP without calculating exact prices.</li> <li>Set breakdown orders using point offsets.</li> <li>Simplify momentum trading setup.</li> <li>Standardize breakdown distance across symbols.</li> </ul>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#1-simple-sell-stop-50-points-below","title":"1) Simple SELL STOP 50 points below","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.1;\n\n// Sell on breakdown 50 points below Bid, SL=50p, TP=150p\nlong ticket = sugar.sellStopPoints(symbol, volume, -50, 50, 150);\n\nSystem.out.printf(\"SELL STOP order placed: #%d%n\", ticket);\nSystem.out.printf(\"Entry: 50 points below Bid (breakdown)%n\");\nSystem.out.printf(\"SL: 50 points above entry%n\");\nSystem.out.printf(\"TP: 150 points below entry%n\");\n\n// Output:\n// SELL STOP order placed: #123456789\n// Entry: 50 points below Bid (breakdown)\n// SL: 50 points above entry\n// TP: 150 points below entry\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#2-sell-stop-breakdown-with-12-riskreward","title":"2) SELL STOP breakdown with 1:2 risk/reward","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble volume = 0.5;\nint breakdownOffset = -100; // 100 points below Bid\nint slPoints = 60;          // 60 points SL\nint tpPoints = 120;         // 120 points TP (1:2 R/R)\n\nlong ticket = sugar.sellStopPoints(symbol, volume, breakdownOffset, slPoints, tpPoints);\n\ndouble bid = sugar.getBid(symbol);\ndouble point = sugar.getPoint(symbol);\ndouble entry = bid + (breakdownOffset * point);\n\nSystem.out.printf(\"SELL STOP breakdown %s: %.2f lots%n\", symbol, volume);\nSystem.out.printf(\"  Current Bid: %.5f%n\", bid);\nSystem.out.printf(\"  Breakdown entry: %.5f (%d points below)%n\", entry, Math.abs(breakdownOffset));\nSystem.out.printf(\"  Risk/Reward: 1:%.1f%n\", (double) tpPoints / slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#3-multiple-sell-stop-orders-breakdown-cascade","title":"3) Multiple SELL STOP orders (breakdown cascade)","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.01;\nint slPoints = 40;\nint tpPoints = 120;\n\nSystem.out.printf(\"Placing SELL STOP cascade:%n\");\n\n// Place orders at -50, -100, -150 points (different breakdown levels)\nfor (int i = 1; i &lt;= 3; i++) {\n    int offset = -50 * i;\n    long ticket = sugar.sellStopPoints(symbol, volume, offset, slPoints, tpPoints);\n\n    System.out.printf(\"  Level %d: #%d at %d points below Bid%n\", i, ticket, Math.abs(offset));\n}\n\n// Output:\n// Placing SELL STOP cascade:\n//   Level 1: #111 at 50 points below Bid\n//   Level 2: #222 at 100 points below Bid\n//   Level 3: #333 at 150 points below Bid\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#4-sell-stop-without-sltp","title":"4) SELL STOP without SL/TP","text":"<pre><code>String symbol = \"USDJPY\";\ndouble volume = 0.1;\nint breakdownOffset = -30; // 30 points below\n\n// No SL/TP (pass 0)\nlong ticket = sugar.sellStopPoints(symbol, volume, breakdownOffset, 0, 0);\n\nSystem.out.printf(\"\u2705 SELL STOP placed: #%d%n\", ticket);\nSystem.out.printf(\"   Breakdown: %d points below Bid%n\", Math.abs(breakdownOffset));\nSystem.out.printf(\"   No SL/TP (manual management)%n\");\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#5-sell-stop-on-support-breakdown","title":"5) SELL STOP on support breakdown","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble volume = 0.01;\ndouble bid = sugar.getBid(symbol);\ndouble supportLevel = 2500.0;\ndouble point = sugar.getPoint(symbol);\n\n// Calculate offset to support - buffer\nint pointsToSupport = (int) ((supportLevel - bid) / point);\nint breakdownBuffer = -10; // 10 points below support\nint totalOffset = pointsToSupport + breakdownBuffer;\n\n// Place order with SL above support\nlong ticket = sugar.sellStopPoints(symbol, volume, totalOffset, 60, 200);\n\nSystem.out.printf(\"\u2705 SELL STOP on support breakdown:%n\");\nSystem.out.printf(\"   Current Bid: %.2f%n\", bid);\nSystem.out.printf(\"   Support: %.2f%n\", supportLevel);\nSystem.out.printf(\"   Entry offset: %d points (support - %d buffer)%n\",\n    totalOffset, Math.abs(breakdownBuffer));\nSystem.out.printf(\"   Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#6-sell-stop-with-tight-sl-for-scalping","title":"6) SELL STOP with tight SL for scalping","text":"<pre><code>String symbol = \"EURUSD\";\ndouble volume = 0.2;\nint breakdownOffset = -20; // Small breakdown\nint slPoints = 15;         // Tight SL\nint tpPoints = 30;         // Quick TP\n\nlong ticket = sugar.sellStopPoints(symbol, volume, breakdownOffset, slPoints, tpPoints);\n\nSystem.out.printf(\"Scalping SELL STOP:%n\");\nSystem.out.printf(\"  Entry: %d points below Bid%n\", Math.abs(breakdownOffset));\nSystem.out.printf(\"  SL: %d points (tight)%n\", slPoints);\nSystem.out.printf(\"  TP: %d points (quick)%n\", tpPoints);\nSystem.out.printf(\"  R/R: 1:%.1f%n\", (double) tpPoints / slPoints);\nSystem.out.printf(\"  Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Points offset:</li> <li>Negative offset = below current Bid (typical for SELL STOP)</li> <li>Positive offset would place order above Bid (invalid for SELL STOP)</li> <li> <p>Entry price = <code>Bid + (pointsOffset * point)</code></p> </li> <li> <p>Stop Loss calculation:</p> </li> <li>SL distance is above entry for SELL</li> <li><code>SL = entry + (stopLossPoints * point)</code></li> <li>Often placed above support level</li> <li> <p>Pass <code>0</code> for no stop loss</p> </li> <li> <p>Take Profit calculation:</p> </li> <li>TP distance is below entry for SELL</li> <li><code>TP = entry - (takeProfitPoints * point)</code></li> <li> <p>Pass <code>0</code> for no take profit</p> </li> <li> <p>Breakdown trading:</p> </li> <li>Used for downward momentum and support breakdowns</li> <li>Entry confirms bearish direction</li> <li> <p>Typically with tight SL above support</p> </li> <li> <p>Automatic price fetching:</p> </li> <li>Method fetches current Bid automatically</li> <li>No need to call <code>getBid()</code> manually</li> <li> <p>Prices calculated at order placement time</p> </li> <li> <p>vs sellStop():</p> </li> <li><code>sellStop()</code> - requires absolute prices</li> <li><code>sellStopPoints()</code> - requires only point offsets</li> <li>This method is simpler for breakdown setups</li> </ul> <p>Calculation flow: <pre><code>// What happens internally:\nBid = 1.12340\npoint = 0.00001\npointsOffset = -50 (breakdown level)\n\nentry = Bid + (pointsOffset \u00d7 point)\n      = 1.12340 + (-50 \u00d7 0.00001)\n      = 1.12340 - 0.00050\n      = 1.12290 (breakdown entry)\n\nSL = entry + (stopLossPoints \u00d7 point)\n   = 1.12290 + (40 \u00d7 0.00001)\n   = 1.12290 + 0.00040\n   = 1.12330 (above support)\n\nTP = entry - (takeProfitPoints \u00d7 point)\n   = 1.12290 - (120 \u00d7 0.00001)\n   = 1.12290 - 0.00120\n   = 1.12170 (profit target)\n</code></pre></p> <p>Common patterns: <pre><code>// Pattern 1: Breakdown with SL/TP\nsugar.sellStopPoints(symbol, volume, -50, 40, 120);\n\n// Pattern 2: Breakdown without SL/TP\nsugar.sellStopPoints(symbol, volume, -50, 0, 0);\n\n// Pattern 3: Tight scalping\nsugar.sellStopPoints(symbol, volume, -20, 15, 30);\n\n// Pattern 4: Wide swing trading\nsugar.sellStopPoints(symbol, volume, -100, 80, 200);\n</code></pre></p> <p>SELL STOP vs SELL LIMIT:</p> Aspect SELL STOP SELL LIMIT Offset direction Negative (below) Positive (above) Use case Breakdown trading Sell at premium Entry timing Price drops Price rises Psychology Sell momentum Sell rallies"},{"location":"MT5Sugar/4.%20Pending_orders_points/sellStopPoints/#see-also","title":"See also","text":"<ul> <li>Absolute price version: <code>sellStop()</code> - use exact prices</li> <li>Related points methods: <code>buyLimitPoints()</code>, <code>sellLimitPoints()</code>, <code>buyStopPoints()</code></li> <li>Market order: <code>sellMarket()</code></li> <li>Price helpers: <code>getPoint()</code>, <code>getBid()</code></li> <li>Risk management: <code>calculateVolume()</code></li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/","title":"\u274c Close All Positions","text":"<p>Convenience method: closes all open positions for specified symbol and/or direction. Batch operation for mass position closing.</p> <p>API Information:</p> <ul> <li>Sugar method (all positions): <code>MT5Sugar.closeAll(String symbol)</code></li> <li>Sugar method (by direction): <code>MT5Sugar.closeAll(String symbol, Boolean isBuy)</code></li> <li>Underlying methods:</li> <li><code>openedOrders()</code> - get all positions</li> <li><code>closePosition()</code> - close each position</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u26aa Symbol name (null = all symbols) <code>isBuy</code> <code>Boolean</code> \u26aa true=BUY only, false=SELL only, null=all"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of positions successfully closed</p> <p>Throws: <code>ApiExceptionMT5</code> if operation fails</p> <p>Execution: - Iterates through all open positions - Filters by symbol and/or direction - Closes matching positions individually - Continues even if some closes fail</p>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Close multiple positions at once with filters.</li> <li>Why you need it. Emergency exit, end-of-day cleanup, symbol-specific exit.</li> <li>Filters. By symbol, by direction (BUY/SELL), or both.</li> <li>Returns. Count of successfully closed positions.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Close all positions for specific symbol.</li> <li>Close all BUY or all SELL positions.</li> <li>Emergency exit (close everything).</li> <li>End-of-trading-day cleanup.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Position_management/closeAll/#1-close-all-positions-for-symbol","title":"1) Close all positions for symbol","text":"<pre><code>String symbol = \"EURUSD\";\n\nint closed = sugar.closeAll(symbol);\n\nSystem.out.printf(\"\u2705 Closed %d positions for %s%n\", closed, symbol);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#2-close-all-positions-all-symbols","title":"2) Close all positions (all symbols)","text":"<pre><code>int closed = sugar.closeAll(null);\n\nSystem.out.printf(\"\u2705 Emergency exit: closed %d positions%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#3-close-all-buy-positions-for-symbol","title":"3) Close all BUY positions for symbol","text":"<pre><code>String symbol = \"GBPUSD\";\n\nint closed = sugar.closeAll(symbol, true); // true = BUY only\n\nSystem.out.printf(\"\u2705 Closed %d BUY positions for %s%n\", closed, symbol);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#4-close-all-sell-positions-for-symbol","title":"4) Close all SELL positions for symbol","text":"<pre><code>String symbol = \"USDJPY\";\n\nint closed = sugar.closeAll(symbol, false); // false = SELL only\n\nSystem.out.printf(\"\u2705 Closed %d SELL positions for %s%n\", closed, symbol);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#5-close-all-buy-positions-all-symbols","title":"5) Close all BUY positions (all symbols)","text":"<pre><code>int closed = sugar.closeAll(null, true);\n\nSystem.out.printf(\"\u2705 Closed %d BUY positions across all symbols%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#6-close-all-sell-positions-all-symbols","title":"6) Close all SELL positions (all symbols)","text":"<pre><code>int closed = sugar.closeAll(null, false);\n\nSystem.out.printf(\"\u2705 Closed %d SELL positions across all symbols%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#7-end-of-day-cleanup-with-reporting","title":"7) End-of-day cleanup with reporting","text":"<pre><code>System.out.println(\"\ud83d\udcca End-of-day cleanup:\");\n\n// Close all positions per symbol\nString[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\nint totalClosed = 0;\n\nfor (String symbol : symbols) {\n    int closed = sugar.closeAll(symbol);\n    if (closed &gt; 0) {\n        System.out.printf(\"  %s: %d positions closed%n\", symbol, closed);\n        totalClosed += closed;\n    }\n}\n\nSystem.out.printf(\"\u2705 Total: %d positions closed%n\", totalClosed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#8-conditional-close-based-on-market-conditions","title":"8) Conditional close based on market conditions","text":"<pre><code>String symbol = \"XAUUSD\";\ndouble currentPrice = sugar.getBid(symbol);\ndouble closeThreshold = 2500.0;\n\nif (currentPrice &lt; closeThreshold) {\n    System.out.printf(\"\u26a0\ufe0f Price below threshold (%.2f &lt; %.2f)%n\", currentPrice, closeThreshold);\n\n    int closed = sugar.closeAll(symbol);\n\n    System.out.printf(\"\u2705 Emergency exit: %d positions closed%n\", closed);\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Symbol parameter:</li> <li>Specific symbol (e.g., \"EURUSD\") = close only that symbol</li> <li> <p><code>null</code> = close all symbols</p> </li> <li> <p>Direction parameter:</p> </li> <li><code>true</code> = close only BUY positions</li> <li><code>false</code> = close only SELL positions</li> <li> <p><code>null</code> = close all directions</p> </li> <li> <p>Error handling:</p> </li> <li>Continues closing even if some positions fail</li> <li>Failed closes are logged to System.err</li> <li> <p>Returns count of SUCCESSFUL closes only</p> </li> <li> <p>Return value:</p> </li> <li>Returns number of positions successfully closed</li> <li><code>0</code> = no positions matched filters</li> <li> <p>Check return value to verify action</p> </li> <li> <p>Execution order:</p> </li> <li>Positions closed in order by open time (ascending)</li> <li>Oldest positions closed first</li> <li>No rollback if partial failure</li> </ul> <p>Common patterns: <pre><code>// Pattern 1: Close all for symbol\nsugar.closeAll(\"EURUSD\");\n\n// Pattern 2: Close all (emergency)\nsugar.closeAll(null);\n\n// Pattern 3: Close all BUY for symbol\nsugar.closeAll(\"GBPUSD\", true);\n\n// Pattern 4: Close all SELL for symbol\nsugar.closeAll(\"USDJPY\", false);\n\n// Pattern 5: Close all BUY (all symbols)\nsugar.closeAll(null, true);\n\n// Pattern 6: Close all SELL (all symbols)\nsugar.closeAll(null, false);\n</code></pre></p> <p>Filter combinations: <pre><code>// Symbol + Direction filters:\ncloseAll(\"EURUSD\", true)   \u2192 EURUSD BUY only\ncloseAll(\"EURUSD\", false)  \u2192 EURUSD SELL only\ncloseAll(\"EURUSD\", null)   \u2192 EURUSD all directions\n\n// All symbols + Direction filters:\ncloseAll(null, true)   \u2192 All BUY positions\ncloseAll(null, false)  \u2192 All SELL positions\ncloseAll(null, null)   \u2192 All positions (everything)\n</code></pre></p>"},{"location":"MT5Sugar/5.%20Position_management/closeAll/#see-also","title":"See also","text":"<ul> <li>Single close: <code>closePosition()</code> - close one position</li> <li>Direction-specific: <code>closeAllBuy()</code>, <code>closeAllSell()</code> - convenience methods</li> <li>Advanced batch: <code>closeAllPositions()</code> - positions only (not orders)</li> <li>Get positions: <code>openedOrders()</code></li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/","title":"\ud83d\udfe2 Close All BUY Positions","text":"<p>Convenience method: closes all BUY positions for specified symbol. Shortcut for <code>closeAll(symbol, true)</code>.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.closeAllBuy(String symbol)</code></li> <li>Underlying methods:</li> <li><code>closeAll()</code> - internally calls closeAll(symbol, true)</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u26aa Symbol name (null = all symbols)"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of BUY positions successfully closed</p> <p>Throws: <code>ApiExceptionMT5</code> if operation fails</p>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Close all long positions for symbol (convenience alias).</li> <li>Why you need it. Simpler syntax than <code>closeAll(symbol, true)</code>.</li> <li>Use case. Exit all BUY positions quickly.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#1-close-all-buy-for-symbol","title":"1) Close all BUY for symbol","text":"<pre><code>String symbol = \"EURUSD\";\n\nint closed = sugar.closeAllBuy(symbol);\n\nSystem.out.printf(\"\u2705 Closed %d BUY positions for %s%n\", closed, symbol);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#2-close-all-buy-positions-all-symbols","title":"2) Close all BUY positions (all symbols)","text":"<pre><code>int closed = sugar.closeAllBuy(null);\n\nSystem.out.printf(\"\u2705 Closed %d BUY positions across all symbols%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#3-report-before-closing","title":"3) Report before closing","text":"<pre><code>String symbol = \"GBPUSD\";\n\n// Get BUY positions count\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nint buyCount = (int) opened.getPositionInfosList().stream()\n    .filter(p -&gt; p.getSymbol().equals(symbol))\n    .filter(p -&gt; p.getType() == Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_BUY)\n    .count();\n\nSystem.out.printf(\"Closing %d BUY positions for %s...%n\", buyCount, symbol);\n\nint closed = sugar.closeAllBuy(symbol);\n\nSystem.out.printf(\"\u2705 Successfully closed: %d%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Equivalent to: <code>closeAll(symbol, true)</code></li> <li>Filters: Only BUY positions, SELL positions ignored</li> <li>Symbol: Pass <code>null</code> to close all BUY positions across all symbols</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllBuy/#see-also","title":"See also","text":"<ul> <li>Generic method: <code>closeAll()</code></li> <li>SELL equivalent: <code>closeAllSell()</code></li> <li>Single close: <code>closePosition()</code></li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/","title":"\ud83d\udd34 Close All SELL Positions","text":"<p>Convenience method: closes all SELL positions for specified symbol. Shortcut for <code>closeAll(symbol, false)</code>.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.closeAllSell(String symbol)</code></li> <li>Underlying methods:</li> <li><code>closeAll()</code> - internally calls closeAll(symbol, false)</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u26aa Symbol name (null = all symbols)"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of SELL positions successfully closed</p> <p>Throws: <code>ApiExceptionMT5</code> if operation fails</p>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Close all short positions for symbol (convenience alias).</li> <li>Why you need it. Simpler syntax than <code>closeAll(symbol, false)</code>.</li> <li>Use case. Exit all SELL positions quickly.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#1-close-all-sell-for-symbol","title":"1) Close all SELL for symbol","text":"<pre><code>String symbol = \"EURUSD\";\n\nint closed = sugar.closeAllSell(symbol);\n\nSystem.out.printf(\"\u2705 Closed %d SELL positions for %s%n\", closed, symbol);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#2-close-all-sell-positions-all-symbols","title":"2) Close all SELL positions (all symbols)","text":"<pre><code>int closed = sugar.closeAllSell(null);\n\nSystem.out.printf(\"\u2705 Closed %d SELL positions across all symbols%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#3-report-before-closing","title":"3) Report before closing","text":"<pre><code>String symbol = \"USDJPY\";\n\n// Get SELL positions count\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nint sellCount = (int) opened.getPositionInfosList().stream()\n    .filter(p -&gt; p.getSymbol().equals(symbol))\n    .filter(p -&gt; p.getType() == Mt5TermApiAccountHelper.BMT5_ENUM_POSITION_TYPE.BMT5_POSITION_TYPE_SELL)\n    .count();\n\nSystem.out.printf(\"Closing %d SELL positions for %s...%n\", sellCount, symbol);\n\nint closed = sugar.closeAllSell(symbol);\n\nSystem.out.printf(\"\u2705 Successfully closed: %d%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Equivalent to: <code>closeAll(symbol, false)</code></li> <li>Filters: Only SELL positions, BUY positions ignored</li> <li>Symbol: Pass <code>null</code> to close all SELL positions across all symbols</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closeAllSell/#see-also","title":"See also","text":"<ul> <li>Generic method: <code>closeAll()</code></li> <li>BUY equivalent: <code>closeAllBuy()</code></li> <li>Single close: <code>closePosition()</code></li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/","title":"\u274c Close Position","text":"<p>Convenience method: closes an existing position by ticket number. Supports both full and partial closes. Simplified alternative to low-level OrderClose.</p> <p>API Information:</p> <ul> <li>Sugar method (full close): <code>MT5Sugar.closePosition(long ticket)</code></li> <li>Sugar method (partial close): <code>MT5Sugar.closePosition(long ticket, Double volume)</code></li> <li>Underlying methods:</li> <li><code>MT5Service.orderClose()</code> - low-level order close</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>ticket</code> <code>long</code> \u2705 Position ticket number to close <code>volume</code> <code>Double</code> \u26aa Volume to close (null or 0 = close all)"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>void</code></p> <p>Throws: <code>ApiExceptionMT5</code> if close fails (contains error code and description)</p> <p>Execution: - Closes position at current market price - BUY positions close at Bid price - SELL positions close at Ask price - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Close open position instantly at market price.</li> <li>Why you need it. Exit trades, take profit, cut losses manually.</li> <li>Auto-handled. Market execution, slippage handling, error checking.</li> <li>Partial close. Can close part of position (volume parameter).</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Close entire position immediately.</li> <li>Partially close position (scale out).</li> <li>Exit losing trades manually.</li> <li>Take profit at specific conditions.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Position_management/closePosition/#1-simple-full-position-close","title":"1) Simple full position close","text":"<pre><code>long ticket = 123456789;\n\nsugar.closePosition(ticket);\n\nSystem.out.printf(\"\u2705 Position #%d closed%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#2-partial-position-close-scale-out","title":"2) Partial position close (scale out)","text":"<pre><code>long ticket = 987654321;\ndouble volume = 0.05; // Close 0.05 lots\n\nsugar.closePosition(ticket, volume);\n\nSystem.out.printf(\"\u2705 Partial close: %.2f lots of position #%d%n\", volume, ticket);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#3-close-position-with-error-handling","title":"3) Close position with error handling","text":"<pre><code>long ticket = 111222333;\n\ntry {\n    sugar.closePosition(ticket);\n    System.out.printf(\"\u2705 Position #%d closed successfully%n\", ticket);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Close failed:%n\");\n    System.err.printf(\"   Code: %d%n\", e.getError().getMqlErrorTradeIntCode());\n    System.err.printf(\"   Message: %s%n\", e.getError().getErrorMessage());\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#4-close-position-at-profit-target","title":"4) Close position at profit target","text":"<pre><code>String symbol = \"EURUSD\";\nlong ticket = 444555666;\ndouble targetProfit = 100.0; // $100 profit\n\n// Monitor position\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nfor (Mt5TermApiAccountHelper.PositionInfo pos : opened.getPositionInfosList()) {\n    if (pos.getTicket() == ticket &amp;&amp; pos.getProfit() &gt;= targetProfit) {\n        sugar.closePosition(ticket);\n        System.out.printf(\"\u2705 Position closed at profit: $%.2f%n\", pos.getProfit());\n        break;\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#5-scale-out-strategy-close-in-stages","title":"5) Scale out strategy (close in stages)","text":"<pre><code>long ticket = 777888999;\ndouble totalVolume = 0.10; // Total position size\ndouble[] closeStages = {0.03, 0.03, 0.04}; // Close in 3 stages\n\nSystem.out.printf(\"Scaling out of position #%d:%n\", ticket);\n\nfor (int i = 0; i &lt; closeStages.length; i++) {\n    sugar.closePosition(ticket, closeStages[i]);\n    System.out.printf(\"  Stage %d: Closed %.2f lots%n\", i + 1, closeStages[i]);\n\n    // Wait between closes (optional)\n    Thread.sleep(1000);\n}\n\nSystem.out.printf(\"\u2705 Position fully scaled out%n\");\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#6-close-with-profitloss-reporting","title":"6) Close with profit/loss reporting","text":"<pre><code>long ticket = 123987456;\nString symbol = \"GBPUSD\";\n\n// Get position info before closing\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nfor (Mt5TermApiAccountHelper.PositionInfo pos : opened.getPositionInfosList()) {\n    if (pos.getTicket() == ticket) {\n        double profit = pos.getProfit();\n        double entryPrice = pos.getOpenPrice();\n        double volume = pos.getVolume();\n\n        // Close position\n        sugar.closePosition(ticket);\n\n        // Report\n        System.out.printf(\"Position #%d closed:%n\", ticket);\n        System.out.printf(\"  Symbol: %s%n\", symbol);\n        System.out.printf(\"  Volume: %.2f lots%n\", volume);\n        System.out.printf(\"  Entry: %.5f%n\", entryPrice);\n        System.out.printf(\"  Profit/Loss: $%.2f%n\", profit);\n        break;\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Execution:</li> <li>Closes at current market price immediately</li> <li>BUY closes at Bid (sell to close long)</li> <li>SELL closes at Ask (buy to close short)</li> <li> <p>Slippage may occur in fast markets</p> </li> <li> <p>Full vs Partial:</p> </li> <li><code>closePosition(ticket)</code> - closes entire position</li> <li><code>closePosition(ticket, volume)</code> - closes specified volume</li> <li>Pass <code>null</code> or <code>0.0</code> for volume = full close</li> <li> <p>Partial close leaves remaining position open</p> </li> <li> <p>Volume validation:</p> </li> <li>Volume must be &lt;= position size</li> <li>Volume normalized automatically</li> <li> <p>Cannot close more than available</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> on failure</li> <li>Common errors: invalid ticket, market closed, insufficient volume</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>After close:</p> </li> <li>Position ticket becomes invalid</li> <li>Cannot modify closed position</li> <li>Check OrderHistory for closed positions</li> </ul> <p>Common patterns: <pre><code>// Pattern 1: Full close\nsugar.closePosition(ticket);\n\n// Pattern 2: Partial close (50%)\nsugar.closePosition(ticket, totalVolume * 0.5);\n\n// Pattern 3: Close specific amount\nsugar.closePosition(ticket, 0.1);\n\n// Pattern 4: Full close (explicit)\nsugar.closePosition(ticket, null);\nsugar.closePosition(ticket, 0.0);\n</code></pre></p> <p>Slippage consideration: <pre><code>// Actual close price may differ from expected\ndouble expectedBid = sugar.getBid(symbol);\nsugar.closePosition(ticket);\n\n// Check actual close price in history\n// Slippage = actualClosePrice - expectedBid\n</code></pre></p>"},{"location":"MT5Sugar/5.%20Position_management/closePosition/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderClose</code> - underlying implementation</li> <li>Batch close: <code>closeAll()</code> - close multiple positions</li> <li>Direction close: <code>closeAllBuy()</code>, <code>closeAllSell()</code></li> <li>Modify instead: <code>modifyPosition()</code> - change SL/TP without closing</li> <li>Get positions: <code>openedOrders()</code></li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/","title":"\u2699\ufe0f Modify Position (Change SL/TP)","text":"<p>Convenience method: modifies Stop Loss and/or Take Profit of an existing position. Allows changing risk parameters without closing the position.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.modifyPosition(long ticket, Double stopLoss, Double takeProfit)</code></li> <li>Underlying methods:</li> <li><code>MT5Service.orderModify()</code> - low-level order modification</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>ticket</code> <code>long</code> \u2705 Position ticket number <code>stopLoss</code> <code>Double</code> \u26aa New Stop Loss price (null = keep current) <code>takeProfit</code> <code>Double</code> \u26aa New Take Profit price (null = keep current)"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>void</code></p> <p>Throws: - <code>ApiExceptionMT5</code> if modification fails (contains error code and description) - <code>IllegalArgumentException</code> if both stopLoss and takeProfit are null</p> <p>Execution: - Modifies existing position's SL and/or TP - At least one parameter must be provided - Return code 10009 = success (TRADE_RETCODE_DONE)</p>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Change SL/TP of open position without closing it.</li> <li>Why you need it. Trail stops, adjust targets, manage risk dynamically.</li> <li>Use case. Breakeven stops, trailing stops, partial TP adjustments.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Move Stop Loss to breakeven after profit.</li> <li>Trail Stop Loss as price moves in your favor.</li> <li>Adjust Take Profit based on market conditions.</li> <li>Update risk parameters without re-entering position.</li> </ul>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#1-move-stop-loss-to-breakeven","title":"1) Move Stop Loss to breakeven","text":"<pre><code>long ticket = 123456789; // Existing BUY position\nString symbol = \"EURUSD\";\n\n// Get position entry price\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nfor (Mt5TermApiAccountHelper.PositionInfo pos : opened.getPositionInfosList()) {\n    if (pos.getTicket() == ticket) {\n        double entryPrice = pos.getOpenPrice();\n        double currentPrice = sugar.getBid(symbol);\n\n        // If in profit by 50 points, move SL to breakeven\n        double point = sugar.getPoint(symbol);\n        if (currentPrice &gt; entryPrice + (50 * point)) {\n            sugar.modifyPosition(ticket, entryPrice, null);\n            System.out.printf(\"\u2705 SL moved to breakeven: %.5f%n\", entryPrice);\n        }\n        break;\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#2-simple-trailing-stop","title":"2) Simple trailing stop","text":"<pre><code>long ticket = 987654321; // Existing SELL position\nString symbol = \"GBPUSD\";\ndouble point = sugar.getPoint(symbol);\nint trailingPoints = 50; // Trail by 50 points\n\n// Get current position data\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nfor (Mt5TermApiAccountHelper.PositionInfo pos : opened.getPositionInfosList()) {\n    if (pos.getTicket() == ticket) {\n        double currentBid = sugar.getBid(symbol);\n        double currentSL = pos.getStopLoss();\n\n        // Calculate new SL (50 points from current price)\n        double newSL = currentBid + (trailingPoints * point);\n\n        // Only trail if new SL is better (lower for SELL)\n        if (currentSL == 0 || newSL &lt; currentSL) {\n            sugar.modifyPosition(ticket, newSL, null);\n            System.out.printf(\"\u2705 SL trailed to %.5f%n\", newSL);\n        }\n        break;\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#3-adjust-take-profit-based-on-indicator","title":"3) Adjust Take Profit based on indicator","text":"<pre><code>long ticket = 111222333;\nString symbol = \"EURUSD\";\ndouble point = sugar.getPoint(symbol);\n\n// New TP based on support/resistance level\ndouble newResistance = 1.13000;\n\ntry {\n    sugar.modifyPosition(ticket, null, newResistance);\n\n    System.out.printf(\"\u2705 TP adjusted:%n\");\n    System.out.printf(\"   Ticket: #%d%n\", ticket);\n    System.out.printf(\"   New TP: %.5f%n\", newResistance);\n\n} catch (ApiExceptionMT5 e) {\n    System.err.printf(\"\u274c Modification failed: %s%n\", e.getError().getErrorMessage());\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#4-modify-both-sl-and-tp","title":"4) Modify both SL and TP","text":"<pre><code>long ticket = 444555666;\nString symbol = \"USDJPY\";\ndouble currentAsk = sugar.getAsk(symbol);\ndouble point = sugar.getPoint(symbol);\n\n// New SL and TP\ndouble newSL = currentAsk - (100 * point);\ndouble newTP = currentAsk + (200 * point);\n\nsugar.modifyPosition(ticket, newSL, newTP);\n\nSystem.out.printf(\"\u2705 Position modified:%n\");\nSystem.out.printf(\"   Ticket: #%d%n\", ticket);\nSystem.out.printf(\"   New SL: %.3f%n\", newSL);\nSystem.out.printf(\"   New TP: %.3f%n\", newTP);\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#5-partial-profit-protection-move-sl-to-lock-profit","title":"5) Partial profit protection (move SL to lock profit)","text":"<pre><code>long ticket = 777888999;\nString symbol = \"XAUUSD\";\n\n// Get position info\nMt5TermApiAccountHelper.OpenedOrdersData opened = service.openedOrders(\n    Mt5TermApiAccountHelper.BMT5_ENUM_OPENED_ORDER_SORT_TYPE.BMT5_OPENED_ORDER_SORT_BY_OPEN_TIME_ASC\n);\n\nfor (Mt5TermApiAccountHelper.PositionInfo pos : opened.getPositionInfosList()) {\n    if (pos.getTicket() == ticket) {\n        double entryPrice = pos.getOpenPrice();\n        double currentProfit = pos.getProfit();\n\n        // If profit &gt; $100, lock in half of profit\n        if (currentProfit &gt; 100.0) {\n            double currentPrice = sugar.getAsk(symbol);\n            double profitDistance = Math.abs(currentPrice - entryPrice);\n\n            // Move SL to lock 50% of profit\n            double newSL = entryPrice + (profitDistance * 0.5);\n\n            sugar.modifyPosition(ticket, newSL, null);\n\n            System.out.printf(\"\u2705 Profit protected:%n\");\n            System.out.printf(\"   Current profit: $%.2f%n\", currentProfit);\n            System.out.printf(\"   SL moved to: %.2f (locking profit)%n\", newSL);\n        }\n        break;\n    }\n}\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#6-remove-stop-loss-set-to-0","title":"6) Remove Stop Loss (set to 0)","text":"<pre><code>long ticket = 123987456;\n\n// Remove SL, keep TP\nsugar.modifyPosition(ticket, 0.0, null);\n\nSystem.out.printf(\"\u2705 Stop Loss removed from position #%d%n\", ticket);\nSystem.out.printf(\"   Warning: Position now has no SL protection!%n\");\n</code></pre>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Parameter requirements:</li> <li>At least ONE of (stopLoss, takeProfit) must be non-null</li> <li>Pass <code>null</code> to keep current value unchanged</li> <li> <p>Pass <code>0.0</code> to remove SL or TP</p> </li> <li> <p>SL/TP validation:</p> </li> <li>MT5 validates new levels against minimum distance</li> <li>Too close to current price will fail</li> <li> <p>Check broker's SYMBOL_TRADE_STOPS_LEVEL</p> </li> <li> <p>Modification timing:</p> </li> <li>Can modify while position is open</li> <li>Cannot modify during order execution</li> <li> <p>Fast markets may reject modifications</p> </li> <li> <p>Error handling:</p> </li> <li>Throws <code>ApiExceptionMT5</code> on failure</li> <li>Common errors: invalid stops, market closed</li> <li> <p>Return code 10009 = success</p> </li> <li> <p>null vs 0.0:</p> </li> <li><code>null</code> = keep current value (don't change)</li> <li><code>0.0</code> = remove SL/TP (set to none)</li> <li>Both parameters null = throws IllegalArgumentException</li> </ul> <p>Common patterns: <pre><code>// Pattern 1: Modify only SL\nsugar.modifyPosition(ticket, newSL, null);\n\n// Pattern 2: Modify only TP\nsugar.modifyPosition(ticket, null, newTP);\n\n// Pattern 3: Modify both\nsugar.modifyPosition(ticket, newSL, newTP);\n\n// Pattern 4: Remove SL\nsugar.modifyPosition(ticket, 0.0, null);\n\n// Pattern 5: Remove TP\nsugar.modifyPosition(ticket, null, 0.0);\n</code></pre></p> <p>Trailing stop logic: <pre><code>// BUY position trailing\ndouble currentPrice = sugar.getBid(symbol);\ndouble newSL = currentPrice - (trailingPoints * point);\nif (currentSL == 0 || newSL &gt; currentSL) {\n    sugar.modifyPosition(ticket, newSL, null);\n}\n\n// SELL position trailing\ndouble currentPrice = sugar.getBid(symbol);\ndouble newSL = currentPrice + (trailingPoints * point);\nif (currentSL == 0 || newSL &lt; currentSL) {\n    sugar.modifyPosition(ticket, newSL, null);\n}\n</code></pre></p>"},{"location":"MT5Sugar/5.%20Position_management/modifyPosition/#see-also","title":"See also","text":"<ul> <li>Low-level method: <code>OrderModify</code> - underlying implementation</li> <li>Close position: <code>closePosition()</code> - close instead of modify</li> <li>Get position info: <code>openedOrders()</code></li> <li>Price helpers: <code>getBid()</code>, <code>getAsk()</code>, <code>getPoint()</code></li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/","title":"\ud83d\uddd1\ufe0f Cancel All Pending Orders (Alias)","text":"<p>Alias method: cancels all pending orders. Identical to <code>closeAllPending()</code> - provided for semantic clarity.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.cancelAll(String symbol, Boolean isBuy)</code></li> <li>Underlying methods:</li> <li><code>closeAllPending()</code> - internally calls closeAllPending()</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u26aa Symbol name (null = all symbols) <code>isBuy</code> <code>Boolean</code> \u26aa true=BUY orders, false=SELL orders, null=all"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of pending orders successfully cancelled</p> <p>Throws: <code>ApiExceptionMT5</code> if operation fails</p>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Semantic alias for closeAllPending() - \"cancel\" is clearer than \"close\" for orders.</li> <li>Identical to: <code>closeAllPending(symbol, isBuy)</code></li> <li>Use case. When you want clearer naming (cancel orders vs close positions).</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/#1-cancel-all-pending-orders","title":"1) Cancel all pending orders","text":"<pre><code>int cancelled = sugar.cancelAll(\"EURUSD\", null);\n\nSystem.out.printf(\"\u2705 Cancelled %d pending orders%n\", cancelled);\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/cancelAll/#see-also","title":"See also","text":"<ul> <li>Actual implementation: <code>closeAllPending()</code></li> <li>Close positions: <code>closeAllPositions()</code></li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/","title":"\ud83d\uddd1\ufe0f Cancel All Pending Orders (Excluding Positions)","text":"<p>Advanced method: cancels only pending orders (LIMIT/STOP), not active positions. Separates order management from position management.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.closeAllPending(String symbol, Boolean isBuy)</code></li> <li>Underlying methods:</li> <li><code>openedOrders()</code> - get all orders</li> <li><code>orderClose()</code> - cancel each order</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u26aa Symbol name (null = all symbols) <code>isBuy</code> <code>Boolean</code> \u26aa true=BUY orders, false=SELL orders, null=all"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of pending orders successfully cancelled</p> <p>Throws: <code>ApiExceptionMT5</code> if operation fails</p> <p>Execution: - Filters only OpenedOrderInfo entries (pending orders) - Types: BUY_LIMIT, SELL_LIMIT, BUY_STOP, SELL_STOP (order type 2-7) - Ignores active positions - Continues even if some cancellations fail</p>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Cancel pending entry orders, keep active positions open.</li> <li>Why you need it. Remove future entries without exiting current trades.</li> <li>Difference. vs closeAll() - this skips active positions.</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Cancel pending orders but keep positions open.</li> <li>Remove future entries without closing current trades.</li> <li>Clean up unused LIMIT/STOP orders.</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#1-cancel-all-pending-orders-for-symbol","title":"1) Cancel all pending orders for symbol","text":"<pre><code>String symbol = \"EURUSD\";\n\nint cancelled = sugar.closeAllPending(symbol, null);\n\nSystem.out.printf(\"\u2705 Cancelled %d pending orders for %s%n\", cancelled, symbol);\nSystem.out.printf(\"   Active positions remain open%n\");\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#2-cancel-all-buy-pending-orders","title":"2) Cancel all BUY pending orders","text":"<pre><code>int cancelled = sugar.closeAllPending(\"GBPUSD\", true);\n\nSystem.out.printf(\"\u2705 Cancelled %d BUY pending orders%n\", cancelled);\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#3-cancel-all-sell-pending-orders","title":"3) Cancel all SELL pending orders","text":"<pre><code>int cancelled = sugar.closeAllPending(\"USDJPY\", false);\n\nSystem.out.printf(\"\u2705 Cancelled %d SELL pending orders%n\", cancelled);\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#4-cancel-all-pending-orders-all-symbols","title":"4) Cancel all pending orders (all symbols)","text":"<pre><code>int cancelled = sugar.closeAllPending(null, null);\n\nSystem.out.printf(\"\u2705 Cancelled %d pending orders across all symbols%n\", cancelled);\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Pending orders only: Does NOT close active positions</li> <li>Order types: BUY_LIMIT, SELL_LIMIT, BUY_STOP, SELL_STOP</li> <li>vs closeAll(): closeAll() closes both positions AND pending orders</li> <li>Use case: When you want to cancel future entries but keep current trades</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPending/#see-also","title":"See also","text":"<ul> <li>Close all (including positions): <code>closeAll()</code></li> <li>Close positions only: <code>closeAllPositions()</code></li> <li>Alias: <code>cancelAll()</code> - same functionality</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/","title":"\u274c Close All Positions (Excluding Pending Orders)","text":"<p>Advanced method: closes only market positions (active trades), not pending orders. Separates position management from order management.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.closeAllPositions(String symbol, Boolean isBuy)</code></li> <li>Underlying methods:</li> <li><code>openedOrders()</code> - get all positions</li> <li><code>closePosition()</code> - close each position</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u26aa Symbol name (null = all symbols) <code>isBuy</code> <code>Boolean</code> \u26aa true=BUY only, false=SELL only, null=all"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Number of positions successfully closed</p> <p>Throws: <code>ApiExceptionMT5</code> if operation fails</p> <p>Execution: - Filters only PositionInfo entries (not OpenedOrderInfo) - Ignores pending orders (BUY_LIMIT, SELL_LIMIT, BUY_STOP, SELL_STOP) - Closes only active market positions</p>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Close active positions only, keep pending orders intact.</li> <li>Why you need it. Selective cleanup - exit trades but preserve entry orders.</li> <li>Difference. vs closeAll() - this skips pending orders.</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Close active trades but keep pending orders.</li> <li>Exit current positions without canceling future entries.</li> <li>Separate position vs order management.</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#1-close-all-active-positions-keep-pending-orders","title":"1) Close all active positions, keep pending orders","text":"<pre><code>String symbol = \"EURUSD\";\n\nint closed = sugar.closeAllPositions(symbol, null);\n\nSystem.out.printf(\"\u2705 Closed %d active positions for %s%n\", closed, symbol);\nSystem.out.printf(\"   Pending orders remain untouched%n\");\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#2-close-all-buy-positions-only","title":"2) Close all BUY positions only","text":"<pre><code>int closed = sugar.closeAllPositions(\"GBPUSD\", true);\n\nSystem.out.printf(\"\u2705 Closed %d BUY positions%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#3-close-all-sell-positions-only","title":"3) Close all SELL positions only","text":"<pre><code>int closed = sugar.closeAllPositions(\"USDJPY\", false);\n\nSystem.out.printf(\"\u2705 Closed %d SELL positions%n\", closed);\n</code></pre>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Positions only: Does NOT close pending orders (LIMIT/STOP)</li> <li>vs closeAll(): closeAll() closes both positions AND pending orders</li> <li>Use case: When you want to exit trades but keep future entry orders active</li> </ul>"},{"location":"MT5Sugar/6.%20Advanced_batch_operations/closeAllPositions/#see-also","title":"See also","text":"<ul> <li>Close all (including orders): <code>closeAll()</code></li> <li>Cancel pending orders: <code>closeAllPending()</code></li> <li>Single close: <code>closePosition()</code></li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/","title":"\ud83d\udfe2 BUY with Automatic Risk-Based Volume","text":"<p>Risk management method: opens BUY market order with automatic volume calculation based on risk amount and SL distance. All-in-one position sizing + execution.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.buyByRisk(String symbol, double stopLossPoints, double riskAmount, double takeProfitPoints)</code></li> <li>Underlying methods:</li> <li><code>calculateVolume()</code> - calculate position size</li> <li><code>buyMarket()</code> - place order</li> <li><code>getPoint()</code>, <code>symbolInfoTick()</code> - get current prices</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>stopLossPoints</code> <code>double</code> \u2705 SL distance in points <code>riskAmount</code> <code>double</code> \u2705 Risk amount in account currency <code>takeProfitPoints</code> <code>double</code> \u2705 TP distance in points (0 = no TP)"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails</p> <p>Execution: 1. Calculates volume using <code>calculateVolume()</code> 2. Gets current Ask price 3. Calculates SL price: <code>Ask - (stopLossPoints \u00d7 point)</code> 4. Calculates TP price: <code>Ask + (takeProfitPoints \u00d7 point)</code> (if &gt; 0) 5. Places BUY market order</p>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. BUY order with auto-calculated volume from $ risk.</li> <li>Why you need it. One-step risk-managed entry - no manual calculations.</li> <li>Use case. Consistent $ risk per trade (e.g., always risk $50).</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#1-simple-buy-with-50-risk","title":"1) Simple BUY with $50 risk","text":"<pre><code>String symbol = \"EURUSD\";\ndouble riskAmount = 50.0;   // Risk $50\nint slPoints = 50;          // 50 points SL\nint tpPoints = 100;         // 100 points TP\n\nlong ticket = sugar.buyByRisk(symbol, slPoints, riskAmount, tpPoints);\n\nSystem.out.printf(\"\u2705 BUY order placed: #%d%n\", ticket);\nSystem.out.printf(\"   Risk: $%.2f | SL: %d points | TP: %d points%n\",\n    riskAmount, slPoints, tpPoints);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#2-buy-with-2-account-risk","title":"2) BUY with 2% account risk","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble balance = sugar.getBalance();\ndouble riskPercent = 2.0;\ndouble riskAmount = balance * (riskPercent / 100.0);\n\nlong ticket = sugar.buyByRisk(symbol, 100, riskAmount, 200);\n\nSystem.out.printf(\"\u2705 BUY with 2%% risk:%n\");\nSystem.out.printf(\"   Balance: $%.2f%n\", balance);\nSystem.out.printf(\"   Risk: $%.2f (%.1f%%)%n\", riskAmount, riskPercent);\nSystem.out.printf(\"   Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#3-buy-without-tp-manual-exit","title":"3) BUY without TP (manual exit)","text":"<pre><code>long ticket = sugar.buyByRisk(\"USDJPY\", 50, 100.0, 0);\n\nSystem.out.printf(\"\u2705 BUY: #%d | Risk $100 | No TP (manual exit)%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Volume calculation: Automatic based on risk and SL points</li> <li>SL placement: <code>Ask - (stopLossPoints \u00d7 point)</code></li> <li>TP placement: <code>Ask + (takeProfitPoints \u00d7 point)</code> (if &gt; 0)</li> <li>Pass 0 for TP: If you don't want automatic TP</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/buyByRisk/#see-also","title":"See also","text":"<ul> <li>SELL version: <code>sellByRisk()</code></li> <li>Volume calculator: <code>calculateVolume()</code></li> <li>Manual volume: <code>buyMarket()</code></li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/","title":"\ud83d\udcca Calculate Volume Based on Risk","text":"<p>Risk management method: calculates position volume (lot size) based on desired risk amount in account currency. Core method for position sizing.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.calculateVolume(String symbol, double stopLossPoints, double riskAmount)</code></li> <li>Underlying methods:</li> <li><code>tickValueWithSize()</code> - get tick value</li> <li><code>getPoint()</code> - get point size</li> <li><code>normalizeVolume()</code> - normalize result</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>stopLossPoints</code> <code>double</code> \u2705 Stop Loss distance in points <code>riskAmount</code> <code>double</code> \u2705 Risk amount in account currency (e.g., $50)"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Calculated and normalized volume in lots</p> <p>Throws: <code>ApiExceptionMT5</code> if calculation fails</p> <p>Calculation: <pre><code>valuePerPoint = (tickValue / tickSize) \u00d7 point\nvolume = riskAmount / (stopLossPoints \u00d7 valuePerPoint)\nresult = normalizeVolume(volume)\n</code></pre></p>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. Auto-calculate lot size from $ risk and SL distance.</li> <li>Why you need it. Proper position sizing - risk same $ amount per trade.</li> <li>Formula. Volume = RiskAmount / (StopLossPoints \u00d7 PointValue).</li> <li>Returns. Normalized volume ready for order placement.</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#purpose","title":"\ud83c\udfaf Purpose","text":"<p>Use this method when you need to:</p> <ul> <li>Risk fixed $ amount per trade (e.g., $50).</li> <li>Calculate position size based on SL distance.</li> <li>Implement proper risk management (e.g., 2% per trade).</li> <li>Standardize risk across different symbols.</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#1-calculate-volume-for-50-risk","title":"1) Calculate volume for $50 risk","text":"<pre><code>String symbol = \"EURUSD\";\nint slPoints = 50;          // 50 points SL\ndouble riskAmount = 50.0;   // Risk $50\n\ndouble volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\n\nSystem.out.printf(\"Risk management:%n\");\nSystem.out.printf(\"  Symbol: %s%n\", symbol);\nSystem.out.printf(\"  SL: %d points%n\", slPoints);\nSystem.out.printf(\"  Risk: $%.2f%n\", riskAmount);\nSystem.out.printf(\"  Calculated volume: %.2f lots%n\", volume);\n\n// Output:\n// Risk management:\n//   Symbol: EURUSD\n//   SL: 50 points\n//   Risk: $50.00\n//   Calculated volume: 0.10 lots\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#2-risk-2-of-balance-per-trade","title":"2) Risk 2% of balance per trade","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble balance = sugar.getBalance();\ndouble riskPercent = 2.0; // 2% risk\nint slPoints = 100;\n\ndouble riskAmount = balance * (riskPercent / 100.0);\ndouble volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\n\nSystem.out.printf(\"2%% risk sizing:%n\");\nSystem.out.printf(\"  Balance: $%.2f%n\", balance);\nSystem.out.printf(\"  Risk: %.1f%% ($%.2f)%n\", riskPercent, riskAmount);\nSystem.out.printf(\"  SL: %d points%n\", slPoints);\nSystem.out.printf(\"  Volume: %.2f lots%n\", volume);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#3-compare-volume-across-different-sl-distances","title":"3) Compare volume across different SL distances","text":"<pre><code>String symbol = \"EURUSD\";\ndouble riskAmount = 100.0; // Fixed $100 risk\nint[] slDistances = {30, 50, 100, 150};\n\nSystem.out.printf(\"Volume for $%.2f risk:%n\", riskAmount);\n\nfor (int sl : slDistances) {\n    double volume = sugar.calculateVolume(symbol, sl, riskAmount);\n    System.out.printf(\"  SL %3d points \u2192 %.3f lots%n\", sl, volume);\n}\n\n// Output:\n// Volume for $100.00 risk:\n//   SL  30 points \u2192 0.333 lots\n//   SL  50 points \u2192 0.200 lots\n//   SL 100 points \u2192 0.100 lots\n//   SL 150 points \u2192 0.067 lots\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#4-calculate-volume-with-minmax-checks","title":"4) Calculate volume with min/max checks","text":"<pre><code>String symbol = \"XAUUSD\";\nint slPoints = 50;\ndouble riskAmount = 50.0;\n\ndouble volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\ndouble[] limits = sugar.getVolumeLimits(symbol);\ndouble minVol = limits[0];\ndouble maxVol = limits[1];\n\nSystem.out.printf(\"Calculated volume: %.2f lots%n\", volume);\nSystem.out.printf(\"Broker limits: [%.2f - %.2f]%n\", minVol, maxVol);\n\nif (volume &lt; minVol) {\n    System.out.printf(\"\u26a0\ufe0f Volume below minimum! Using %.2f%n\", minVol);\n    volume = minVol;\n} else if (volume &gt; maxVol) {\n    System.out.printf(\"\u26a0\ufe0f Volume above maximum! Using %.2f%n\", maxVol);\n    volume = maxVol;\n}\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#5-multiple-symbols-with-same-risk","title":"5) Multiple symbols with same $ risk","text":"<pre><code>String[] symbols = {\"EURUSD\", \"GBPUSD\", \"USDJPY\"};\ndouble riskAmount = 50.0;\nint slPoints = 50;\n\nSystem.out.printf(\"Same $%.2f risk across symbols:%n\", riskAmount);\n\nfor (String symbol : symbols) {\n    double volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\n    System.out.printf(\"  %s: %.2f lots%n\", symbol, volume);\n}\n\n// Output:\n// Same $50.00 risk across symbols:\n//   EURUSD: 0.10 lots\n//   GBPUSD: 0.08 lots\n//   USDJPY: 0.12 lots\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#6-dynamic-volume-based-on-volatility","title":"6) Dynamic volume based on volatility","text":"<pre><code>String symbol = \"EURUSD\";\ndouble riskAmount = 100.0;\n\n// Wider SL in volatile markets\nint spread = sugar.getSpread(symbol);\nint slPoints = spread &gt; 10 ? 100 : 50; // Wider SL if high spread\n\ndouble volume = sugar.calculateVolume(symbol, slPoints, riskAmount);\n\nSystem.out.printf(\"Volatility-adjusted sizing:%n\");\nSystem.out.printf(\"  Spread: %d points%n\", spread);\nSystem.out.printf(\"  SL: %d points%n\", slPoints);\nSystem.out.printf(\"  Volume: %.2f lots%n\", volume);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Risk amount:</li> <li>Specified in account currency (USD, EUR, etc.)</li> <li>NOT in percentage - convert % to $ first</li> <li> <p>Example: 2% of $10,000 = $200</p> </li> <li> <p>Stop Loss points:</p> </li> <li>Distance in points, not price</li> <li>NOT in pips (unless using pointsToPips())</li> <li> <p>Example: For EURUSD, 50 points = 5 pips (5-digit broker)</p> </li> <li> <p>Volume normalization:</p> </li> <li>Result automatically normalized to broker's min/max/step</li> <li>May differ slightly from raw calculation</li> <li> <p>Always check returned volume before trading</p> </li> <li> <p>Tick value:</p> </li> <li>Automatically fetched for symbol</li> <li>Varies by symbol and account currency</li> <li> <p>Affects final volume calculation</p> </li> <li> <p>Error handling:</p> </li> <li>Throws ApiExceptionMT5 if symbol data unavailable</li> <li>Returns normalized volume (may hit broker limits)</li> <li>Check volume limits separately if needed</li> </ul> <p>Formula breakdown: <pre><code>Example: EURUSD\n- Risk: $50\n- SL: 50 points\n- Point: 0.00001\n- Tick value: $1 per 0.00001 (mini lot)\n\nvaluePerPoint = ($1 / 0.00001) \u00d7 0.00001 = $1\nvolume = $50 / (50 points \u00d7 $1/point)\n       = $50 / $50\n       = 1.0 lots\n\nNormalized to 0.10 lots (broker limits)\n</code></pre></p>"},{"location":"MT5Sugar/7.%20Risk_management/calculateVolume/#see-also","title":"See also","text":"<ul> <li>Use calculated volume: <code>buyByRisk()</code>, <code>sellByRisk()</code></li> <li>Volume helpers: <code>normalizeVolume()</code>, <code>getVolumeLimits()</code></li> <li>Tick data: <code>getTickValueAndSize()</code> - get tick value and size</li> <li>Balance info: <code>getBalance()</code></li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/","title":"\ud83d\udd34 SELL with Automatic Risk-Based Volume","text":"<p>Risk management method: opens SELL market order with automatic volume calculation based on risk amount and SL distance. All-in-one position sizing + execution.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.sellByRisk(String symbol, double stopLossPoints, double riskAmount, double takeProfitPoints)</code></li> <li>Underlying methods:</li> <li><code>calculateVolume()</code> - calculate position size</li> <li><code>sellMarket()</code> - place order</li> <li><code>getPoint()</code>, <code>symbolInfoTick()</code> - get current prices</li> <li>Source: MT5Sugar convenience layer</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\") <code>stopLossPoints</code> <code>double</code> \u2705 SL distance in points <code>riskAmount</code> <code>double</code> \u2705 Risk amount in account currency <code>takeProfitPoints</code> <code>double</code> \u2705 TP distance in points (0 = no TP)"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>long</code> - Order ticket number</p> <p>Throws: <code>ApiExceptionMT5</code> if order fails</p> <p>Execution: 1. Calculates volume using <code>calculateVolume()</code> 2. Gets current Bid price 3. Calculates SL price: <code>Bid + (stopLossPoints \u00d7 point)</code> 4. Calculates TP price: <code>Bid - (takeProfitPoints \u00d7 point)</code> (if &gt; 0) 5. Places SELL market order</p>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#just-the-essentials","title":"\ud83d\udcac Just the essentials","text":"<ul> <li>What it is. SELL order with auto-calculated volume from $ risk.</li> <li>Why you need it. One-step risk-managed entry - no manual calculations.</li> <li>Use case. Consistent $ risk per trade (e.g., always risk $50).</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#1-simple-sell-with-50-risk","title":"1) Simple SELL with $50 risk","text":"<pre><code>String symbol = \"EURUSD\";\ndouble riskAmount = 50.0;   // Risk $50\nint slPoints = 50;          // 50 points SL\nint tpPoints = 100;         // 100 points TP\n\nlong ticket = sugar.sellByRisk(symbol, slPoints, riskAmount, tpPoints);\n\nSystem.out.printf(\"\u2705 SELL order placed: #%d%n\", ticket);\nSystem.out.printf(\"   Risk: $%.2f | SL: %d points | TP: %d points%n\",\n    riskAmount, slPoints, tpPoints);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#2-sell-with-2-account-risk","title":"2) SELL with 2% account risk","text":"<pre><code>String symbol = \"GBPUSD\";\ndouble balance = sugar.getBalance();\ndouble riskPercent = 2.0;\ndouble riskAmount = balance * (riskPercent / 100.0);\n\nlong ticket = sugar.sellByRisk(symbol, 100, riskAmount, 200);\n\nSystem.out.printf(\"\u2705 SELL with 2%% risk:%n\");\nSystem.out.printf(\"   Balance: $%.2f%n\", balance);\nSystem.out.printf(\"   Risk: $%.2f (%.1f%%)%n\", riskAmount, riskPercent);\nSystem.out.printf(\"   Ticket: #%d%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#3-sell-without-tp-manual-exit","title":"3) SELL without TP (manual exit)","text":"<pre><code>long ticket = sugar.sellByRisk(\"USDJPY\", 50, 100.0, 0);\n\nSystem.out.printf(\"\u2705 SELL: #%d | Risk $100 | No TP (manual exit)%n\", ticket);\n</code></pre>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#important-notes","title":"\ud83d\udccc Important Notes","text":"<ul> <li>Volume calculation: Automatic based on risk and SL points</li> <li>SL placement: <code>Bid + (stopLossPoints \u00d7 point)</code></li> <li>TP placement: <code>Bid - (takeProfitPoints \u00d7 point)</code> (if &gt; 0)</li> <li>Pass 0 for TP: If you don't want automatic TP</li> </ul>"},{"location":"MT5Sugar/7.%20Risk_management/sellByRisk/#see-also","title":"See also","text":"<ul> <li>BUY version: <code>buyByRisk()</code></li> <li>Volume calculator: <code>calculateVolume()</code></li> <li>Manual volume: <code>sellMarket()</code></li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getTickValueAndSize/","title":"\ud83c\udfaf Get Tick Value and Size","text":"<p>Helper method: retrieves tick value and tick size for symbol in one call. Used for profit calculations and volume sizing.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getTickValueAndSize(String symbol)</code></li> <li>Returns: <code>double[2]</code> - Array with [tickValue, tickSize]</li> <li>Underlying: <code>tickValueWithSize()</code> service call</li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getTickValueAndSize/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name"},{"location":"MT5Sugar/8.%20Advanced_helpers/getTickValueAndSize/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double[2]</code> - Array: <code>[tickValue, tickSize]</code></p> <p>Throws: <code>ApiExceptionMT5</code> if no data available</p>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getTickValueAndSize/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>String symbol = \"EURUSD\";\ndouble[] tickData = sugar.getTickValueAndSize(symbol);\n\ndouble tickValue = tickData[0];\ndouble tickSize = tickData[1];\n\nSystem.out.printf(\"%s tick data:%n\", symbol);\nSystem.out.printf(\"  Tick value: $%.2f%n\", tickValue);\nSystem.out.printf(\"  Tick size: %.5f%n\", tickSize);\n\n// Output:\n// EURUSD tick data:\n//   Tick value: $1.00\n//   Tick size: 0.00001\n</code></pre>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getTickValueAndSize/#see-also","title":"See also","text":"<ul> <li>Volume calculation: <code>calculateVolume()</code> - uses tick data</li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getVolumeLimits/","title":"\ud83d\udccf Get Volume Limits (Min/Max/Step)","text":"<p>Helper method: retrieves symbol's volume limits - minimum, maximum, and step size. Essential for volume validation.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getVolumeLimits(String symbol)</code></li> <li>Returns: <code>double[3]</code> - Array with [min, max, step]</li> <li>Underlying: <code>symbolInfoDouble()</code> calls for VOLUME_MIN, VOLUME_MAX, VOLUME_STEP</li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getVolumeLimits/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name (e.g., \"EURUSD\")"},{"location":"MT5Sugar/8.%20Advanced_helpers/getVolumeLimits/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double[3]</code> - Array: <code>[volumeMin, volumeMax, volumeStep]</code></p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getVolumeLimits/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>String symbol = \"EURUSD\";\ndouble[] limits = sugar.getVolumeLimits(symbol);\n\nSystem.out.printf(\"%s volume limits:%n\", symbol);\nSystem.out.printf(\"  Min: %.2f lots%n\", limits[0]);\nSystem.out.printf(\"  Max: %.2f lots%n\", limits[1]);\nSystem.out.printf(\"  Step: %.2f lots%n\", limits[2]);\n\n// Output:\n// EURUSD volume limits:\n//   Min: 0.01 lots\n//   Max: 100.00 lots\n//   Step: 0.01 lots\n</code></pre>"},{"location":"MT5Sugar/8.%20Advanced_helpers/getVolumeLimits/#see-also","title":"See also","text":"<ul> <li>Normalize volume: <code>normalizeVolume()</code></li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/pointsToPips/","title":"\ud83d\udcd0 Convert Points to Pips","text":"<p>Helper method: converts points to pips based on symbol's digit count. Handles 3-digit (JPY) vs 5-digit (standard) brokers.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.pointsToPips(String symbol, double points)</code></li> <li>Returns: <code>double</code> - Pips value</li> <li>Formula:</li> <li>3 digits or less: 1 pip = 1 point</li> <li>5 digits: 1 pip = 10 points</li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/pointsToPips/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name <code>points</code> <code>double</code> \u2705 Points to convert"},{"location":"MT5Sugar/8.%20Advanced_helpers/pointsToPips/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Pips value</p>"},{"location":"MT5Sugar/8.%20Advanced_helpers/pointsToPips/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>String symbol1 = \"EURUSD\"; // 5 digits\nString symbol2 = \"USDJPY\"; // 3 digits\n\ndouble pips1 = sugar.pointsToPips(symbol1, 50); // 50 points\ndouble pips2 = sugar.pointsToPips(symbol2, 50); // 50 points\n\nSystem.out.printf(\"EURUSD: 50 points = %.1f pips%n\", pips1); // 5.0 pips\nSystem.out.printf(\"USDJPY: 50 points = %.1f pips%n\", pips2); // 50.0 pips\n</code></pre>"},{"location":"MT5Sugar/8.%20Advanced_helpers/pointsToPips/#see-also","title":"See also","text":"<ul> <li>Get point size: <code>getPoint()</code></li> <li>Get digits: <code>getDigits()</code></li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/priceFromOffsetPoints/","title":"\ud83d\udcb0 Calculate Price from Points Offset","text":"<p>Helper method: calculates price from current market price with points offset. Handles BUY (Ask) vs SELL (Bid) automatically.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.priceFromOffsetPoints(String symbol, boolean isBuy, double pointsOffset)</code></li> <li>Returns: <code>double</code> - Calculated price</li> <li>Formula:</li> <li>BUY: <code>Ask + (pointsOffset \u00d7 point)</code></li> <li>SELL: <code>Bid + (pointsOffset \u00d7 point)</code></li> </ul>"},{"location":"MT5Sugar/8.%20Advanced_helpers/priceFromOffsetPoints/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name <code>isBuy</code> <code>boolean</code> \u2705 true=use Ask, false=use Bid <code>pointsOffset</code> <code>double</code> \u2705 Points offset (positive or negative)"},{"location":"MT5Sugar/8.%20Advanced_helpers/priceFromOffsetPoints/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Calculated price</p>"},{"location":"MT5Sugar/8.%20Advanced_helpers/priceFromOffsetPoints/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>String symbol = \"EURUSD\";\n\n// BUY: 50 points above Ask\ndouble buyPrice = sugar.priceFromOffsetPoints(symbol, true, 50);\n\n// SELL: 50 points below Bid\ndouble sellPrice = sugar.priceFromOffsetPoints(symbol, false, -50);\n\nSystem.out.printf(\"BUY entry 50p above: %.5f%n\", buyPrice);\nSystem.out.printf(\"SELL entry 50p below: %.5f%n\", sellPrice);\n</code></pre>"},{"location":"MT5Sugar/8.%20Advanced_helpers/priceFromOffsetPoints/#see-also","title":"See also","text":"<ul> <li>Get prices: <code>getAsk()</code>, <code>getBid()</code></li> <li>Points offset orders: <code>buyStopPoints()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/","title":"\ud83d\udd50 Create Timestamp (3 variants)","text":"<p>Helper methods: creates protobuf Timestamp objects for history queries. Three variants: from epoch seconds, from milliseconds, or current time.</p> <p>API Information:</p> <ul> <li>Sugar method (seconds): <code>MT5Sugar.createTimestamp(long epochSeconds)</code></li> <li>Sugar method (millis): <code>MT5Sugar.createTimestampFromMillis(long epochMillis)</code></li> <li>Sugar method (now): <code>MT5Sugar.createTimestampNow()</code></li> <li>Returns: <code>com.google.protobuf.Timestamp</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#input","title":"\ud83d\udd3d Input","text":"Variant Parameter Type Description <code>createTimestamp</code> <code>epochSeconds</code> <code>long</code> Seconds since Unix epoch <code>...FromMillis</code> <code>epochMillis</code> <code>long</code> Milliseconds since Unix epoch <code>...Now</code> none - Uses current system time"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>com.google.protobuf.Timestamp</code> - Protobuf timestamp object</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#usage-examples","title":"\ud83d\udd17 Usage Examples","text":""},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#1-from-seconds","title":"1) From seconds","text":"<pre><code>long epochSeconds = 1672531200L; // Jan 1, 2023\nvar timestamp = sugar.createTimestamp(epochSeconds);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#2-from-milliseconds","title":"2) From milliseconds","text":"<pre><code>long epochMillis = System.currentTimeMillis();\nvar timestamp = sugar.createTimestampFromMillis(epochMillis);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#3-current-time","title":"3) Current time","text":"<pre><code>var now = sugar.createTimestampNow();\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/createTimestamp/#see-also","title":"See also","text":"<ul> <li>Used in history queries: <code>getOrdersHistoryLastDays()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getBalance/","title":"\ud83d\udcb0 Get Account Balance","text":"<p>Helper method: retrieves current account balance.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getBalance()</code></li> <li>Returns: <code>double</code> - Account balance</li> <li>Underlying: <code>MT5Service.getBalance()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getBalance/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Balance in account currency</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getBalance/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double balance = sugar.getBalance();\nSystem.out.printf(\"Account balance: $%.2f%n\", balance);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getBalance/#see-also","title":"See also","text":"<ul> <li>Other account info: <code>getEquity()</code>, <code>getMargin()</code>, <code>getFreeMargin()</code></li> <li>Full snapshot: <code>getAccountSnapshot()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getEquity/","title":"\ud83d\udcca Get Account Equity","text":"<p>Helper method: retrieves current account equity (balance + floating profit/loss).</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getEquity()</code></li> <li>Returns: <code>double</code> - Account equity</li> <li>Underlying: <code>MT5Service.getEquity()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getEquity/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Equity in account currency</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getEquity/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double equity = sugar.getEquity();\nSystem.out.printf(\"Account equity: $%.2f%n\", equity);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getEquity/#see-also","title":"See also","text":"<ul> <li>Other account info: <code>getBalance()</code>, <code>getProfit()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getFreeMargin/","title":"\ud83d\udcb8 Get Free Margin","text":"<p>Helper method: retrieves free margin (available funds for new positions).</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getFreeMargin()</code></li> <li>Returns: <code>double</code> - Free margin</li> <li>Underlying: <code>MT5Service.getFreeMargin()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getFreeMargin/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Free margin in account currency</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getFreeMargin/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double freeMargin = sugar.getFreeMargin();\nSystem.out.printf(\"Free margin: $%.2f%n\", freeMargin);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getFreeMargin/#see-also","title":"See also","text":"<ul> <li>Used margin: <code>getMargin()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getMargin/","title":"\ud83d\udd12 Get Used Margin","text":"<p>Helper method: retrieves currently used margin (locked funds for open positions).</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getMargin()</code></li> <li>Returns: <code>double</code> - Used margin</li> <li>Underlying: <code>MT5Service.getMargin()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getMargin/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Used margin in account currency</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getMargin/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double margin = sugar.getMargin();\nSystem.out.printf(\"Used margin: $%.2f%n\", margin);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getMargin/#see-also","title":"See also","text":"<ul> <li>Free margin: <code>getFreeMargin()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getPositionCount/","title":"\ud83d\udd22 Get Position Count","text":"<p>Helper method: retrieves count of open positions.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getPositionCount()</code></li> <li>Returns: <code>int</code> - Number of open positions</li> <li>Underlying: <code>MT5Service.positionsTotal()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getPositionCount/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>int</code> - Count of open positions</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getPositionCount/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>int count = sugar.getPositionCount();\nSystem.out.printf(\"Open positions: %d%n\", count);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getPositionCount/#see-also","title":"See also","text":"<ul> <li>Check existence: <code>hasOpenPositions()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getProfit/","title":"\ud83d\udcc8 Get Current Profit/Loss","text":"<p>Helper method: retrieves current floating profit/loss for all open positions.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.getProfit()</code></li> <li>Returns: <code>double</code> - Current profit/loss</li> <li>Underlying: <code>MT5Service.getProfit()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getProfit/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Profit/loss in account currency (positive = profit, negative = loss)</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getProfit/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double profit = sugar.getProfit();\nSystem.out.printf(\"Current P/L: $%.2f%n\", profit);\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/getProfit/#see-also","title":"See also","text":"<ul> <li>Account info: <code>getEquity()</code>, <code>getBalance()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/hasOpenPositions/","title":"\u2705 Check if Any Positions Open","text":"<p>Helper method: checks if there are any open positions.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.hasOpenPositions()</code></li> <li>Returns: <code>boolean</code> - true if positions exist</li> <li>Underlying: <code>MT5Service.positionsTotal()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/hasOpenPositions/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>boolean</code> - <code>true</code> if open positions exist, <code>false</code> otherwise</p> <p>Throws: <code>ApiExceptionMT5</code> if request fails</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/hasOpenPositions/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>if (sugar.hasOpenPositions()) {\n    System.out.println(\"\u26a0\ufe0f Open positions detected\");\n} else {\n    System.out.println(\"\u2705 No open positions\");\n}\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/hasOpenPositions/#see-also","title":"See also","text":"<ul> <li>Position count: <code>getPositionCount()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizeLots/","title":"\ud83d\udd27 Normalize Lots (Alias)","text":"<p>Alias method: normalizes volume to symbol's volume step. Identical to <code>normalizeVolume()</code>.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.normalizeLots(String symbol, double lots)</code></li> <li>Returns: <code>double</code> - Normalized volume</li> <li>Underlying: <code>normalizeVolume()</code> - internally calls normalizeVolume()</li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizeLots/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name <code>lots</code> <code>double</code> \u2705 Volume to normalize"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizeLots/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Normalized volume</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizeLots/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double volume = sugar.normalizeLots(\"EURUSD\", 0.137);\nSystem.out.printf(\"Normalized: %.2f lots%n\", volume); // 0.13 or 0.14\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizeLots/#see-also","title":"See also","text":"<ul> <li>Actual implementation: <code>normalizeVolume()</code></li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizePriceDigits/","title":"\ud83d\udd27 Normalize Price (Alias)","text":"<p>Alias method: normalizes price to symbol's digit count. Identical to <code>normalizePrice()</code>.</p> <p>API Information:</p> <ul> <li>Sugar method: <code>MT5Sugar.normalizePriceDigits(String symbol, double price)</code></li> <li>Returns: <code>double</code> - Normalized price</li> <li>Underlying: <code>normalizePrice()</code> - internally calls normalizePrice()</li> </ul>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizePriceDigits/#input","title":"\ud83d\udd3d Input","text":"Parameter Type Required Description <code>symbol</code> <code>String</code> \u2705 Symbol name <code>price</code> <code>double</code> \u2705 Price to normalize"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizePriceDigits/#output","title":"\u2b06\ufe0f Output","text":"<p>Returns: <code>double</code> - Normalized price</p>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizePriceDigits/#usage-example","title":"\ud83d\udd17 Usage Example","text":"<pre><code>double price = sugar.normalizePriceDigits(\"EURUSD\", 1.123456789);\nSystem.out.printf(\"Normalized: %.5f%n\", price); // 1.12346\n</code></pre>"},{"location":"MT5Sugar/9.%20Account_and_position_helpers/normalizePriceDigits/#see-also","title":"See also","text":"<ul> <li>Actual implementation: <code>normalizePrice()</code></li> </ul>"},{"location":"api/","title":"JavaMT5 API Reference","text":"<p>Quick reference for the three main API classes.</p>"},{"location":"api/#files","title":"Files","text":"<ul> <li>MT5Account.md - Layer 1: Low-level proto/gRPC API</li> <li>MT5Service.md - Layer 2: Mid-level wrapper API</li> <li>MT5Sugar.md - Layer 3: High-level convenience API</li> </ul>"},{"location":"api/#architecture-overview","title":"Architecture Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         MT5Sugar (Layer 3)          \u2502  \u2190 Start here (easiest)\n\u2502    High-level convenience API       \u2502\n\u2502  \u2022 Auto-normalization               \u2502\n\u2502  \u2022 Risk management                  \u2502\n\u2502  \u2022 Simple method signatures         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2193 uses\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        MT5Service (Layer 2)         \u2502\n\u2502      Mid-level wrapper API          \u2502\n\u2502  \u2022 Enhanced error handling          \u2502\n\u2502  \u2022 Convenient overloads             \u2502\n\u2502  \u2022 Type conversions                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n              \u2193 uses\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502       MT5Account (Layer 1)          \u2502\n\u2502      Low-level proto/gRPC           \u2502\n\u2502  \u2022 Direct MT5 terminal access       \u2502\n\u2502  \u2022 Maximum control                  \u2502\n\u2502  \u2022 Proto message handling           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"api/#quick-start","title":"Quick Start","text":"<p>Recommended: Start with MT5Sugar for simplest API.</p> <pre><code>// Create connection\nMT5Account account = new MT5Account(user, password);\nMT5Service service = new MT5Service(account);\nMT5Sugar sugar = new MT5Sugar(service);\n\naccount.connectByServerName(\"ServerName\", \"EURUSD\");\n\n// Use MT5Sugar for trading\nlong ticket = sugar.buyMarket(\"EURUSD\", 0.1, null, null);\nsugar.closePosition(ticket);\n\n// Cleanup\naccount.disconnect();\naccount.close();\n</code></pre>"},{"location":"api/#full-documentation","title":"Full Documentation","text":"<p>For complete documentation with examples: - Complete project documentation - MT5Account detailed docs - MT5Sugar detailed docs</p>"},{"location":"api/MT5Account/","title":"MT5Account API Reference","text":"<p>Layer 1 (Low-Level API) - Direct proto/gRPC methods for MetaTrader 5</p> <p>Source: <code>src/main/java/io/metarpc/mt5/MT5Account.java</code></p>"},{"location":"api/MT5Account/#connection-methods","title":"Connection Methods","text":"<ul> <li><code>connect(String host, int port, String baseChartSymbol)</code> - Connect to MT5 terminal</li> <li><code>connectByServerName(String serverName, String baseChartSymbol)</code> - Connect using server name</li> <li><code>disconnect()</code> - Disconnect from MT5 terminal</li> <li><code>close()</code> - Close gRPC channel and free resources</li> </ul>"},{"location":"api/MT5Account/#account-information","title":"Account Information","text":"<ul> <li><code>accountSummary()</code> - Get complete account summary</li> <li><code>accountInfoDouble(ENUM_ACCOUNT_INFO_DOUBLE property)</code> - Get double property</li> <li><code>accountInfoInteger(ENUM_ACCOUNT_INFO_INTEGER property)</code> - Get integer property</li> <li><code>accountInfoString(ENUM_ACCOUNT_INFO_STRING property)</code> - Get string property</li> </ul>"},{"location":"api/MT5Account/#symbol-information","title":"Symbol Information","text":"<ul> <li><code>quote(String symbol)</code> - Get current quote (alias for symbolInfoTick)</li> <li><code>quoteMany(String[] symbols)</code> - Get quotes for multiple symbols</li> <li><code>symbolInfoTick(String symbol)</code> - Get current tick data</li> <li><code>symbolInfoDouble(String symbol, ENUM_SYMBOL_INFO_DOUBLE property)</code> - Get double property</li> <li><code>symbolInfoInteger(String symbol, ENUM_SYMBOL_INFO_INTEGER property)</code> - Get integer property</li> <li><code>symbolInfoString(String symbol, ENUM_SYMBOL_INFO_STRING property)</code> - Get string property</li> <li><code>symbolSelect(String symbol, boolean select)</code> - Enable/disable symbol in Market Watch</li> <li><code>symbolName(int index, boolean selectedOnly)</code> - Get symbol name by index</li> <li><code>symbolsTotal(boolean selectedOnly)</code> - Get total symbols count</li> <li><code>symbolExist(String symbol)</code> - Check if symbol exists</li> <li><code>symbolIsSynchronized(String symbol)</code> - Check if symbol data is synchronized</li> </ul>"},{"location":"api/MT5Account/#market-depth-dom","title":"Market Depth (DOM)","text":"<ul> <li><code>marketBookAdd(String symbol)</code> - Subscribe to market depth</li> <li><code>marketBookGet(String symbol)</code> - Get current market depth data</li> <li><code>marketBookRelease(String symbol)</code> - Unsubscribe from market depth</li> </ul>"},{"location":"api/MT5Account/#positions-orders","title":"Positions &amp; Orders","text":"<ul> <li><code>openedOrders(ENUM_OPENED_ORDER_SORT_TYPE sortType)</code> - Get all open positions and orders</li> <li><code>openedOrdersTickets()</code> - Get only ticket numbers</li> <li><code>positionsTotal()</code> - Get count of open positions</li> <li><code>orderHistory(from, to, sortType, offset, limit)</code> - Get orders history</li> <li><code>positionsHistory(from, to, sortType, offset, limit)</code> - Get positions history</li> </ul>"},{"location":"api/MT5Account/#trading-operations","title":"Trading Operations","text":"<ul> <li><code>orderSend(request)</code> - Place new order (market/pending)</li> <li><code>orderCheck(request)</code> - Check order before placing</li> <li><code>orderModify(request)</code> - Modify existing order/position</li> <li><code>orderClose(request)</code> - Close position</li> <li><code>orderCalcMargin(action, symbol, volume, price)</code> - Calculate required margin</li> <li><code>orderCalcProfit(action, symbol, volume, priceOpen, priceClose)</code> - Calculate profit</li> <li><code>tickValueWithSize(symbol, tickValue, tickSize, volume)</code> - Calculate tick value</li> </ul>"},{"location":"api/MT5Account/#streaming-subscriptions","title":"Streaming Subscriptions","text":"<ul> <li><code>onSymbolTick(symbols[], observer)</code> - Subscribe to tick data stream</li> <li><code>onTrade(observer)</code> - Subscribe to trade events</li> <li><code>onPositionProfit(timerPeriod, ignoreEmpty, observer)</code> - Subscribe to position profit updates</li> <li><code>onPositionsAndPendingOrdersTickets(timerPeriod, observer)</code> - Subscribe to tickets updates</li> <li><code>onTradeTransaction(observer)</code> - Subscribe to trade transactions</li> </ul> <p>Note: All methods throw <code>ApiExceptionMT5</code> on errors. Use try-catch for error handling.</p> <p>For detailed documentation with examples, see MT5Account documentation.</p>"},{"location":"api/MT5Service/","title":"MT5Service API Reference","text":"<p>Layer 2 (Mid-Level API) - Wrapper methods with enhanced error handling and convenience</p> <p>Source: <code>src/main/java/io/metarpc/mt5/MT5Service.java</code></p>"},{"location":"api/MT5Service/#account-information-helpers","title":"Account Information Helpers","text":"<ul> <li><code>getBalance()</code> - Get account balance</li> <li><code>getEquity()</code> - Get account equity</li> <li><code>getMargin()</code> - Get used margin</li> <li><code>getFreeMargin()</code> - Get free margin</li> <li><code>getProfit()</code> - Get current floating profit/loss</li> </ul>"},{"location":"api/MT5Service/#position-order-helpers","title":"Position &amp; Order Helpers","text":"<ul> <li><code>positionsTotal()</code> - Get count of open positions</li> <li><code>openedOrders(sortType)</code> - Get all positions and orders</li> <li><code>openedOrdersTickets()</code> - Get only ticket numbers</li> <li><code>orderHistory(from, to, sortType, offset, limit)</code> - Get orders history</li> <li><code>positionsHistory(from, to, sortType, offset, limit)</code> - Get positions history</li> </ul>"},{"location":"api/MT5Service/#trading-wrappers","title":"Trading Wrappers","text":"<ul> <li><code>orderSend(request)</code> - Place order with enhanced error handling</li> <li><code>orderCheck(request)</code> - Validate order before placing</li> <li><code>orderModify(request)</code> - Modify position/order</li> <li><code>orderClose(request)</code> - Close position</li> <li><code>orderCalcMargin(...)</code> - Calculate margin</li> <li><code>orderCalcProfit(...)</code> - Calculate profit</li> </ul>"},{"location":"api/MT5Service/#symbol-information-wrappers","title":"Symbol Information Wrappers","text":"<ul> <li><code>symbolInfoTick(symbol)</code> - Get current tick</li> <li><code>symbolInfoDouble(symbol, property)</code> - Get double property</li> <li><code>symbolInfoInteger(symbol, property)</code> - Get integer property</li> <li><code>symbolInfoString(symbol, property)</code> - Get string property</li> <li><code>symbolSelect(symbol, select)</code> - Enable/disable symbol</li> <li><code>symbolsTotal(selectedOnly)</code> - Get symbols count</li> </ul>"},{"location":"api/MT5Service/#market-depth-wrappers","title":"Market Depth Wrappers","text":"<ul> <li><code>marketBookAdd(symbol)</code> - Subscribe to DOM</li> <li><code>marketBookGet(symbol)</code> - Get DOM data</li> <li><code>marketBookRelease(symbol)</code> - Unsubscribe from DOM</li> </ul>"},{"location":"api/MT5Service/#streaming-subscriptions","title":"Streaming Subscriptions","text":"<ul> <li><code>onSymbolTick(symbols[], observer)</code> - Subscribe to ticks</li> <li><code>onTrade(observer)</code> - Subscribe to trades</li> <li><code>onPositionProfit(period, ignoreEmpty, observer)</code> - Subscribe to P/L updates</li> <li><code>onPositionsAndPendingOrdersTickets(period, observer)</code> - Subscribe to tickets</li> <li><code>onTradeTransaction(observer)</code> - Subscribe to transactions</li> </ul> <p>Key Differences from MT5Account: - Enhanced error messages - Convenient overloaded methods - Automatic type conversions - Better default parameters</p> <p>Note: MT5Service wraps MT5Account and provides the same functionality with improved usability.</p> <p>For detailed documentation with examples, see MT5Account documentation.</p>"},{"location":"api/MT5Sugar/","title":"MT5Sugar API Reference","text":"<p>Layer 3 (High-Level API) - Convenience methods with auto-normalization and risk management</p> <p>Source: <code>src/main/java/io/metarpc/mt5/MT5Sugar.java</code></p>"},{"location":"api/MT5Sugar/#symbol-helpers-12-methods","title":"Symbol Helpers (12 methods)","text":"<ul> <li><code>ensureSymbolSelected(symbol)</code> - Auto-enable symbol in Market Watch</li> <li><code>getPoint(symbol)</code> - Get point size (e.g., 0.00001)</li> <li><code>getDigits(symbol)</code> - Get decimal places (e.g., 5)</li> <li><code>getSpread(symbol)</code> - Get spread in points</li> <li><code>getSpreadPrice(symbol)</code> - Get spread in price units</li> <li><code>getBid(symbol)</code> - Get current Bid price</li> <li><code>getAsk(symbol)</code> - Get current Ask price</li> <li><code>normalizePrice(symbol, price)</code> - Round to symbol digits</li> <li><code>normalizeVolume(symbol, volume)</code> - Normalize to min/max/step</li> <li><code>pointsToPrice(symbol, points, isBuy)</code> - Convert points to price</li> <li><code>pointsToPips(symbol, points)</code> - Convert points to pips</li> <li><code>priceFromOffsetPoints(symbol, isBuy, points)</code> - Calculate offset price</li> </ul>"},{"location":"api/MT5Sugar/#market-orders-2-methods","title":"Market Orders (2 methods)","text":"<ul> <li><code>buyMarket(symbol, volume, stopLoss, takeProfit)</code> - BUY at current Ask</li> <li><code>sellMarket(symbol, volume, stopLoss, takeProfit)</code> - SELL at current Bid</li> </ul>"},{"location":"api/MT5Sugar/#pending-orders-4-methods","title":"Pending Orders (4 methods)","text":"<ul> <li><code>buyLimit(symbol, volume, price, SL, TP)</code> - BUY LIMIT (below price)</li> <li><code>sellLimit(symbol, volume, price, SL, TP)</code> - SELL LIMIT (above price)</li> <li><code>buyStop(symbol, volume, price, SL, TP)</code> - BUY STOP (breakout up)</li> <li><code>sellStop(symbol, volume, price, SL, TP)</code> - SELL STOP (breakdown)</li> </ul>"},{"location":"api/MT5Sugar/#pending-orders-with-points-4-methods","title":"Pending Orders with Points (4 methods)","text":"<ul> <li><code>buyLimitPoints(symbol, volume, offset, slPoints, tpPoints)</code> - BUY LIMIT via offset</li> <li><code>sellLimitPoints(symbol, volume, offset, slPoints, tpPoints)</code> - SELL LIMIT via offset</li> <li><code>buyStopPoints(symbol, volume, offset, slPoints, tpPoints)</code> - BUY STOP via offset</li> <li><code>sellStopPoints(symbol, volume, offset, slPoints, tpPoints)</code> - SELL STOP via offset</li> </ul>"},{"location":"api/MT5Sugar/#position-management-5-methods","title":"Position Management (5 methods)","text":"<ul> <li><code>modifyPosition(ticket, stopLoss, takeProfit)</code> - Change SL/TP</li> <li><code>closePosition(ticket)</code> - Close position (full)</li> <li><code>closePosition(ticket, volume)</code> - Close position (partial)</li> <li><code>closeAll(symbol)</code> - Close all positions for symbol</li> <li><code>closeAllBuy(symbol)</code> - Close all BUY positions</li> <li><code>closeAllSell(symbol)</code> - Close all SELL positions</li> </ul>"},{"location":"api/MT5Sugar/#advanced-batch-operations-3-methods","title":"Advanced Batch Operations (3 methods)","text":"<ul> <li><code>closeAllPositions(symbol, isBuy)</code> - Close only positions</li> <li><code>closeAllPending(symbol, isBuy)</code> - Cancel only pending orders</li> <li><code>cancelAll(symbol, isBuy)</code> - Alias for closeAllPending</li> </ul>"},{"location":"api/MT5Sugar/#risk-management-3-methods","title":"Risk Management (3 methods)","text":"<ul> <li><code>calculateVolume(symbol, slPoints, riskAmount)</code> - Calculate lot size from $ risk</li> <li><code>buyByRisk(symbol, slPoints, risk, tpPoints)</code> - BUY with auto-calculated volume</li> <li><code>sellByRisk(symbol, slPoints, risk, tpPoints)</code> - SELL with auto-calculated volume</li> </ul>"},{"location":"api/MT5Sugar/#advanced-helpers-4-methods","title":"Advanced Helpers (4 methods)","text":"<ul> <li><code>getVolumeLimits(symbol)</code> - Get [min, max, step] array</li> <li><code>getTickValueAndSize(symbol)</code> - Get [tickValue, tickSize] array</li> </ul>"},{"location":"api/MT5Sugar/#account-position-helpers-10-methods","title":"Account &amp; Position Helpers (10 methods)","text":"<ul> <li><code>getBalance()</code> - Account balance</li> <li><code>getEquity()</code> - Account equity</li> <li><code>getMargin()</code> - Used margin</li> <li><code>getFreeMargin()</code> - Free margin</li> <li><code>getProfit()</code> - Floating P/L</li> <li><code>hasOpenPositions()</code> - Check if any positions open</li> <li><code>getPositionCount()</code> - Count of open positions</li> <li><code>normalizePriceDigits(symbol, price)</code> - Alias for normalizePrice</li> <li><code>normalizeLots(symbol, lots)</code> - Alias for normalizeVolume</li> <li><code>createTimestamp(seconds)</code> - Create protobuf timestamp</li> </ul>"},{"location":"api/MT5Sugar/#snapshot-helpers-2-methods-2-classes","title":"Snapshot Helpers (2 methods + 2 classes)","text":"<ul> <li><code>getAccountSnapshot()</code> - Full account state \u2192 <code>AccountSnapshot</code></li> <li><code>getSymbolSnapshot(symbol)</code> - Full symbol info \u2192 <code>SymbolSnapshot</code></li> </ul>"},{"location":"api/MT5Sugar/#history-helpers-2-methods","title":"History Helpers (2 methods)","text":"<ul> <li><code>getOrdersHistoryLastDays(days, symbol)</code> - Orders history for N days</li> <li><code>getPositionsHistoryPaged(page, itemsPerPage)</code> - Paginated positions history</li> </ul> <p>Key Features: - \u2705 Auto-normalization (volumes, prices) - \u2705 Auto symbol selection - \u2705 Built-in risk management - \u2705 Simplified parameter handling - \u2705 Batch operations</p> <p>When to use: Production trading bots, quick prototypes, beginners.</p> <p>For detailed documentation with examples, see MT5Sugar documentation.</p>"},{"location":"javadoc/legal/dejavufonts/","title":"Dejavufonts","text":""},{"location":"javadoc/legal/dejavufonts/#dejavu-fonts-v237","title":"DejaVu fonts v2.37","text":""},{"location":"javadoc/legal/dejavufonts/#dejavu-license","title":"DejaVu License","text":"<pre>\nFonts are (c) Bitstream (see below). DejaVu changes are in public domain.\nGlyphs imported from Arev fonts are (c) Tavmjong Bah (see below)\n\n\nBitstream Vera Fonts Copyright\n------------------------------\n\nCopyright (c) 2003 by Bitstream, Inc. All Rights Reserved. Bitstream Vera is\na trademark of Bitstream, Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof the fonts accompanying this license (\"Fonts\") and associated\ndocumentation files (the \"Font Software\"), to reproduce and distribute the\nFont Software, including without limitation the rights to use, copy, merge,\npublish, distribute, and/or sell copies of the Font Software, and to permit\npersons to whom the Font Software is furnished to do so, subject to the\nfollowing conditions:\n\nThe above copyright and trademark notices and this permission notice shall\nbe included in all copies of one or more of the Font Software typefaces.\n\nThe Font Software may be modified, altered, or added to, and in particular\nthe designs of glyphs or characters in the Fonts may be modified and\nadditional glyphs or characters may be added to the Fonts, only if the fonts\nare renamed to names not containing either the words \"Bitstream\" or the word\n\"Vera\".\n\nThis License becomes null and void to the extent applicable to Fonts or Font\nSoftware that has been modified and is distributed under the \"Bitstream\nVera\" names.\n\nThe Font Software may be sold as part of a larger software package but no\ncopy of one or more of the Font Software typefaces may be sold by itself.\n\nTHE FONT SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT,\nTRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL BITSTREAM OR THE GNOME\nFOUNDATION BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING\nANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF\nTHE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE\nFONT SOFTWARE.\n\nExcept as contained in this notice, the names of Gnome, the Gnome\nFoundation, and Bitstream Inc., shall not be used in advertising or\notherwise to promote the sale, use or other dealings in this Font Software\nwithout prior written authorization from the Gnome Foundation or Bitstream\nInc., respectively. For further information, contact: fonts at gnome dot\norg.\n\nArev Fonts Copyright\n------------------------------\n\nCopyright (c) 2006 by Tavmjong Bah. All Rights Reserved.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of the fonts accompanying this license (\"Fonts\") and\nassociated documentation files (the \"Font Software\"), to reproduce\nand distribute the modifications to the Bitstream Vera Font Software,\nincluding without limitation the rights to use, copy, merge, publish,\ndistribute, and/or sell copies of the Font Software, and to permit\npersons to whom the Font Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright and trademark notices and this permission notice\nshall be included in all copies of one or more of the Font Software\ntypefaces.\n\nThe Font Software may be modified, altered, or added to, and in\nparticular the designs of glyphs or characters in the Fonts may be\nmodified and additional glyphs or characters may be added to the\nFonts, only if the fonts are renamed to names not containing either\nthe words \"Tavmjong Bah\" or the word \"Arev\".\n\nThis License becomes null and void to the extent applicable to Fonts\nor Font Software that has been modified and is distributed under the\n\"Tavmjong Bah Arev\" names.\n\nThe Font Software may be sold as part of a larger software package but\nno copy of one or more of the Font Software typefaces may be sold by\nitself.\n\nTHE FONT SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT\nOF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL\nTAVMJONG BAH BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nINCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\nDAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\nOTHER DEALINGS IN THE FONT SOFTWARE.\n\nExcept as contained in this notice, the name of Tavmjong Bah shall not\nbe used in advertising or otherwise to promote the sale, use or other\ndealings in this Font Software without prior written authorization\nfrom Tavmjong Bah. For further information, contact: tavmjong @ free\n. fr.\n\nTeX Gyre DJV Math\n-----------------\nFonts are (c) Bitstream (see below). DejaVu changes are in public domain.\n\nMath extensions done by B. Jackowski, P. Strzelczyk and P. Pianowski\n(on behalf of TeX users groups) are in public domain.\n\nLetters imported from Euler Fraktur from AMSfonts are (c) American\nMathematical Society (see below).\nBitstream Vera Fonts Copyright\nCopyright (c) 2003 by Bitstream, Inc. All Rights Reserved. Bitstream Vera\nis a trademark of Bitstream, Inc.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof the fonts accompanying this license (\"Fonts\") and associated\ndocumentation\nfiles (the \"Font Software\"), to reproduce and distribute the Font Software,\nincluding without limitation the rights to use, copy, merge, publish,\ndistribute,\nand/or sell copies of the Font Software, and to permit persons  to whom\nthe Font Software is furnished to do so, subject to the following\nconditions:\n\nThe above copyright and trademark notices and this permission notice\nshall be\nincluded in all copies of one or more of the Font Software typefaces.\n\nThe Font Software may be modified, altered, or added to, and in particular\nthe designs of glyphs or characters in the Fonts may be modified and\nadditional\nglyphs or characters may be added to the Fonts, only if the fonts are\nrenamed\nto names not containing either the words \"Bitstream\" or the word \"Vera\".\n\nThis License becomes null and void to the extent applicable to Fonts or\nFont Software\nthat has been modified and is distributed under the \"Bitstream Vera\"\nnames.\n\nThe Font Software may be sold as part of a larger software package but\nno copy\nof one or more of the Font Software typefaces may be sold by itself.\n\nTHE FONT SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT,\nTRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL BITSTREAM OR THE GNOME\nFOUNDATION\nBE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL,\nSPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN\nACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR\nINABILITY TO USE\nTHE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.\nExcept as contained in this notice, the names of GNOME, the GNOME\nFoundation,\nand Bitstream Inc., shall not be used in advertising or otherwise to promote\nthe sale, use or other dealings in this Font Software without prior written\nauthorization from the GNOME Foundation or Bitstream Inc., respectively.\nFor further information, contact: fonts at gnome dot org.\n\nAMSFonts (v. 2.2) copyright\n\nThe PostScript Type 1 implementation of the AMSFonts produced by and\npreviously distributed by Blue Sky Research and Y&amp;Y, Inc. are now freely\navailable for general use. This has been accomplished through the\ncooperation\nof a consortium of scientific publishers with Blue Sky Research and Y&amp;Y.\nMembers of this consortium include:\n\nElsevier Science IBM Corporation Society for Industrial and Applied\nMathematics (SIAM) Springer-Verlag American Mathematical Society (AMS)\n\nIn order to assure the authenticity of these fonts, copyright will be\nheld by\nthe American Mathematical Society. This is not meant to restrict in any way\nthe legitimate use of the fonts, such as (but not limited to) electronic\ndistribution of documents containing these fonts, inclusion of these fonts\ninto other public domain or commercial font collections or computer\napplications, use of the outline data to create derivative fonts and/or\nfaces, etc. However, the AMS does require that the AMS copyright notice be\nremoved from any derivative versions of the fonts which have been altered in\nany way. In addition, to ensure the fidelity of TeX documents using Computer\nModern fonts, Professor Donald Knuth, creator of the Computer Modern faces,\nhas requested that any alterations which yield different font metrics be\ngiven a different name.\n\n</pre>"},{"location":"javadoc/legal/jquery/","title":"Jquery","text":""},{"location":"javadoc/legal/jquery/#jquery-v371","title":"jQuery v3.7.1","text":""},{"location":"javadoc/legal/jquery/#jquery-license","title":"jQuery License","text":"<pre><code>jQuery v 3.7.1\nCopyright OpenJS Foundation and other contributors, https://openjsf.org/\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n</code></pre>"},{"location":"javadoc/legal/jqueryUI/","title":"jqueryUI","text":""},{"location":"javadoc/legal/jqueryUI/#jquery-ui-v1141","title":"jQuery UI v1.14.1","text":""},{"location":"javadoc/legal/jqueryUI/#jquery-ui-license","title":"jQuery UI License","text":"<pre><code>Copyright OpenJS Foundation and other contributors, https://openjsf.org/\n\nThis software consists of voluntary contributions made by many\nindividuals. For exact contribution history, see the revision history\navailable at https://github.com/jquery/jquery-ui\n\nThe following license applies to all parts of this software except as\ndocumented below:\n\n====\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n====\n\nCopyright and related rights for sample code are waived via CC0. Sample\ncode is defined as all source code contained within the demos directory.\n\nCC0: http://creativecommons.org/publicdomain/zero/1.0/\n\n====\n\nAll files located in the node_modules and external directories are\nexternally maintained libraries used by this software which have their\nown licenses; we recommend you read them, as their terms may differ from\nthe terms above.\n</code></pre>"}]}