syntax = "proto3";
option csharp_namespace = "mt5_term_api";
import "google/api/annotations.proto";
import "mt5/mrpc-mt5-error.proto";

package mt5_term_api;
option go_package = "git.mtapi.io/root/mrpc-proto.git/mt5/libraries/go";

service Charts {
  rpc OpenTerminalChartWithEa (OpenTerminalChartWithEaRequest) returns (OpenTerminalChartWithEaReply) {
    option (google.api.http) = {
      get: "/OpenTerminalChartWithEa"
    };
  }
  rpc GetEaParams (GetEaParamsRequest) returns (GetEaParamsReply) {
    option (google.api.http) = {
      get: "/GetEaParams"
    };
  }
}
message GetEaParamsRequest {
  string ea_file_name = 1;
}
message GetEaParamsReply {
  oneof response {
      GetEaParamsData data = 1;
      Error error = 2;
  }
}
message GetEaParamsData {
  string ea_name = 1;
  bool ea_found = 2;
  bool ea_has_params = 3;
  repeated EaParam parameters = 4;
}
message EaParam {
    string name = 1;
    EA_PARAM_TYPE type = 2;
}
enum EA_PARAM_TYPE {
  EA_PARAM_TYPE_UNDEFINED = 0;
  EA_PARAM_TYPE_STRING = 1;
  EA_PARAM_TYPE_INTEGER = 2;
  EA_PARAM_TYPE_DOUBLE = 3;
  EA_PARAM_TYPE_BOOLEAN = 4;
}


message OpenTerminalChartWithEaRequest {
  string symbol_name = 1;
  string ea_file_name = 2;
  EnumOpenTerminalChartWithEaChatPeriod chart_period = 3;
  repeated OpenTerminalChartWithEaParameter ea_parameters = 4;
}
message OpenTerminalChartWithEaParameter {
  int32 index = 1;
  EnumOpenTerminalChartWithEaParameterType type = 2;
  optional int32 int_param_value = 3;
  optional int64 long_param_value = 4;
  optional bool bool_param_value = 5;
  optional string string_param_value = 6;
  optional double double_param_value = 7;
}
enum EnumOpenTerminalChartWithEaParameterType {
  MRPC_EA_PARAM_INT = 0;
  MRPC_EA_PARAM_LONG = 1;
  MRPC_EA_PARAM_BOOL = 2;
  MRPC_EA_PARAM_STRING = 3;
  MRPC_EA_PARAM_DOUBLE = 4;
}
message OpenTerminalChartWithEaReply {
  oneof response {
      OpenTerminalChartWithEaData data = 1;
      Error error = 2;
  }
}
message OpenTerminalChartWithEaData {
  int64 chart_id = 1;
}
enum EnumOpenTerminalChartWithEaChatPeriod {
  MRPC_EA_CHART_PERIOD_CURRENT = 0;
  MRPC_EA_CHART_PERIOD_M1 = 1;
  MRPC_EA_CHART_PERIOD_M2 = 2;
  MRPC_EA_CHART_PERIOD_M3 = 3;
  MRPC_EA_CHART_PERIOD_M4 = 4;
  MRPC_EA_CHART_PERIOD_M5 = 5;
  MRPC_EA_CHART_PERIOD_M6 = 6;
  MRPC_EA_CHART_PERIOD_M10 = 7;
  MRPC_EA_CHART_PERIOD_M12 = 8;
  MRPC_EA_CHART_PERIOD_M15 = 9;
  MRPC_EA_CHART_PERIOD_M20 = 10;
  MRPC_EA_CHART_PERIOD_M30 = 11;
  MRPC_EA_CHART_PERIOD_H1 = 12;
  MRPC_EA_CHART_PERIOD_H2 = 13;
  MRPC_EA_CHART_PERIOD_H3 = 14;
  MRPC_EA_CHART_PERIOD_H4 = 15;
  MRPC_EA_CHART_PERIOD_H6 = 16;
  MRPC_EA_CHART_PERIOD_H8 = 17;
  MRPC_EA_CHART_PERIOD_H12 = 18;
  MRPC_EA_CHART_PERIOD_D1 = 19;
  MRPC_EA_CHART_PERIOD_W1 = 20;
  MRPC_EA_CHART_PERIOD_MN1 = 21;
}