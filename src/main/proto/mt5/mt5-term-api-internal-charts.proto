syntax = "proto3";
option csharp_namespace = "mt5_term_api";
package mt5_term_api;
option go_package = "git.mtapi.io/root/mrpc-proto.git/mt5/libraries/go";

service InternalCharts {
  rpc OpenChartForSymbol(OpenChartForSymbolRequest) returns (OpenChartForSymbolReply);
  rpc CloseChartForSymbol(CloseChartForSymbolRequest) returns (CloseChartForSymbolReply);
  rpc OpenChartWithEa (OpenChartWithEaRequest) returns (OpenChartWithEaReply);
  rpc SaveChartTemplate (SaveChartTemplateRequest) returns (SaveChartTemplateReply);
}
message SaveChartTemplateRequest {
  int64 chart_id = 1;
}
message SaveChartTemplateReply {
  string file_name = 1;
}

message OpenChartWithEaRequest {
  string symbol_name = 1;
  string ea_file_name = 2;
  EnumOpenChartWithEaChatPeriod chart_period = 3;
  repeated OpenChartWithEaParameter ea_parameters = 4;
}
message OpenChartWithEaParameter {
  int32 index = 1;
  EnumOpenChartWithEaParemeterType type = 2;
  optional int32 int_param_value = 3;
  optional int64 long_param_value = 4;
  optional bool bool_param_value = 5;
  optional string string_param_value = 6;
  optional double double_param_value = 7;
}
enum EnumOpenChartWithEaParemeterType {
  EA_PARAM_INT = 0;
  EA_PARAM_LONG = 1;
  EA_PARAM_BOOL = 2;
  EA_PARAM_STRING = 3;
  EA_PARAM_DOUBLE = 4;
}
message OpenChartWithEaReply {
  int64 chart_id = 1;
}
enum EnumOpenChartWithEaChatPeriod {
  EA_CHART_PERIOD_CURRENT = 0;
  EA_CHART_PERIOD_M1 = 1;
  EA_CHART_PERIOD_M2 = 2;
  EA_CHART_PERIOD_M3 = 3;
  EA_CHART_PERIOD_M4 = 4;
  EA_CHART_PERIOD_M5 = 5;
  EA_CHART_PERIOD_M6 = 6;
  EA_CHART_PERIOD_M10 = 7;
  EA_CHART_PERIOD_M12 = 8;
  EA_CHART_PERIOD_M15 = 9;
  EA_CHART_PERIOD_M20 = 10;
  EA_CHART_PERIOD_M30 = 11;
  EA_CHART_PERIOD_H1 = 12;
  EA_CHART_PERIOD_H2 = 13;
  EA_CHART_PERIOD_H3 = 14;
  EA_CHART_PERIOD_H4 = 15;
  EA_CHART_PERIOD_H6 = 16;
  EA_CHART_PERIOD_H8 = 17;
  EA_CHART_PERIOD_H12 = 18;
  EA_CHART_PERIOD_D1 = 19;
  EA_CHART_PERIOD_W1 = 20;
  EA_CHART_PERIOD_MN1 = 21;
}

message OpenChartForSymbolRequest {
  string symbol_name = 1;
  ChartExpertMode expert_mode = 2;
  optional int32 timer_period = 3;
  optional bool ignore_empty_data = 4;
}
enum ChartExpertMode {
  ON_TICK = 0;
  ON_TRADE = 1;
  ON_ORDER_PROFIT = 2;
  ON_OPENED_ORDERS_TICKETS = 3;
  ON_TRADE_TRANSACTION = 4;
}
message OpenChartForSymbolReply {
  int64 mql_chart_id = 1;
}

message CloseChartForSymbolRequest {
  int64 mql_chart_id = 1;
}
message CloseChartForSymbolReply {
}