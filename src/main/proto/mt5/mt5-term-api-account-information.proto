syntax = "proto3";
option csharp_namespace = "mt5_term_api";
import "google/api/annotations.proto";
import "mt5/mrpc-mt5-error.proto";

package mt5_term_api;
option go_package = "git.mtapi.io/root/mrpc-proto.git/mt5/libraries/go";

service AccountInformation {
  // Returns the double value of the corresponding account property
  // https://www.mql5.com/en/docs/account/accountinfodouble
  rpc AccountInfoDouble(AccountInfoDoubleRequest) returns (AccountInfoDoubleReply)
  {
    option (google.api.http) = {
      get: "/AccountInfoDouble"
    };
  }
  // Returns the value of the properties of the account
  // https://www.mql5.com/en/docs/account/accountinfointeger
  rpc AccountInfoInteger(AccountInfoIntegerRequest) returns (AccountInfoIntegerReply)
  {
    option (google.api.http) = {
      get: "/AccountInfoInteger"
    };
  }

  // Returns the value of the appropriate account property
  // https://www.mql5.com/en/docs/account/accountinfostring
  rpc AccountInfoString (AccountInfoStringRequest) returns (AccountInfoStringReply)
  {
    option (google.api.http) = {
      get: "/AccountInfoString"
    };
  }      
}

message AccountInfoDoubleRequest {
  AccountInfoDoublePropertyType property_id = 1;
}

message AccountInfoDoubleReply {
  oneof response {
    AccountInfoDoubleData data = 1;
    Error error = 2;
  }
}
message AccountInfoDoubleData {
  double requested_value = 1;
}

enum AccountInfoDoublePropertyType {
  ACCOUNT_BALANCE = 0; // Account balance in the deposit currency
  ACCOUNT_CREDIT = 1; // Account credit in the deposit currency
  ACCOUNT_PROFIT = 2; // Current profit of an account in the deposit currency
  ACCOUNT_EQUITY = 3; // Account equity in the deposit currency
  ACCOUNT_MARGIN = 4; // Account margin used in the deposit currency
  ACCOUNT_MARGIN_FREE = 5; // Free margin of an account in the deposit currency
  ACCOUNT_MARGIN_LEVEL = 6; // Account margin level in percents
  ACCOUNT_MARGIN_SO_CALL = 7; // Margin call level. Depending on the set ACCOUNT_MARGIN_SO_MODE is expressed in percents or in the deposit currency
  ACCOUNT_MARGIN_SO_SO = 8; // Margin stop out level. Depending on the set ACCOUNT_MARGIN_SO_MODE is expressed in percents or in the deposit currency
  ACCOUNT_MARGIN_INITIAL = 9; // Initial margin. The amount reserved on an account to cover the margin of all pending orders
  ACCOUNT_MARGIN_MAINTENANCE = 10; // Maintenance margin. The minimum equity reserved on an account to cover the minimum amount of all open positions
  ACCOUNT_ASSETS = 11; // The current assets of an account
  ACCOUNT_LIABILITIES = 12; // The current liabilities on an account
  ACCOUNT_COMMISSION_BLOCKED = 13; // The current blocked commission amount on an account
}

message AccountInfoIntegerRequest {
  AccountInfoIntegerPropertyType property_id = 1;
}

enum AccountInfoIntegerPropertyType {
  ACCOUNT_LOGIN = 0; // Account number - returned type long 
  ACCOUNT_TRADE_MODE = 1; // Account trade mode - returned type ENUM_ACCOUNT_TRADE_MODE
  ACCOUNT_LEVERAGE = 2; // Account leverage - long
  ACCOUNT_LIMIT_ORDERS = 3; // Maximum allowed number of open positions and active pending orders (in total), 0  unlimited - returned type int 	
  ACCOUNT_MARGIN_SO_MODE = 4; // Mode for setting the minimal allowed margin - returned type ENUM_ACCOUNT_STOP_OUT_MODE
  ACCOUNT_TRADE_ALLOWED = 5; // Allowed trade for the current account - returned type bool (1 or 0)
  ACCOUNT_TRADE_EXPERT = 6; // Allowed trade for an Expert Advisor - return type bool (1 or 0)
  ACCOUNT_MARGIN_MODE = 7; // Margin calculation mode - return type ENUM_ACCOUNT_MARGIN_MODE
  ACCOUNT_CURRENCY_DIGITS = 8; // The number of decimal places in the account currency, which are required for an accurate display of trading results - returned type int
  ACCOUNT_FIFO_CLOSE = 9; // An indication showing that positions can only be closed by FIFO rule. If the property value is set to true, then each symbol positions will be closed in the same order, in which they are opened, starting with the oldest one. In case of an attempt to close positions in a different order, the trader will receive an appropriate error.  - return type bool (1 or 0)
  ACCOUNT_HEDGE_ALLOWED = 10; // Allowed opposite positions on a single symbol - return type bool (1 or 0)
}

message AccountInfoIntegerReply {
  oneof response {
    AccountInfoIntegerData data = 1;
    Error error = 2;
  }
}
message AccountInfoIntegerData {
  int64 requested_value = 1;
}

message AccountInfoStringRequest {
  AccountInfoStringPropertyType property_id = 1;
}

enum AccountInfoStringPropertyType {
  ACCOUNT_NAME = 0; // Client name
  ACCOUNT_SERVER = 1; // Trade server name
  ACCOUNT_CURRENCY = 2; // Account currency
  ACCOUNT_COMPANY = 3;  // Name of a company that serves the account
}

message AccountInfoStringReply {
  oneof response {
    AccountInfoStringData data = 1;
    Error error = 2;
  }
}
message AccountInfoStringData {
  string requested_value = 1;
}